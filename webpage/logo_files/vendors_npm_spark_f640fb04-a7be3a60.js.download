(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[51],{"1vuF":function(t,e,o){var r,n,i,a,s,l=e,u=o("oAGj"),c=o("c9Jm"),h=o("yGNn"),m=o("sTUO"),f=o("MYNe");l.LayerTest=(r=function(){this.actionSequence_LayerTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,c.ActionTestBase.call(this)},u.defineClass({name:"LayerTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;return this.testDoc_=o,!!(r=this.getLayerItem())&&(this.initialLayerItem_=r,f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(t,e,o){var r=this;this.initialFormaIndex_=f.LayerFacade.getZOrder(this.initialLayerItem_);var n=f.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+n-1;return this.initialFormaIndex_<i?this.finalFormaIndex_=this.initialFormaIndex_+1:this.initialFormaIndex_>n?this.finalFormaIndex_=this.initialFormaIndex_-1:XCTFail("Not enough items to change zorder"),h.CorePromise.resolve([function(){return new m.ChangeZOrderAction(r.finalFormaIndex_)}])},setUpActionSequence:function(t,e,o){o.controller.selection.replaceSelection(this.initialLayerItem_)},validateAfterActionSequence:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var t=null,e=u.clone(this.allSelectableFormae(this.testDoc_,(function(t){return 1==t.controller.floating})));return e.length>0&&(t=u.first(e)),t}}}),r),l.SendForwardTest=(n=function(){this.actionSequence_SendForwardTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,c.ActionTestBase.call(this)},u.defineClass({name:"SendForwardTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;return this.testDoc_=o,!!(r=this.getLayerItem())&&(this.initialLayerItem_=r,f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(t,e,o){var r=this;this.initialFormaIndex_=f.LayerFacade.getZOrder(this.initialLayerItem_);var n=f.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+n-1;this.initialFormaIndex_>i||this.initialFormaIndex_<n?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==i?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_>=n&&(this.finalFormaIndex_=this.initialFormaIndex_+1);var a=f.ZOrderEnum.Forward;return h.CorePromise.resolve([function(){return new m.SendForwardBackwardAction(a,[r.initialLayerItem_])}])},validateAfterActionSequence:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var t=null,e=u.clone(this.allSelectableFormae(this.testDoc_,(function(t){return 1==t.controller.floating})));return e.length>0&&(t=u.first(e)),t}}}),n),l.SendBackwardTest=(i=function(){this.actionSequence_SendBackwardTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,c.ActionTestBase.call(this)},u.defineClass({name:"SendBackwardTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;return this.testDoc_=o,!!(r=this.getLayerItem())&&(this.initialLayerItem_=r,f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(t,e,o){var r=this;this.initialFormaIndex_=f.LayerFacade.getZOrder(this.initialLayerItem_);var n=f.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+n-1;this.initialFormaIndex_>i||this.initialFormaIndex_<n?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==n?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_<=i&&(this.finalFormaIndex_=this.initialFormaIndex_-1);var a=f.ZOrderEnum.Backward;return h.CorePromise.resolve([function(){return new m.SendForwardBackwardAction(a,[r.initialLayerItem_])}])},validateAfterActionSequence:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var t=null,e=u.clone(this.allSelectableFormae(this.testDoc_,(function(t){return 1==t.controller.floating})));return e.length>0&&(t=u.first(e)),t}}}),i),l.SendToFrontTest=(a=function(){this.actionSequence_SendToFrontTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,c.ActionTestBase.call(this)},u.defineClass({name:"SendToFrontTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;return this.testDoc_=o,!!(r=this.getLayerItem())&&(this.initialLayerItem_=r,f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(t,e,o){var r=this;this.initialFormaIndex_=f.LayerFacade.getZOrder(this.initialLayerItem_);var n=f.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+n-1;this.initialFormaIndex_>i||this.initialFormaIndex_<n?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==i?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_>=n&&(this.finalFormaIndex_=i);var a=f.ZOrderEnum.Front;return h.CorePromise.resolve([function(){return new m.SendForwardBackwardAction(a,[r.initialLayerItem_])}])},validateAfterActionSequence:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var t=null,e=u.clone(this.allSelectableFormae(this.testDoc_,(function(t){return 1==t.controller.floating})));return e.length>0&&(t=u.first(e)),t}}}),a),l.SendToBackTest=(s=function(){this.actionSequence_SendToBackTest=[],this.testDoc_=null,this.initialFormaIndex_=0,this.finalFormaIndex_=0,c.ActionTestBase.call(this)},u.defineClass({name:"SendToBackTest",ctor:s,superName:"ActionTestBase",props:{tearDown:function(){this.initialLayerItem_=null,c.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;return this.testDoc_=o,!!(r=this.getLayerItem())&&(this.initialLayerItem_=r,f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)>1)},populateActionSequence:function(t,e,o){var r=this;this.initialFormaIndex_=f.LayerFacade.getZOrder(this.initialLayerItem_);var n=f.LayerFacade.getMinLayerIndex(this.initialLayerItem_),i=f.LayerFacade.getReorderableLayerCount(this.initialLayerItem_)+n-1;this.initialFormaIndex_>i||this.initialFormaIndex_<n?XCTFail("Selected forma index is out-of-bounds for z-order index. Cannot change z-order."):this.initialFormaIndex_==n?this.finalFormaIndex_=this.initialFormaIndex_:this.initialFormaIndex_<=i&&(this.finalFormaIndex_=n);var a=f.ZOrderEnum.Back;return h.CorePromise.resolve([function(){return new m.SendForwardBackwardAction(a,[r.initialLayerItem_])}])},validateAfterActionSequence:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},validateAfterUndo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.initialFormaIndex_)},validateAfterRedo:function(t,e){var o=f.LayerFacade.getZOrder(this.initialLayerItem_);XCTAssertTrue(o==this.finalFormaIndex_)},getLayerItem:function(){var t=null,e=u.clone(this.allSelectableFormae(this.testDoc_,(function(t){return 1==t.controller.floating})));return e.length>0&&(t=u.first(e)),t}}}),s)},"2eFH":function(t,e,o){var r,n=e,i=o("oAGj"),a=o("c9Jm"),s=o("yGNn"),l=o("FNB+"),u=o("cEBg");n.RecordCreateFromRemixTest=(r=function(){this.actionSequence_RecordRemix=[],this.testDoc_=null,this.wasRemixed_=!1,a.ActionTestBase.call(this)},i.defineClass({name:"RecordCreateFromRemixTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){var r;this.testDoc_=o,this.wasRemixed_=!1;for(var n=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!n.done;n.next())"true"==((r=n.value.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=r?r:"false")&&(this.wasRemixed_=!0)},populateActionSequence:function(t,e,o){var r=this;return s.CorePromise.resolve([function(){return new u.RecordCreateFromRemixAction(r.testDoc_.firstPage)}])},validateAfterActionSequence:function(t,e){var o;XCTAssertNotNil(this.testDoc_);for(var r=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!r.done;r.next()){var n=r.value;XCTAssertTrue("true"==((o=n.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}},validateAfterUndo:function(t,e){var o;if(!this.wasRemixed_)for(var r=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!r.done;r.next()){var n=r.value;XCTAssertFalse("true"==((o=n.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}},validateAfterRedo:function(t,e){for(var o,r=i.iter(this.testDoc_.firstPage.root.visitAsArray(l.FormaTraversal.PreOrder));!r.done;r.next()){var n=r.value;XCTAssertTrue("true"==((o=n.getTag(l.Forma.TAG_CREATED_FROM_REMIX))||null!=o?o:"false"))}}}}),r)},"4zuo":function(t,e,o){var r,n=e,i=o("oAGj"),a=o("c9Jm"),s=o("pnSN"),l=o("434x"),u=o("8t9B"),c=o("oKlP"),h=o("sIWg");n.NudgeTest=(r=function(){this.actionSequence_NudgeUpRight=[function(){return new l.NudgeAction(new c.TheoPoint(10,0),null)},function(){return new l.NudgeAction(new c.TheoPoint(0,-10),null)}],this.formaToNudge_=null,this.initialBounds_=h.TheoRect.Zero,this.postNudgeBounds_=h.TheoRect.Zero,a.ActionTestBase.call(this)},i.defineClass({name:"NudgeTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.formaToNudge_=null,a.ActionTestBase.prototype.tearDown.call(this)},setUpActionSequence:function(t,e,o){this.formaToNudge_=i.last(this.allSelectableFormae(o,(function(t){return t instanceof s.GroupForma&&t.controller.kind==u.TypeLockupController.KIND}))),XCTAssertNotNil(this.formaToNudge_),null!=this.formaToNudge_&&(o.controller.selection.replaceSelection(this.formaToNudge_),this.initialBounds_=this.formaToNudge_.finalFrame)},validateAfterActionSequence:function(t,e){this.postNudgeBounds_=this.formaToNudge_.finalFrame,XCTAssertFalse(this.postNudgeBounds_.equal(this.initialBounds_))},validateAfterUndo:function(t,e){var o=this.formaToNudge_.finalFrame;XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(t,e){var o=this.formaToNudge_.finalFrame;XCTAssertTrue(o.equal(this.postNudgeBounds_))}}}),r)},Jgdj:function(t,e,o){var r,n,i,a,s=e,l=o("oAGj"),u=o("c9Jm"),c=o("yGNn"),h=o("lqhW"),m=o("ylxa"),f=o("cEBg"),d=o("1NAc");s.PageSizeLetterTest=(r=function(){this.actionSequence_PageSizeLetter=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=m.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=m.PageExportFormat.PIXELS,u.ActionTestBase.call(this)},l.defineClass({name:"PageSizeLetterTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){var r,n,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(r=l.opt(this.testPage_,(function(t){return t.sizeID})))||null!=r?r:"",this.initialPageSizePPI_=(n=l.opt(this.testPage_,(function(t){return t.customSizePPI})))||null!=n?n:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(t){return t.customSizeFormat})))||null!=i?i:m.PageExportFormat.PIXELS},populateActionSequence:function(t,e,o){var r=this,n=h.DesignSizeLibrary.getById("Letter");return c.CorePromise.resolve([function(){return new f.ChangePageSizeAction(r.testPage_,n)}])},validateAfterActionSequence:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("Letter"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.INCHES),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new d.TheoSize(8.5,11).multiply(m.FormaPageExportData.POINTS_PER_INCH)))},validateAfterUndo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(r==this.initialPageSizePPI_),XCTAssertTrue(n==this.initialPageSizeFormat_)},validateAfterRedo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("Letter"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.INCHES),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new d.TheoSize(8.5,11).multiply(m.FormaPageExportData.POINTS_PER_INCH)))}}}),r),s.PageSizeCustomTest=(n=function(){this.actionSequence_PageSizeCustom=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=m.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=m.PageExportFormat.PIXELS,u.ActionTestBase.call(this)},l.defineClass({name:"PageSizeCustomTest",ctor:n,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){var r,n,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(r=l.opt(this.testPage_,(function(t){return t.sizeID})))||null!=r?r:"",this.initialPageSizePPI_=(n=l.opt(this.testPage_,(function(t){return t.customSizePPI})))||null!=n?n:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(t){return t.customSizeFormat})))||null!=i?i:m.PageExportFormat.PIXELS},populateActionSequence:function(t,e,o){var r=this,n=h.DesignSizeLibrary.getCustomSize(1011,990,m.PageExportFormat.PIXELS,m.FormaPageExportData.DEFAULT_PPI);return c.CorePromise.resolve([function(){return new f.ChangePageSizeAction(r.testPage_,n)}])},validateAfterActionSequence:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("Custom"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new d.TheoSize(1011,990)))},validateAfterUndo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(r==this.initialPageSizePPI_),XCTAssertTrue(n==this.initialPageSizeFormat_)},validateAfterRedo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("Custom"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new d.TheoSize(1011,990)))}}}),n),s.PageSizeA4Test=(i=function(){this.actionSequence_PageSizeA4=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=m.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=m.PageExportFormat.PIXELS,u.ActionTestBase.call(this)},l.defineClass({name:"PageSizeA4Test",ctor:i,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){var r,n,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(r=l.opt(this.testPage_,(function(t){return t.sizeID})))||null!=r?r:"",this.initialPageSizePPI_=(n=l.opt(this.testPage_,(function(t){return t.customSizePPI})))||null!=n?n:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(t){return t.customSizeFormat})))||null!=i?i:m.PageExportFormat.PIXELS},populateActionSequence:function(t,e,o){var r=this,n=h.DesignSizeLibrary.getById("A4");return c.CorePromise.resolve([function(){return new f.ChangePageSizeAction(r.testPage_,n)}])},validateAfterActionSequence:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("A4"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.MILLIMETERS),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new d.TheoSize(210,297).multiply(m.FormaPageExportData.POINTS_PER_INCH*m.FormaPageExportData.MM_TO_INCHES)))},validateAfterUndo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(r==this.initialPageSizePPI_),XCTAssertTrue(n==this.initialPageSizeFormat_)},validateAfterRedo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("A4"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.MILLIMETERS),XCTAssertTrue(this.testPage_.getPageExportData().pointDimensions.equal(new d.TheoSize(210,297).multiply(m.FormaPageExportData.POINTS_PER_INCH*m.FormaPageExportData.MM_TO_INCHES)))}}}),i),s.PageSizePhoneTest=(a=function(){this.actionSequence_PageSizePhone=[],this.testDoc_=null,this.testPage_=null,this.initialPageSizeID_="",this.initialPageSizePPI_=m.FormaPageExportData.DEFAULT_PPI,this.initialPageSizeFormat_=m.PageExportFormat.PIXELS,u.ActionTestBase.call(this)},l.defineClass({name:"PageSizePhoneTest",ctor:a,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){var r,n,i;this.testDoc_=o,this.testPage_=o.firstPage,this.initialPageSizeID_=(r=l.opt(this.testPage_,(function(t){return t.sizeID})))||null!=r?r:"",this.initialPageSizePPI_=(n=l.opt(this.testPage_,(function(t){return t.customSizePPI})))||null!=n?n:300,this.initialPageSizeFormat_=(i=l.opt(this.testPage_,(function(t){return t.customSizeFormat})))||null!=i?i:m.PageExportFormat.PIXELS},populateActionSequence:function(t,e,o){var r=this,n=h.DesignSizeLibrary.getById("iPhone");return c.CorePromise.resolve([function(){return new f.ChangePageSizeAction(r.testPage_,n)}])},validateAfterActionSequence:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("iPhone"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new d.TheoSize(1080,1920)))},validateAfterUndo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue(o==this.initialPageSizeID_),XCTAssertTrue(r==this.initialPageSizePPI_),XCTAssertTrue(n==this.initialPageSizeFormat_)},validateAfterRedo:function(t,e){var o=l.opt(this.testPage_,(function(t){return t.sizeID})),r=l.opt(this.testPage_,(function(t){return t.customSizePPI})),n=l.opt(this.testPage_,(function(t){return t.customSizeFormat}));XCTAssertTrue("iPhone"==o),XCTAssertTrue(300==r),XCTAssertTrue(n==m.PageExportFormat.PIXELS),XCTAssertTrue(this.testPage_.getPageExportData().pixelDimensions.equal(new d.TheoSize(1080,1920)))}}}),a)},YX5m:function(t,e,o){var r,n,i,a,s=e,l=o("oAGj"),u=o("c9Jm"),c=o("yGNn"),h=o("quOg"),m=o("FNB+"),f=o("x6FH"),d=o("9Lk3"),_=o("x35w");s.CreatePaddedCollageTest=(r=function(){this.actionSequence_CreatePaddedCollage=[function(){return new f.CreatePaddedCollageAction}],u.ActionTestBase.call(this)},l.defineClass({name:"CreatePaddedCollageTest",ctor:r,superName:"ActionTestBase",props:{validateAfterActionSequence:function(t,e){},validateAfterUndo:function(t,e){},validateAfterRedo:function(t,e){}}}),r),s.SetGridParametersTest=(n=function t(){this.actionSequence_SetGridParameters=[function(){return new f.EnterGridLayoutModeAction},function(){return new f.SetGridParametersAction(t.spacing_,t.margin_)}],this.gridForma_=null,this.oldMargin_=0,this.oldSpacing_=0,u.ActionTestBase.call(this)},l.defineClass({name:"SetGridParametersTest",ctor:n,superName:"ActionTestBase",statics:{margin_:10,spacing_:5},props:{canRunActionSequence:function(t,e,o){return this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(d.GridController.KIND)),null!=this.gridForma_},setUpActionSequence:function(t,e,o){var r;(r=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(this.oldMargin_=r.margin,this.oldSpacing_=r.spacing)},validateAfterActionSequence:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(XCTAssertEqual(o.margin,n.margin_),XCTAssertEqual(o.spacing,n.spacing_))},validateAfterUndo:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(XCTAssertEqual(o.margin,this.oldMargin_),XCTAssertEqual(o.spacing,this.oldSpacing_))},validateAfterRedo:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(XCTAssertEqual(o.margin,n.margin_),XCTAssertEqual(o.spacing,n.spacing_))}}}),n),s.SetGridStyleTest=(i=function(){this.actionSequence_SetGridStyle=[function(){return new f.EnterGridLayoutModeAction}],this.actionSequence_SetGridStyleMovableShift=[function(){return new f.EnterGridLayoutModeAction}],this.gridForma_=null,this.gridLayouts_=null,this.oldGridStyle_=null,this.newGridStyle_=null,u.ActionTestBase.call(this)},l.defineClass({name:"SetGridStyleTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.gridLayouts_=null,this.oldGridStyle_=null,this.newGridStyle_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){var r;if(this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(d.GridController.KIND)),r=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController)){var n=r.numCells;this.gridLayouts_=l.clone(o.gridLibrary.getGridsByCellNumber(n,!0))}return null!=this.gridForma_&&null!=this.gridLayouts_&&this.gridLayouts_.length>0},populateActionSequence:function(t,e,o){var r=this;return this.newGridStyle_=l.last(this.gridLayouts_),c.CorePromise.resolve(t.concat([function(){return new f.SetGridStyleAction(r.newGridStyle_,0)}]))},setUpActionSequence:function(t,e,o){var r,n,i="actionSequence_SetGridStyleMovableShift"==e;l.opt(this.newGridStyle_,(function(t){return t.moveableShift=i})),l.opt(this.oldGridStyle_,(function(t){return t.moveableShift=i})),(r=o.controller)&&(r.interactionMode=h.InteractionMode.AutomaticGrid),(n=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(this.oldGridStyle_=n.gridStyle)},validateAfterActionSequence:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(t){return t.asString})),l.opt(this.newGridStyle_,(function(t){return t.asString})))},validateAfterUndo:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(t){return t.asString})),l.opt(this.oldGridStyle_,(function(t){return t.asString})))},validateAfterRedo:function(t,e){var o;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&XCTAssertEqual(l.opt(o.gridStyle,(function(t){return t.asString})),l.opt(this.newGridStyle_,(function(t){return t.asString})))}}}),i),s.SwapGridFormaTest=(a=function(){this.actionSequence_SwapGridForma=[function(){return new f.EnterGridLayoutModeAction}],this.gridForma_=null,this.childA_=null,this.childB_=null,this.oldChildACell_=-1,this.oldChildBCell_=-1,u.ActionTestBase.call(this)},l.defineClass({name:"SwapGridFormaTest",ctor:a,superName:"ActionTestBase",statics:{margin_:10,spacing_:5},props:{canRunActionSequence:function(t,e,o){var r,n=this;return this.gridForma_=l.first(o.firstPage.root.filterByControllerKind(d.GridController.KIND)),(r=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&l.opt(this.gridForma_,(function(t){return t.visit(m.FormaTraversal.PreOrder,(function(t,e,o){if(_.GridFacade.isChildSwappable(t))if(null==n.childA_)l.opt(r.gridStyle,(function(e){return null!=e.cellForForma(t)}))&&(n.childA_=t);else{var i,a=l.opt(r.gridStyle,(function(t){return t.cellForForma(n.childA_)}));null!=(i=l.opt(r.gridStyle,(function(e){return e.cellForForma(t)})))&&l.opt(a,(function(t){return t[0]!=i[0]}))&&(n.childB_=t)}return null!=n.childA_&&null!=n.childB_}))})),null!=this.gridForma_&&null!=this.childA_&&null!=this.childB_},populateActionSequence:function(t,e,o){var r=this;return c.CorePromise.resolve(t.concat([function(){return new f.SwapGridFormaAction(r.childA_,r.childB_)}]))},setUpActionSequence:function(t,e,o){var r,n;(r=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(n=r.gridStyle)&&(this.oldChildACell_=n.cellForForma(this.childA_)[0],this.oldChildBCell_=n.cellForForma(this.childB_)[0])},validateAfterActionSequence:function(t,e){var o,r;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(r=o.gridStyle)&&(XCTAssertEqual(r.cellForForma(this.childA_)[0],this.oldChildBCell_),XCTAssertEqual(r.cellForForma(this.childB_)[0],this.oldChildACell_))},validateAfterUndo:function(t,e){var o,r;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(r=o.gridStyle)&&(XCTAssertEqual(r.cellForForma(this.childA_)[0],this.oldChildACell_),XCTAssertEqual(r.cellForForma(this.childB_)[0],this.oldChildBCell_))},validateAfterRedo:function(t,e){var o,r;(o=l.as(l.opt(this.gridForma_,(function(t){return t.controller})),d.GridController))&&(r=o.gridStyle)&&(XCTAssertEqual(r.cellForForma(this.childA_)[0],this.oldChildBCell_),XCTAssertEqual(r.cellForForma(this.childB_)[0],this.oldChildACell_))}}}),a)},Ztps:function(t,e,o){var r,n,i,a=e,s=o("oAGj"),l=o("Tq01"),u=o("4mEG"),c=o("c9Jm"),h=o("Aj/e"),m=o("yGNn"),f=o("9Lk3"),d=o("c+uM"),_=o("j89o"),p=o("T8w7"),C=o("uxH+"),T=o("cRpU");a.OpacityTest=(r=function(){this.actionSequence_SetOpacity=[function(){return new _.SetOpacityAction(.55)}],this.formaeToChangeOpacity_=[],this.initialOpacities_=[],c.ActionTestBase.call(this)},s.defineClass({name:"OpacityTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.formaeToChangeOpacity_=[],c.ActionTestBase.prototype.tearDown.call(this)},setUpActionSequence:function(t,e,o){var r;this.formaeToChangeOpacity_=s.clone(this.allSelectableFormae(o,(function(t){return!(!(r=s.opt(t.controller,(function(t){return t.opacityChangeable})))&&null==r)&&r}))),this.initialOpacities_=this.formaeToChangeOpacity_.map((function(t){return p.OpacityFacade.getOpacityForForma(t)}),this),o.controller.selection.replaceSelectionWithFormae(this.formaeToChangeOpacity_)},validateAfterActionSequence:function(t,e){for(var o=s.iter(this.formaeToChangeOpacity_);!o.done;o.next()){var r=o.value,n=p.OpacityFacade.getOpacityForForma(r);XCTAssertEqual(n,.55)}},validateAfterUndo:function(t,e){for(var o=s.iter(s.range(0,this.formaeToChangeOpacity_.length,!1));!o.done;o.next()){var r=o.value,n=this.formaeToChangeOpacity_[r],i=p.OpacityFacade.getOpacityForForma(n),a=this.initialOpacities_[r];XCTAssertEqual(i,a)}},validateAfterRedo:function(t,e){for(var o=s.iter(this.formaeToChangeOpacity_);!o.done;o.next()){var r=o.value,n=p.OpacityFacade.getOpacityForForma(r);XCTAssertEqual(n,.55)}}}}),r),a.ShapeOpacityTest=(n=function(){this.actionSequence_ShapeOpacityTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldTextOpacity_=-1,this.oldShapetOpacity_=-1,c.ActionTestBase.call(this)},s.defineClass({name:"ShapeOpacityTest",ctor:n,superName:"ActionTestBase",statics:{testText_:"Shape Opacity"},props:{prepareDocument:function(t,e){var o=this,r=[];return r.push((function(){return new u.AddTextContentAction(n.testText_)})),r.push((function(){return o.textForma_=s.first(s.opt(s.as(o.getActionResult(0),l.FormaActionResult),(function(t){return t.formae}))),new h.ChangeBackgroundShapeAction([o.textForma_],d.LockupBacking.Rows,"rows",!1)})),r.push((function(){return s.opt(s.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma_)})),new T.SetTextLookAction(d.LockupTextLook.Fill)})),m.CorePromise.resolve(r)},populateActionSequence:function(t,e,o){var r=this;return m.CorePromise.resolve(t.concat([function(){return r.oldTextOpacity_=s.opt(r.textForma_,(function(t){return t.style})).textOpacity,r.oldShapetOpacity_=s.opt(r.textForma_,(function(t){return t.style})).backingOpacity,new _.SetShapeOpacityAction(.49,[r.textForma_])}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=s.opt(this.textForma_,(function(t){return t.style})).textOpacity,r=s.opt(this.textForma_,(function(t){return t.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(r,.49)},validateAfterUndo:function(t,e){var o=s.opt(this.textForma_,(function(t){return t.style})).textOpacity,r=s.opt(this.textForma_,(function(t){return t.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(r,this.oldShapetOpacity_)},validateAfterRedo:function(t,e){var o=s.opt(this.textForma_,(function(t){return t.style})).textOpacity,r=s.opt(this.textForma_,(function(t){return t.style})).backingOpacity;XCTAssertEqual(o,this.oldTextOpacity_),XCTAssertEqual(r,.49)}}}),n),a.BackgroundOpacityTest=(i=function(){this.testDoc_=null,this.rootForma_=null,this.actionSequence_SetBackgroundOpacity=[],c.ActionTestBase.call(this)},s.defineClass({name:"BackgroundOpacityTest",ctor:i,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,o){var r;return this.rootForma_=o.firstPage.root,this.testDoc_=o,!!(r=s.as(s.opt(this.rootForma_,(function(t){return t.controller})),C.RootController))&&r.suggestTransparentBackground()},populateActionSequence:function(t,e,o){return m.CorePromise.resolve([function(){return new _.SetBackgroundOpacityAction(0,o.firstPage)}])},setUpActionSequence:function(t,e,o){var r;if(r=s.as(s.opt(this.rootForma_,(function(t){return t.controller})),C.RootController)){XCTAssertTrue(r.suggestTransparentBackground());var n=p.OpacityFacade.getBackgroundOpacity(o.firstPage);XCTAssertTrue(1==n);for(var i=s.iter(this.rootForma_.filterWithCallback((function(t){return f.GridController.isBackgroundColoredCell(t)})));!i.done;i.next()){var a=i.value;XCTAssertTrue(1==a.style.opacity)}}else XCTFail("no root controller?")},validateAfterActionSequence:function(t,e){var o;if(o=s.as(s.opt(this.rootForma_,(function(t){return t.controller})),C.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var r=p.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(0==r);for(var n=s.iter(this.rootForma_.filterWithCallback((function(t){return f.GridController.isBackgroundColoredCell(t)})));!n.done;n.next()){var i=n.value;XCTAssertTrue(0==i.style.opacity)}}else XCTFail("no root controller?")},validateAfterUndo:function(t,e){var o;if(o=s.as(s.opt(this.rootForma_,(function(t){return t.controller})),C.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var r=p.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(1==r);for(var n=s.iter(this.rootForma_.filterWithCallback((function(t){return f.GridController.isBackgroundColoredCell(t)})));!n.done;n.next()){var i=n.value;XCTAssertTrue(1==i.style.opacity)}}else XCTFail("no root controller?")},validateAfterRedo:function(t,e){var o;if(o=s.as(s.opt(this.rootForma_,(function(t){return t.controller})),C.RootController)){XCTAssertTrue(o.suggestTransparentBackground());var r=p.OpacityFacade.getBackgroundOpacity(this.testDoc_.firstPage);XCTAssertTrue(0==r);for(var n=s.iter(this.rootForma_.filterWithCallback((function(t){return f.GridController.isBackgroundColoredCell(t)})));!n.done;n.next()){var i=n.value;XCTAssertTrue(0==i.style.opacity)}}else XCTFail("no root controller?")}}}),i)},"a+l3":function(t,e,o){var r,n,i=e,a=o("oAGj"),s=o("Tq01"),l=o("4mEG"),u=o("c9Jm"),c=o("Aj/e"),h=o("70fJ"),m=o("yGNn"),f=o("ascj"),d=o("R0Y+"),_=o("c+uM"),p=o("j89o"),C=o("Zifs"),T=o("cRpU"),A=o("umUn"),g=o("8t9B");i.SetTextColorPrimaryTest=(r=function(){this.actionSequence_SetTextColorPrimary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.FieldPrimary,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},n={},a.defineClass({name:"SetTextColorPrimaryTest",ctor:r,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===n.yellow_&&(n.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),n.yellow_}}},props:{prepareDocument:function(t,e){var o=this,n=[];return n.push((function(){return new l.AddTextContentAction(r.testText_,void 0,!0)})),n.push((function(){return o.textForma_=a.first(a.opt(a.as(o.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([o.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Fill)})),m.CorePromise.resolve(n)},populateActionSequence:function(t,e,o){var n=this;return m.CorePromise.resolve(t.concat([function(){a.opt(a.opt(n.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(n.textForma_)})),n.oldColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(r.yellow_);var t=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),r),i.SetTextColorSecondaryTest=function(){var t=function(){this.actionSequence_SetTextColorSecondary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.FieldSecondary,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetTextColorSecondaryTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Fill)})),n.push((function(){return new p.SetOpacityAction(1,[r.textForma_])})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){n.oldColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_);var e=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[e],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetTextColorBorderTest=function(){var t=function(){this.actionSequence_SetTextColorBorder=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.Border,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetTextColorBorderTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.OutlineOnly)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){n.oldColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_);var e=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[e],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetTextColorShadowTest=function(){var t=function(){this.actionSequence_SetTextColorShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.Shadow,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetTextColorShadowTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Shadow)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){a.opt(a.opt(n.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(n.textForma_)})),n.oldColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_);var e=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[e],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetTextColorBorderAndShadowTest=function(){var t=function(){this.actionSequence_SetTextColorBorderAndShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRoleBorder_=f.ColorRole.Border,this.testRoleShadow_=f.ColorRole.Shadow,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetTextColorBorderAndShadowTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}},white_:{get:function(){return void 0===e.white_&&(e.white_=new C.SolidColor(1,1,1,1)),e.white_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.ShadowAndOutline)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){n.oldBorderColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRoleBorder_)})),n.newBorderColor_=A.TheoColor.init_5344(t.white_),n.oldShadowColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(n.testRoleShadow_)})),n.newShadowColor_=A.TheoColor.init_5344(t.yellow_);var e=new d.TheoColorWithRole(n.testRoleBorder_,n.newBorderColor_),o=new d.TheoColorWithRole(n.testRoleShadow_,n.newShadowColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[e,o],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleBorder_)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleBorder_)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleBorder_)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newShadowColor_.rgbColor)}}}),t}(),i.SetTextColorAllFourTest=function(){var t=function(){this.actionSequence_SetTextColorAllFourTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldPrimaryColor_=null,this.newPrimaryColor_=null,this.oldSecondaryColor_=null,this.newSecondaryColor_=null,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetTextColorAllFourTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}},white_:{get:function(){return void 0===e.white_&&(e.white_=new C.SolidColor(1,1,1,1)),e.white_}},red_:{get:function(){return void 0===e.red_&&(e.red_=new C.SolidColor(1,0,0,1)),e.red_}},black_:{get:function(){return void 0===e.black_&&(e.black_=new C.SolidColor(0,0,0,1)),e.black_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.ShadowAndOutline)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){n.oldPrimaryColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(f.ColorRole.FieldPrimary)})),n.newPrimaryColor_=A.TheoColor.init_5344(t.yellow_),n.oldSecondaryColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(f.ColorRole.FieldSecondary)})),n.newSecondaryColor_=A.TheoColor.init_5344(t.red_),n.oldBorderColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(f.ColorRole.Border)})),n.newBorderColor_=A.TheoColor.init_5344(t.black_),n.oldShadowColor_=a.opt(n.textForma_,(function(t){return t.style.colors.theoColor(f.ColorRole.Shadow)})),n.newShadowColor_=A.TheoColor.init_5344(t.white_);var e=new d.TheoColorWithRole(f.ColorRole.FieldPrimary,n.newPrimaryColor_),o=new d.TheoColorWithRole(f.ColorRole.FieldSecondary,n.newSecondaryColor_),r=new d.TheoColorWithRole(f.ColorRole.Border,n.newBorderColor_),i=new d.TheoColorWithRole(f.ColorRole.Shadow,n.newShadowColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[e,o,r,i],!1)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldPrimary)})),r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldSecondary)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(t,e){var o=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldPrimary)})),r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldSecondary)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.oldPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldSecondaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(t,e){var o=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldPrimary)})),r=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.FieldSecondary)})),n=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Border)})),i=a.opt(a.opt(this.textForma_,(function(t){return t.style})),(function(t){return t.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)}}}),t}(),i.SetCharStyleColorPrimaryTest=function(){var t=function(){this.actionSequence_SetCharStyleColorPrimary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.FieldPrimary,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorPrimaryTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Fill)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_),new T.EnterCharStyleModeAction(n.textForma_)},function(){var t=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetCharStyleColorSecondaryTest=function(){var t=function(){this.actionSequence_SetCharStyleColorSecondary=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.FieldSecondary,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorSecondaryTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Fill)})),n.push((function(){return new p.SetOpacityAction(1,[r.textForma_])})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_),new T.EnterCharStyleModeAction(n.textForma_)},function(){return new c.ChangeBackgroundShapeAction([n.textForma_],_.LockupBacking.Rows,"rows",!1)},function(){return new p.SetOpacityAction(1,[n.textForma_])},function(){var t=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetCharStyleColorBorderTest=function(){var t=function(){this.actionSequence_SetCharStyleColorBorder=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.Border,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorBorderTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.OutlineOnly)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_),new T.EnterCharStyleModeAction(n.textForma_)},function(){var t=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetCharStyleColorShadowTest=function(){var t=function(){this.actionSequence_SetCharStyleColorShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRole_=f.ColorRole.Shadow,this.oldColor_=null,this.newColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorShadowTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.Shadow)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRole_)})),n.newColor_=A.TheoColor.init_5344(t.yellow_),new T.EnterCharStyleModeAction(n.textForma_)},function(){var t=new d.TheoColorWithRole(n.testRole_,n.newColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRole_)}));XCTAssertEqual(r.rgbColor,this.oldColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRole_)}));XCTAssertEqual(n.rgbColor,this.newColor_.rgbColor)}}}),t}(),i.SetCharStyleColorBorderAndShadowTest=function(){var t=function(){this.actionSequence_SetCharStyleColorBorderAndShadow=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.testRoleBorder_=f.ColorRole.Border,this.testRoleShadow_=f.ColorRole.Shadow,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorBorderAndShadowTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}},white_:{get:function(){return void 0===e.white_&&(e.white_=new C.SolidColor(1,1,1,1)),e.white_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.ShadowAndOutline)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldBorderColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRoleBorder_)})),n.newBorderColor_=A.TheoColor.init_5344(t.white_),n.oldShadowColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(n.testRoleShadow_)})),n.newShadowColor_=A.TheoColor.init_5344(t.yellow_),new T.EnterCharStyleModeAction(n.textForma_)},function(){var t=new d.TheoColorWithRole(n.testRoleBorder_,n.newBorderColor_),e=new d.TheoColorWithRole(n.testRoleShadow_,n.newShadowColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t,e],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRoleBorder_)})),i=a.opt(r,(function(t){return t.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(t,e){var o=this,r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRoleBorder_)})),n=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(r.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(t,e){var o=this,r=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),n=a.opt(r,(function(t){return t.colors.theoColor(o.testRoleBorder_)})),i=a.opt(r,(function(t){return t.colors.theoColor(o.testRoleShadow_)}));XCTAssertEqual(n.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newShadowColor_.rgbColor)}}}),t}(),i.SetCharStyleColorAllFourTest=function(){var t=function(){this.actionSequence_SetCharStyleColorAllFourTest=[],this.testDoc_=null,this.testPage_=null,this.textForma_=null,this.oldPrimaryColor_=null,this.newPrimaryColor_=null,this.oldSecondaryColor_=null,this.newSecondaryColor_=null,this.oldBorderColor_=null,this.newBorderColor_=null,this.oldShadowColor_=null,this.newShadowColor_=null,u.ActionTestBase.call(this)},e={};return a.defineClass({name:"SetCharStyleColorAllFourTest",ctor:t,superName:"ActionTestBase",statics:{testText_:"Four Colors",yellow_:{get:function(){return void 0===e.yellow_&&(e.yellow_=new C.SolidColor(239/255,130/255,13/255,1)),e.yellow_}},white_:{get:function(){return void 0===e.white_&&(e.white_=new C.SolidColor(1,1,1,1)),e.white_}},red_:{get:function(){return void 0===e.red_&&(e.red_=new C.SolidColor(1,0,0,1)),e.red_}},black_:{get:function(){return void 0===e.black_&&(e.black_=new C.SolidColor(0,0,0,1)),e.black_}}},props:{prepareDocument:function(e,o){var r=this,n=[];return n.push((function(){return new l.AddTextContentAction(t.testText_,void 0,!0)})),n.push((function(){return r.textForma_=a.first(a.opt(a.as(r.getActionResult(0),s.FormaActionResult),(function(t){return t.formae}))),new c.ChangeBackgroundShapeAction([r.textForma_],_.LockupBacking.Rows,"rows",!1)})),n.push((function(){return a.opt(a.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma_)})),new T.SetTextLookAction(_.LockupTextLook.ShadowAndOutline)})),m.CorePromise.resolve(n)},populateActionSequence:function(e,o,r){var n=this;return m.CorePromise.resolve(e.concat([function(){return n.oldPrimaryColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.FieldPrimary)})),n.newPrimaryColor_=A.TheoColor.init_5344(t.yellow_),n.oldSecondaryColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.FieldSecondary)})),n.newSecondaryColor_=A.TheoColor.init_5344(t.red_),n.oldBorderColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.Border)})),n.newBorderColor_=A.TheoColor.init_5344(t.black_),n.oldShadowColor_=a.opt(a.as(a.opt(n.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.Shadow)})),n.newShadowColor_=A.TheoColor.init_5344(t.white_),new T.EnterCharStyleModeAction(n.textForma_)},function(){return new c.ChangeBackgroundShapeAction([n.textForma_],_.LockupBacking.Rows,"rows",!1)},function(){return new p.SetOpacityAction(1,[n.textForma_])},function(){var t=new d.TheoColorWithRole(f.ColorRole.FieldPrimary,n.newPrimaryColor_),e=new d.TheoColorWithRole(f.ColorRole.FieldSecondary,n.newSecondaryColor_),o=new d.TheoColorWithRole(f.ColorRole.Border,n.newBorderColor_),r=new d.TheoColorWithRole(f.ColorRole.Shadow,n.newShadowColor_);return new h.ApplyColorWithRoleAction([n.textForma_],[t,e,o,r],!0)},function(){return new T.ExitCharStyleModeAction(n.textForma_)}]))},setUpActionSequence:function(t,e,o){this.testDoc_=o,this.testPage_=o.firstPage},validateAfterActionSequence:function(t,e){var o=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.FieldPrimary)})),n=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.FieldSecondary)})),i=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.Border)})),s=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(r.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(s.rgbColor,this.newShadowColor_.rgbColor)},validateAfterUndo:function(t,e){var o=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.FieldPrimary)})),r=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.FieldSecondary)})),n=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.Border)})),i=a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.styleController.targetedLockupStyle.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(o.rgbColor,this.oldPrimaryColor_.rgbColor),XCTAssertEqual(r.rgbColor,this.oldSecondaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.oldBorderColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.oldShadowColor_.rgbColor)},validateAfterRedo:function(t,e){var o=a.opt(a.opt(a.as(a.opt(this.textForma_,(function(t){return t.controller})),g.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[g.TypeLockupController.HIGHLIGHT_STYLE]})),r=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.FieldPrimary)})),n=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.FieldSecondary)})),i=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.Border)})),s=a.opt(o,(function(t){return t.colors.theoColor(f.ColorRole.Shadow)}));XCTAssertEqual(r.rgbColor,this.newPrimaryColor_.rgbColor),XCTAssertEqual(n.rgbColor,this.newSecondaryColor_.rgbColor),XCTAssertEqual(i.rgbColor,this.newBorderColor_.rgbColor),XCTAssertEqual(s.rgbColor,this.newShadowColor_.rgbColor)}}}),t}()},bpSr:function(t,e,o){var r,n,i,a,s,l,u,c,h,m,f,d,_,p,C,T,A,g,F,S,y,v,w,P,R=e,I=o("oAGj"),x=o("Tq01"),B=o("4mEG"),q=o("c9Jm"),L=o("70fJ"),X=o("CWW7"),E=o("yGNn"),k=o("4JYN"),D=o("FNB+"),N=o("6ZWm"),b=o("cmoc"),M=o("QbzR"),G=o("xWmh"),z=o("bqbo"),O=o("U010"),U=o("fdtz"),H=o("lmwz"),W=o("uWOl"),j=o("sTUO"),Z=o("MYNe"),Y=o("VkKB"),J=o("434x"),K=o("j89o"),V=o("Zifs"),Q=o("djAF"),$=o("umUn"),tt=o("oKlP");R.ReplaceImagesWithColorsTest=(r=function t(){this.actionSequence_ReplaceImagesWithColors=[function(){return new z.ReplaceImagesWithColorsAction(null,[t.green_])}],this.formaToReplace_=null,q.ActionTestBase.call(this)},n={},I.defineClass({name:"ReplaceImagesWithColorsTest",ctor:r,superName:"ActionTestBase",statics:{green_:{get:function(){return void 0===n.green_&&(n.green_=$.TheoColor.init_5344(new V.SolidColor(0,1,0,1))),n.green_}}},props:{replacementForma:{get:function(){return I.first(I.opt(I.as(this.getActionResult(0),x.FormaActionResult),(function(t){return t.formae})))}},tearDown:function(){this.formaToReplace_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.formaToReplace_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t instanceof b.FrameForma&&I.opt(I.as(t,b.FrameForma),(function(t){return t.childAt(0)instanceof U.ImageForma}))}))),b.FrameForma),null!=this.formaToReplace_},setUpActionSequence:function(t,e,o){XCTAssertNotNil(this.formaToReplace_),null!=this.formaToReplace_&&o.controller.selection.replaceSelection(this.formaToReplace_)},validateAfterActionSequence:function(t,e){var o;if(XCTAssertNotNil(this.replacementForma),XCTAssertTrue(this.replacementForma instanceof Q.ShapeForma),XCTAssertNil(I.opt(this.formaToReplace_,(function(t){return t.parent}))),o=I.as(this.replacementForma,Q.ShapeForma)){var n=o.style.colors.fieldPrimary;XCTAssertNotNil(n),XCTAssertEqual(n,r.green_.rgbColor)}},validateAfterUndo:function(t,e){XCTAssertNil(I.opt(this.replacementForma,(function(t){return t.parent}))),XCTAssertNotNil(I.opt(this.formaToReplace_,(function(t){return t.parent})))},validateAfterRedo:function(t,e){var o;if(XCTAssertNotNil(this.replacementForma),XCTAssertTrue(this.replacementForma instanceof Q.ShapeForma),XCTAssertNil(I.opt(this.formaToReplace_,(function(t){return t.parent}))),o=I.as(this.replacementForma,Q.ShapeForma)){var n=o.style.colors.fieldPrimary;XCTAssertNotNil(n),XCTAssertEqual(n,r.green_.rgbColor)}this.formaToReplace_=null}}}),r),R.SetImageFilterTest=(i=function(){this.actionSequence_SetImageFilter=[],this.formaToChange_=null,this.originalStyleName_=null,q.ActionTestBase.call(this)},I.defineClass({name:"SetImageFilterTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.formaToChange_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.formaToChange_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t instanceof b.FrameForma&&I.opt(I.as(t,b.FrameForma),(function(t){return t.childAt(0)instanceof U.ImageForma}))}))),b.FrameForma),null!=this.formaToChange_},populateActionSequence:function(t,e,o){return E.CorePromise.resolve([function(){return new z.SetImageFilterAction(o.firstPage.imageFilterLibrary.getImageStyle(W.ImageStyle.NAME_GREYSCALE))}])},setUpActionSequence:function(t,e,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=I.opt(I.as(I.opt(I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma),(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_GREYSCALE})))}},validateAfterUndo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,I.opt(I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})))}},validateAfterRedo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_GREYSCALE}))),this.formaToChange_=null}}}}),i),R.SetImageFilterDuotoneTest=(a=function(){this.actionSequence_SetImageFilter=[],this.formaToChange_=null,this.originalStyleName_=null,this.duotonePreset_=k.DuotonePreset.DEFAULT,q.ActionTestBase.call(this)},I.defineClass({name:"SetImageFilterDuotoneTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.formaToChange_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.formaToChange_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t instanceof b.FrameForma&&I.opt(I.as(t,b.FrameForma),(function(t){return t.childAt(0)instanceof U.ImageForma}))}))),b.FrameForma),this.duotonePreset_=o.firstPage.imageFilterLibrary.getDefaultDuotonePreset(!1),XCTAssertFalse(this.duotonePreset_.shadows.isEqual(this.duotonePreset_.highlights)),null!=this.formaToChange_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.SetImageFilterAction(o.firstPage.imageFilterLibrary.getImageStyle(W.ImageStyle.NAME_NEWDUOTONE),!1,r.duotonePreset_.shadows,r.duotonePreset_.highlights)}])},setUpActionSequence:function(t,e,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=I.opt(I.as(I.opt(I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma),(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_NEWDUOTONE}))),XCTAssertTrue(r.colors.fieldShadows.isEqual(this.duotonePreset_.shadows)),XCTAssertTrue(r.colors.fieldHighlights.isEqual(this.duotonePreset_.highlights))}},validateAfterUndo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,I.opt(I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})))}},validateAfterRedo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_NEWDUOTONE}))),XCTAssertTrue(r.colors.fieldShadows.isEqual(this.duotonePreset_.shadows)),XCTAssertTrue(r.colors.fieldHighlights.isEqual(this.duotonePreset_.highlights)),this.formaToChange_=null}}}}),a),R.ShuffleImageFilterTest=(s=function(){this.actionSequence_ShuffleImageFilter=[],this.page_=null,this.formaToChange_=null,this.styleToShuffle_=null,this.originalStyleName_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ShuffleImageFilterTest",ctor:s,superName:"ActionTestBase",props:{tearDown:function(){this.page_=null,this.formaToChange_=null,this.styleToShuffle_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.formaToChange_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t instanceof b.FrameForma&&I.opt(I.as(t,b.FrameForma),(function(t){return t.childAt(0)instanceof U.ImageForma}))}))),b.FrameForma),null!=this.formaToChange_},prepareDocument:function(t,e){var o=this;return this.page_=t.firstPage,this.styleToShuffle_=this.page_.imageFilterLibrary.getImageStyle(W.ImageStyle.NAME_MULTIPLY),null!=this.formaToChange_&&t.controller.selection.replaceSelection(this.formaToChange_),E.CorePromise.resolve([function(){return new z.SetImageFilterAction(o.styleToShuffle_)}])},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.ShuffleImageFilterAction(r.styleToShuffle_,r.page_)}])},setUpActionSequence:function(t,e,o){XCTAssertNotNil(this.formaToChange_),null!=this.formaToChange_&&(this.originalStyleName_=I.opt(I.as(I.opt(I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma),(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})),o.controller.selection.replaceSelection(this.formaToChange_))},validateAfterActionSequence:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_MULTIPLY})))}},validateAfterUndo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o),XCTAssertEqual(this.originalStyleName_,I.opt(I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle),(function(t){return t.name})))}},validateAfterRedo:function(t,e){if(null!=this.formaToChange_){var o=I.as(I.opt(this.formaToChange_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(o);var r=I.as(I.opt(o,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(r),XCTAssertTrue(I.opt(r,(function(t){return t.name==W.ImageStyle.NAME_MULTIPLY}))),this.formaToChange_=null}}}}),s),R.ChangeImageAdjustmentsTest=(l=function(){this.actionSequence_ChangeImageAdjustments=[function(){return z.ChangeImageAdjustmentsAction.init_dd66("saturation",100)}],this.formaToAdjust_=null,this.oldValue_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ChangeImageAdjustmentsTest",ctor:l,superName:"ActionTestBase",props:{tearDown:function(){this.formaToAdjust_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.formaToAdjust_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t instanceof b.FrameForma&&I.opt(I.as(t,b.FrameForma),(function(t){return t.childAt(0)instanceof U.ImageForma}))}))),b.FrameForma),null!=this.formaToAdjust_},setUpActionSequence:function(t,e,o){if(XCTAssertNotNil(this.formaToAdjust_),null!=this.formaToAdjust_){var r=I.as(I.opt(this.formaToAdjust_,(function(t){return t.childAt(0)})),U.ImageForma);this.oldValue_=I.opt(I.opt(r,(function(t){return t.style.adjustments})),(function(t){return t.saturation})),o.controller.selection.replaceSelection(this.formaToAdjust_)}},validateAfterActionSequence:function(t,e){var o;if(null!=this.formaToAdjust_){var r=I.as(I.opt(this.formaToAdjust_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(r);var n=I.as(I.opt(r,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(n),XCTAssertEqual(100,(o=I.opt(I.opt(n,(function(t){return t.adjustments})),(function(t){return t.saturation})))||null!=o?o:0)}},validateAfterUndo:function(t,e){var o,r;if(null!=this.formaToAdjust_){var n=I.as(I.opt(this.formaToAdjust_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(n);var i=I.as(I.opt(n,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(i),XCTAssertEqual((o=this.oldValue_)||null!=o?o:0,(r=I.opt(I.opt(i,(function(t){return t.adjustments})),(function(t){return t.saturation})))||null!=r?r:0)}},validateAfterRedo:function(t,e){var o;if(null!=this.formaToAdjust_){var r=I.as(I.opt(this.formaToAdjust_,(function(t){return t.childAt(0)})),U.ImageForma);XCTAssertNotNil(r);var n=I.as(I.opt(r,(function(t){return t.style})),W.ImageStyle);XCTAssertNotNil(n),XCTAssertEqual(100,(o=I.opt(I.opt(n,(function(t){return t.adjustments})),(function(t){return t.saturation})))||null!=o?o:0),this.formaToAdjust_=null}}}}),l),R.SetImageAsFloatingTest=(u=function(){this.actionSequence_SetAsFloating=[function(){return new z.SetImageAsFloatingAction}],this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"SetImageAsFloatingTest",ctor:u,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.frameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isBackgroundImage()}))),b.FrameForma),null!=this.frameForma_},setUpActionSequence:function(t,e,o){XCTAssertFalse(this.frameForma_.controller.floating),o.controller.selection.replaceSelection(this.frameForma_)},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.frameForma_.controller.floating)},validateAfterUndo:function(t,e){XCTAssertFalse(this.frameForma_.controller.floating)},validateAfterRedo:function(t,e){XCTAssertTrue(this.frameForma_.controller.floating)}}}),u),R.SetImageAsBackgroundTest=(c=function(){this.actionSequence_SetAsBackground=[function(){return new z.SetImageAsBackgroundAction}],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"SetImageAsBackgroundTest",ctor:c,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},prepareDocument:function(t,e){var o=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),o.push((function(){return new z.SetImageAsFloatingAction}))),E.CorePromise.resolve(o)},setUpActionSequence:function(t,e,o){XCTAssertTrue(this.frameForma_.controller.floating),o.controller.selection.replaceSelection(this.frameForma_)},validateAfterActionSequence:function(t,e){XCTAssertFalse(this.frameForma_.controller.floating)},validateAfterUndo:function(t,e){XCTAssertTrue(this.frameForma_.controller.floating)},validateAfterRedo:function(t,e){XCTAssertFalse(this.frameForma_.controller.floating)}}}),c),R.CropToRatioTest=(h=function(){this.actionSequence_CropToRatio=[],this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,this.initialRatio_=1,this.cropRatio_=1,q.ActionTestBase.call(this)},I.defineClass({name:"CropToRatioTest",ctor:h,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return r.initialRatio_=r.frameForma_.bounds.aspectRatio,r.cropRatio_=r.initialRatio_<1?4/3:3/4,new z.CropImageToRatioAction(r.imageForma_,r.cropRatio_,null)}])},prepareDocument:function(t,e){var o=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),o.push((function(){return new z.SetImageAsFloatingAction}))),this.imageForma_=H.ImageFacade.getImageFormaForForma(this.frameForma_),E.CorePromise.resolve(o)},validateAfterActionSequence:function(t,e){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.cropRatio_,.001)},validateAfterUndo:function(t,e){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.initialRatio_,.001)},validateAfterRedo:function(t,e){var o=this.frameForma_.bounds.aspectRatio;XCTAssertEqual(o,this.cropRatio_,.001)}}}),h),R.ApplyShapeMaskTest=(m=function(){this.actionSequence_ApplyShapeMask=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ApplyShapeMaskTest",ctor:m,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.ApplyShapeMaskToImageAction(r.frameForma_,"diamond")}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction}))),H.ImageFacade.formaHasMask(this.frameForma_)&&r.push((function(){return new z.ApplyShapeMaskToImageAction(o.frameForma_)})),E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){var o;if(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController)){var r=I.as(o.mask,Q.ShapeForma);XCTAssertNotNil(r),XCTAssertEqual(r.shapeLibraryID,"diamond")}},validateAfterUndo:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&XCTAssertNil(o.mask)},validateAfterRedo:function(t,e){var o;if(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController)){var r=I.as(o.mask,Q.ShapeForma);XCTAssertNotNil(r),XCTAssertEqual(r.shapeLibraryID,"diamond")}}}}),m),R.ApplyCutoutTest=(f=function(){this.actionSequence_ApplyCutout=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ApplyCutoutTest",ctor:f,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this,n=O.ImageCutoutLibrary.getImageCutout(O.CutoutMode.BackgroundRemoval);return E.CorePromise.resolve([function(){return new z.SetImageCutoutAction(r.frameForma_,n,O.ImageCutoutModelLibrary.CURRENT_MODEL)}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction}))),H.ImageFacade.getCutoutModeForForma(this.frameForma_)!=O.CutoutMode.Off&&r.push((function(){return new z.SetImageCutoutAction(o.frameForma_,new O.CutoutStyle(O.CutoutMode.Off),void 0,void 0,60)})),E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(H.ImageFacade.getCutoutModeForForma(this.frameForma_),O.CutoutMode.BackgroundRemoval))},validateAfterUndo:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&XCTAssertNil(o.cutout)},validateAfterRedo:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(H.ImageFacade.getCutoutModeForForma(this.frameForma_),O.CutoutMode.BackgroundRemoval))}}}),f),R.RemoveCutoutTest=(d=function(){this.actionSequence_RemoveCutout=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"RemoveCutoutTest",ctor:d,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.SetImageCutoutAction(r.frameForma_,new O.CutoutStyle(O.CutoutMode.Off))}])},prepareDocument:function(t,e){var o=this,r=[];if(this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction}))),H.ImageFacade.getCutoutModeForForma(this.frameForma_)!=O.CutoutMode.BackgroundRemoval){var n=O.ImageCutoutLibrary.getImageCutout(O.CutoutMode.BackgroundRemoval);r.push((function(){return new z.SetImageCutoutAction(o.frameForma_,n)}))}return E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&(XCTAssertNil(o.cutout),XCTAssertNotNil(H.ImageFacade.getCutoutMaskFormaForForma(this.frameForma_)))},validateAfterUndo:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&(XCTAssertNotNil(o.cutout),XCTAssertEqual(H.ImageFacade.getCutoutModeForForma(this.frameForma_),O.CutoutMode.BackgroundRemoval))},validateAfterRedo:function(t,e){var o;(o=I.as(I.opt(this.frameForma_,(function(t){return t.controller})),N.FrameController))&&(XCTAssertNil(o.cutout),XCTAssertNotNil(H.ImageFacade.getCutoutMaskFormaForForma(this.frameForma_)))}}}),d),R.AllowFreeformCropTest=(_=function(){this.actionSequence_AllowFreeformCrop=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"AllowFreeformCropTest",ctor:_,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.SetImageCropToFreeformAction(r.frameForma_)}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction}))),H.ImageFacade.formaHasMask(this.frameForma_)||r.push((function(){return new z.ApplyShapeMaskToImageAction(o.frameForma_,"diamond")})),E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){XCTAssertTrue(H.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertFalse(H.ImageFacade.formaHasShapeMask(this.frameForma_))},validateAfterUndo:function(t,e){XCTAssertFalse(H.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertTrue(H.ImageFacade.formaHasShapeMask(this.frameForma_))},validateAfterRedo:function(t,e){XCTAssertTrue(H.ImageFacade.usesFreeformCropPreset(this.frameForma_)),XCTAssertFalse(H.ImageFacade.formaHasShapeMask(this.frameForma_))}}}),_),R.EnterCropModeTest=(p=function(){this.actionSequence_EnterCropMode=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"EnterCropModeTest",ctor:p,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.EnterCropModeAction(r.frameForma_)}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction})),r.push((function(){var t=o.frameForma_.bounds.aspectRatio<1?4/3:3/4;return new z.CropImageToRatioAction(o.frameForma_,t,null)}))),E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){var o,r=null;if(o=I.opt(this.frameForma_,(function(t){return t.parent})))for(var n=I.iter(o.visitAsArray(D.FormaTraversal.JustChildren));!n.done;n.next()){var i=n.value;i.hasIntent(D.Forma.INTENT_TEMP_IMAGE_CROP)&&(r=i)}XCTAssertNotNil(r)},validateAfterUndo:function(t,e){var o,r=null;if(o=I.opt(this.frameForma_,(function(t){return t.parent})))for(var n=I.iter(o.visitAsArray(D.FormaTraversal.JustChildren));!n.done;n.next()){var i=n.value;i.hasIntent(D.Forma.INTENT_TEMP_IMAGE_CROP)&&(r=i)}XCTAssertNil(r)},validateAfterRedo:function(t,e){var o,r=null;if(o=I.opt(this.frameForma_,(function(t){return t.parent})))for(var n=I.iter(o.visitAsArray(D.FormaTraversal.JustChildren));!n.done;n.next()){var i=n.value;i.hasIntent(D.Forma.INTENT_TEMP_IMAGE_CROP)&&(r=i)}XCTAssertNotNil(r)}}}),p),R.ExitCropModeTest=(C=function(){this.actionSequence_ExitCropMode=[],this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ExitCropModeTest",ctor:C,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){return E.CorePromise.resolve([function(){return new z.ExitCropModeAction}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction})),r.push((function(){var t=o.frameForma_.bounds.aspectRatio<1?4/3:3/4;return new z.CropImageToRatioAction(o.frameForma_,t,null)})),r.push((function(){return new z.EnterCropModeAction(o.frameForma_)}))),E.CorePromise.resolve(r)}}}),C),R.AddHiddenImageToGridTest=(T=function(){this.actionSequence_AddHidden=[],this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"AddHiddenImageToGridTest",ctor:T,superName:"ActionTestBase",props:{tearDown:function(){this.oneFrameForma_=null,this.frameForma_=null,this.imageForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.oneFrameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.oneFrameForma_},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve([function(){return new z.AddHiddenImageToGridAction([r.imageForma_])}])},prepareDocument:function(t,e){var o=this,r=[];return this.frameForma_=I.as(I.last(this.allSelectableFormae(t,(function(t){return t.isImage()&&!t.isBackgroundImage()}))),b.FrameForma),null==this.frameForma_&&(this.frameForma_=this.oneFrameForma_,t.controller.selection.replaceSelection(this.frameForma_),r.push((function(){return new z.SetImageAsFloatingAction}))),this.imageForma_=H.ImageFacade.getImageFormaForForma(this.frameForma_),r.push((function(){return new K.SetOpacityAction(0,[o.imageForma_])})),E.CorePromise.resolve(r)},validateAfterActionSequence:function(t,e){XCTAssertFalse(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,1)},validateAfterUndo:function(t,e){XCTAssertTrue(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,0)},validateAfterRedo:function(t,e){XCTAssertFalse(this.frameForma_.controller.floating),XCTAssertEqual(this.imageForma_.style.opacity,1)}}}),T),R.SetBlendScreenIconTest=(A=function(){this.actionSequence_ApplyBlend=[],this.testBlendMode_=M.FormaBlendMode.Screen,q.ActionTestBase.call(this)},I.defineClass({name:"SetBlendScreenIconTest",ctor:A,superName:"ActionTestBase",props:{iconForma:{get:function(){return I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae})))}},prepareDocument:function(t,e){var o,r=(o=this.urlForAsset("dog1.svg"))||null!=o?o:"";return E.CorePromise.resolve([function(){return new B.AddIconContentAction(r,Y.MediaMetadata.init_5f01(),null)}])},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve(t.concat([function(){return new K.SetBlendModeAction(r.testBlendMode_,[r.iconForma])}]))},validateAfterActionSequence:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,M.FormaBlendMode.Normal)},validateAfterRedo:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),A),R.SetBlendMultiplyIconTest=(g=function(){this.actionSequence_ApplyBlend=[],this.testBlendMode_=M.FormaBlendMode.Multiply,q.ActionTestBase.call(this)},I.defineClass({name:"SetBlendMultiplyIconTest",ctor:g,superName:"ActionTestBase",props:{iconForma:{get:function(){return I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae})))}},prepareDocument:function(t,e){var o,r=(o=this.urlForAsset("dog1.svg"))||null!=o?o:"";return E.CorePromise.resolve([function(){return new B.AddIconContentAction(r,Y.MediaMetadata.init_5f01(),null)}])},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve(t.concat([function(){return new K.SetBlendModeAction(r.testBlendMode_,[r.iconForma])}]))},validateAfterActionSequence:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,M.FormaBlendMode.Normal)},validateAfterRedo:function(t,e){var o=I.opt(I.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),g),R.SetBlendScreenImageTest=(F=function(){this.actionSequence_ApplyBlend=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.testBlendMode_=M.FormaBlendMode.Screen,this.rootForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"SetBlendScreenImageTest",ctor:F,superName:"ActionTestBase",props:{imageForma:{get:function(){return I.opt(I.as(I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae}))),b.FrameForma),(function(t){return t.image}))}},frameForma:{get:function(){return I.as(I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae}))),b.FrameForma)}},hasImage:function(){var t=this,e=!1;return I.opt(this.rootForma_,(function(o){return o.visitAll(D.FormaTraversal.PreOrder,(function(o){var r,n;(r=I.as(o,U.ImageForma))&&(n=r.contentNode)&&n.url==t.imageURL_&&n.mimeType==t.imageMimeType_&&n.pixelWidth==t.imageWidth_&&n.pixelHeight==t.imageHeight_&&(e=!0)}))})),e},prepareDocument:function(t,e){var o=this,r=t.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(t){var e;if(e=I.as(t,G.ActionTestImageData)){var n=new X.AddFormaParams(x.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,null,X.FloatingImageStrategy.Always);return o.imageURL_=e.url,o.imageMimeType_="image/jpeg",o.imageWidth_=e.width,o.imageHeight_=e.height,E.CorePromise.resolve([function(){return new B.AddImageContentAction(r,o.imageURL_,o.imageMimeType_,o.imageWidth_,o.imageHeight_,!1,Y.MediaMetadata.init_5f01(),null,null,n)}])}return XCTFail("Could not get image data for SetBlendScreenImageTest"),E.CorePromise.resolve([])}))},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve(t.concat([function(){return new K.SetBlendModeAction(r.testBlendMode_,[r.frameForma])}]))},setUpActionSequence:function(t,e,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasImage());var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(t,e){var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,M.FormaBlendMode.Normal)},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasImage());var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),F),R.SetBlendMultiplyImageTest=(S=function(){this.actionSequence_ApplyBlend=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.testBlendMode_=M.FormaBlendMode.Multiply,this.rootForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"SetBlendMultiplyImageTest",ctor:S,superName:"ActionTestBase",props:{imageForma:{get:function(){return I.opt(I.as(I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae}))),b.FrameForma),(function(t){return t.image}))}},frameForma:{get:function(){return I.as(I.first(I.opt(I.as(this.getPrepActionResult(0),x.FormaActionResult),(function(t){return t.formae}))),b.FrameForma)}},hasImage:function(){var t=this,e=!1;return I.opt(this.rootForma_,(function(o){return o.visitAll(D.FormaTraversal.PreOrder,(function(o){var r,n;(r=I.as(o,U.ImageForma))&&(n=r.contentNode)&&n.url==t.imageURL_&&n.mimeType==t.imageMimeType_&&n.pixelWidth==t.imageWidth_&&n.pixelHeight==t.imageHeight_&&(e=!0)}))})),e},prepareDocument:function(t,e){var o=this,r=t.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(t){var e;if(e=I.as(t,G.ActionTestImageData)){var n=new X.AddFormaParams(x.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,null,X.FloatingImageStrategy.Always);return o.imageURL_=e.url,o.imageMimeType_="image/jpeg",o.imageWidth_=e.width,o.imageHeight_=e.height,E.CorePromise.resolve([function(){return new B.AddImageContentAction(r,o.imageURL_,o.imageMimeType_,o.imageWidth_,o.imageHeight_,!1,Y.MediaMetadata.init_5f01(),null,null,n)}])}return XCTFail("Could not get image data for SetBlendMultiplyImageTest"),E.CorePromise.resolve([])}))},populateActionSequence:function(t,e,o){var r=this;return E.CorePromise.resolve(t.concat([function(){return new K.SetBlendModeAction(r.testBlendMode_,[r.frameForma])}]))},setUpActionSequence:function(t,e,o){this.rootForma_=o.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasImage());var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)},validateAfterUndo:function(t,e){var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,M.FormaBlendMode.Normal)},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasImage());var o=I.opt(I.opt(this.frameForma,(function(t){return t.style})),(function(t){return t.blendMode}));XCTAssertEqual(o,this.testBlendMode_)}}}),S),R.UpdateCutoutMaskTest=(y=function(){this.actionSequence_UpdateCutoutMask=[],this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"UpdateCutoutMaskTest",ctor:y,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.frameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.frameForma_},populateActionSequence:function(t,e,o){var r;return(r=this.frameForma_)?this.imageDataForAsset("mask1.png").then((function(t){var e;return(e=I.as(t,G.ActionTestImageData))?E.CorePromise.resolve([function(){return new z.UpdateCutoutMaskAction(r,void 0,e.url)}]):null})):E.CorePromise.reject("No frame")},prepareDocument:function(t,e){var o=this,r=I.clone(R.EnterRefineCutoutModeTest.prepareEnterRefineCutout(this.frameForma_));return r.push((function(){return new z.EnterRefineCutoutModeAction(o.frameForma_)})),E.CorePromise.resolve(r)}}}),y),R.EnterRefineCutoutModeTest=(v=function(){this.actionSequence_EnterRefineCutoutMode=[],this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"EnterRefineCutoutModeTest",ctor:v,superName:"ActionTestBase",statics:{prepareEnterRefineCutout:function(t){var e,o,r,n,i=[];if((e=t)&&(o=e.controller)&&(r=e.page.document)&&(n=r.controller)){n.selection.replaceSelection(e),o.floating||i.push((function(){return new z.SetImageAsFloatingAction}));var a=O.ImageCutoutLibrary.getImageCutout(O.CutoutMode.BackgroundRemoval);i.push((function(){return new z.SetImageCutoutAction(e,a,O.ImageCutoutModelLibrary.CURRENT_MODEL,void 0,60)})),i.push((function(){return new z.ApplyShapeMaskToImageAction(e,"circle")})),i.push((function(){var t=$.TheoColor.init_5344(new V.SolidColor(1,0,1,1));return new L.ApplyColorAction([e],[t])})),i.push((function(){return new K.SetBlendModeAction(M.FormaBlendMode.Screen,[e])})),i.push((function(){return new z.SetImageFilterAction(r.firstPage.imageFilterLibrary.getImageStyle(W.ImageStyle.NAME_DARKEN))})),i.push((function(){return new K.SetOpacityAction(.33,[e])})),i.push((function(){return new j.SendForwardBackwardAction(Z.ZOrderEnum.Back,[e])}))}return i}},props:{tearDown:function(){this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.frameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.frameForma_},populateActionSequence:function(t,e,o){var r;return(r=this.frameForma_)?E.CorePromise.resolve([function(){return new z.EnterRefineCutoutModeAction(r)}]):E.CorePromise.reject("No frame")},prepareDocument:function(t,e){return E.CorePromise.resolve(v.prepareEnterRefineCutout(this.frameForma_))}}}),v),R.ExitRefineCutoutModeTest=(w=function(){this.actionSequence_ExitRefineCutoutMode=[],this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ExitRefineCutoutModeTest",ctor:w,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.frameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.frameForma_},populateActionSequence:function(t,e,o){var r;return(r=this.frameForma_)?E.CorePromise.resolve([function(){return new z.ExitRefineCutoutModeAction(r,!1)}]):E.CorePromise.reject("No frame")},prepareDocument:function(t,e){var o=this,r=I.clone(R.EnterRefineCutoutModeTest.prepareEnterRefineCutout(this.frameForma_));return r.push((function(){return new z.EnterRefineCutoutModeAction(o.frameForma_)})),E.CorePromise.resolve(r)}}}),w),R.ToggleRefineCutoutFullImageActionTest=(P=function(){this.actionSequence_ToggleRefineCutoutFullImage=[],this.frameForma_=null,q.ActionTestBase.call(this)},I.defineClass({name:"ToggleRefineCutoutFullImageActionTest",ctor:P,superName:"ActionTestBase",props:{tearDown:function(){this.frameForma_=null,q.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.frameForma_=I.as(I.last(this.allSelectableFormae(o,(function(t){return t.isImage()}))),b.FrameForma),null!=this.frameForma_},populateActionSequence:function(t,e,o){var r;return(r=this.frameForma_)?E.CorePromise.resolve([function(){return new J.NudgeAction(new tt.TheoPoint(10,0),[r])},function(){return new J.NudgeAction(new tt.TheoPoint(-10,0),[r])},function(){return new z.ToggleRefineCutoutFullImageAction(r)},function(){return new J.NudgeAction(new tt.TheoPoint(10,0),[r])},function(){return new J.NudgeAction(new tt.TheoPoint(-10,0),[r])}]):E.CorePromise.reject("No frame")},prepareDocument:function(t,e){var o;if(o=this.frameForma_){var r=I.clone(R.EnterRefineCutoutModeTest.prepareEnterRefineCutout(o));return r.push((function(){return new z.EnterRefineCutoutModeAction(o)})),E.CorePromise.resolve(r)}return E.CorePromise.reject("No frame")}}}),P)},md5b:function(t,e,o){var r,n,i,a,s=e,l=o("oAGj"),u=o("c9Jm"),c=o("yGNn"),h=o("Pil/"),m=o("pnSN"),f=o("H1Z2"),d=o("c+uM"),_=o("tGKA"),p=o("cRpU"),C=o("Vm85"),T=o("8t9B"),A=o("oKlP"),g=o("sIWg");s.MoveHandleTest=(r=function(){this.actionSequence_MoveHandle=[],this.formaToMove_=null,this.delta_=new A.TheoPoint(5,-5),this.initialBounds_=g.TheoRect.Zero,this.postMoveBounds_=g.TheoRect.Zero,u.ActionTestBase.call(this)},l.defineClass({name:"MoveHandleTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.formaToMove_=null,u.ActionTestBase.prototype.tearDown.call(this)},findFormaToMove:function(t){return l.last(this.allSelectableFormae(t,(function(t){return t instanceof m.GroupForma&&t.controller.kind==T.TypeLockupController.KIND})))},canRunActionSequence:function(t,e,o){return null!=this.findFormaToMove(o)},populateActionSequence:function(t,e,o){var r=this;return this.formaToMove_=this.findFormaToMove(o),XCTAssertNotNil(this.formaToMove_),null!=this.formaToMove_&&(o.controller.selection.replaceSelection(this.formaToMove_),this.initialBounds_=this.formaToMove_.finalFrame),c.CorePromise.resolve([function(){return new f.MoveHandleAction(r.formaToMove_,r.delta_,r.initialBounds_.center,1)}])},validateAfterActionSequence:function(t,e){this.postMoveBounds_=this.formaToMove_.finalFrame,XCTAssertFalse(this.postMoveBounds_.equal(this.initialBounds_))},validateAfterUndo:function(t,e){var o=this.formaToMove_.finalFrame;XCTAssertTrue(this.initialBounds_.equal(o))},validateAfterRedo:function(t,e){var o=this.formaToMove_.finalFrame;XCTAssertTrue(o.equal(this.postMoveBounds_))}}}),r),s.ResizeHandleTest=(n=function(){this.actionSequence_ResizeHandleTracking=[],this.actionSequence_ResizeHandleLeading=[],this.actionSequence_ResizeHandleCorner=[],this.formaToResize_=null,this.trackingSpot_=new A.TheoPoint(1,.5),this.leadingSpot_=new A.TheoPoint(.5,1),this.cornerSpot_=new A.TheoPoint(1,1),this.initialBounds_=g.TheoRect.Zero,this.postResizeBounds_=g.TheoRect.Zero,u.ActionTestBase.call(this)},l.defineClass({name:"ResizeHandleTest",ctor:n,superName:"ActionTestBase",props:{tearDown:function(){this.formaToResize_=null,u.ActionTestBase.prototype.tearDown.call(this)},findFormaToResize:function(t){return l.last(this.allSelectableFormae(t,(function(t){return t instanceof m.GroupForma&&t.controller.kind==T.TypeLockupController.KIND})))},canRunActionSequence:function(t,e,o){return null!=this.findFormaToResize(o)},populateActionSequence:function(t,e,o){var r=this;this.formaToResize_=this.findFormaToResize(o),XCTAssertNotNil(this.formaToResize_),null!=this.formaToResize_&&(o.controller.selection.replaceSelection(this.formaToResize_),this.initialBounds_=this.formaToResize_.finalFrame);var n=!1,i=this.cornerSpot_,a=new g.TheoRect(this.initialBounds_.minX,this.initialBounds_.minY,this.initialBounds_.minX+100,this.initialBounds_.minY+100);return"actionSequence_ResizeHandleTracking"==e?(i=this.trackingSpot_,n=!0):"actionSequence_ResizeHandleLeading"==e&&(i=this.leadingSpot_,n=!0),c.CorePromise.resolve([function(){return new f.ResizeHandleAction(r.formaToResize_,i,A.TheoPoint.ZERO,a,n)}])}}}),n),s.ResizeLockupHorizontallyTest=(i=function(){this.actionSequence_ResizeLockupWider_Right=[],this.actionSequence_ResizeLockupNarrower_Right=[],this.actionSequence_ResizeLockupWider_Left=[],this.actionSequence_ResizeLockupNarrower_Left=[],this.lockupForma_=null,this.initialFontSize_=0,this.initialBounds_=g.TheoRect.Zero,u.ActionTestBase.call(this)},l.defineClass({name:"ResizeLockupHorizontallyTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,u.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,o){return this.lockupForma_=l.last(this.allSelectableFormae(o,(function(t){return C.TextFacade.getLayoutForForma(t)==d.LockupLayout.Standard}))),null!=this.lockupForma_},prepareDocument:function(t,e){var o,r,n=[];if((o=this.lockupForma_)&&(r=t.controller)){var i=C.TextFacade.getAlignmentForForma(o),a=i==d.LockupAlignment.Right?d.LockupAlignment.Left:d.LockupAlignment.Right;r.selection.replaceSelection(o),n.push((function(){return new p.ChangeTextLayoutAndAlignmentAction(d.LockupLayout.Standard,a)})),n.push((function(){return new p.ChangeTextLayoutAndAlignmentAction(d.LockupLayout.Standard,i)}))}return c.CorePromise.resolve(n)},populateActionSequence:function(t,e,o){var r,n,i;if((r=this.lockupForma_)&&(n=r.bounds)&&(i=o.controller)){this.initialFontSize_=this.getFontSize();var a=e.includes("Right")?new A.TheoPoint(1,.5):new A.TheoPoint(0,.5),s=e.includes("Right")?new A.TheoPoint(0,.5):new A.TheoPoint(1,.5),u=e.includes("Wider")?n.width+100:Math.max(n.width-100,20),m=g.TheoRect.fromXYWH(n.minX,n.minY,u,n.height);return this.initialBounds_=n,i.selection.replaceSelection(r),l.opt(r.controller,(function(t){return t.onEvent(new h.BeginFormaResizeEvent(r,a))})),c.CorePromise.resolve([function(){return new f.ResizeHandleAction(r,a,s,m)}])}return XCTAssertFalse(!0),c.CorePromise.reject(null)},getFontSize:function(){var t;return(t=l.opt(l.as(l.opt(this.lockupForma_,(function(t){return t.controller})),T.TypeLockupController),(function(t){return t.getCurrentFontSize()})))||null!=t?t:0},validateAfterActionSequence:function(t,e){var o;(o=l.opt(this.lockupForma_,(function(t){return t.bounds})))?(e.includes("Wider")?XCTAssertTrue(o.width>=this.initialBounds_.width-.01):XCTAssertTrue(o.width<=this.initialBounds_.width+.01),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)},validateAfterUndo:function(t,e){var o;(o=l.opt(this.lockupForma_,(function(t){return t.bounds})))?(XCTAssertEqual(o.width,this.initialBounds_.width),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)},validateAfterRedo:function(t,e){var o;(o=l.opt(this.lockupForma_,(function(t){return t.bounds})))?(e.includes("Wider")?XCTAssertTrue(o.width>=this.initialBounds_.width-.01):XCTAssertTrue(o.width<=this.initialBounds_.width+.01),XCTAssertEqual(this.getFontSize(),this.initialFontSize_,.01)):XCTAssertFalse(!0)}}}),i),s.RotateHandleTest=(a=function(){this.actionSequence_RotateHandle=[],this.formaToRotate_=null,this.delta_=new A.TheoPoint(5,-5),this.initialPlacement_=_.Matrix2D.Identity,this.postRotatePlacement_=_.Matrix2D.Identity,u.ActionTestBase.call(this)},l.defineClass({name:"RotateHandleTest",ctor:a,superName:"ActionTestBase",props:{tearDown:function(){this.formaToRotate_=null,u.ActionTestBase.prototype.tearDown.call(this)},findFormaToRotate:function(t){return l.last(this.allSelectableFormae(t,(function(t){return t instanceof m.GroupForma&&t.controller.kind==T.TypeLockupController.KIND&&1==t.placement.transformValues.rotCosine})))},canRunActionSequence:function(t,e,o){return null!=this.findFormaToRotate(o)},populateActionSequence:function(t,e,o){var r=this;this.formaToRotate_=this.findFormaToRotate(o),XCTAssertNotNil(this.formaToRotate_);var n=A.TheoPoint.ZERO;return null!=this.formaToRotate_&&(o.controller.selection.replaceSelection(this.formaToRotate_),this.initialPlacement_=this.formaToRotate_.placement,n=this.formaToRotate_.frame.center),c.CorePromise.resolve([function(){return new f.RotateHandleAction(r.formaToRotate_,Math.PI/4,n,r.initialPlacement_,!0)}])},validateAfterActionSequence:function(t,e){this.postRotatePlacement_=this.formaToRotate_.placement,XCTAssertTrue(Math.abs(this.postRotatePlacement_.transformValues.rotCosine-.707)<.01),XCTAssertTrue(Math.abs(this.postRotatePlacement_.transformValues.rotSine-.707)<.01)},validateAfterUndo:function(t,e){var o=this.formaToRotate_.placement;XCTAssertTrue(this.initialPlacement_.equal(o))},validateAfterRedo:function(t,e){var o=this.formaToRotate_.placement;XCTAssertTrue(o.equal(this.postRotatePlacement_))}}}),a)},qWkq:function(t,e,o){var r,n,i=e,a=o("oAGj"),s=o("c9Jm"),l=o("yGNn"),u=o("FNB+"),c=o("y/On"),h=o("9Lk3"),m=o("6Rk9"),f=o("sIWg");i.GroupTest=(r=function(){this.actionSequence_Group=[function(){return new c.GroupAction}],this.formaeToGroup_=[],this.initialBounds_=f.TheoRect.Zero,this.testDoc_=null,s.ActionTestBase.call(this)},a.defineClass({name:"GroupTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,o){this.formaeToGroup_=a.clone(this.allSelectableFormae(o,(function(t){return 1==t.controller.floating}))),XCTAssertNotNil(this.formaeToGroup_),this.testDoc_=o,this.formaeToGroup_.length>1&&(o.controller.selection.replaceSelectionWithFormae(this.formaeToGroup_),this.initialBounds_=m.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0))},validateAfterActionSequence:function(t,e){this.validateGrouping(!0)},validateAfterUndo:function(t,e){var o,r=m.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);XCTAssertTrue(this.initialBounds_.equal(r));for(var n=a.iter(this.formaeToGroup_);!n.done;n.next()){var i=n.value;XCTAssertFalse(i.controller.userGroupMember),XCTAssertTrue(i.parent.controller.kind==h.GridController.KIND)}if(this.formaeToGroup_.length>1){var s=!1;a.opt(this.formaeToGroup_[0].root,(function(t){return t.visitAll(u.FormaTraversal.PreOrder,(function(t){((o=a.opt(t.controller,(function(t){return t.userGroupMember})))||null!=o)&&o&&(s=!0)}))})),XCTAssertFalse(s)}},validateAfterRedo:function(t,e){this.validateGrouping(!1)},validateGrouping:function(t){var e=m.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);if(XCTAssertTrue(this.initialBounds_.equalWithAccuracy(e,.01)),this.formaeToGroup_.length>1){var o=this.formaeToGroup_[0].parent;XCTAssertTrue(o.controller.userGroup);for(var r=a.iter(this.formaeToGroup_);!r.done;r.next()){var n=r.value;XCTAssertTrue(n.controller.userGroupChild),XCTAssertTrue(n.parent==o)}if(t){XCTAssertTrue(1==this.testDoc_.controller.selection.selectedCountInDocument);var i=this.testDoc_.controller.selection.formaAt(0);XCTAssertTrue(i.controller.userGroup)}}},tearDown:function(){this.formaeToGroup_=[],s.ActionTestBase.prototype.tearDown.call(this)}}}),r),i.UngroupTest=(n=function(){this.actionSequence_Ungroup=[function(){return new c.UngroupAction}],this.formaeToGroup_=[],this.initialBounds_=f.TheoRect.Zero,this.root_=null,this.testDoc_=null,s.ActionTestBase.call(this)},a.defineClass({name:"UngroupTest",ctor:n,superName:"ActionTestBase",props:{prepareDocument:function(t,e){this.root_=t.firstPage.root,this.formaeToGroup_=a.clone(this.allSelectableFormae(t,(function(t){return 1==t.controller.floating}))),XCTAssertNotNil(this.formaeToGroup_),this.formaeToGroup_.length>0&&(t.controller.selection.replaceSelectionWithFormae(this.formaeToGroup_),this.initialBounds_=m.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0));var o=[function(){return new c.GroupAction}];return l.CorePromise.resolve(o)},setUpActionSequence:function(t,e,o){this.testDoc_=o},validateAfterActionSequence:function(t,e){this.validateNoGrouping(!0)},validateAfterUndo:function(t,e){this.validateGrouping()},validateAfterRedo:function(t,e){this.validateNoGrouping(!1)},validateGrouping:function(){if(this.formaeToGroup_.length>1){var t=this.formaeToGroup_[0].parent;XCTAssertTrue(t.controller.userGroup);for(var e=a.iter(this.formaeToGroup_);!e.done;e.next()){var o=e.value;XCTAssertTrue(o.controller.userGroupChild),XCTAssertTrue(o.parent==t)}}},validateNoGrouping:function(t){var e,o=m.GeometryFacade.getFormaeBounds(this.formaeToGroup_,!0);XCTAssertTrue(this.initialBounds_.equalWithAccuracy(o,.01));for(var r=a.iter(this.formaeToGroup_);!r.done;r.next()){var n=r.value;XCTAssertFalse(n.controller.userGroupMember),XCTAssertTrue(n.parent.controller.kind==h.GridController.KIND)}if(this.formaeToGroup_.length>1){var i=!1;a.opt(this.formaeToGroup_[0].root,(function(t){return t.visitAll(u.FormaTraversal.PreOrder,(function(t){((e=a.opt(t.controller,(function(t){return t.userGroupMember})))||null!=e)&&e&&(i=!0)}))})),XCTAssertFalse(i),t&&XCTAssertTrue(this.testDoc_.controller.selection.selectedCountInDocument==this.formaeToGroup_.length)}},tearDown:function(){this.formaeToGroup_=[],this.root_=null,s.ActionTestBase.prototype.tearDown.call(this)}}}),n)}}]);
//# sourceMappingURL=vendors_npm_spark_f640fb04-a7be3a60.js.map