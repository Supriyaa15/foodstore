(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[22],{"+N83":function(t,e,n){var o,i,r,a=e,s=n("oAGj"),l=n("c9Jm"),u=n("yGNn"),c=n("jo4Y"),h=n("lmwz");a.DeleteImagesTest=(o=function(){this.actionSequence_Delete=[],this.page_=null,this.backgroundImages_=[],l.ActionTestBase.call(this)},s.defineClass({name:"DeleteImagesTest",ctor:o,superName:"ActionTestBase",props:{tearDown:function(){this.backgroundImages_=[],l.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return h.ImageFacade.getBackgroundImagesFromPage(n.firstPage).length>0},populateActionSequence:function(t,e,n){var o=this,i=s.clone(t);return this.backgroundImages_=s.clone(h.ImageFacade.getBackgroundImagesFromPage(n.firstPage)),this.backgroundImages_.length>0&&(i=i.concat([function(){return new c.DeleteAction(o.backgroundImages_)}])),u.CorePromise.resolve(i)},setUpActionSequence:function(t,e,n){this.page_=n.firstPage},validateAfterActionSequence:function(t,e){var n=s.clone(h.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(n.length,0)},validateAfterUndo:function(t,e){var n=s.clone(h.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(n.length,this.backgroundImages_.length)},validateAfterRedo:function(t,e){var n=s.clone(h.ImageFacade.getBackgroundImagesFromPage(this.page_));XCTAssertEqual(n.length,0)}}}),o),a.DeleteCellsTest=(i=function(){this.actionSequence_Delete=[],this.doc_=null,this.frameCells_=[],this.deleteableCells_=[],this.expectedRemainingCells_=0,l.ActionTestBase.call(this)},s.defineClass({name:"DeleteCellsTest",ctor:i,superName:"ActionTestBase",props:{tearDown:function(){this.frameCells_=[],this.deleteableCells_=[],l.ActionTestBase.prototype.tearDown.call(this)},getFrameCells:function(t){return this.allSelectableFormae(t,(function(t){return t.isGridCell()}))},deleteableFrameCells:function(t){var e;return this.getFrameCells(t).filter((function(t){return!(!(e=s.opt(t.controller,(function(t){return t.deleteable})))&&null==e)&&e}),this)},canRunActionSequence:function(t,e,n){var o=this.getFrameCells(n).length,i=this.deleteableFrameCells(n).length;return o>i&&i>0||i>1},populateActionSequence:function(t,e,n){var o=this,i=s.clone(t);this.frameCells_=s.clone(this.getFrameCells(n)),this.deleteableCells_=s.clone(this.deleteableFrameCells(n)),this.deleteableCells_.length==this.frameCells_.length&&this.deleteableCells_.splice(0,1),this.expectedRemainingCells_=this.frameCells_.length-this.deleteableCells_.length;for(var r=s.iter(s.range(1,this.deleteableCells_.length,!0));!r.done;r.next())i=i.concat([function(){var t=s.clone(o.deleteableFrameCells(o.doc_));return new c.DeleteAction([s.first(t)])}]);return u.CorePromise.resolve(i)},setUpActionSequence:function(t,e,n){this.doc_=n},validateAfterActionSequence:function(t,e){var n=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(n.length,this.expectedRemainingCells_)},validateAfterUndo:function(t,e){var n=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(n.length,this.frameCells_.length)},validateAfterRedo:function(t,e){var n=s.clone(this.getFrameCells(this.doc_));XCTAssertEqual(n.length,this.expectedRemainingCells_)}}}),i),a.DeleteItemsTest=(r=function(){this.actionSequence_Delete=[],this.doc_=null,this.floatingItems_=[],l.ActionTestBase.call(this)},s.defineClass({name:"DeleteItemsTest",ctor:r,superName:"ActionTestBase",props:{tearDown:function(){this.floatingItems_=[],l.ActionTestBase.prototype.tearDown.call(this)},getDeletableForma:function(t){return s.clone(this.allSelectableFormae(t,(function(t){return t.controller.canMultiSelect})))},populateActionSequence:function(t,e,n){var o=this,i=s.clone(t);return this.floatingItems_=s.clone(this.getDeletableForma(n)),this.floatingItems_.length>0&&(i=i.concat([function(){return new c.DeleteAction(o.floatingItems_)}])),u.CorePromise.resolve(i)},setUpActionSequence:function(t,e,n){this.doc_=n},validateAfterActionSequence:function(t,e){var n=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(n.length,0)},validateAfterUndo:function(t,e){var n=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(n.length,this.floatingItems_.length)},validateAfterRedo:function(t,e){var n=s.clone(this.getDeletableForma(this.doc_));XCTAssertEqual(n.length,0)}}}),r)},ALtN:function(t,e,n){var o,i=e,r=n("oAGj"),a=n("cZuM"),s=n("lbYW"),l=n("c9Jm"),u=n("6Rk9"),c=n("sIWg");i.AlignTest=(o=function(){this.actionSequence_AlignRightAndBottom=[function(){return new s.AlignFormaeAction(a.AlignmentType.Right)},function(){return new s.AlignFormaeAction(a.AlignmentType.Bottom)}],this.formaeToAlign_=[],this.initialBounds_=c.TheoRect.Zero,this.postAlignBounds_=c.TheoRect.Zero,this.epsilon=1e-8,l.ActionTestBase.call(this)},r.defineClass({name:"AlignTest",ctor:o,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){var o=u.GeometryFacade.getFormaeBounds([n.firstPage.root],!0);this.formaeToAlign_=r.clone(this.allSelectableFormae(n,(function(t){return 1==t.controller.floating&&o.contains(u.GeometryFacade.getFormaeBounds([t],!0))}))),XCTAssertNotNil(this.formaeToAlign_),this.formaeToAlign_.length>0&&(n.controller.selection.replaceSelectionWithFormae(this.formaeToAlign_),this.initialBounds_=u.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0))},validateAfterActionSequence:function(t,e){this.postAlignBounds_=u.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0),this.validatePostAlignmentRightAndBottom()},validateAfterUndo:function(t,e){var n=u.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0);XCTAssertTrue(this.initialBounds_.equal(n))},validateAfterRedo:function(t,e){this.postAlignBounds_=u.GeometryFacade.getFormaeBounds(this.formaeToAlign_,!0),this.validatePostAlignmentRightAndBottom()},validatePostAlignmentRightAndBottom:function(){for(var t=r.iter(this.formaeToAlign_);!t.done;t.next()){var e=t.value,n=this.postAlignBounds_.evalXY(1,1),o=u.GeometryFacade.getFormaeBounds([e],!0).evalXY(1,1);XCTAssertTrue(n.equalWithAccuracy(o,this.epsilon))}},tearDown:function(){this.formaeToAlign_=[],l.ActionTestBase.prototype.tearDown.call(this)}}}),o)},CSb8:function(t,e,n){var o,i=e,r=n("oAGj"),a=n("c9Jm"),s=n("yGNn"),l=n("pjjd"),u=n("FNB+"),c=n("pnSN"),h=n("8t9B");i.DuplicateTest=(o=function(){this.actionSequence_DuplicateAllText=[],this.doc_=null,this.initialCounts_={},a.ActionTestBase.call(this)},r.defineClass({name:"DuplicateTest",ctor:o,superName:"ActionTestBase",props:{tearDown:function(){this.initialCounts_={},a.ActionTestBase.prototype.tearDown.call(this)},countDuplicates:function(t){var e,n=0;return(e=r.as(t.controller,h.TypeLockupController))&&r.opt(this.doc_,(function(t){return t.firstPage.root.visit(u.FormaTraversal.PreOrder,(function(t,o,i){var a,s;return(a=r.as(t,c.GroupForma))&&(s=r.as(a.controller,h.TypeLockupController))&&s.text==e.text&&(n+=1),!1}))})),n},populateActionSequence:function(t,e,n){for(var o=r.clone(this.allSelectableFormae(n,(function(t){return t instanceof c.GroupForma&&t.controller.kind==h.TypeLockupController.KIND}))),i=r.iter(o);!i.done;i.next()){var a=i.value;this.initialCounts_[a]=1}return s.CorePromise.resolve([function(){return new l.DuplicateAction(o,!0,!1,!1)}])},setUpActionSequence:function(t,e,n){for(var o=r.iter(r.keys(this.initialCounts_));!o.done;o.next()){var i=o.value;this.initialCounts_[i]=this.countDuplicates(i)}},validateAfterActionSequence:function(t,e){for(var n=r.iter(r.keys(this.initialCounts_));!n.done;n.next()){var o=n.value;XCTAssertTrue(this.countDuplicates(o)==2*this.initialCounts_[o])}},validateAfterUndo:function(t,e){for(var n=r.iter(r.keys(this.initialCounts_));!n.done;n.next()){var o=n.value;XCTAssertTrue(this.countDuplicates(o)==this.initialCounts_[o])}},validateAfterRedo:function(t,e){for(var n=r.iter(r.keys(this.initialCounts_));!n.done;n.next()){var o=n.value;XCTAssertTrue(this.countDuplicates(o)==2*this.initialCounts_[o])}}}}),o)},QO3H:function(t,e,n){var o,i,r,a,s,l,u,c,h,A,d,f,m,_,p,T,g,C,S,v,F=e,E=n("oAGj"),R=n("Tq01"),D=n("KgU+"),y=n("KSe6"),k=n("VQVe"),B=n("c9Jm"),L=n("yGNn");F.AnimateTest=(o=function(){this.actionSequence_Animation=[],this.testDoc_=null,this.testPage_=null,this.initialAnimationStyle_=null,this.initialAnimationVariant_=null,this.appliedAnimationStyle_=null,B.ActionTestBase.call(this)},E.defineClass({name:"AnimateTest",ctor:o,superName:"ActionTestBase",props:{shuffledAnimationStyle_:{get:function(){return E.opt(E.as(this.getActionResult(0),R.AnimationStyleActionResult),(function(t){return t.style}))}},tearDown:function(){this.initialAnimationStyle_=null,this.appliedAnimationStyle_=null,B.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(t,e,n){var o=this;if(this.testDoc_=n,this.testPage_=n.firstPage,this.initialAnimationStyle_=n.firstPage.animationController.animationStyle,this.initialAnimationVariant_=E.opt(this.initialAnimationStyle_,(function(t){return t.variant})),null!=this.initialAnimationStyle_)return L.CorePromise.resolve(t.concat([function(){return new D.ShuffleAnimationStyleAction(o.initialAnimationStyle_,o.testPage_)},function(){return new D.ApplyAnimationStyleAction(o.shuffledAnimationStyle_,o.testPage_)}]));var i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(this.testPage_.root));return i.length>1?(this.appliedAnimationStyle_=E.last(i),null==this.appliedAnimationStyle_&&XCTAssertNotEqual(this.appliedAnimationStyle_,null),L.CorePromise.resolve(t.concat([function(){return new D.ApplyAnimationStyleAction(o.appliedAnimationStyle_,o.testPage_)}]))):(XCTFail("Could not get style for AnimateTest"),L.CorePromise.resolve([]))},validateAfterActionSequence:function(t,e){if(null!=this.initialAnimationStyle_){var n=(r=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant,o=r.variantCount,i=this.testPage_.animationLibrary.getNextAnimationStyleOfSameType(this.initialAnimationStyle_);XCTAssertEqual(i.name,this.initialAnimationStyle_.name),XCTAssertEqual(r.name,this.initialAnimationStyle_.name),XCTAssertEqual(n,this.initialAnimationVariant_+1%o)}else if(null!=this.appliedAnimationStyle_){var r;n=(r=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant,XCTAssertEqual(r.name,this.appliedAnimationStyle_.name),XCTAssertEqual(n,0)}},validateAfterUndo:function(t,e){if(null!=this.initialAnimationStyle_){var n=(o=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant;XCTAssertEqual(o.name,this.initialAnimationStyle_.name),XCTAssertEqual(n,this.initialAnimationVariant_)}else if(null!=this.appliedAnimationStyle_){var o=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}));XCTAssertEqual(o,null)}},validateAfterRedo:function(t,e){if(null!=this.initialAnimationStyle_){var n=(r=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant,o=r.variantCount,i=this.testPage_.animationLibrary.getNextAnimationStyleOfSameType(this.initialAnimationStyle_);XCTAssertEqual(i.name,this.initialAnimationStyle_.name),XCTAssertEqual(r.name,this.initialAnimationStyle_.name),XCTAssertEqual(n,this.initialAnimationVariant_+1%o)}else if(null!=this.appliedAnimationStyle_){var r;n=(r=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant,XCTAssertEqual(r.name,this.appliedAnimationStyle_.name),XCTAssertEqual(n,0)}}}}),o),F.AnimationTestBase=(i=function(){this.testDoc_=null,this.testPage_=null,this.initialAnimationStyle_=null,this.initialAnimationVariant_=null,this.appliedAnimationStyle_=null,this.appliedAnimationVariant_=0,B.ActionTestBase.call(this)},E.defineClass({name:"AnimationTestBase",ctor:i,superName:"ActionTestBase",props:{shuffledAnimationStyle_:{get:function(){return E.opt(E.as(this.getActionResult(0),R.AnimationStyleActionResult),(function(t){return t.style}))}},tearDown:function(){this.initialAnimationStyle_=null,this.appliedAnimationStyle_=null,B.ActionTestBase.prototype.tearDown.call(this)},setAnimation:function(){},populateActionSequence:function(t,e,n){var o=this;return this.testDoc_=n,this.testPage_=n.firstPage,this.initialAnimationStyle_=n.firstPage.animationController.animationStyle,this.initialAnimationVariant_=E.opt(this.initialAnimationStyle_,(function(t){return t.variant})),this.setAnimation(),null==this.appliedAnimationStyle_&&XCTAssertNotEqual(this.appliedAnimationStyle_,null),L.CorePromise.resolve([function(){return new D.ApplyAndPrepareAnimationAction(o.appliedAnimationStyle_,o.testPage_)}])},validateAfterActionSequence:function(t,e){if(null!=this.appliedAnimationStyle_){var n=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle})),o=n.variant;XCTAssertEqual(n.name,this.appliedAnimationStyle_.name),XCTAssertEqual(o,this.appliedAnimationVariant_)}},validateAfterUndo:function(t,e){if(null!=this.initialAnimationStyle_){var n=(o=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}))).variant;XCTAssertEqual(o.name,this.initialAnimationStyle_.name),XCTAssertEqual(n,this.initialAnimationVariant_)}else if(null!=this.appliedAnimationStyle_){var o=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle}));XCTAssertEqual(o,null)}},validateAfterRedo:function(t,e){if(null!=this.appliedAnimationStyle_){var n=E.opt(this.testPage_,(function(t){return t.animationController.animationStyle})),o=n.variant;XCTAssertEqual(n.name,this.appliedAnimationStyle_.name),XCTAssertEqual(o,this.appliedAnimationVariant_)}}}}),i),F.AnimationLetterTest=(r=function(){this.actionSequence_AnimationLetter=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationLetterTest",ctor:r,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_TYPE)return this.appliedAnimationStyle_=r,!0}return!1}}}),r),F.AnimationLetterRandomTest=(a=function(){this.actionSequence_AnimationLetterRandom=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationLetterRandomTest",ctor:a,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=this,i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),r=E.iter(i);!r.done;r.next()){var a=r.value;if(a.name==k.AnimationStyle.NAME_TYPE)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,E.opt(this.appliedAnimationStyle_,(function(t){return t.variant=o.appliedAnimationVariant_})),!0}return!1}}}),a),F.AnimationLetterFlickerTest=(s=function(){this.actionSequence_AnimationLetterFlicker=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationLetterFlickerTest",ctor:s,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=this,i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),r=E.iter(i);!r.done;r.next()){var a=r.value;if(a.name==k.AnimationStyle.NAME_FLICKER)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,E.opt(this.appliedAnimationStyle_,(function(t){return t.variant=o.appliedAnimationVariant_})),!0}return!1}}}),s),F.AnimationFlickerTest=(l=function(){this.actionSequence_AnimationFlicker=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationFlickerTest",ctor:l,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_FLICKER)return this.appliedAnimationStyle_=r,!0}return!1}}}),l),F.AnimationGrowTest=(u=function(){this.actionSequence_AnimationGrow=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationGrowTest",ctor:u,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_GROW)return this.appliedAnimationStyle_=r,!0}return!1}}}),u),F.AnimationFadeTest=(c=function(){this.actionSequence_AnimationFade=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationFadeTest",ctor:c,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_FADE)return this.appliedAnimationStyle_=r,!0}return!1}}}),c),F.AnimationDynamicZoomTest=(h=function(){this.actionSequence_AnimationDynamicZoom=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationDynamicZoomTest",ctor:h,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=r,!0}return!1}}}),h),F.AnimationDynamicCenterTest=(A=function(){this.actionSequence_AnimationDynamicCenter=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationDynamicCenterTest",ctor:A,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=this,i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),r=E.iter(i);!r.done;r.next()){var a=r.value;if(a.name==k.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=1,E.opt(this.appliedAnimationStyle_,(function(t){return t.variant=o.appliedAnimationVariant_})),!0}return!1}}}),A),F.AnimationDynamicTwoTest=(d=function(){this.actionSequence_AnimationDynamicTwo=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationDynamicTwoTest",ctor:d,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=this,i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),r=E.iter(i);!r.done;r.next()){var a=r.value;if(a.name==k.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=2,E.opt(this.appliedAnimationStyle_,(function(t){return t.variant=o.appliedAnimationVariant_})),!0}return!1}}}),d),F.AnimationDynamicThreeTest=(f=function(){this.actionSequence_AnimationDynamicThree=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationDynamicThreeTest",ctor:f,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=this,i=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),r=E.iter(i);!r.done;r.next()){var a=r.value;if(a.name==k.AnimationStyle.NAME_DYNAMIC)return this.appliedAnimationStyle_=a,this.appliedAnimationVariant_=3,E.opt(this.appliedAnimationStyle_,(function(t){return t.variant=o.appliedAnimationVariant_})),!0}return!1}}}),f),F.AnimationColorSwapOneTest=(m=function(){this.actionSequence_AnimationColorSwapOne=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationColorSwapOneTest",ctor:m,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_COLORSWAP)return this.appliedAnimationStyle_=r,!0}return!1}}}),m),F.AnimationSlideTest=(_=function(){this.actionSequence_AnimationSlide=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationSlideTest",ctor:_,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_SLIDE)return this.appliedAnimationStyle_=r,!0}return!1}}}),_),F.AnimationZoomTest=(p=function(){this.actionSequence_AnimationZoom=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationZoomTest",ctor:p,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_ZOOM)return this.appliedAnimationStyle_=r,!0}return!1}}}),p),F.AnimationPanTest=(T=function(){this.actionSequence_AnimationPan=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationPanTest",ctor:T,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_PAN)return this.appliedAnimationStyle_=r,!0}return!1}}}),T),F.AnimationGrayscaleTest=(g=function(){this.actionSequence_AnimationGrayscale=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationGrayscaleTest",ctor:g,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_GRAYSCALE)return this.appliedAnimationStyle_=r,!0}return!1}}}),g),F.AnimationPhotoBlurTest=(C=function(){this.actionSequence_AnimationPhotoBlur=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationPhotoBlurTest",ctor:C,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_BLUR)return this.appliedAnimationStyle_=r,!0}return!1}}}),C),F.AnimationColorizeTest=(S=function(){this.actionSequence_AnimationColorize=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationColorizeTest",ctor:S,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_COLOR)return this.appliedAnimationStyle_=r,!0}return!1}}}),S),F.AnimationFillTest=(v=function(){this.actionSequence_AnimationFill=[],F.AnimationTestBase.call(this)},E.defineClass({name:"AnimationFillTest",ctor:v,superName:"AnimationTestBase",props:{canRunActionSequence:function(t,e,n){for(var o=E.clone(y.AnimationLibrary.getDisplayableAnimationStyles(n.firstPage.root)),i=E.iter(o);!i.done;i.next()){var r=i.value;if(r.name==k.AnimationStyle.NAME_FILL)return this.appliedAnimationStyle_=r,!0}return!1}}}),v)},WR9q:function(t,e,n){var o,i,r=e,a=n("oAGj"),s=n("O8XL"),l=n("lbYW"),u=n("c9Jm"),c=n("FNB+"),h=n("6Rk9"),A=n("sIWg");r.DistributeTest=(o=function(){this.actionSequence_Distribute=[function(){return new l.DistributeFormaeAction(s.DistributeType.LeftEdge)},function(){return new l.DistributeFormaeAction(s.DistributeType.TopEdge)}],this.formaeToDistribute_=[],this.initialBounds_=A.TheoRect.Zero,this.postDistributeBounds_=A.TheoRect.Zero,this.epsilon=.001,u.ActionTestBase.call(this)},a.defineClass({name:"DistributeTest",ctor:o,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){var o=h.GeometryFacade.getFormaeBounds([n.firstPage.root],!0);return this.allSelectableFormae(n,(function(t){return 1==t.controller.floating&&o.contains(h.GeometryFacade.getFormaeBounds([t],!0))})).length>2},setUpActionSequence:function(t,e,n){var o=h.GeometryFacade.getFormaeBounds([n.firstPage.root],!0);this.formaeToDistribute_=a.clone(this.allSelectableFormae(n,(function(t){return 1==t.controller.floating&&o.contains(h.GeometryFacade.getFormaeBounds([t],!0))}))),XCTAssertNotNil(this.formaeToDistribute_),this.formaeToDistribute_.length>0&&(n.controller.selection.replaceSelectionWithFormae(this.formaeToDistribute_),this.initialBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0))},validateAfterActionSequence:function(t,e){this.postDistributeBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0),this.validatePostDistributeLeftAndTop()},validateAfterUndo:function(t,e){var n=h.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0);XCTAssertTrue(this.initialBounds_.equal(n))},validateAfterRedo:function(t,e){this.postDistributeBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToDistribute_,!0),this.validatePostDistributeLeftAndTop()},validatePostDistributeLeftAndTop:function(){for(var t=a.iter(this.formaeToDistribute_);!t.done;t.next()){var e=t.value,n=h.GeometryFacade.getFormaeBounds([e],!0).evalXY(0,0);XCTAssertTrue(this.postDistributeBounds_.containsPoint(n))}},tearDown:function(){this.formaeToDistribute_=[],u.ActionTestBase.prototype.tearDown.call(this)}}}),o),r.ArrangeTest=(i=function(){this.actionSequence_Distribute=[function(){return new l.ArrangeFormaeAction(!0)}],this.formaeToArrange_=[],this.initialBounds_=A.TheoRect.Zero,this.postArrangeBounds_=A.TheoRect.Zero,u.ActionTestBase.call(this)},a.defineClass({name:"ArrangeTest",ctor:i,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){var o=h.GeometryFacade.getFormaeBounds([n.firstPage.root],!0);this.formaeToArrange_=a.clone(this.allSelectableFormae(n,(function(t){return 1==t.controller.floating&&o.contains(h.GeometryFacade.getFormaeBounds([t],!0))}))),XCTAssertNotNil(this.formaeToArrange_),this.formaeToArrange_.length>0&&(n.controller.selection.replaceSelectionWithFormae(this.formaeToArrange_),this.initialBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0))},validateAfterActionSequence:function(t,e){this.postArrangeBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0),this.validatePostArrangeRow()},validateAfterUndo:function(t,e){var n=h.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0);XCTAssertTrue(this.initialBounds_.equal(n))},validateAfterRedo:function(t,e){this.postArrangeBounds_=h.GeometryFacade.getFormaeBounds(this.formaeToArrange_,!0),this.validatePostArrangeRow()},validatePostArrangeRow:function(){var t=a.clone(this.sortInRowOrder(this.formaeToArrange_));if(t.length>0){var e=a.first(t),n=h.GeometryFacade.getFormaeBounds([e],!0).evalXY(0,0).x;XCTAssertTrue(this.postArrangeBounds_.minX==n);for(var o=a.iter(t);!o.done;o.next()){var i=o.value,r=h.GeometryFacade.getFormaeBounds([i],!0).evalXY(0,0);XCTAssertTrue(r.x>n||a.eq(c._equality_Forma_Forma,i,e))}}},sortInRowOrder:function(t){var e=a.clone(t);return a.sortInPlace(e,(function(t,e){var n=h.GeometryFacade.getFormaeBounds([t],!0),o=h.GeometryFacade.getFormaeBounds([e],!0);return n.minX<o.minX})),e},tearDown:function(){this.formaeToArrange_=[],u.ActionTestBase.prototype.tearDown.call(this)}}}),i)},c9Jm:function(t,e,n){var o,i,r,a,s,l=e,u=n("oAGj"),c=n("Tq01"),h=n("kYI4"),A=n("yvDn"),d=n("yGNn"),f=n("C42b"),m=n("iCxV"),_=n("3lr5"),p=n("sRQj"),T=n("jcfx"),g=n("umUn"),C=n("VJ9E");l.ActionTestBase=(o=function(){this.canRun_=!0,this.runningSequenceName_="",this.qualifiedSequenceName_="",this.completePath_="",this.path_="",this.undoToIndex_=0,this.performanceFilename="performance.json",this.validationState_=new l.ValidationState,this.prepResults_=[],this.actionResults_=[],this.synchronizer=null,this.FAKE_COLOR_ELEMENT_PRIMARY_ID="themeColor0",this.FAKE_COLOR_ELEMENT_SECONDARY_ID1="themeColor1",this.FAKE_COLOR_ELEMENT_SECONDARY_ID2="themeColor2",this.FAKE_COLOR_ELEMENT_SHADE_ID0="themeColor3",this.FAKE_COLOR_ELEMENT_SHADE_ID1="themeColor4",this.FAKE_COLOR_ELEMENT_SHADE_ID2="themeColor5",this.FAKE_COLOR_ELEMENT_SHADE_ID3="themeColor6",this.FAKE_COLOR_ELEMENT_SHADE_ID4="themeColor7",this.FAKE_COLOR_ELEMENT_SHADE_ID5="themeColor8",this.FAKE_COLOR_ELEMENT_SHADE_ID6="themeColor9",this.FAKE_LOGO_ELEMENT_PRIMARY_ID="logo-001",this.FAKE_LOGO_ELEMENT_STAMP_ID="logo-002",this.FAKE_FONT_ELEMENT_HEADLINE_ID="fnt-001",this.FAKE_FONT_ELEMENT_BODY_ID="fnt-002",this.FAKE_COLOR_ELEMENT_PRIMARY_ID_2="themeColor0-2",this.FAKE_COLOR_ELEMENT_SECONDARY_ID1_2="themeColor1-2",this.FAKE_COLOR_ELEMENT_SECONDARY_ID2_2="themeColor2-2",this.FAKE_COLOR_ELEMENT_SHADE_ID0_2="themeColor3-2",this.FAKE_COLOR_ELEMENT_SHADE_ID1_2="themeColor4-2",this.FAKE_COLOR_ELEMENT_SHADE_ID2_2="themeColor5-2",this.FAKE_COLOR_ELEMENT_SHADE_ID3_2="themeColor6-2",this.FAKE_COLOR_ELEMENT_SHADE_ID4_2="themeColor7-2",this.FAKE_COLOR_ELEMENT_SHADE_ID5_2="themeColor8-2",this.FAKE_COLOR_ELEMENT_SHADE_ID6_2="themeColor9-2",this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2="logo-001-2",this.FAKE_LOGO_ELEMENT_STAMP_ID_2="logo-002-2",this.FAKE_FONT_ELEMENT_HEADLINE_ID_2="fnt-001-2",this.FAKE_FONT_ELEMENT_BODY_ID_2="fnt-002-2"},u.defineClass({name:"ActionTestBase",ctor:o,statics:{renderPerformanceData:{},actionPerformanceData:{},undoPerformanceData:{},redoPerformanceData:{}},props:{lastActionResult:{get:function(){return u.last(this.actionResults_)}},appendActionResult:function(t){this.actionResults_.push(t)},getActionResult:function(t){return t>=0&&t<this.actionResults_.length?this.actionResults_[t]:null},getPrepActionResult:function(t){return t>=0&&t<this.prepResults_.length?this.prepResults_[t]:null},testName:{get:function(){return"ActionTest:"+this.path_+"::"+this.runningSequenceName_}},initializeDocPath:function(t){this.completePath_=t,this.path_=u.toString(u.last(t.split("/")))},initializeTestParameters:function(t,e,n){this.runningSequence_=u.clone(t),this.runningSequenceName_=e,this.qualifiedSequenceName_=n},setUp:function(){var t=this;this.doc_=u.opt(m.Host.actionTesting,(function(e){return e.openDocument(t.completePath_)}))},tearDown:function(){var t=this;this.prepareSequence_=null,this.runningSequence_=null,this.prepResults_=[],this.actionResults_=[],u.opt(m.Host.actionTesting,(function(e){return e.closeDocument(t.completePath_)}))},validateActionSequence:function(){var t=this,e=this.nextValidationState();u.opt(m.Host.actionTesting,(function(n){return n.awaitResult(e,t.synchronizer)}))},nextValidationState:function(){var t,e,n,i=this;switch(this.validationState_.next()){case 0:return new d.CorePromise((function(t,e){var n;(n=i.doc_)?(f.CoreRandom.seedRandom(5489),i.canRun_=i.canRunActionSequence(i.runningSequence_,i.runningSequenceName_,n),i.canRun_||i.validationState_.finish()):i.validationState_.fail(),t(null)})).then((function(t){return i.nextValidationState()}));case 1:return this.prepareDocument(this.doc_,this.runningSequenceName_).then((function(e){return i.prepareSequence_=u.clone((t=u.as(e,["Array","Function"]))||null!=t?t:[]),i.runActions(i.prepareSequence_)})).then((function(t){return i.nextValidationState()}));case 2:return this.populateActionSequence(this.runningSequence_,this.runningSequenceName_,this.doc_).then((function(t){return i.runningSequence_=u.clone(u.as(t,["Array","Function"])),null})).then((function(t){return i.nextValidationState()}));case 3:return new d.CorePromise((function(t,e){i.setUpActionSequence(i.runningSequence_,i.runningSequenceName_,i.doc_),t(null)})).then((function(t){return i.nextValidationState()}));case 4:return new d.CorePromise((function(t,e){i.renderBeforeRunning(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 5:var r=0;return d.CorePromise.resolve(null).then((function(t){return r=m.Host.async.getSystemUptimeInSeconds(),d.CorePromise.resolve(null)})).then((function(t){return i.runActionSequence(i.runningSequence_,i.runningSequenceName_)})).then((function(t){var e=m.Host.async.getSystemUptimeInSeconds()-r,n=m.Host.locale.formatNumber(e,3),a=i.qualifiedSequenceName_+"/"+i.path_;return o.actionPerformanceData[a]={time:n,buffer:"99.99"},i.nextValidationState()}));case 6:return new d.CorePromise((function(t,e){i.validateAfterActionSequence(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 7:return d.CorePromise.resolve(null).then((function(t){return d.CorePromise.resolve(null)})).then((function(t){return i.renderAfterRunning(i.runningSequence_,i.runningSequenceName_)})).then((function(t){if(((e=u.opt(m.Host.actionTesting,(function(t){return t.allActionsEnabled})))||null!=e)&&!e){var r=i.path_,a=u.clone((n=u.as(t,["Dictionary","String","String"]))||null!=n?n:{time:"0.00",format:"image",buffer:"99.99"});o.renderPerformanceData[r]={time:a.time,buffer:a.buffer,format:a.format};var s={render:o.renderPerformanceData};u.opt(m.Host.actionTesting,(function(t){return t.writeJsonToFile(s,i.performanceFilename)}))}return i.nextValidationState()}));case 8:return r=0,d.CorePromise.resolve(null).then((function(t){return r=m.Host.async.getSystemUptimeInSeconds(),d.CorePromise.resolve(null)})).then((function(t){return i.undoActionSequence(i.runningSequence_,i.runningSequenceName_)})).then((function(t){var e=m.Host.async.getSystemUptimeInSeconds()-r,n=m.Host.locale.formatNumber(e,3),a=i.qualifiedSequenceName_+"/"+i.path_;return o.undoPerformanceData[a]={time:n,buffer:"99.99"},i.nextValidationState()}));case 9:return new d.CorePromise((function(t,e){i.validateAfterUndo(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 10:return new d.CorePromise((function(t,e){i.renderAfterUndo(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 11:return r=0,d.CorePromise.resolve(null).then((function(t){return r=m.Host.async.getSystemUptimeInSeconds(),d.CorePromise.resolve(null)})).then((function(t){return i.redoActionSequence(i.runningSequence_,i.runningSequenceName_)})).then((function(t){var e=m.Host.async.getSystemUptimeInSeconds()-r,n=m.Host.locale.formatNumber(e,3),a=i.qualifiedSequenceName_+"/"+i.path_;return o.redoPerformanceData[a]={time:n,buffer:"99.99"},i.nextValidationState()}));case 12:return new d.CorePromise((function(t,e){i.validateAfterRedo(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 13:return new d.CorePromise((function(t,e){i.renderAfterRedo(i.runningSequence_,i.runningSequenceName_),t(null)})).then((function(t){return i.nextValidationState()}));case 14:return new d.CorePromise((function(t,e){i.shutdown(i.runningSequence_,i.runningSequenceName_,i.doc_),t(null)})).then((function(t){return i.nextValidationState()}));default:return d.CorePromise.resolve(null)}},canRunActionSequence:function(t,e,n){return!0},populateActionSequence:function(t,e,n){return d.CorePromise.resolve(t)},prepareDocument:function(t,e){return d.CorePromise.resolve([])},setUpActionSequence:function(t,e,n){},renderBeforeRunning:function(t,e){this.render(this.doc_,"before/"+this.qualifiedSequenceName_)},runActions:function(t){var e=this,n=new l.TestActionHandler(this.doc_.controller),o=u.clone(t);if(0==o.length)return d.CorePromise.resolve(null);var i=n.doAction(o.shift()()).then((function(t){return e.appendActionResult(c.ActionResult.fromPromiseAny(t))}));if(0==!o.length)for(var r=u.iter(o);!r.done;r.next()){var a=r.value;i=i.then((function(t){var e=a();return n.doAction(e)})).then((function(t){return e.appendActionResult(c.ActionResult.fromPromiseAny(t))}))}return i},clearResultsBeforeRunning:function(){this.prepResults_=u.clone(this.actionResults_),this.actionResults_=[]},runActionSequence:function(t,e){var n,o=this;return this.clearResultsBeforeRunning(),XCTAssertTrue(t.length>0,"should not run a test with no actions. Implement CanRun for this test to skip if the test can't be run on it"),(n=u.opt(u.opt(this.doc_,(function(t){return t.controller})),(function(t){return t.undoRedoMgr})))&&(this.undoToIndex_=n.getCurrentTimelineIndex()),this.runActions(t).then((function(e){return XCTAssertTrue(o.actionResults_.length==t.length)})).fail((function(t){var e;return(e=u.as(t,A.CoreStringError))?XCTFail(u.toString(e.message)):XCTFail("Failed with error: "+u.toString(t)),d.CorePromise.reject(t)}))},validateAfterActionSequence:function(t,e){},renderAfterRunning:function(t,e){var n,i,r,a=this,s=!(n=u.opt(m.Host.actionTesting,(function(t){return t.allActionsEnabled})))&&null==n||n?"after_actions/":"",l=!(i=u.opt(m.Host.actionTesting,(function(t){return t.allActionsEnabled})))&&null==i||i?this.qualifiedSequenceName_:"",c=u.clone(this.render(this.doc_,s+l));if(!(r=u.opt(m.Host.actionTesting,(function(t){return t.allActionsEnabled})))&&null==r||r){var h={action:o.actionPerformanceData};u.opt(m.Host.actionTesting,(function(t){return t.writeJsonToFile(h,s+a.performanceFilename)}))}return c},undoActionSequence:function(t,e){var n,o=d.CorePromise.resolve(null);if(0==!t.length&&(n=u.opt(u.opt(this.doc_,(function(t){return t.controller})),(function(t){return t.undoRedoMgr})))){o=o.then((function(t){return XCTAssertTrue(null!=n.getUndoDescription(),"Undo not found before undoing tested actions"),XCTAssertTrue(null==n.getRedoDescription(),"Redo found before undoing tested actions"),null}));for(var i=this.undoToIndex_,r=u.iter(u.range(0,t.length,!1));!r.done;r.next())o=o.then((function(t){return new d.CorePromise((function(t,e){n.getCurrentTimelineIndex()>i?n.undo((function(){return t(null)})):t(null)}))}));o=o.then((function(t){return XCTAssertTrue(null!=n.getRedoDescription(),"No redo found after undoing tested actions"),null}))}return o},validateAfterUndo:function(t,e){},renderAfterUndo:function(t,e){var n=this;this.render(this.doc_,"after_undo/"+this.qualifiedSequenceName_);var i={undo:o.undoPerformanceData};u.opt(m.Host.actionTesting,(function(t){return t.writeJsonToFile(i,"after_undo/"+n.performanceFilename)}))},redoActionSequence:function(t,e){var n,o=d.CorePromise.resolve(null);if(0==!t.length&&(n=u.opt(u.opt(this.doc_,(function(t){return t.controller})),(function(t){return t.undoRedoMgr})))){o=o.then((function(t){return XCTAssertTrue(null!=n.getRedoDescription(),"Redo not found before redoing tested actions"),null}));for(var i=u.iter(u.range(0,t.length,!1));!i.done;i.next())o=o.then((function(t){return new d.CorePromise((function(t,e){return n.redo((function(){return t(null)}))}))}));o=o.then((function(t){return XCTAssertTrue(null==n.getRedoDescription(),"Extra redo found after redoing tested actions"),XCTAssertTrue(null!=n.getUndoDescription(),"No undo found after redoing tested actions"),null}))}return o},validateAfterRedo:function(t,e){},renderAfterRedo:function(t,e){var n=this;this.render(this.doc_,"after_redo/"+this.qualifiedSequenceName_);var i={redo:o.redoPerformanceData};u.opt(m.Host.actionTesting,(function(t){return t.writeJsonToFile(i,"after_redo/"+n.performanceFilename)}))},shutdown:function(t,e,n){},allSelectableFormae:function(t,e){var n;return void 0===e&&(e=null),t.firstPage.root.filterWithCallback((function(t){return null!=t.controller&&t.controller.selectable&&(!(n=u.opt(e,(function(e){return e(t)})))&&null==n||n)}))},findLargestForma:function(t){return t.reduce(this.chooseLargerForma,[null,0])[0]},chooseLargerForma:function(t,e){var n,o=(n=u.opt(e.bounds,(function(t){return t.area})))||null!=n?n:0;return o>t[1]?[e,o]:t},test_ValidateActionSequence:function(t,e){},installBrandkit:function(t){(new T.ProfilingColorMap).reset();var e=[],n=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_PRIMARY_ID,[g.TheoColor.SPARK_COLOR_ROLE_PRIMARY],25.5,127.5,255,1),o=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID1,[g.TheoColor.SPARK_COLOR_ROLE_SECONDARY],125,128,255,1),i=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID2,[g.TheoColor.SPARK_COLOR_ROLE_SECONDARY],25,228,155,1),r=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID0,[g.TheoColor.SPARK_COLOR_ROLE_SHADE0],30,20,40,1),a=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID1,[g.TheoColor.SPARK_COLOR_ROLE_SHADE1],60,40,80,1),s=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE2],100,50,255,1),l=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID3,[g.TheoColor.SPARK_COLOR_ROLE_SHADE3],140,60,120,1),c=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID4,[g.TheoColor.SPARK_COLOR_ROLE_SHADE4],190,80,160,1),A=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID5,[g.TheoColor.SPARK_COLOR_ROLE_SHADE5],230,100,200,1),d=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID6,[g.TheoColor.SPARK_COLOR_ROLE_SHADE6],255,255,255,1),f=g.TheoColor.init_bb45(n);e.push(f),e.push(g.TheoColor.init_bb45(o)),e.push(g.TheoColor.init_bb45(i)),e.push(g.TheoColor.init_bb45(r)),e.push(g.TheoColor.init_bb45(a)),e.push(g.TheoColor.init_bb45(s)),e.push(g.TheoColor.init_bb45(l)),e.push(g.TheoColor.init_bb45(c)),e.push(g.TheoColor.init_bb45(A)),e.push(g.TheoColor.init_bb45(d)),m.Host.fontProvider.getSuggestableFonts(_.ANY_DOCUMENT);var S=u.opt(m.Host.fontProvider,(function(t){return t.descriptorForPostScriptName("Yellowtail",_.ANY_DOCUMENT)})),v=u.opt(m.Host.fontProvider,(function(t){return t.descriptorForPostScriptName("WanderlustShine-Regular ",_.ANY_DOCUMENT)})),F=[],E=new p.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_HEADLINE_ID,C.TheoFont.SPARK_FONT_ROLE_HEADLINE,S),R=new p.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_BODY_ID,C.TheoFont.SPARK_FONT_ROLE_BODY,v);F.push(E),F.push(R);var D=new p.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_PRIMARY_ID,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNg/sXzHwAEFgIJ5hSCsQAAAABJRU5ErkJggg==",h.SPARK_LOGO_ROLE_PRIMARY,1,1),y=new p.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_STAMP_ID,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAABZJREFUCJlj+P//PwMDA4REpf7//w8A4D0O8mtAqaUAAAAASUVORK5CYII=",h.SPARK_LOGO_ROLE_POST_STAMP,3,3),k=[];k.push(D),k.push(y);var B=p.MockAuthoringContext.init_44fd("Fake Brandkit","brandkit-for-actions",[n,o,i,r,a,s,l,c,A,d],F,k);m.Host.brandkitManager.fakeBrandkitForElementsForTesting=B},installSecondBrandkit:function(t){(new T.ProfilingColorMap).reset();var e=[],n=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_PRIMARY_ID_2,[g.TheoColor.SPARK_COLOR_ROLE_PRIMARY],65.5,167.5,222,1),o=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID1_2,[g.TheoColor.SPARK_COLOR_ROLE_SECONDARY],25,108,201,1),i=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SECONDARY_ID2_2,[g.TheoColor.SPARK_COLOR_ROLE_SECONDARY],75,208,105,1),r=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID0_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE0],245,245,245,1),a=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID1_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE1],230,100,200,1),s=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID2_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE2],190,80,160,1),l=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID3_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE3],140,60,120,1),c=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID4_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE4],100,50,255,1),A=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID5_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE5],60,40,80,1),d=new p.MockAuthoringContextColor(this.FAKE_COLOR_ELEMENT_SHADE_ID6_2,[g.TheoColor.SPARK_COLOR_ROLE_SHADE6],30,20,40,1),f=g.TheoColor.init_bb45(n);e.push(f),e.push(g.TheoColor.init_bb45(o)),e.push(g.TheoColor.init_bb45(i)),e.push(g.TheoColor.init_bb45(r)),e.push(g.TheoColor.init_bb45(a)),e.push(g.TheoColor.init_bb45(s)),e.push(g.TheoColor.init_bb45(l)),e.push(g.TheoColor.init_bb45(c)),e.push(g.TheoColor.init_bb45(A)),e.push(g.TheoColor.init_bb45(d)),m.Host.fontProvider.getSuggestableFonts(_.ANY_DOCUMENT);var S=u.opt(m.Host.fontProvider,(function(t){return t.descriptorForPostScriptName("Yellowtail",_.ANY_DOCUMENT)})),v=u.opt(m.Host.fontProvider,(function(t){return t.descriptorForPostScriptName("WanderlustShine-Regular ",_.ANY_DOCUMENT)})),F=[],E=new p.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_HEADLINE_ID_2,C.TheoFont.SPARK_FONT_ROLE_HEADLINE,S),R=new p.MockAuthoringContextFont(this.FAKE_FONT_ELEMENT_BODY_ID_2,C.TheoFont.SPARK_FONT_ROLE_BODY,v);F.push(E),F.push(R);var D=new p.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNg/sXzHwAEFgIJ5hSCsQAAAABJRU5ErkJggg==",h.SPARK_LOGO_ROLE_PRIMARY,1,1),y=new p.MockAuthoringContextLogo(this.FAKE_LOGO_ELEMENT_STAMP_ID_2,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAABZJREFUCJlj+P//PwMDA4REpf7//w8A4D0O8mtAqaUAAAAASUVORK5CYII=",h.SPARK_LOGO_ROLE_POST_STAMP,3,3),k=[];k.push(D),k.push(y);var B=p.MockAuthoringContext.init_44fd("Fake Brandkit 2","brandkit-for-actions-2",[n,o,i,r,a,s,l,c,A,d],F,k);m.Host.brandkitManager.fakeBrandkitForElementsForTesting=B},removeBrandkit:function(t){m.Host.brandkitManager.fakeBrandkitForElementsForTesting=null,(new T.ProfilingColorMap).reset()},urlForAsset:function(t){return u.opt(m.Host.actionTesting,(function(e){return e.urlForAsset(t)}))},imageDataForAsset:function(t){return null!=m.Host.actionTesting?m.Host.actionTesting.imageDataForAsset(t):d.CorePromise.resolve(null)},render:function(t,e,n){void 0===n&&(n="");var o,i=this,r=((o=u.opt(m.Host.actionTesting,(function(t){return t.outputFolder})))||null!=o?o:"")+e+"/";return u.opt(m.Host.actionTesting,(function(e){return e.render(t,r,i.path_+n)}))}}}),o),l.TestActionHandler=(i=function(t){this.actionQueue=[],this.executingAction=null,this.dc=t},u.defineClass({name:"TestActionHandler",ctor:i,statics:{_implements:function(t){return"IActionHandler"==t}},props:{canDoAction:function(t){return XCTAssertTrue(t.canDo(this.dc)),t.canDo(this.dc)},finishAction:function(){this.executingAction=null;var t=u.first(this.actionQueue);null!=t&&(this.actionQueue.shift(),this.doActionWithCallback(t[0],t[1]))},doActionWithCallback:function(t,e){var n,o=this;if(null!=this.executingAction)this.actionQueue.push([t,e]);else if(n=this.dc){var i=null;n.undoRedoMgr.beginUserActionAsync(t.getUserAction(n)).then((function(e){return t.execute(n)})).then((function(t){return i=t,n.undoRedoMgr.endUserActionAsync()})).then((function(e){return t.updateSelection(n)})).then((function(t){return e(c.ActionResult.fromPromiseAny(i),null)})).fail((function(t){return e(null,t)})).then((function(t){return o.finishAction()}))}else XCTFail("Document controller destroyed")},doAction:function(t){var e=this;return new d.CorePromise((function(n,o){return e.doActionWithCallback(t,(function(t,e){var i;null!=(i=e)?o(i):n(t)}))}))}}}),i),l.TestState=u.defineEnum("TestState",{kFailed:-1,kCanRun:0,kPrepDoc:1,kPopulate:2,kSetUp:3,kRenderBeforeRunning:4,kRun:5,kValidateAfterRunning:6,kRenderAfterRunning:7,kUndo:8,kValidateAfterUndo:9,kRenderAfterUndo:10,kRedo:11,kValidateAfterRedo:12,kRenderAfterRedo:13,kShutdown:14,kFinished:15}),l.EnabledTestStates=(r=function(){},a={},u.defineClass({name:"EnabledTestStates",ctor:r,statics:{kRunStates:{get:function(){return void 0===a.kRunStates&&(a.kRunStates=r.init_34d9([l.TestState.kCanRun,l.TestState.kPrepDoc,l.TestState.kPopulate,l.TestState.kSetUp,l.TestState.kRun,l.TestState.kValidateAfterRunning,l.TestState.kRenderAfterRunning,l.TestState.kShutdown])),a.kRunStates}},kActionTestSpecificStates:{get:function(){return void 0===a.kActionTestSpecificStates&&(a.kActionTestSpecificStates=r.init_34d9([l.TestState.kRenderBeforeRunning])),a.kActionTestSpecificStates}},kUndoStates:{get:function(){return void 0===a.kUndoStates&&(a.kUndoStates=r.init_34d9([l.TestState.kUndo,l.TestState.kValidateAfterUndo,l.TestState.kRenderAfterUndo])),a.kUndoStates}},kRedoStates:{get:function(){return void 0===a.kRedoStates&&(a.kRedoStates=r.init_34d9([l.TestState.kRedo,l.TestState.kValidateAfterRedo,l.TestState.kRenderAfterRedo])),a.kRedoStates}},kRenderingStates:{get:function(){return void 0===a.kRenderingStates&&(a.kRenderingStates=r.init_34d9([l.TestState.kRenderBeforeRunning,l.TestState.kRenderAfterRunning,l.TestState.kRenderAfterUndo,l.TestState.kRenderAfterRedo])),a.kRenderingStates}},kValidationStates:{get:function(){return void 0===a.kValidationStates&&(a.kValidationStates=r.init_34d9([l.TestState.kValidateAfterRunning,l.TestState.kValidateAfterUndo,l.TestState.kValidateAfterRedo])),a.kValidationStates}},kAllStates:{get:function(){return void 0===a.kAllStates&&(a.kAllStates=r.init_34d9([l.TestState.kCanRun,l.TestState.kPrepDoc,l.TestState.kPopulate,l.TestState.kSetUp,l.TestState.kRenderBeforeRunning,l.TestState.kRun,l.TestState.kValidateAfterRunning,l.TestState.kRenderAfterRunning,l.TestState.kUndo,l.TestState.kValidateAfterUndo,l.TestState.kRenderAfterUndo,l.TestState.kRedo,l.TestState.kValidateAfterRedo,l.TestState.kRenderAfterRedo,l.TestState.kShutdown])),a.kAllStates}}},props:{init_5d5e:function(t){this.rawValue=t},init_b14a:function(t){this.rawValue=1<<t},init_34d9:function(t){this.rawValue=t.reduce((function(t,e){return t|1<<e}),0)},enabled:function(t){return this.rawValue&1<<t!=0},enable:function(t){return r.init_5d5e(this.rawValue|1<<t)},disable:function(t){return r.init_5d5e(this.rawValue&(r.kAllStates.rawValue^1<<t))},subtracting:function(t){return r.init_5d5e(this.rawValue&(r.kAllStates.rawValue^t.rawValue))}}}),r),l.ValidationState=(s=function(){var t,e,n,o;this.state_=l.TestState.kCanRun,this.enabledStates_=l.EnabledTestStates.kAllStates,!(t=u.opt(m.Host.actionTesting,(function(t){return t.allActionsEnabled})))&&null==t||t||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kActionTestSpecificStates)),((e=u.opt(m.Host.actionTesting,(function(t){return t.renderingEnabled})))||null!=e)&&e||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kRenderingStates)),((n=u.opt(m.Host.actionTesting,(function(t){return t.undoEnabled})))||null!=n)&&n||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kUndoStates),this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kRedoStates)),((o=u.opt(m.Host.actionTesting,(function(t){return t.validationEnabled})))||null!=o)&&o||(this.enabledStates_=this.enabledStates_.subtracting(l.EnabledTestStates.kValidationStates))},u.defineClass({name:"ValidationState",ctor:s,props:{next:function(){var t,e,n=this.state_;for(this.state_=(t=l.TestState.toCaseValue(this.state_+1))||null!=t?t:l.TestState.kFailed;!this.enabledStates_.enabled(this.state_)&&this.hasNext;)this.state_=(e=l.TestState.toCaseValue(this.state_+1))||null!=e?e:l.TestState.kFailed;return n},hasNext:{get:function(){return this.state_!=l.TestState.kFailed&&this.state_!=l.TestState.kFinished}},fail:function(){this.state_=l.TestState.kFailed},finish:function(){this.hasNext&&(this.state_=l.TestState.kFinished)}}}),s)},eLhV:function(t,e,n){var o,i,r,a,s=e,l=n("oAGj"),u=n("Tq01"),c=n("4mEG"),h=n("c9Jm"),A=n("yGNn"),d=n("FNB+"),f=n("iCxV"),m=n("3lr5"),_=n("cRpU"),p=n("enh0"),T=n("Vm85"),g=n("VJ9E"),C=n("8t9B"),S=n("uUew");s.SetHighlightMethodTest=(o=function t(){this.actionSequence_SetHighlightMethod=[function(){return new c.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.lockupFont_=null,h.ActionTestBase.call(this)},l.defineClass({name:"SetHighlightMethodTest",ctor:o,superName:"ActionTestBase",statics:{initialText_:"Some text that is long enough to span lines",testFont_:"Bellfort",getTheoFont:function(t){var e=g.TheoFont.init_9e5c(f.Host.fontProvider.getIncludedFonts(m.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),u.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var i=this;return A.CorePromise.resolve(t.concat([function(){return i.lockupFont_=l.opt(l.opt(l.opt(l.as(l.opt(i.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),l.opt(l.opt(i.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(i.textForma)})),new _.EnterCharStyleModeAction(i.textForma)},function(){return new _.SetHighlightMethodAction(C.HighlightMethod.EvenRows,!0)},function(){return new _.SetFontAction(o.getTheoFont(o.testFont_))},function(){return new _.ExitCharStyleModeAction(i.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=l.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var i=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(i===this.textForma),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),i.visit(d.FormaTraversal.PreOrder,(function(t,e,n){var i;return(i=l.as(t,p.TextForma))&&i.rowIndex%2==0&&XCTAssertEqual(i.fontDescriptor.postScriptName,o.testFont_),!1}))},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(this.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),XCTAssertNil(l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,i=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(i),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),i.visit(d.FormaTraversal.PreOrder,(function(t,e,n){var i;return(i=l.as(t,p.TextForma))&&i.rowIndex%2==0&&XCTAssertEqual(i.fontDescriptor.postScriptName,o.testFont_),!1}))}}}),o),s.ApplyCharStyleTest=(i=function t(){this.actionSequence_ApplyCharStyle=[function(){return new c.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldRanges_=null,this.lastChildForma_=null,h.ActionTestBase.call(this)},l.defineClass({name:"ApplyCharStyleTest",ctor:i,superName:"ActionTestBase",statics:{initialText_:"0 1 2 3 4"},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),u.FormaActionResult),(function(t){return t.formae})))}},tearDown:function(){this.lastChildForma_=null,h.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(t,e,n){var o=this;return A.CorePromise.resolve(t.concat([function(){return o.oldRanges_=l.clone(l.opt(l.as(l.opt(o.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))||[]),l.opt(l.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),o.textForma.visit(d.FormaTraversal.PreOrder,(function(t,e,n){var i;return(i=l.as(t,p.TextForma))&&(o.lastChildForma_=i),!1})),new _.EnterCharStyleModeAction(o.textForma)},function(){return new _.ApplyCharStyleAction(o.lastChildForma_,C.TypeLockupController.HIGHLIGHT_STYLE,C.CharStyleApplyMode.Apply,new S.TextRange(0,0))},function(){return new _.ExitCharStyleModeAction(o.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=l.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o,i=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(i===this.textForma),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))),(o=l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})))&&(XCTAssertEqual(l.last(o).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(o).end,this.lastChildForma_.rangeInLockup.end))},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(l.opt(l.as(l.opt(this.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})),this.oldRanges_),XCTAssertNil(l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n,o=this,i=l.opt(this.testPage_,(function(t){return t.formaByID(o.testFormaID_)}));XCTAssertNotNil(i),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))),(n=l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})))&&(XCTAssertEqual(l.last(n).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(n).end,this.lastChildForma_.rangeInLockup.end))}}}),i),s.ApplyCharStyleWithoutUITest=(r=function t(){this.actionSequence_ApplyCharStyle=[function(){return new c.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldRanges_=null,this.lastChildForma_=null,h.ActionTestBase.call(this)},l.defineClass({name:"ApplyCharStyleWithoutUITest",ctor:r,superName:"ActionTestBase",statics:{initialText_:"0 1 2 3 4"},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),u.FormaActionResult),(function(t){return t.formae})))}},tearDown:function(){this.lastChildForma_=null,h.ActionTestBase.prototype.tearDown.call(this)},populateActionSequence:function(t,e,n){var o=this;return A.CorePromise.resolve(t.concat([function(){return o.oldRanges_=l.clone(l.opt(l.as(l.opt(o.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))||[]),l.opt(l.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),o.textForma.visit(d.FormaTraversal.PreOrder,(function(t,e,n){var i;return(i=l.as(t,p.TextForma))&&(o.lastChildForma_=i),!1})),new _.ApplyCharStyleWithoutUIAction(o.lastChildForma_,C.TypeLockupController.HIGHLIGHT_STYLE,C.CharStyleApplyMode.Apply,new S.TextRange(0,0))}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=l.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o,i=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(i===this.textForma),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))),(o=l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})))&&(XCTAssertEqual(l.last(o).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(o).end,this.lastChildForma_.rangeInLockup.end))},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(l.opt(l.as(l.opt(this.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})),this.oldRanges_),XCTAssertNil(l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n,o=this,i=l.opt(this.testPage_,(function(t){return t.formaByID(o.testFormaID_)}));XCTAssertNotNil(i),XCTAssertEqual(l.opt(l.opt(i,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertNotNil(l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges}))),(n=l.opt(l.as(l.opt(i,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.charStyleRanges})))&&(XCTAssertEqual(l.last(n).start,this.lastChildForma_.rangeInLockup.start),XCTAssertEqual(l.last(n).end,this.lastChildForma_.rangeInLockup.end))}}}),r),s.UpdateCharStyleRangeTest=(a=function t(){this.actionSequence_UpdateCharStyleRange=[function(){return new c.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.lockupFont_=null,h.ActionTestBase.call(this)},l.defineClass({name:"UpdateCharStyleRangeTest",ctor:a,superName:"ActionTestBase",statics:{initialText_:"1 2 3 4 5",newText_:"one two three four five",testFont_:"Bellfort",getTheoFont:function(t){var e=g.TheoFont.init_9e5c(f.Host.fontProvider.getIncludedFonts(m.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return l.first(l.opt(l.as(this.getActionResult(0),u.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return A.CorePromise.resolve(t.concat([function(){return o.lockupFont_=l.opt(l.opt(l.opt(l.as(l.opt(o.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),l.opt(l.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new _.EnterCharStyleModeAction(o.textForma)},function(){return new _.SetTextAction(a.newText_,o.textForma,[new S.TextRange(0,4)],T.ReplaceTextStrategy.PreventOverlap)},function(){return new _.SetFontAction(a.getTheoFont(a.testFont_))},function(){return new _.ExitCharStyleModeAction(o.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=l.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(l.opt(l.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(o,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),o.visit(d.FormaTraversal.PreOrder,(function(t,e,o){var i;return(i=l.as(t,p.TextForma))&&(0==i.rangeInLockup.start?XCTAssertEqual(i.fontDescriptor.postScriptName,a.testFont_):XCTAssertEqual(i.fontDescriptor.postScriptName,n.lockupFont_)),!1}))},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(this.textForma,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),XCTAssertNil(l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=l.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(l.opt(l.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),C.TypeLockupController.KIND),XCTAssertEqual(l.opt(l.opt(l.opt(l.as(l.opt(o,(function(t){return t.controller})),C.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.lockupFont_),o.visit(d.FormaTraversal.PreOrder,(function(t,e,o){var i;return(i=l.as(t,p.TextForma))&&(0==i.rangeInLockup.start?XCTAssertEqual(i.fontDescriptor.postScriptName,a.testFont_):XCTAssertEqual(i.fontDescriptor.postScriptName,n.lockupFont_)),!1}))}}}),a)},mSLX:function(t,e,n){var o,i,r,a,s,l=e,u=n("oAGj"),c=n("Tq01"),h=n("4mEG"),A=n("c9Jm"),d=n("kYI4"),f=n("70fJ"),m=n("yGNn"),_=n("ascj"),p=n("rsKm"),T=n("FNB+"),g=n("x6FH"),C=n("iCxV"),S=n("VkKB"),v=n("JO5d"),F=n("Zifs"),E=n("umUn"),R=n("8t9B");l.ApplyColorIconTest=(o=function t(){this.actionSequence_ApplyColorIcon=[function(){return new h.AddIconContentAction(t.originalIconURL_,S.MediaMetadata.init_5f01(),null)}],this.testDoc_=null,this.testPage_=null,this.testColor_=null,this.oldIconColor_=null,A.ActionTestBase.call(this)},i={},u.defineClass({name:"ApplyColorIconTest",ctor:o,superName:"ActionTestBase",statics:{originalIconURL_:"",purple_:{get:function(){return void 0===i.purple_&&(i.purple_=new F.SolidColor(.4,.2,.6,1)),i.purple_}}},props:{iconForma:{get:function(){return u.first(u.opt(u.as(this.getActionResult(0),c.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var i=this;return m.CorePromise.resolve(t.concat([function(){return i.oldIconColor_=u.opt(u.opt(i.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)})),i.testColor_=E.TheoColor.init_5344(o.purple_),new f.ApplyColorAction([i.iconForma],[i.testColor_],!1,0)}]))},setUpActionSequence:function(t,e,n){var i;this.testDoc_=n,this.testPage_=n.firstPage,null!=(i=this.urlForAsset("dog1.svg"))&&(o.originalIconURL_=i)},validateAfterActionSequence:function(t,e){var n=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_)},validateAfterUndo:function(t,e){var n=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.oldIconColor_)},validateAfterRedo:function(t,e){var n=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_)}}}),o),l.ApplyColorRootTest=function(){var t=function(){this.actionSequence_ApplyColorRoot=[],this.testDoc_=null,this.testPage_=null,this.rootForma_=null,this.testColor_=null,this.oldColor_=null,A.ActionTestBase.call(this)},e={};return u.defineClass({name:"ApplyColorRootTest",ctor:t,superName:"ActionTestBase",statics:{purple_:{get:function(){return void 0===e.purple_&&(e.purple_=new F.SolidColor(.4,.2,.6,1)),e.purple_}}},props:{populateActionSequence:function(e,n,o){var i=this;return m.CorePromise.resolve(e.concat([function(){return i.oldColor_=u.opt(i.rootForma_,(function(t){return t.style.colors.theoColor(_.ColorRole.FieldPrimary)})),i.testColor_=E.TheoColor.init_5344(t.purple_),new g.EnterGridLayoutModeAction},function(){return new g.SetGridParametersAction(NaN,8)},function(){return new f.ApplyColorAction([i.rootForma_],[i.testColor_],!1,0)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage,this.rootForma_=u.opt(this.testPage_,(function(t){return t.root}))},validateAfterActionSequence:function(t,e){var n=u.opt(this.rootForma_,(function(t){return t.style.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_)},validateAfterUndo:function(t,e){var n=u.opt(this.rootForma_,(function(t){return t.style.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.oldColor_)},validateAfterRedo:function(t,e){var n=u.opt(this.rootForma_,(function(t){return t.style.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_)}}}),t}(),l.ApplyColorThemeTest=(r=function(){this.actionSequence_ApplyColorTheme=[],this.testDoc_=null,this.page_=null,this.themeColors_=[],A.ActionTestBase.call(this)},u.defineClass({name:"ApplyColorThemeTest",ctor:r,superName:"ActionTestBase",props:{verifyColors:function(t){for(var e=0,n=u.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),o=u.iter(n);!o.done;o.next()){var i=o.value;(i.isBrandkitPrimaryColor()||i.isBrandkitSecondaryColor()||i.isBrandkitShade())&&(e+=1)}t?XCTAssertTrue(e>0):XCTAssertEqual(e,0)},populateActionSequence:function(t,e,n){var o=this;this.installBrandkit(n);for(var i=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,r=u.clone(d.BrandingFacade.getBrandkitColorsForUI(i,null)),a=u.iter(r);!a.done;a.next()){var s=a.value[0];this.themeColors_.push(s)}return m.CorePromise.resolve(t.concat([function(){return new p.ApplyColorThemeAction(o.themeColors_,"brandkit-for-actions",o.page_,!0)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage},validateAfterActionSequence:function(t,e){this.verifyColors(!0)},validateAfterUndo:function(t,e){this.verifyColors(!1)},validateAfterRedo:function(t,e){this.verifyColors(!0)},shutdown:function(t,e,n){A.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),r),l.ApplyColorThemeWithShuffleTest=(a=function(){this.actionSequence_ApplyColorThemeWithShuffle=[],this.testDoc_=null,this.page_=null,this.themeColors_=[],this.colorDictionary_={},this.colorRelationshipTestUtils_=new l.ColorRelationshipTestUtils,this.colorPaletteRelationshipBefore_=null,this.colorPaletteRelationshipAfter_=null,A.ActionTestBase.call(this)},u.defineClass({name:"ApplyColorThemeWithShuffleTest",ctor:a,superName:"ActionTestBase",props:{gatherColors:function(){var t={},e=u.opt(this.page_,(function(t){return t.root}));return u.opt(e,(function(e){return e.visitAll(T.FormaTraversal.PreOrder,(function(e){if(null!=e.style.colors.colorID(_.ColorRole.FieldPrimary)){var n,o=null;u.as(e.controller,R.TypeLockupController)&&(o=e.style.colors.theoColor(_.ColorRole.FieldPrimary)),u.as(e.controller,v.ShapeController)&&(o=e.style.colors.theoColor(_.ColorRole.FieldPrimary)),null!=(n=u.opt(o,(function(t){return t.asString})))&&(t[e.formaID]=n)}}))})),t},gatherSparkColors:function(){var t={},e=u.opt(this.page_,(function(t){return t.root}));return u.opt(e,(function(e){return e.visitAll(T.FormaTraversal.PreOrder,(function(e){var n;null!=e.style.colors.colorID(_.ColorRole.FieldPrimary)&&null!=u.opt(e.style.colors.theoColor(_.ColorRole.FieldPrimary),(function(t){return t.sparkElementID}))&&null!=(n=u.opt(e.style.colors.theoColor(_.ColorRole.FieldPrimary),(function(t){return t.asString})))&&(t[e.formaID]=n)}))})),t},verifyShuffledColors:function(t,e){for(var n=0,o=u.iter(t);!o.done;o.next()){var i,r=o.key,a=o.value;null!=(i=e[r])&&a!=i&&(n+=1)}u.toDouble(n)/u.toDouble(u.count(t))<=.15&&C.Host.logging.info("verifyShuffledColors diffCount "+n+" and count "+u.count(t)),XCTAssertTrue(u.toDouble(n)/u.toDouble(u.count(t))>.15)},verifyColorBeforeAfterPreservation:function(){var t,e,n,o;(t=this.testDoc_)&&(this.colorPaletteRelationshipAfter_=u.clone(this.colorRelationshipTestUtils_.getCurrentPaletteMapping(t)),(e=this.colorPaletteRelationshipBefore_)&&(n=this.colorPaletteRelationshipAfter_)&&null!=(o=this.colorRelationshipTestUtils_.checkOverlapBetweenTwoPaletteMappings(e,n))?XCTAssertTrue(o>=.8,"score: "+u.toString(o)+" below threshold:"+u.toString(.8)):XCTFail("Unknown error, value was nil"))},populateActionSequence:function(t,e,n){var o=this;this.installBrandkit(n);for(var i=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,r=u.iter(i.colors);!r.done;r.next()){var a=r.value;this.themeColors_.push(E.TheoColor.init_bb45(a))}return m.CorePromise.resolve(t.concat([function(){return new p.ApplyColorThemeAction(o.themeColors_,"brandkit-for-actions",o.page_,!0)},function(){return o.colorDictionary_=u.clone(o.gatherColors()),new p.ApplyColorThemeAction(o.themeColors_,"brandkit-for-actions",o.page_,!0)}]))},setUpActionSequence:function(t,e,n){var o;this.testDoc_=n,this.page_=n.firstPage,(o=this.testDoc_)&&(this.colorPaletteRelationshipBefore_=u.clone(this.colorRelationshipTestUtils_.getCurrentPaletteMapping(o)))},validateAfterActionSequence:function(t,e){var n=u.clone(this.gatherColors());this.verifyShuffledColors(this.colorDictionary_,n),this.verifyColorBeforeAfterPreservation()},validateAfterUndo:function(t,e){var n=u.clone(this.gatherSparkColors());XCTAssertEqual(u.count(n),0),this.verifyColorBeforeAfterPreservation()},validateAfterRedo:function(t,e){var n=u.clone(this.gatherColors());this.verifyShuffledColors(this.colorDictionary_,n),this.verifyColorBeforeAfterPreservation()},shutdown:function(t,e,n){A.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),a),l.ModifyColorThemeTest=function(){var t=function t(){this.actionSequence_ModifyColorTheme=[function(){return new h.AddIconContentAction(t.originalIconURL_,S.MediaMetadata.init_5f01(),null)}],this.testDoc_=null,this.testPage_=null,this.testColor_=null,this.oldIconColor_=null,this.iconColorKey_="",this.themeColors_=[],A.ActionTestBase.call(this)},e={};return u.defineClass({name:"ModifyColorThemeTest",ctor:t,superName:"ActionTestBase",statics:{originalIconURL_:"",darkBlue_:{get:function(){return void 0===e.darkBlue_&&(e.darkBlue_=new F.SolidColor(1/255,1/255,164/255,1)),e.darkBlue_}}},props:{iconForma:{get:function(){return u.first(u.opt(u.as(this.getActionResult(0),c.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(e,n,o){var i=this;this.installBrandkit(o);for(var r=C.Host.brandkitManager.fakeBrandkitForElementsForTesting,a=u.iter(r.colors);!a.done;a.next()){var s=a.value;this.themeColors_.push(E.TheoColor.init_bb45(s))}return m.CorePromise.resolve(e.concat([function(){return new p.ApplyColorThemeAction(i.themeColors_,"brandkit-for-actions",i.testPage_,!1)},function(){return i.oldIconColor_=u.opt(u.opt(i.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)})),i.iconColorKey_=u.opt(u.opt(i.iconForma,(function(t){return t.style})),(function(t){return t.colors.colorID(_.ColorRole.FieldPrimary)})),i.testColor_=E.TheoColor.init_5344(t.darkBlue_),new p.ModifyColorThemeAction(i.testColor_,i.iconColorKey_,i.testPage_)}]))},setUpActionSequence:function(e,n,o){var i;this.testDoc_=o,this.testPage_=o.firstPage,null!=(i=this.urlForAsset("dog1.svg"))&&(t.originalIconURL_=i)},validateAfterActionSequence:function(t,e){var n=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_);var o=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.colorID(_.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.iconColorKey_)},validateAfterUndo:function(t,e){XCTAssertEqual(u.opt(this.iconForma,(function(t){return t.parent})),null)},validateAfterRedo:function(t,e){var n=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.theoColor(_.ColorRole.FieldPrimary)}));XCTAssertEqual(n,this.testColor_);var o=u.opt(u.opt(this.iconForma,(function(t){return t.style})),(function(t){return t.colors.colorID(_.ColorRole.FieldPrimary)}));XCTAssertEqual(o,this.iconColorKey_)},shutdown:function(t,e,n){A.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),t}(),l.ColorRelationshipTestUtils=(s=function(){},u.defineClass({name:"ColorRelationshipTestUtils",ctor:s,props:{getCurrentPaletteMapping:function(t){return t.firstPage.colorLibraryController.enteredPalettePicker(),t.firstPage.colorLibraryController.returnCurrentPaletteMapping()},checkOverlapBetweenTwoPaletteMappings:function(t,e){for(var n=null,o=0,i=0,r=u.iter(u.keys(t));!r.done;r.next()){var a,s=r.value;if(null!=(a=this.findCorrespondingMappingKey(t[s],e)))for(var l=u.iter(t[s]);!l.done;l.next()){var c=l.value;c.length>1&&(e[a].includes(c)?(o+=1,i+=1):o+=1)}else o+=t[s].length}return o>0&&(n=u.toDouble(i)/u.toDouble(o)),n},getAverageArrayDouble:function(t){for(var e=0,n=0,o=0,i=u.iter(t);!i.done;i.next()){var r=i.value;isNaN(r)||(e+=r,n+=1)}return u.opt(C.Host.logging,(function(t){return t.info("Sum: "+u.toString(e))})),u.opt(C.Host.logging,(function(t){return t.info("Count: "+u.toString(n))})),n>0&&(o=e/u.toDouble(n)),o},printPaletteMapping:function(t){for(var e=[],n=u.iter(u.keys(t));!n.done;n.next()){for(var o=n.value,i=o+":",r=u.iter(t[o]);!r.done;r.next())i+=r.value+"\n";e.push(i)}for(var a=u.iter(e);!a.done;a.next()){var s=a.value;u.opt(C.Host.logging,(function(t){return t.info(s)}))}},findCorrespondingMappingKey:function(t,e){for(var n=null,o={},i=u.iter(u.keys(e));!i.done;i.next())for(var r=i.value,a=u.iter(t);!a.done;a.next()){var s=a.value;e[r].includes(s)&&(u.keys(o).includes(r)?o[r]=o[r]+1:o[r]=1)}for(var l=0,c=u.iter(u.keys(o));!c.done;c.next())o[r=c.value]>l&&(n=r,l=o[r]);return n}}}),s)},oTkQ:function(t,e,n){var o,i=e,r=n("oAGj"),a=n("c9Jm"),s=n("vV1H");i.FlipTest=(o=function(){this.actionSequence_FlipVertical=[function(){return new s.FlipAction(!0)}],this.actionSequence_FlipHorizontal=[function(){return new s.FlipAction(!1)}],this.formaeToFlip_=[],this.initialTransforms_=[],this.vertical_=!1,a.ActionTestBase.call(this)},r.defineClass({name:"FlipTest",ctor:o,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){var o;this.formaeToFlip_=r.clone(this.allSelectableFormae(n,(function(t){return!(!(o=r.opt(t.controller,(function(t){return t.flippable})))&&null==o)&&o}))),this.vertical_="actionSequence_FlipVertical"==e,this.initialTransforms_=this.formaeToFlip_.map((function(t){return t.totalPlacement}),this),n.controller.selection.replaceSelectionWithFormae(this.formaeToFlip_)},validateAfterActionSequence:function(t,e){for(var n=r.iter(r.range(0,this.formaeToFlip_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToFlip_[o].totalPlacement.extractedScale.scale,this.initialTransforms_[o].scaleXY(this.vertical_?1:-1,this.vertical_?-1:1).extractedScale.scale)}},validateAfterUndo:function(t,e){for(var n=r.iter(r.range(0,this.formaeToFlip_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToFlip_[o].totalPlacement.extractedScale.scale,this.initialTransforms_[o].extractedScale.scale)}},validateAfterRedo:function(t,e){for(var n=r.iter(r.range(0,this.formaeToFlip_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToFlip_[o].totalPlacement.extractedScale.scale,this.initialTransforms_[o].scaleXY(this.vertical_?1:-1,this.vertical_?-1:1).extractedScale.scale)}},tearDown:function(){this.formaeToFlip_=[],a.ActionTestBase.prototype.tearDown.call(this)}}}),o)},wYGt:function(t,e,n){var o,i,r,a,s,l,u,c,h,A,d,f,m,_=e,p=n("oAGj"),T=n("Tq01"),g=n("wpCo"),C=n("4mEG"),S=n("c9Jm"),v=n("CWW7"),F=n("yGNn"),E=n("jo4Y"),R=n("FNB+"),D=n("cmoc"),y=n("pnSN"),k=n("iCxV"),B=n("xWmh"),L=n("bqbo"),I=n("U010"),P=n("fdtz"),N=n("lmwz"),q=n("c+uM"),x=n("VkKB"),O=n("djAF"),b=n("cRpU"),X=n("Vm85"),M=n("8t9B"),w=n("RkYL"),U=n("LGJg"),H=n("zjod");_.AddTextTest=(o=function(){this.actionSequence_AddText=[function(){return new C.AddTextContentAction("Dog")}],this.text_="Dog",this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddTextTest",ctor:o,superName:"ActionTestBase",props:{hasText:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,y.GroupForma))&&(i=p.as(o.controller,M.TypeLockupController))&&i.text==t.text_&&(e=!0)}))})),e},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasText())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasText())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasText())}}}),o),_.AddTextOverImageBackgroundTest=(i=function(){this.text_="Lorem ipsum dolor set",this.actionSequence_AddText=[function(){return new C.AddTextContentAction("Lorem ipsum dolor set")}],this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddTextOverImageBackgroundTest",ctor:i,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return p.clone(n.firstPage.root.filterWithCallback((function(t){return N.ImageFacade.isPotentialBackgroundImage(t)}))).length>0},hasText:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,y.GroupForma))&&(i=p.as(o.controller,M.TypeLockupController))&&i.text==t.text_&&(e=!0)}))})),e},prepareDocument:function(t,e){this.rootForma_=t.firstPage.root;var n=p.clone(t.firstPage.root.filterWithCallback((function(t){return N.ImageFacade.isPotentialBackgroundImage(t)})));XCTAssertTrue(n.length>0);var o=function(){var e=p.clone(t.firstPage.root.filterWithCallback((function(t){return null!=t.controller&&t.controller.floating})));return new E.DeleteAction(e,!0)};if(n.length>0){var i=n.shift(),r=function(){return p.opt(t.controller,(function(t){return t.selection.replaceSelection(i)})),new L.SetImageAsBackgroundAction};return n.length>0?F.CorePromise.resolve([function(){return new E.DeleteAction(n,!0)},r,o]):F.CorePromise.resolve([r,o])}return F.CorePromise.resolve([o])},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasText())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasText())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasText())}}}),i),_.ReplaceTextTest=(r=function(){this.actionSequence_ReplaceText=[],this.initialText_="Initial...",this.finalText_="Final!",this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceTextTest",ctor:r,superName:"ActionTestBase",props:{textForma:{get:function(){return p.first(p.opt(p.as(this.getActionResult(0),T.FormaActionResult),(function(t){return t.formae})))}},hasInitialText:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,y.GroupForma))&&(i=p.as(o.controller,M.TypeLockupController))&&i.text==t.initialText_&&(e=!0)}))})),e},hasFinalText:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,y.GroupForma))&&(i=p.as(o.controller,M.TypeLockupController))&&i.text==t.finalText_&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o=this;return F.CorePromise.resolve(t.concat([function(){return new C.AddTextContentAction(o.initialText_)},function(){return new b.SetTextAction(o.finalText_,o.textForma)}]))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasFinalText()),XCTAssertFalse(this.hasInitialText())}}}),r),_.ReplaceTextTestStrategies=(a=function(){this.actionSequence_ReplaceAuto=[],this.actionSequence_ReplacePreventOverlap=[],this.actionSequence_ReplacePreserveWidth=[],this.actionSequence_ReplaceBalanced=[],S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceTextTestStrategies",ctor:a,superName:"ActionTestBase",statics:{suffixText_:" more words.\n And then some."},props:{tearDown:function(){this.lockupForma_=null,S.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return p.opt(t.controller,(function(t){return t.kind==M.TypeLockupController.KIND}))}))),null!=this.lockupForma_&&!("actionSequence_ReplaceBalanced"==e&&((o=p.opt(p.opt(this.lockupForma_,(function(t){return t.controller})),(function(t){return t.userGroupChild})))||null!=o)&&o)},prepareDocument:function(t,e){var n=this,o=[];return"actionSequence_ReplaceBalanced"==e&&X.TextFacade.getLayoutForForma(this.lockupForma_)!=q.LockupLayout.Standard&&o.push((function(){return p.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new b.ChangeTextLayoutAndAlignmentAction(q.LockupLayout.Standard,q.LockupAlignment.Center)})),F.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this;return F.CorePromise.resolve(t.concat([function(){var t,i=o.lockupForma_.controller.text+a.suffixText_;switch(e){case"actionSequence_ReplaceAuto":t=X.ReplaceTextStrategy.Auto;break;case"actionSequence_ReplacePreventOverlap":t=X.ReplaceTextStrategy.PreventOverlap;break;case"actionSequence_ReplacePreserveWidth":t=X.ReplaceTextStrategy.PreserveWidth;break;case"actionSequence_ReplaceBalanced":t=X.ReplaceTextStrategy.Balanced;break;default:t=X.ReplaceTextStrategy.Auto}return p.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new b.SetTextAction(i,o.lockupForma_,void 0,t)}]))}}}),a),_.AddImageTest=(s=function(){this.actionSequence_AddImage=[],this.imageURL_="",this.imageMimeType_="",this.imageWidth_=0,this.imageHeight_=0,this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddImageTest",ctor:s,superName:"ActionTestBase",props:{hasImage:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,P.ImageForma))&&(i=o.contentNode)&&i.url==t.imageURL_&&i.mimeType==t.imageMimeType_&&i.pixelWidth==t.imageWidth_&&i.pixelHeight==t.imageHeight_&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o=this,i=n.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(t){var e;if(e=p.as(t,B.ActionTestImageData)){var n=new v.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings);return o.imageURL_=e.url,o.imageMimeType_="image/jpeg",o.imageWidth_=e.width,o.imageHeight_=e.height,F.CorePromise.resolve([function(){return new C.AddImageContentAction(i,o.imageURL_,o.imageMimeType_,o.imageWidth_,o.imageHeight_,!1,x.MediaMetadata.init_5f01(),null,null,n)}])}return XCTFail("Could not get image data for AddImageTest"),F.CorePromise.resolve([])}))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasImage())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasImage())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasImage())}}}),s),_.ReplaceImageTest=(l=function(){this.originalImageURL_="",this.originalImageMimeType_="",this.originalImageWidth_=0,this.originalImageHeight_=0,this.replacementImageURL_="",this.replacementImageMimeType_="",this.replacementImageWidth_=0,this.replacementImageHeight_=0,this.rootForma_=null,this.testPage_=null,this.actionSequence_ReplaceImage=[],S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceImageTest",ctor:l,superName:"ActionTestBase",props:{imageForma:{get:function(){return p.first(p.opt(p.as(this.getActionResult(0),T.FormaActionResult),(function(t){return t.formae})))}},hasImage:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,P.ImageForma))&&(i=o.contentNode)&&(XCTAssertNotEqual(t.originalImageURL_,i.url),i.url==t.replacementImageURL_&&i.mimeType==t.replacementImageMimeType_&&i.pixelWidth==t.replacementImageWidth_&&i.pixelHeight==t.replacementImageHeight_&&(e=!0))}))})),e},populateActionSequence:function(t,e,n){var o,i=this,r=n.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(e){var n;return(n=p.as(e,B.ActionTestImageData))?(i.originalImageURL_=n.url,i.originalImageMimeType_="image/jpeg",i.originalImageWidth_=n.width,i.originalImageHeight_=n.height,i.imageDataForAsset("bird_in_snow.jpg").then((function(e){var n;return(n=p.as(e,B.ActionTestImageData))?(i.replacementImageURL_=n.url,i.replacementImageMimeType_="image/jpeg",i.replacementImageWidth_=n.width,i.replacementImageHeight_=n.height,F.CorePromise.resolve(t.concat([function(){var t=new v.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings);return new C.AddImageContentAction(r,i.originalImageURL_,i.originalImageMimeType_,i.originalImageWidth_,i.originalImageHeight_,!1,x.MediaMetadata.init_5f01(),null,null,t)},function(){XCTAssertTrue(!(!(o=p.opt(p.opt(i.imageForma,(function(t){return t.controller})),(function(t){return t.replaceable})))&&null==o)&&o);var t=new v.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings,!1,i.imageForma);return new C.AddImageContentAction(r,i.replacementImageURL_,i.replacementImageMimeType_,i.replacementImageWidth_,i.replacementImageHeight_,!1,x.MediaMetadata.init_5f01(),null,null,t)}]))):(XCTFail("Could not get image data for second image in ReplaceImageTest"),F.CorePromise.resolve([]))}))):(XCTFail("Could not get image data for first image in ReplaceImageTest"),F.CorePromise.resolve([]))}))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasImage())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasImage())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasImage())}}}),l),_.ReplaceExistingImageTest=(u=function(){this.actionSequence_ReplaceExistingImage=[],this.actionSequence_ReplaceExistingCutoutImage=[],this.frameForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceExistingImageTest",ctor:u,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return this.frameForma_=p.as(p.last(this.allSelectableFormae(n,(function(t){return t.isImage()}))),D.FrameForma),null!=this.frameForma_},prepareDocument:function(t,e){var n=this,o=[];if("actionSequence_ReplaceExistingCutoutImage"==e&&N.ImageFacade.getCutoutModeForForma(this.frameForma_)==I.CutoutMode.Off){var i=I.ImageCutoutLibrary.getImageCutout(I.CutoutMode.BackgroundRemoval);o.push((function(){return new L.SetImageCutoutAction(n.frameForma_,i,I.ImageCutoutModelLibrary.CURRENT_MODEL,void 0,60)}))}return F.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this,i=n.firstPage;return this.imageDataForAsset("dog1.jpeg").then((function(e){var n;return(n=p.as(e,B.ActionTestImageData))?t.concat([function(){var t=new v.AddFormaParams(T.ControllerSettingsBehaviorEnum.SetControllerSettings,!1,o.frameForma_);return new C.AddImageContentAction(i,n.url,"image/jpeg",n.width,n.height,!1,x.MediaMetadata.init_5f01(),null,null,t)}]):(XCTFail("Could not get image data for replacement image in ReplaceExistingImageTest"),F.CorePromise.resolve([]))}))}}}),u),_.AddIconTest=(c=function(){this.actionSequence_AddIcon=[],this.iconURL_="",this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddIconTest",ctor:c,superName:"ActionTestBase",props:{hasIcon:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,O.ShapeForma))&&(i=p.as(o.contentNode,U.VectorContentNode))&&i.url==t.iconURL_&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o,i=this;return null!=(o=this.urlForAsset("dog1.svg"))?(this.iconURL_=o,F.CorePromise.resolve([function(){return new C.AddIconContentAction(i.iconURL_,x.MediaMetadata.init_5f01(),null)}])):(XCTFail("Could not get Icon URL for AddIconTest"),F.CorePromise.resolve([]))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasIcon())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasIcon())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasIcon())}}}),c),_.ReplaceIconTest=(h=function(){this.actionSequence_ReplaceIcon=[],this.rootForma_=null,this.iconForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceIconTest",ctor:h,superName:"ActionTestBase",statics:{originalIconURL_:"",replacementIconURL_:""},props:{hasIcon:function(){var t=!1;return p.opt(this.rootForma_,(function(e){return e.visitAll(R.FormaTraversal.PreOrder,(function(e){var n,o;(n=p.as(e,O.ShapeForma))&&(o=p.as(n.contentNode,U.VectorContentNode))&&o.url==h.replacementIconURL_&&(t=!0)}))})),t},populateActionSequence:function(t,e,n){var o,i=this;return F.CorePromise.resolve(t.concat([function(){return XCTAssertTrue(!(!(o=p.opt(p.opt(i.iconForma_,(function(t){return t.controller})),(function(t){return t.replaceable})))&&null==o)&&o),new C.AddIconContentAction(h.replacementIconURL_,x.MediaMetadata.init_5f01(),i.iconForma_)}]))},prepareDocument:function(t,e){var n,o;return this.rootForma_=t.firstPage.root,null!=(n=this.urlForAsset("dog1.svg"))&&null!=(o=this.urlForAsset("fork_and_spoon.svg"))&&(h.originalIconURL_=n,h.replacementIconURL_=o,XCTAssertNotEqual(h.originalIconURL_,h.replacementIconURL_)),F.CorePromise.resolve([function(){return new C.AddIconContentAction(h.originalIconURL_,x.MediaMetadata.init_5f01(),null)}])},setUpActionSequence:function(t,e,n){this.iconForma_=p.first(p.opt(p.as(this.lastActionResult,T.FormaActionResult),(function(t){return t.formae})))},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasIcon())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasIcon())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasIcon())}}}),h),_.AddVideoTest=(A=function(){this.actionSequence_AddVideo=[],this.videoURL_="",this.trackWidth_=0,this.trackHeight_=0,this.duration_=w.TheoTime.Zero,this.times_=[],this.posterURL_=null,this.posterWidth_=0,this.posterHeight_=0,this.posterParams_=null,this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddVideoTest",ctor:A,superName:"ActionTestBase",props:{hasVideo:function(){var t=this,e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,H.VideoForma))&&(i=o.videoContentNode)&&i.url==t.videoURL_&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o,i=this,r=n.firstPage;if(null!=(o=this.urlForAsset("spokes.gif"))){this.videoURL_=o,this.posterURL_=o;var a=this.posterURL_.split(".");a.length>0&&(a.pop(),this.posterURL_=a.join(".")+".png"),this.trackWidth_=480,this.trackHeight_=480,this.posterWidth_=480,this.posterHeight_=480;for(var s,l=7,u=p.iter(p.range(1,34,!0));!u.done;u.next())this.times_.push(new w.TheoTime(l,100)),l+=7;return this.duration_=new w.TheoTime(l,100),null!=(s=this.posterURL_)&&(this.posterParams_=new C.VideoPosterParams(s,"image/jpeg",this.posterWidth_,this.posterHeight_)),F.CorePromise.resolve([function(){return new C.AddVideoContentAction(r,i.videoURL_,"image/gif",i.trackWidth_,i.trackHeight_,i.duration_,i.times_,i.posterParams_,!1,x.MediaMetadata.init_5f01(),null,null,null,v.AddFormaParams.DEFAULTS)}])}return XCTFail("Could not get Video URL for AddVideoTest"),F.CorePromise.resolve([])},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasVideo())},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasVideo())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasVideo())}}}),A),_.AddLogoTest=(d=function(){this.actionSequence_AddLogo=[],this.primaryLogoID_="",this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddLogoTest",ctor:d,superName:"ActionTestBase",props:{hasLogo:function(){var t=!1;return p.opt(this.rootForma_,(function(e){return e.visitAll(R.FormaTraversal.PreOrder,(function(e){var n;(n=p.as(e,P.ImageForma))&&n.contentNode&&n.isLogo()&&(t=!0)}))})),t},hasLogoWithID:function(t){var e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,P.ImageForma))&&(i=o.contentNode)&&i.sparkElementID==t&&o.isLogo()&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o=this;return this.installBrandkit(n),F.CorePromise.resolve(t.concat([function(){var t=k.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[0];return o.primaryLogoID_=t.id,new C.AddLogoContentAction(n.firstPage,t,null,null)}]))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertTrue(this.hasLogoWithID(this.primaryLogoID_))},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasLogo())},validateAfterRedo:function(t,e){XCTAssertTrue(this.hasLogoWithID(this.primaryLogoID_))},shutdown:function(t,e,n){S.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),d),_.ReplaceLogoTest=(f=function(){this.actionSequence_ReplaceLogo=[],this.primaryLogoID_="",this.secondaryLogoID_="",this.rootForma_=null,S.ActionTestBase.call(this)},p.defineClass({name:"ReplaceLogoTest",ctor:f,superName:"ActionTestBase",props:{logoForma:{get:function(){return p.first(p.opt(p.as(this.getActionResult(0),T.FormaActionResult),(function(t){return t.formae})))}},hasLogo:function(){var t=!1;return p.opt(this.rootForma_,(function(e){return e.visitAll(R.FormaTraversal.PreOrder,(function(e){var n;(n=p.as(e,P.ImageForma))&&n.contentNode&&n.isLogo()&&(t=!0)}))})),t},hasLogoWithID:function(t){var e=!1;return p.opt(this.rootForma_,(function(n){return n.visitAll(R.FormaTraversal.PreOrder,(function(n){var o,i;(o=p.as(n,P.ImageForma))&&(i=o.contentNode)&&i.sparkElementID==t&&o.isLogo()&&(e=!0)}))})),e},populateActionSequence:function(t,e,n){var o=this;return this.installBrandkit(n),F.CorePromise.resolve(t.concat([function(){var t=k.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[0];o.primaryLogoID_=t.id;var e=k.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[1];return o.secondaryLogoID_=e.id,new C.AddLogoContentAction(n.firstPage,t,null,null)},function(){var t=k.Host.brandkitManager.fakeBrandkitForElementsForTesting.logos[1];return new C.AddLogoContentAction(n.firstPage,t,o.logoForma,null)}]))},setUpActionSequence:function(t,e,n){this.rootForma_=n.firstPage.root},validateAfterActionSequence:function(t,e){XCTAssertFalse(this.hasLogoWithID(this.primaryLogoID_)),XCTAssertTrue(this.hasLogoWithID(this.secondaryLogoID_))},validateAfterUndo:function(t,e){XCTAssertFalse(this.hasLogo())},validateAfterRedo:function(t,e){XCTAssertFalse(this.hasLogoWithID(this.primaryLogoID_)),XCTAssertTrue(this.hasLogoWithID(this.secondaryLogoID_))},shutdown:function(t,e,n){S.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),f),_.AddBadgeTest=(m=function(){this.actionSequence_AddAtomicBadgeTest=[],this.actionSequence_AddGroupedBadgeTest=[],this.atomicBadgeDocPromise_=null,this.groupedBadgeDocPromise_=null,this.numLockups_=0,this.numGroups_=0,this.doc_=null,S.ActionTestBase.call(this)},p.defineClass({name:"AddBadgeTest",ctor:m,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){return"actionSequence_AddAtomicBadgeTest"==e?(this.atomicBadgeDocPromise_=k.Host.actionTesting.badgeDocument(!1),null!=this.atomicBadgeDocPromise_):(this.groupedBadgeDocPromise_=k.Host.actionTesting.badgeDocument(!0),null!=this.groupedBadgeDocPromise_)},populateActionSequence:function(t,e,n){return("actionSequence_AddAtomicBadgeTest"==e?this.atomicBadgeDocPromise_:this.groupedBadgeDocPromise_).then((function(t){return[function(){return new g.AddBadgeAction(t,void 0,"automation")}]}))},countLockupsAndGroups:function(t){var e=0,n=0;return t.firstPage.root.visitAll(R.FormaTraversal.PreOrder,(function(t){t.isTypeLockup()?e+=1:p.opt(t.controller,(function(t){return 1==t.userGroup}))&&(n+=1)})),[e,n]},setUpActionSequence:function(t,e,n){var o=this.countLockupsAndGroups(n);this.numLockups_=o[0],this.numGroups_=o[1],this.doc_=n},validateAfterActionSequence:function(t,e){var n=this.countLockupsAndGroups(this.doc_);"actionSequence_AddAtomicBadgeTest"==e?XCTAssertEqual(n[0],this.numLockups_+1):XCTAssertEqual(n[1],this.numGroups_+1)},validateAfterUndo:function(t,e){var n=this.countLockupsAndGroups(this.doc_);XCTAssertEqual(n[0],this.numLockups_),XCTAssertEqual(n[1],this.numGroups_)},validateAfterRedo:function(t,e){var n=this.countLockupsAndGroups(this.doc_);"actionSequence_AddAtomicBadgeTest"==e?XCTAssertEqual(n[0],this.numLockups_+1):XCTAssertEqual(n[1],this.numGroups_+1)}}}),m)},zIaq:function(t,e,n){var o,i,r,a,s,l,u=e,c=n("oAGj"),h=n("c9Jm"),A=n("hJqd"),d=n("kYI4"),f=n("yGNn"),m=n("ascj"),_=n("iCxV"),p=n("DP9v"),T=n("Vm85");u.BrandifyTest=(o=function(){this.actionSequence_Brandify=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,h.ActionTestBase.call(this)},c.defineClass({name:"BrandifyTest",ctor:o,superName:"ActionTestBase",props:{hasText:function(t){for(var e=!1,n=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!n.done;n.next()){e=!0;break}return e},allTextBranded:function(t){for(var e,n=!0,o=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!o.done;o.next()){var i=o.value,r=T.TextFacade.getFontForForma(i);if(!(e=c.isEmpty(c.opt(r,(function(t){return t.getSparkFontRole()}))))&&null==e||e){n=!1;break}}return n},verifyColors:function(){var t=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=t);for(var e=0,n=0,o=0,i=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),r=c.iter(i);!r.done;r.next()){var a=r.value;a.isBrandkitPrimaryColor()&&(e+=1),a.isBrandkitSecondaryColor()&&(n+=1),a.isBrandkitShade()&&(o+=1)}XCTAssertEqual(e,0),XCTAssertEqual(n,0),XCTAssertTrue(i.length>0),XCTAssertTrue(o>0);var s=c.clone(d.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},populateActionSequence:function(t,e,n){var o=this;return this.docHasText_=this.hasText(n),this.installBrandkit(n),f.CorePromise.resolve(t.concat([function(){return new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,o.docHasText_,!0,!0)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID])),this.docHasText_?(XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),this.verifyColors()},validateAfterUndo:function(t,e){XCTAssertFalse(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID]))},validateAfterRedo:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID])),this.docHasText_?(XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID])),this.verifyColors()},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),o),u.AddBrandTest=(i=function(){this.actionSequence_AddBrand=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,this.addedBrandName="",this.addedBrandURN="",h.ActionTestBase.call(this)},c.defineClass({name:"AddBrandTest",ctor:i,superName:"ActionTestBase",props:{hasText:function(t){for(var e=!1,n=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!n.done;n.next()){e=!0;break}return e},allTextBranded:function(t){for(var e,n=!0,o=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!o.done;o.next()){var i=o.value,r=T.TextFacade.getFontForForma(i);if(!(e=c.isEmpty(c.opt(r,(function(t){return t.getSparkFontRole()}))))&&null==e||e){n=!1;break}}return n},verifyColors:function(){var t=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=t),XCTAssertFalse(t.isEqual(this.initialRootColor_));for(var e=0,n=0,o=0,i=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),r=c.iter(i);!r.done;r.next()){var a=r.value;a.isBrandkitPrimaryColor()&&(e+=1),a.isBrandkitSecondaryColor()&&(n+=1),a.isBrandkitShade()&&(o+=1)}XCTAssertEqual(e,0),XCTAssertEqual(n,0),XCTAssertTrue(i.length>0),XCTAssertTrue(o>0);var s=c.clone(d.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},populateActionSequence:function(t,e,n){var o=this;return this.docHasText_=this.hasText(n),this.installBrandkit(n),f.CorePromise.resolve(t.concat([function(){return new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,o.docHasText_,!0,!0)},function(){return o.installSecondBrandkit(o.testDoc_),o.addedBrandName=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,o.addedBrandURN=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new A.AddBrandingAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?(XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.addedBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.addedBrandURN),this.verifyColors()},validateAfterUndo:function(t,e){XCTAssertFalse(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID])),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},validateAfterRedo:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?(XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.allTextBranded(this.testDoc_))):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.addedBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.addedBrandURN),this.verifyColors()},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),i),u.RemoveBrandingTest=(r=function(){this.actionSequence_RemoveBranding=[],this.testDoc_=null,this.page_=null,h.ActionTestBase.call(this)},c.defineClass({name:"RemoveBrandingTest",ctor:r,superName:"ActionTestBase",props:{verifyColors:function(t){for(var e=0,n=0,o=0,i=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),r=c.iter(i);!r.done;r.next()){var a=r.value;a.isBrandkitPrimaryColor()&&(e+=1),a.isBrandkitSecondaryColor()&&(n+=1),a.isBrandkitShade()&&(o+=1)}if(XCTAssertEqual(e,0),XCTAssertEqual(n,0),t){var s=c.clone(d.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))}else XCTAssertEqual(o,0);XCTAssertTrue(i.length>0)},populateActionSequence:function(t,e,n){return this.installBrandkit(n),f.CorePromise.resolve(t.concat([function(){return new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)},function(){return new A.RemoveBrandingAction}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage},validateAfterActionSequence:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!0)},validateAfterUndo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!1)},validateAfterRedo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!0)},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),r),u.RemoveExistingBrandingTest=(a=function(){this.actionSequence_RemoveBranding=[],this.testDoc_=null,this.page_=null,this.initialBrandName="",this.initialBrandURN="",h.ActionTestBase.call(this)},c.defineClass({name:"RemoveExistingBrandingTest",ctor:a,superName:"ActionTestBase",props:{prepareDocument:function(t,e){var n=this;return this.installBrandkit(t),f.CorePromise.resolve([function(){return n.initialBrandName=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,n.initialBrandURN=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)}])},populateActionSequence:function(t,e,n){return f.CorePromise.resolve(t.concat([function(){return new A.RemoveBrandingAction}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage},validateAfterActionSequence:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},validateAfterUndo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(1==n),XCTAssertTrue(this.testDoc_.authoringContextName==this.initialBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.initialBrandURN)},validateAfterRedo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),XCTAssertTrue(""==this.testDoc_.authoringContextName),XCTAssertTrue(""==this.testDoc_.authoringContextURN)},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),a),u.ChangeBrandingTestToNone=(s=function(){this.actionSequence_ChangeBrandingToNone=[],this.testDoc_=null,this.page_=null,h.ActionTestBase.call(this)},c.defineClass({name:"ChangeBrandingTestToNone",ctor:s,superName:"ActionTestBase",props:{verifyColors:function(t){for(var e=0,n=0,o=0,i=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),r=c.iter(i);!r.done;r.next()){var a=r.value;a.isBrandkitPrimaryColor()&&(e+=1),a.isBrandkitSecondaryColor()&&(n+=1),a.isBrandkitShade()&&(o+=1)}if(XCTAssertEqual(e,0),XCTAssertEqual(n,0),t){var s=c.clone(d.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))}else XCTAssertEqual(o,0);XCTAssertTrue(i.length>0)},populateActionSequence:function(t,e,n){return this.installBrandkit(n),f.CorePromise.resolve(t.concat([function(){return new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)},function(){return new A.ChangeBrandingAction(null,_.Host.brandkitManager.fakeBrandkitForElementsForTesting.id,p.MultiBrandFacade.activeBrandkitID)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage},validateAfterActionSequence:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!0),XCTAssertTrue(null==p.MultiBrandFacade.getBrand(this.testDoc_))},validateAfterUndo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!1)},validateAfterRedo:function(t,e){var n=d.BrandingFacade.isDocumentBranded(this.testDoc_,!0);XCTAssertTrue(0==n),this.verifyColors(!0),XCTAssertTrue(null==p.MultiBrandFacade.getBrand(this.testDoc_))},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),s),u.ChangeBrandingTest=(l=function(){this.actionSequence_AddBrand=[],this.testDoc_=null,this.page_=null,this.initialRootColor_=null,this.docHasText_=!1,this.initialBrandName="",this.initialBrandURN="",this.finalBrandName="",this.finalBrandURN="",h.ActionTestBase.call(this)},c.defineClass({name:"ChangeBrandingTest",ctor:l,superName:"ActionTestBase",props:{hasText:function(t){for(var e=!1,n=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!n.done;n.next()){e=!0;break}return e},allTextBranded:function(t){for(var e,n=!0,o=c.iter(t.firstPage.root.filterWithCallback((function(t){return t.isTypeLockup()})));!o.done;o.next()){var i=o.value,r=T.TextFacade.getFontForForma(i);if(!(e=c.isEmpty(c.opt(r,(function(t){return t.getSparkFontRole()}))))&&null==e||e){n=!1;break}}return n},verifyColors:function(){var t=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary);XCTAssertTrue(null!=t),XCTAssertFalse(t.isEqual(this.initialRootColor_));for(var e=0,n=0,o=0,i=c.clone(this.page_.colorLibraryController.getTheoColorsUsedInDocument()),r=c.iter(i);!r.done;r.next()){var a=r.value;a.isBrandkitPrimaryColor()&&(e+=1),a.isBrandkitSecondaryColor()&&(n+=1),a.isBrandkitShade()&&(o+=1)}XCTAssertEqual(e,0),XCTAssertEqual(n,0),XCTAssertTrue(i.length>0),XCTAssertTrue(o>0);var s=c.clone(d.BrandingFacade.getDocumentBrandedElementsUsage(this.testDoc_,!1,!0));XCTAssertTrue(s.includes("color"))},prepareDocument:function(t,e){var n=this;return this.installBrandkit(t),f.CorePromise.resolve([function(){return n.initialBrandName=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,n.initialBrandURN=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new A.BrandifyAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,!0,!0,!0)}])},populateActionSequence:function(t,e,n){var o=this;return this.docHasText_=this.hasText(n),f.CorePromise.resolve(t.concat([function(){var t=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.id;return o.installSecondBrandkit(o.testDoc_),o.finalBrandName=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.name,o.finalBrandURN=_.Host.brandkitManager.fakeBrandkitForElementsForTesting.urn,new A.ChangeBrandingAction(_.Host.brandkitManager.fakeBrandkitForElementsForTesting,t,p.MultiBrandFacade.activeBrandkitID)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.page_=n.firstPage,this.initialRootColor_=this.page_.root.style.colors.color(m.ColorRole.FieldPrimary)},validateAfterActionSequence:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.finalBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.finalBrandURN),this.verifyColors()},validateAfterUndo:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID,this.FAKE_LOGO_ELEMENT_STAMP_ID])),XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID,this.FAKE_FONT_ELEMENT_BODY_ID])),XCTAssertTrue(this.testDoc_.authoringContextName==this.initialBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.initialBrandURN)},validateAfterRedo:function(t,e){XCTAssertTrue(d.BrandingFacade.areSparkLogosInUse(this.testDoc_,[this.FAKE_LOGO_ELEMENT_PRIMARY_ID_2])),this.docHasText_?XCTAssertTrue(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])):XCTAssertFalse(d.BrandingFacade.areSparkFontsInUse(this.testDoc_,[this.FAKE_FONT_ELEMENT_HEADLINE_ID_2])),XCTAssertTrue(this.testDoc_.authoringContextName==this.finalBrandName),XCTAssertTrue(this.testDoc_.authoringContextURN==this.finalBrandURN),this.verifyColors()},shutdown:function(t,e,n){h.ActionTestBase.prototype.shutdown.call(this,t,e,n),this.removeBrandkit(n)}}}),l)}}]);
//# sourceMappingURL=vendors_npm_spark_4679d780-2053b417.js.map