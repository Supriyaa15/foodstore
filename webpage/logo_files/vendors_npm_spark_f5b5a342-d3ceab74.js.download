(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[50],{"2Srg":function(e,t,n){var a,o=t,i=n("oAGj"),r=n("cmoc"),l=n("cYVN");o.ImageRoleData=(a=function(e,t,n){l.RoleData.call(this,e,t,n)},i.defineClass({name:"ImageRoleData",ctor:a,superName:"RoleData",statics:{getImageRoleData:function(e){return e instanceof r.FrameForma?new a(e,[],{}):null}}}),a)},"7Ta2":function(e,t,n){var a,o,i,r=t,l=n("oAGj"),s=n("gXiO"),h=n("6ZWm"),u=n("iCxV"),c=n("2Srg"),g=n("ws+m"),p=n("fNpk"),d=n("xRbc"),f=n("zbwF"),m=n("nrTo"),y=n("JO5d"),T=n("ERpL"),L=n("lYNH"),R=n("8t9B");r.RoleSuggesterProtocol=l.defineProtocol("RoleSuggesterProtocol",{getRole:"(RoleData) -> InferredRole"}),r.RoleSuggester=(a=function(){s.CoreObject.call(this)},o={},l.defineClass({name:"RoleSuggester",ctor:a,superName:"CoreObject",statics:{cache:{get:function(){var e;return void 0===o.cache&&(o.cache=((e=l.opt(u.Host.platform,(function(e){return e.isService})))||null!=e)&&e?l.opt(u.Host.learning,(function(e){return e.getHostPredictionCache()})):new m.PredictionCacheInferredRole),o.cache},set:function(e){o.cache=e}},ROLE_SHORT_LABELS:{Undefined:"udf",Title:"ttl",Subtitle:"stl",BodyText:"bdy",ContactInfo:"ctc",SocialMediaReference:"soc",Quote:"qot",CalltoAction:"act",GraphicContent:"gct",Seperator:"sep",Backing:"bkg",Background:"bgd",Decoration:"dec",Logo:"log"},getShortLabel:function(e){var t;return null!=(t=a.ROLE_SHORT_LABELS[e])?t:(p.LegacyCoreAssert.fail("didn't find role in short label dictionary!",void 0,"RoleSuggester.getShortLabel","RoleSuggester.swift",120),"???")}},props:{getRole:function(e){var t,n,o,i,s,p,m=null,v=null;if(l.as(e.controller,R.TypeLockupController)&&(n=d.LockupRoleData.getLockupRoleData(e))&&(m=n,v=f.LockupRoleSuggesterFactory.Create("MLP"),l.clone(v.getRole(n)).role==r.InferredRoleType.Undefined&&(v=f.LockupRoleSuggesterFactory.Create())),e.controller instanceof y.ShapeController&&(o=T.ShapeRoleData.getShapeRoleData(e))&&(m=o,v=e.isGridCell()?L.ShapeRoleSuggesterFactory.Create("Simple"):L.ShapeRoleSuggesterFactory.Create("MLP")),l.as(e.controller,h.FrameController)&&(i=c.ImageRoleData.getImageRoleData(e))&&(m=i,v=g.ImageRoleSuggesterFactory.Create("Simple")),(s=m)&&(p=v)){var S=s.getUniqueKey();return((t=l.opt(u.Host.platform,(function(e){return e.isService})))||null!=t)&&t||a.cache.cleanup(e.page.document.uuid),null==a.cache.getCacheValue(S)&&a.cache.setCacheValue(S,this.getRoleForData(s,p)),a.cache.getCacheValue(S)}return r.InferredRole.init_84d1()},getRoleForData:function(e,t){var n=l.clone(t.getRole(e));return p.LegacyCoreAssert.isTrue(null!=a.ROLE_SHORT_LABELS[n.role],"no label for role",void 0,"RoleSuggester.getRoleForData","RoleSuggester.swift",92),p.LegacyCoreAssert.isTrue(null!=a.ROLE_SHORT_LABELS[n.secondaryRole],"no label for secondary role",void 0,"RoleSuggester.getRoleForData","RoleSuggester.swift",93),n}}}),a),r.InferredRoleType=l.defineEnum("InferredRoleType",{Undefined:"Undefined",Title:"Title",SubTitle:"Subtitle",Body:"BodyText",Contact:"ContactInfo",Social:"SocialMediaReference",Quote:"Quote",Action:"CalltoAction",GraphicContent:"GraphicContent",Seperator:"Seperator",Backing:"Backing",Background:"Background",Decoration:"Decoration",Logo:"Logo"}),r.InferredRole=(i=function(){},l.defineClass({name:"InferredRole",ctor:i,props:{init_84d1:function(e,t,n,a){void 0===e&&(e=r.InferredRoleType.Undefined),void 0===t&&(t=0),void 0===n&&(n=r.InferredRoleType.Undefined),void 0===a&&(a=0),this.role=e,this.confidence=t,this.secondaryRole=n,this.secondaryConfidence=a},init_implicit:function(e,t,n,a){this.role=e,this.confidence=t,this.secondaryRole=n,this.secondaryConfidence=a},clone:function(){return i.init_implicit(this.role,this.confidence,this.secondaryRole,this.secondaryConfidence)}}}),i)},"7l9C":function(e,t,n){var a,o,i,r,l,s,h=t,u=n("oAGj"),c=n("SpAV"),g=n("gXiO"),p=n("fNpk"),d=n("tGKA"),f=n("3DEm"),m=n("ol4x"),y=n("oKlP"),T=n("sIWg");h.AlignmentIdiom=u.defineEnum("AlignmentIdiom",{LRBB:0,LLtb:1,LLbt:2,RRtb:3,RRbt:4,CCtb:5,CCbt:6,LRtb:7,LRbt:8,RLtb:9,LRtt:10,RLtt:11,LRbb:12,RLbb:13,LRmm:14,cCCtb:15,cLCtb:16,cRCtb:17,LRctt:18,LRcbb:19,LLtbo:20,RRtbo:21,LLbto:22,LRott:23}),h.ChildVertOrientation=u.defineEnum("ChildVertOrientation",{LeftAbove:0,RightAbove:1,Topside:2,BottomSide:3}),h.GlyphType=u.defineEnum("GlyphType",{GENERIC:0,DROPCAP:1,PUNCTUATION:2,SYMBOL:3}),h.NodeMeasurements=(a=function(e,t,n){this.node=e,this.minY=t,this.maxY=n},u.defineClass({name:"NodeMeasurements",ctor:a}),a),h.ReflowType=u.defineEnum("ReflowType",{TOP:0,BOTTOM:1,FULL:2,FIT:3}),h.TypographyNode=(o=function(){this.parent=null,this.globalMat=d.Matrix2D.Identity,this.transMat=d.Matrix2D.Identity,this.scaleMat=d.Matrix2D.Identity,this.rotateMat=d.Matrix2D.Identity,this.rotateAlign=0,this.scaleAlign=1,g.CoreObject.call(this)},u.defineClass({name:"TypographyNode",ctor:o,superName:"CoreObject",statics:{Clockwise:90,CounterClockwise:270,getLeadingAdjustment:function(){return 1+2*m.TypographyLayout.lineSpacing}},props:{isSame:function(e){return this.getId()==e.getId()},getRoot:function(){for(var e=this;null!=e.parent;)e=e.parent;return e},getWeight:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getWeight","TypographyNode.swift",115),0},resetScale:function(){this.scaleAlign=1},propagateDown:function(e){},transformToLocalBounds:function(e){var t=this.local(),n=t.transformPoint(new y.TheoPoint(e.minX,e.minY)),a=t.transformPoint(new y.TheoPoint(e.maxX,e.minY)),o=t.transformPoint(new y.TheoPoint(e.maxX,e.maxY)),i=t.transformPoint(new y.TheoPoint(e.minX,e.maxY)),r=f.MathUtils.minDouble(f.MathUtils.minDouble(f.MathUtils.minDouble(n.x,a.x),o.x),i.x),l=f.MathUtils.maxDouble(f.MathUtils.maxDouble(f.MathUtils.maxDouble(n.x,a.x),o.x),i.x),s=f.MathUtils.minDouble(f.MathUtils.minDouble(f.MathUtils.minDouble(n.y,a.y),o.y),i.y),h=f.MathUtils.maxDouble(f.MathUtils.maxDouble(f.MathUtils.maxDouble(n.y,a.y),o.y),i.y);return new T.TheoRect(r,s,l,h)},transformTo:function(e,t){if(e.getId()==this.getId())return new T.TheoRect(t.minX,t.minY,t.maxX,t.maxY);for(var n=t,a=this.parent;null!=a&&a.getId()!=e.getId();)n=a.transformToLocalBounds(n),a=a.parent;return p.LegacyCoreAssert.isTrue(null!=a,"did not find node with requested id",void 0,"TypographyNode.transformTo","TypographyNode.swift",155),e.getId()!=this.getId()&&(n=e.transformToLocalBounds(n)),n},translateXY:function(e,t){this.transMat=this.transMat.translate(new y.TheoPoint(e,t))},rotateTo:function(e){var t=e*Math.PI/180;this.rotateMat=d.Matrix2D.Identity.rotateTo(Math.cos(t),Math.sin(t))},scaleXY:function(e){this.scaleMat=d.Matrix2D.Identity.scaleXY(e,e)},local:function(){return this.scaleMat.concat(this.rotateMat).concat(this.transMat)},global:function(){return this.globalMat},isRotated:function(){return 0!=this.rotateAlign},childrenRotated:function(){return this.isRotated()},getId:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getId","TypographyNode.swift",192),null},localbounds:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.localbounds","TypographyNode.swift",197),null},getHSpace:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getHSpace","TypographyNode.swift",202),0},getMinHSpace:function(){return p.LegacyCoreAssert.fail("Calling an abstreact method.",void 0,"TypographyNode.getMinHSpace","TypographyNode.swift",207),0},getMargin:function(){return p.LegacyCoreAssert.fail("Calling an abstreact method.",void 0,"TypographyNode.getMargin","TypographyNode.swift",212),0},getAscent:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getAscent","TypographyNode.swift",227),0},getDescent:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getDescent","TypographyNode.swift",232),0},getLeading:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getLeading","TypographyNode.swift",237),0},getBaseline:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getBaseline","TypographyNode.swift",242),0},getMidline:function(){return this.localbounds().height/2},getSemanticWidth:function(){return p.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyNode.getSemanticWidth","TypographyNode.swift",251),0},getRightmostTextNode:function(){return null},getLeftmostTextNode:function(){return null},depthFirstSearch:function(e){},calcTransform:function(){this.rotateTo(this.rotateAlign),this.scaleXY(this.scaleAlign)},getConcatScale:function(){return this.scaleAlign},getTextNodes:function(){return[]},getText:function(){return""},getLines:function(){return[this]},description:{get:function(){var e="  ",t="";if(null==this.parent)t="ROOT:";else{for(var n=this.parent;null!=n;)n=n.parent,e+="  ";t+=e,this.isSame(this.parent.getChild(!0))?t+="LEFT:":t+="RIGHT:"}this instanceof h.SpacerNode?t+="SpacerNode ":this instanceof h.TextNode?t+="TextNode ":t+="GroupNode ",t+="id ="+this.getId()+" < "+this.getText()+" >",t+=u.toString(" weight:%.0f ",u.toDouble(this.getWeight())),this instanceof h.GroupNode&&(t+=" align: "+u.toString(this.transAlign)+" ");var a=this.localbounds();return t+=u.toString(" bounds:[x:%.2f",a.minX)+u.toString(" y:%.2f",a.minY)+u.toString(" w:%.2f",a.width)+u.toString(" h:%.2f]",a.height)+u.toString(" | scale:%.2f",this.scaleAlign)+u.toString(" | rotate:%.2f",this.rotateAlign),t+=u.toString(" | leading:%.2f",this.getLeading())+u.toString(" | baseline:%.2f",this.getBaseline())+"\r\n"}}}}),o),h.TextToken=(i=function(e,t,n,a,o,i,r,l,s,h){this.text=e,this.bounds=n,this.midline=a,this.hspace=o,this.ascent=i,this.descent=r,this.leading=l,this.preVertOffset=s,this.postVertOffset=h,this.weight=t,this.styleWeight=0,this.isGlyph=!1,this.range=null},u.defineClass({name:"TextToken",ctor:i,statics:{symbols:["$","£","€","¥","¢","%"],punctuation:["!","?",'"',"'","“","”","‘","’"],getGlyphType:function(e){return i.symbols.includes(e)?h.GlyphType.SYMBOL:i.punctuation.includes(e)?h.GlyphType.PUNCTUATION:h.GlyphType.GENERIC}}}),i),h.SpacerNode=(r=function(e,t){this.id_=e,this.size_=t,h.TypographyNode.call(this)},u.defineClass({name:"SpacerNode",ctor:r,superName:"TypographyNode",props:{getId:function(){return".S"+u.toString(this.id_)},getWeight:function(){return 0},localbounds:function(){return this.transformToLocalBounds(new T.TheoRect(0,0,this.size_.width,this.size_.height))},getHSpace:function(){return 0},getMinHSpace:function(){return 0},getMargin:function(){return 0},getAscent:function(){return 0},getDescent:function(){return 0},getLeading:function(){return 0},getBaseline:function(){return this.localbounds().height},getSemanticWidth:function(){return this.localbounds().width/2}}}),r),h.TextNode=(l=function(e,t){this.token_=e,this.id_=t,h.TypographyNode.call(this)},u.defineClass({name:"TextNode",ctor:l,superName:"TypographyNode",props:{getId:function(){return"."+u.toString(this.id_)},setToken:function(e){this.token_=e},getWeight:function(){return this.token_.weight},localbounds:function(){return this.transformToLocalBounds(this.token_.bounds)},globalbounds:function(){var e=this.global(),t=this.token_.bounds,n=e.transformPoint(new y.TheoPoint(t.minX,t.minY)),a=e.transformPoint(new y.TheoPoint(t.maxX,t.minY)),o=e.transformPoint(new y.TheoPoint(t.maxX,t.maxY)),i=e.transformPoint(new y.TheoPoint(t.minX,t.maxY)),r=f.MathUtils.minDouble(f.MathUtils.minDouble(f.MathUtils.minDouble(n.x,a.x),o.x),i.x),l=f.MathUtils.maxDouble(f.MathUtils.maxDouble(f.MathUtils.maxDouble(n.x,a.x),o.x),i.x),s=f.MathUtils.minDouble(f.MathUtils.minDouble(f.MathUtils.minDouble(n.y,a.y),o.y),i.y),h=f.MathUtils.maxDouble(f.MathUtils.maxDouble(f.MathUtils.maxDouble(n.y,a.y),o.y),i.y);return new T.TheoRect(r,s,l,h)},getHSpace:function(){return this.token_.hspace*this.scaleMat.a},getMinHSpace:function(){return this.getHSpace()},getMargin:function(){return.3*this.token_.leading*this.scaleMat.a},getAscent:function(){return this.token_.ascent*this.scaleMat.d},getDescent:function(){return this.token_.descent*this.scaleMat.d},getLeading:function(){return this.token_.leading*this.scaleMat.d},getBaseline:function(){return this.isRotated()?this.localbounds().height:this.token_.ascent*this.scaleMat.d},getMidline:function(){return this.isRotated()?h.TypographyNode.prototype.getMidline.call(this):this.token_.midline*this.scaleMat.d},getSemanticWidth:function(){return this.localbounds().width/2},getVerticalOffset:function(){return this.token_.preVertOffset},getRightmostTextNode:function(){return this},getLeftmostTextNode:function(){return this},depthFirstSearch:function(e){e.push(this)},getTextNodes:function(){return[this]},getText:function(){return this.token_.text}}}),l),h.GroupNode=(s=function(e,t){this.leftChild=e,this.rightChild=t,this.transAlign=h.AlignmentIdiom.LRBB,this.cachedWeight=0,this.dirtyWeight=!0,this.cachedID="",this.dirtyID=!0,h.TypographyNode.call(this),e.parent=this,t.parent=this},u.defineClass({name:"GroupNode",ctor:s,superName:"TypographyNode",props:{getChild:function(e){return e?this.leftChild:this.rightChild},setChild:function(e,t){t?this.leftChild=e:this.rightChild=e,e.parent=this;for(var n=this;null!=n;)n.dirtyID=!0,n.dirtyWeight=!0,n=n.parent},getId:function(){return this.dirtyID&&(this.cachedID=this.leftChild.getId()+this.rightChild.getId(),this.dirtyID=!1),this.cachedID},getWeight:function(){if(this.dirtyWeight){var e=this.leftChild.getWeight();e==this.rightChild.getWeight()?this.cachedWeight=e:this.cachedWeight=-1,this.dirtyWeight=!1}return this.cachedWeight},localbounds:function(){var e=this.leftChild.localbounds(),t=new T.TheoRect(e.minX,e.minY,e.maxX,e.maxY);e=this.rightChild.localbounds();var n=new T.TheoRect(e.minX,e.minY,e.maxX,e.maxY);return this.transformToLocalBounds(new T.TheoRect(f.MathUtils.minDouble(t.minX,n.minX),f.MathUtils.minDouble(t.minY,n.minY),f.MathUtils.maxDouble(t.maxX,n.maxX),f.MathUtils.maxDouble(t.maxY,n.maxY)))},childrenRotated:function(){return this.isRotated()||this.leftChild.childrenRotated()||this.rightChild.childrenRotated()},getHSpace:function(){return this.scaleMat.a*f.MathUtils.maxDouble(this.leftChild.getHSpace(),this.rightChild.getHSpace())},getMinHSpace:function(){return this.leftChild instanceof h.SpacerNode?this.scaleMat.a*this.rightChild.getMinHSpace():this.rightChild instanceof h.SpacerNode?this.scaleMat.a*this.leftChild.getMinHSpace():this.scaleMat.a*f.MathUtils.minDouble(this.leftChild.getMinHSpace(),this.rightChild.getMinHSpace())},getMargin:function(){return this.scaleMat.a*f.MathUtils.minDouble(this.leftChild.getMargin(),this.rightChild.getMargin())},getLeading:function(){var e;switch(this.transAlign){case 1:case 3:case 5:case 7:case 16:case 17:case 15:e=this.rightChild.getLeading();break;case 2:case 4:case 6:case 8:e=this.leftChild.getLeading();break;default:e=f.MathUtils.maxDouble(this.leftChild.getLeading(),this.rightChild.getLeading())}return this.scaleMat.d*e},getInternalHSpace:function(){return this.leftChild instanceof h.SpacerNode?this.rightChild.getMinHSpace():this.rightChild instanceof h.SpacerNode?this.leftChild.getMinHSpace():f.MathUtils.minDouble(this.leftChild.getMinHSpace(),this.rightChild.getMinHSpace())},getInternalVSpace:function(e){if(this.getTextNodes().length>1&&!this.childrenRotated()&&f.MathUtils.absDouble(this.leftChild.scaleAlign-this.rightChild.scaleAlign)<.1){var t,n,a=u.clone(this.leftChild.getTextNodes()),o=u.clone(this.rightChild.getTextNodes()),i=0,r=0,l=0,s=0;if(e){if(r=a[0].getDescent(),n=a[0].getLeading(),a.length>1){s=a[0].localbounds().maxY;for(var c=u.iter(u.range(1,a.length-1,!0));!c.done;c.next())a[m=c.value].localbounds().maxY>s&&(s=a[m].localbounds().maxY,r=a[m].getDescent(),n=a[m].getLeading())}if(i=o[0].getAscent(),t=o[0].getLeading(),o.length>1){l=o[0].localbounds().minY;for(var g=u.iter(u.range(1,o.length-1,!0));!g.done;g.next())o[m=g.value].localbounds().minY<l&&(l=o[m].localbounds().minY,i=o[m].getAscent(),t=o[m].getLeading())}}else{if(r=o[0].getDescent(),n=o[0].getLeading(),o.length>1){s=o[0].localbounds().maxY;for(var p=u.iter(u.range(1,o.length-1,!0));!p.done;p.next())o[m=p.value].localbounds().maxY>s&&(s=o[m].localbounds().maxY,r=o[m].getDescent(),n=o[m].getLeading())}if(i=a[0].getAscent(),t=a[0].getLeading(),a.length>1){l=a[0].localbounds().minY;for(var d=u.iter(u.range(1,a.length-1,!0));!d.done;d.next()){var m;a[m=d.value].localbounds().minY<l&&(l=a[m].localbounds().minY,i=a[m].getAscent(),t=a[m].getLeading())}}}var y=f.MathUtils.minDouble(t,n);return f.MathUtils.absDouble(t-n)/y>.2?f.MathUtils.minDouble(1.2*this.leftChild.getMargin(),this.rightChild.getMargin())*h.TypographyNode.getLeadingAdjustment():f.MathUtils.maxDouble(0,1.2*y*h.TypographyNode.getLeadingAdjustment()-(i+r))}return f.MathUtils.minDouble(1.2*this.leftChild.getMargin(),this.rightChild.getMargin())*h.TypographyNode.getLeadingAdjustment()},getConcatScale:function(){for(var e=this.scaleAlign,t=u.clone(this.getTextNodes()),n=u.iter(t);!n.done;n.next()){for(var a=n.value,o=a.parent,i=a.scaleAlign;o.getId()!=this.getId();)i*=o.scaleAlign,o=o.parent;i>e&&(e=i)}return e},getBaseline:function(){if(this.isRotated())return this.localbounds().height;var e=this.leftChild.localbounds(),t=this.transformToLocalBounds(new T.TheoRect(e.minX,e.minY,e.maxX,e.minY+this.leftChild.getBaseline()));e=this.rightChild.localbounds();var n=this.transformToLocalBounds(new T.TheoRect(e.minX,e.minY,e.maxX,e.minY+this.rightChild.getBaseline()));return e=this.localbounds(),f.MathUtils.maxDouble(t.maxY,n.maxY)-e.minY},getSemanticWidth:function(){if(this.getWeight()<0){for(var e=this.rightChild;e.getWeight()<0;)e=e.rightChild;for(var t=e.parent.leftChild,n=t.localbounds().minX<e.localbounds().minX?t:e,a=n.localbounds();!n.isSame(this);)a=(n=n.parent).transformToLocalBounds(a);return a.maxX-this.localbounds().minX}return this.localbounds().width/2},getMidline:function(){return this.isRotated()||this.transAlign!=h.AlignmentIdiom.LRBB||this.rightChild.isRotated()&&this.leftChild.isRotated()?h.TypographyNode.prototype.getMidline.call(this):f.MathUtils.maxDouble(this.leftChild.getMidline(),this.rightChild.getMidline())*this.scaleMat.d},getRightmostTextNode:function(){return this.rightChild.getRightmostTextNode()},getLeftmostTextNode:function(){return this.leftChild.getLeftmostTextNode()},swapChildren:function(){var e=this.leftChild;this.leftChild=this.rightChild,this.rightChild=e},depthFirstSearch:function(e){this.leftChild.depthFirstSearch(e),this.rightChild.depthFirstSearch(e)},getTextNodes:function(){var e=[];return this.depthFirstSearch(e),e},getTextRuns:function(){for(var e=[],t=u.clone(this.getTextNodes()),n=u.iter(t);!n.done;n.next()){for(var a=n.value;null!=a.parent&&a.parent.getWeight()==a.getWeight();)a=a.parent;for(var o=!1,i=u.iter(e);!i.done;i.next())if(i.value.isSame(a)){o=!0;break}o||e.push(a)}return e},getChildVertOrientation:function(){switch(this.transAlign){case 1:case 3:case 5:case 7:case 16:case 17:case 15:return h.ChildVertOrientation.LeftAbove;case 2:case 4:case 6:case 8:return h.ChildVertOrientation.RightAbove;case 10:case 11:case 18:return h.ChildVertOrientation.Topside}return h.ChildVertOrientation.BottomSide},getAscent:function(){switch(this.getChildVertOrientation()){case 0:return this.rightChild.getAscent();case 1:return this.leftChild.getAscent();case 2:return f.MathUtils.minDouble(this.leftChild.getAscent(),this.rightChild.getAscent())}return f.MathUtils.maxDouble(this.leftChild.getAscent(),this.rightChild.getAscent())},getDescent:function(){switch(this.getChildVertOrientation()){case 0:return this.rightChild.getDescent();case 1:return this.leftChild.getDescent();case 3:return f.MathUtils.minDouble(this.leftChild.getDescent(),this.rightChild.getDescent())}return f.MathUtils.maxDouble(this.leftChild.getDescent(),this.rightChild.getDescent())},calcTransform:function(){this.leftChild.calcTransform(),this.rightChild.calcTransform(),h.TypographyNode.prototype.calcTransform.call(this),this.internalCalcTransform()},internalCalcTransform:function(){var e=this.leftChild,t=this.rightChild,n=e.localbounds(),a=t.localbounds();switch(this.transAlign){case 0:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.minY-a.minY+(e.getBaseline()-t.getBaseline()));break;case 1:t.translateXY(n.minX-a.minX,n.maxY-a.minY+this.getInternalVSpace(!0));break;case 2:t.translateXY(n.minX-a.minX,n.minY-a.maxY-this.getInternalVSpace(!1));break;case 3:t.translateXY(n.maxX-a.maxX,n.maxY-a.minY+this.getInternalVSpace(!0));break;case 4:t.translateXY(n.maxX-a.maxX,n.minY-a.maxY-this.getInternalVSpace(!1));break;case 5:t.translateXY(n.minX+(n.width-a.width)/2-a.minX,n.maxY-a.minY+this.getInternalVSpace(!0));break;case 6:t.translateXY(n.minX+(n.width-a.width)/2-a.minX,n.minY-a.maxY-this.getInternalVSpace(!1));break;case 7:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.maxY-a.minY+this.getInternalVSpace(!0));break;case 8:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.minY-a.maxY-this.getInternalVSpace(!1));break;case 9:t.translateXY(n.minX-a.maxX-this.getInternalHSpace(),n.maxY-a.minY+this.getInternalVSpace(!0));break;case 10:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.minY-a.minY);break;case 11:t.translateXY(n.minX-a.maxX-this.getInternalHSpace(),n.minY-a.minY);break;case 12:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.minY+(n.height-a.height)-a.minY);break;case 13:t.translateXY(n.minX-a.maxX-this.getInternalHSpace(),n.minY+(n.height-a.height)-a.minY);break;case 14:t.translateXY(n.maxX-a.minX+this.getInternalHSpace(),n.minY+(e.getMidline()-t.getMidline())-a.minY);break;case 15:t.translateXY(n.minX+e.getSemanticWidth()-(a.minX+t.getSemanticWidth()),n.maxY-a.minY+this.getInternalVSpace(!0));break;case 16:t.translateXY(n.minX+e.getSemanticWidth()-a.minX,n.maxY-a.minY+this.getInternalVSpace(!0));break;case 17:t.translateXY(n.minX+e.getSemanticWidth()-a.maxX,n.maxY-a.minY+this.getInternalVSpace(!0));break;case 18:for(var o=(r=e.getRightmostTextNode()).localbounds(),i=r.parent;null!=i;)o=i.transformToLocalBounds(o),i=i.parent;t.translateXY(o.maxX-a.minX+this.getInternalHSpace(),o.minY-a.minY);break;case 19:var r;for(o=(r=e.getRightmostTextNode()).localbounds(),i=r.parent;null!=i;)o=i.transformToLocalBounds(o),i=i.parent;t.translateXY(o.maxX-a.minX+this.getInternalHSpace(),o.minY+(o.height-a.height)-a.minY);break;case 20:t.translateXY(n.minX-a.minX,n.maxY-a.minY-f.MathUtils.minDouble(n.height,a.height)/3);break;case 21:t.translateXY(n.maxX-a.maxX,n.maxY-a.minY-f.MathUtils.minDouble(n.height,a.height)/2);break;case 22:t.translateXY(n.minX-a.minX,n.minY-a.maxY+f.MathUtils.minDouble(n.height,a.height)/2);break;case 23:t.translateXY(n.maxX-a.minX-f.MathUtils.minDouble(n.width,a.width)/2,n.minY-a.minY)}},description:{get:function(){var e=h.TypographyNode._getters.description.call(this);return e+=this.leftChild.description,e+=this.rightChild.description}},getText:function(){for(var e=u.clone(this.getTextNodes()),t="",n=u.iter(e);!n.done;n.next())" "!=(t+=n.value.getText()).substr(t.length-1)&&(t+=" ");return t.trim()},getLines:function(){for(var e=[],t=[],n=u.clone(this.getTextNodes()),a=u.iter(n);!a.done;a.next())for(var o=a.value,i=o,r=o.parent;null!=r;){if(r.transAlign!=h.AlignmentIdiom.LRBB){e.includes(i.getId())||(e.push(i.getId()),t.push(i));break}if(r.getId()==this.getId())break;i=r,r=r.parent}return 0==t.length&&t.push(this),t},optimizeFlow:function(e,t,n,a,o){void 0===a&&(a=1),void 0===o&&(o=9999);var i=u.clone(this.getTextNodes());if(i.length<2)return 1;c.CoreAssert.isTrue(t.width>0&&t.height>0,"container size is 0",void 0,"GroupNode.optimizeFlow","TypographyNode.swift",1138),c.CoreAssert.isTrue(o>=a,"maximum lines requested is less than minimum lines requested",void 0,"GroupNode.optimizeFlow","TypographyNode.swift",1139),this.resetScale();for(var r=[],l=u.iter(u.range(0,i.length-1,!0));!l.done;l.next()){var s=l.value;r.push(s+1)}if(a<i.length){for(var g=t.aspectRatio,d=99999,y=0,T=0,L=f.MathUtils.minInt(o,i.length),R=[],v=i.length;v>0;){if(R.splice(0),n==h.ReflowType.BOTTOM)for(s=i.length-v;s>0;)R.splice(0,0,s),s-=v;else for(s=v;s<i.length;)R.push(s),s+=v;if(R.push(i.length),R.length>=a&&R.length<=L){if(this.buildBranchFromLines(i,R,e),n==h.ReflowType.FIT){this.resetScale(),this.calcTransform();for(var S=u.clone(this.getLines()),C=m.TypographyLayout.longestLine(S).localbounds().width,A=u.iter(S);!A.done;A.next())(k=A.value).scaleAlign=C/k.localbounds().width}this.calcTransform();var b=this.localbounds(),x=b.aspectRatio;if((M=f.MathUtils.absDouble(g-x))<d){d=M,y=x,T=b.height,r.splice(0);for(var _=u.iter(R);!_.done;_.next())s=_.value,r.push(s)}else if(x<g)break}v-=1}if(g>y&&(n==h.ReflowType.TOP||n==h.ReflowType.BOTTOM)){R.splice(0);for(var I=u.iter(r);!I.done;I.next())s=I.value,R.push(s);for(;g>y&&1!=R.length;){if(n==h.ReflowType.BOTTOM)for(s=0;s<R.length-1;)R[s]-1==0?R.splice(s,1):(R[s]-=1,s+=1);else for(s=0;s<R.length-1;)R[s]+1<R[s+1]?(R[s]+=1,s+=1):R.splice(s,1);if(R.length<a)break;var M;if(this.buildBranchFromLines(i,R,e),this.calcTransform(),y=this.localbounds().width/T,(M=f.MathUtils.absDouble(g-y))<d){d=M,r.splice(0);for(var w=u.iter(R);!w.done;w.next())s=w.value,r.push(s)}}}}if(p.LegacyCoreAssert.isTrue(r.length>0,"Could not reflow auto text",void 0,"GroupNode.optimizeFlow","TypographyNode.swift",1266),this.buildBranchFromLines(i,r,e),n==h.ReflowType.FIT){this.resetScale(),this.calcTransform(),S=u.clone(this.getLines()),C=m.TypographyLayout.longestLine(S).localbounds().width;for(var D=u.iter(S);!D.done;D.next()){var k;(k=D.value).scaleAlign=C/k.localbounds().width}}return r.length},buildBranchFromLines:function(e,t,n){for(var a,o=0,i=[],r=u.iter(t);!r.done;r.next()){var l=r.value,h=l;if(h-o==1)i.push(e[o]);else{for(a=new s(e[h-2],e[h-1]),h-=3;h>=o;)a=new s(e[h],a),h-=1;i.push(a)}o=l}if(p.LegacyCoreAssert.isTrue(t.length==i.length,"did not find sub-branch for each line",void 0,"GroupNode.buildBranchFromLines","TypographyNode.swift",1305),i.length>1){var c=i.length;for((a=new s(i[c-2],i[c-1])).transAlign=n,c-=3;c>=0;)(a=new s(i[c],a)).transAlign=n,c-=1}else p.LegacyCoreAssert.isTrue(i[0]instanceof s,"if there's only one sub-branch node, it should be a group node",void 0,"GroupNode.buildBranchFromLines","TypographyNode.swift",1317),a=i[0];this.leftChild=a.leftChild,this.rightChild=a.rightChild,this.leftChild.parent=this,this.rightChild.parent=this,this.transAlign=a.transAlign},resetScale:function(){h.TypographyNode.prototype.resetScale.call(this),this.leftChild.resetScale(),this.rightChild.resetScale()},propagateDown:function(e){this.leftChild.propagateDown(e),this.rightChild.propagateDown(e),this.transAlign=e}}}),s)},ERpL:function(e,t,n){var a,o=t,i=n("oAGj"),r=n("wc1n"),l=n("cYVN"),s=n("djAF"),h=n("LGJg");o.ShapeRoleFeatures=i.defineEnum("ShapeRoleFeatures",{Area:"Area",ShapeWidth:"ShapeWidth",ShapeHeight:"ShapeHeight",CenterX:"CenterX",CenterY:"CenterY",RotCosine:"RotCosine",RotSine:"RotSine",PercentageDesignArea:"PercentageDesignArea",PercentageOutofBounds:"PercentageOutofBounds",OverlappingGraphicCount:"OverlappingGraphicCount",OverlappingTextCount:"OverlappingTextCount",PercentageTextOverlap:"PercentageTextOverlap",PercentageGraphicOverlap:"PercentageGraphicOverlap",MaskAverage:"MaskAverage",MaskAverageEdge:"MaskAverageEdge",PageHeight:"PageHeight",PageWidth:"PageWidth",ShapeCount:"ShapeCount",TextCount:"TextCount",BackgroundImageCount:"BackgroundImageCount",ForegroundImageCount:"ForegroundImageCount"}),o.ShapeRoleData=(a=function(e,t,n){l.RoleData.call(this,e,t,n)},i.defineClass({name:"ShapeRoleData",ctor:a,superName:"RoleData",statics:{getShapeRoleData:function(e){var t,n,l;if(l=i.as(e,s.ShapeForma)){var u=[o.ShapeRoleFeatures.Area,o.ShapeRoleFeatures.ShapeWidth,o.ShapeRoleFeatures.ShapeHeight,o.ShapeRoleFeatures.CenterX,o.ShapeRoleFeatures.CenterY,o.ShapeRoleFeatures.RotCosine,o.ShapeRoleFeatures.RotSine,o.ShapeRoleFeatures.PercentageDesignArea,o.ShapeRoleFeatures.PercentageOutofBounds,o.ShapeRoleFeatures.OverlappingGraphicCount,o.ShapeRoleFeatures.OverlappingTextCount,o.ShapeRoleFeatures.PercentageTextOverlap,o.ShapeRoleFeatures.PercentageGraphicOverlap,o.ShapeRoleFeatures.MaskAverage,o.ShapeRoleFeatures.MaskAverageEdge,o.ShapeRoleFeatures.PageHeight,o.ShapeRoleFeatures.PageWidth,o.ShapeRoleFeatures.ShapeCount,o.ShapeRoleFeatures.TextCount,o.ShapeRoleFeatures.BackgroundImageCount,o.ShapeRoleFeatures.ForegroundImageCount],c=r.FeatureExtractorFactory.getFeatureExtractor(r.FeatureExtractorType.Shape,l,u),g={};u.forEach((function(e){g[e]=(t=c.numericFeatureForKey(e))||null!=t?t:-1}));for(var p=i.iter(["line","heart","circle","arrow","square","instagram","rectangle","flower","star","love","triangle","food","music","party","?","birthday","sun","facebook","phone","youtube","badge"]);!p.done;p.next()){var d,f,m=p.value,y="search-"+m;u.push(y),g[y]=0,(d=i.as(l.contentNode,h.VectorContentNode))&&null!=(f=i.opt(i.opt(d.mediaMetadata,(function(e){return e.searchTerm})),(function(e){return e.toLowerCase()})))&&f==m&&(g[y]=1)}n=new a(e,u,g)}return n}}}),a)},EoOi:function(e,t,n){var a,o,i,r,l,s=t,h=n("oAGj"),u=n("SpAV"),c=n("iCxV"),g=n("fNpk"),p=n("c+uM"),d=n("3DEm"),f=n("ol4x"),m=n("8t9B"),y=n("3UhB"),T=n("7l9C"),L=n("uUew"),R=n("d2x6");s.FontMetricsParams=(a=function(e,t,n){this.font=e,this.fontSize=t,this.kerning=n},h.defineClass({name:"FontMetricsParams",ctor:a}),a),s.TypographyParams=(o=function(e,t,n){this.size_=e,this.lineSpacing_=t,this.relativeFontScale_=n},h.defineClass({name:"TypographyParams",ctor:o}),o),s.TypographyResult=(i=function(e,t,n){this.tree=e,this.tokens=h.clone(t),this.matrices=h.clone(n)},h.defineClass({name:"TypographyResult",ctor:i,statics:{isEqual:function(e,t){if(e.matrices.length==t.matrices.length){for(var n=h.iter(h.toSequence(e.matrices));!n.done;n.next()){var a=n.value,o=a.offset;if(!a.element.equal(t.matrices[o]))return!1}return!0}return!1}}}),i),s.MutableTypographyRange=(r=function(){},h.defineClass({name:"MutableTypographyRange",ctor:r,props:{init_4142:function(e,t){this.start=e,this.end=t},init_37b1:function(e){this.start=e.start,this.end=e.end}}}),r),s.TypographyLayoutCategory=h.defineEnum("TypographyLayoutCategory",{UNSET:-1,ALL:0,DropCap:1,Rotate:2,RotateFit:3,Triplet:4}),s.TypographyComposer=(l=function e(t,n){e.initializeLayouts(),f.TypographyLayout.lineSpacing=t.lineSpacing_,this.params_=t,this.words_=h.clone(n)},h.defineClass({name:"TypographyComposer",ctor:l,statics:{DEFAULT_FONT_SIZE:48,GLYPH_HSPACE_ADJUSTMENT:.1,layouts:null,alignments:null,initializeLayouts:function(){null==l.alignments&&((l.alignments=[]).push(p.LockupAlignment.Triplet),l.alignments.push(p.LockupAlignment.TripletRotatedMiddle),l.alignments.push(p.LockupAlignment.TripletRotatedMiddleMulti),l.alignments.push(p.LockupAlignment.TripletRotatedEnds),l.alignments.push(p.LockupAlignment.RotateTopStart),l.alignments.push(p.LockupAlignment.RotateBottomStart),l.alignments.push(p.LockupAlignment.RotateFullStart),l.alignments.push(p.LockupAlignment.RotateFitStart),l.alignments.push(p.LockupAlignment.RotateTopEnd),l.alignments.push(p.LockupAlignment.RotateBottomEnd),l.alignments.push(p.LockupAlignment.RotateFullEnd),l.alignments.push(p.LockupAlignment.RotateFitEnd),l.alignments.push(p.LockupAlignment.DropCapTop),l.alignments.push(p.LockupAlignment.DropCapBottom),l.alignments.push(p.LockupAlignment.DropCap),l.alignments.push(p.LockupAlignment.DropCapFit),l.alignments.push(p.LockupAlignment.RotateAndFit),l.alignments.push(p.LockupAlignment.FitRotateFit)),null==l.layouts&&((l.layouts={})[p.LockupAlignment.Left]=new f.ReflowAlignmentTypographyLayout(T.AlignmentIdiom.LLtb),l.layouts[p.LockupAlignment.Triplet]=new f.MiddleTypographyLayout(f.MiddleTypographyLayout.TRIPLET),l.layouts[p.LockupAlignment.TripletRotatedMiddle]=new f.MiddleTypographyLayout(f.MiddleTypographyLayout.TRIPLET_ROTATED_MIDDLE),l.layouts[p.LockupAlignment.TripletRotatedMiddleMulti]=new f.MiddleTypographyLayout(f.MiddleTypographyLayout.TRIPLET_ROTATED_MIDDLE_MULTI),l.layouts[p.LockupAlignment.TripletRotatedEnds]=new f.MiddleTypographyLayout(f.MiddleTypographyLayout.TRIPLET_ROTATED_ENDS),l.layouts[p.LockupAlignment.RotateFullStart]=new f.RotateTypographyLayout(f.RotateTypographyLayout.FULL_START),l.layouts[p.LockupAlignment.RotateFitStart]=new f.RotateTypographyLayout(f.RotateTypographyLayout.FIT_START),l.layouts[p.LockupAlignment.RotateTopStart]=new f.RotateTypographyLayout(f.RotateTypographyLayout.TOP_START),l.layouts[p.LockupAlignment.RotateBottomStart]=new f.RotateTypographyLayout(f.RotateTypographyLayout.BOTTOM_START),l.layouts[p.LockupAlignment.RotateFullEnd]=new f.RotateTypographyLayout(f.RotateTypographyLayout.FULL_END),l.layouts[p.LockupAlignment.RotateFitEnd]=new f.RotateTypographyLayout(f.RotateTypographyLayout.FIT_END),l.layouts[p.LockupAlignment.RotateTopEnd]=new f.RotateTypographyLayout(f.RotateTypographyLayout.TOP_END),l.layouts[p.LockupAlignment.RotateBottomEnd]=new f.RotateTypographyLayout(f.RotateTypographyLayout.BOTTOM_END),l.layouts[p.LockupAlignment.DropCap]=new f.DropCapTypographyLayout(f.DropCapTypographyLayout.FULL),l.layouts[p.LockupAlignment.DropCapFit]=new f.DropCapTypographyLayout(f.DropCapTypographyLayout.FIT),l.layouts[p.LockupAlignment.DropCapTop]=new f.DropCapTypographyLayout(f.DropCapTypographyLayout.TOP),l.layouts[p.LockupAlignment.DropCapBottom]=new f.DropCapTypographyLayout(f.DropCapTypographyLayout.BOTTOM),l.layouts[p.LockupAlignment.RotateAndFit]=new f.FitRotateFitTypographyLayout(!0),l.layouts[p.LockupAlignment.FitRotateFit]=new f.FitRotateFitTypographyLayout(!1))},getWordRuns:function(e){for(var t=[],n=null,a=-1,o=h.iter(e);!o.done;o.next()){var i=o.value;i.weight!=a&&(null!=n&&t.push(n),n=[],a=i.weight),n.push(i)}return t.push(n),t},getLayout:function(e){return null==this.layouts&&l.initializeLayouts(),h.opt(this.layouts,(function(t){return t[e]}))},getApplicableLayouts:function(e,t,n,a){void 0===t&&(t=null),void 0===n&&(n=s.TypographyLayoutCategory.ALL),void 0===a&&(a=null),l.initializeLayouts();var o=[],i=h.clone(l.getWordRanges(e,null)),r=null;null!=t&&(r=h.clone(l.calculateStyleRuns(e,i,t)));for(var u=h.iter(l.alignments);!u.done;u.next()){var c,g=u.value;(c=l.layouts[g])&&(n!=s.TypographyLayoutCategory.ALL&&c.category()!=n||null==c.calculateWeighting(e,i,r,a)||o.push(g))}return o},getCategoryForAlignment:function(e){var t;return l.initializeLayouts(),(t=l.layouts[e])?t.category():s.TypographyLayoutCategory.UNSET},supportsRelativeFontScale:function(e){return l.initializeLayouts(),l.layouts[e].supportsRelativeFontScale()},canHandleText:function(e){var t=e.trim();return!(t.length<2)&&h.clone(l.getWordRanges(t,null)).length<=20},getWeightingForAlignment:function(e,t,n,a){void 0===n&&(n=null),void 0===a&&(a=null);var o=h.clone(l.getWordRanges(t,null)),i=null;return null!=n&&(i=h.clone(l.calculateStyleRuns(t,o,n))),h.opt(l.getLayout(e),(function(e){return e.calculateWeighting(t,o,i)}))},getNextValidLayoutAlignment:function(e,t,n,a,o,i,r){var u;if(void 0===a&&(a=null),void 0===o&&(o=s.TypographyLayoutCategory.ALL),void 0===i&&(i=null),!l.canHandleText(e))return p.LockupAlignment.UNSET;if(!r&&null!=l.getWeightingForAlignment(n,e,a,i))return n;var c=h.clone(l.getApplicableLayouts(e,a,o,i));if(c.length>0){if(n!=p.LockupAlignment.UNSET&&c.length>1){var g=n,d=h.indexOf(c,g);return g=((u=d)||null!=u?u:-1)>=0?c[(d+1)%c.length]:h.first(c)}return h.first(c)}return p.LockupAlignment.UNSET},layoutTree:function(e){e.calcGlobalMatrices();for(var t=[],n=[],a=h.clone(e.getRoot().getTextNodes()),o=h.iter(a);!o.done;o.next()){var i=o.value;t.push(i.token_),n.push(i.global())}return new s.TypographyResult(e,t,n)},adjustTree:function(e,t){return l.layouts[t].adjustTree(e),l.layoutTree(e)},getDefaultRanges:function(e){var t=[];if(e.length>1){var n=h.sort(e,(function(e,t){return e.length>t.length}));t.push(n[0])}return t},getDefaultRelativeFontScale:function(e){return.5},getWordRanges:function(e,t){for(var n=[],a=0,o=-1,i=h.iter(h.range(0,e.length-1,!0));!i.done;i.next()){var r=i.value;y.TypeLockupUtils.isWhiteSpace(e.substr(r,1))?(a<=o&&n.push(new L.TextRange(a,o+1)),a=r+1):o=r}if(a<=o&&n.push(new L.TextRange(a,o+1)),null==t||0==t.length)return n;for(var l=[],u=h.iter(n);!u.done;u.next()){var c=u.value;l.push(s.MutableTypographyRange.init_37b1(c))}for(var g=h.iter(t);!g.done;g.next()){var p=g.value;l.push(s.MutableTypographyRange.init_37b1(p))}var d=h.sort(l,(function(e,t){return e.start<t.start}));for(r=1;r<d.length;)d[r].start==d[r-1].start&&d[r].end==d[r-1].end?d.splice(r,1):(d[r].start<d[r-1].end&&(d[r-1].start<d[r].start?(o=d[r-1].end,d[r-1].end=d[r].start,d[r].end<o&&d.splice(r,0,s.MutableTypographyRange.init_4142(d[r].end,o))):(o=d[r-1].end,d[r].end<o?(d[r-1].end=d[r].end,d[r].start=d[r].end,d[r].end=o):d[r].start=d[r-1].end)),r+=1);for(var f=[],m=h.iter(d);!m.done;m.next())p=m.value,f.push(new L.TextRange(p.start,p.end));return f},calculateStyleRuns:function(e,t,n){for(var a=[],o=-1,i=h.iter(h.toSequence(t));!i.done;i.next())for(var r=i.value,l=r.offset,s=r.element,u=h.iter(n);!u.done;u.next()){var c=u.value,g=c.start;y.TypeLockupUtils.isWhiteSpace(e.substr(c.start,1))&&(g+=1);var p=c.end;if(y.TypeLockupUtils.isWhiteSpace(e.substr(c.start+c.length-1,1))&&(p-=1),g<=s.start&&p>=s.end){-1==o&&(o=l);break}o>-1&&(a.push(new L.TextRange(o,l-1)),o=-1)}for(o>-1&&a.push(new L.TextRange(o,t.length-1)),l=a.length-1;l>0;)a[l].start==a[l-1].end+1&&(a[l-1]=new L.TextRange(a[l-1].start,a[l].end),a.splice(l,1)),l-=1;return a},buildTokenList:function(e,t,n,a){var o=[],i=e,r=0;u.CoreAssert.isTrue(null!=n&&n.length>0,"Invalid auto text range",void 0,"TypographyComposer.buildTokenList","TypographyComposer.swift",451);for(var g=h.clone(n),p=h.clone(l.getWordRanges(e,g)),f=new s.FontMetricsParams(a.font.fontData,l.DEFAULT_FONT_SIZE,a.tracking),y=h.iter(p);!y.done;y.next()){for(var T=y.value,R=0,v=h.iter(g);!v.done;v.next()){var S=v.value;if(T.start<S.end&&T.end-1>=S.start){R=1;break}}for(var C=e.substr(T.start,T.length).trim();r<e.length&&!i.startsWith(C);)i=i.substr(1),r+=1;var A=0;if(f.font=a.font.fontData,t.length>0)for(var b=h.iter(t);!b.done;b.next())if(S=b.value,T.start<S.end&&T.end>S.start){f.font=h.opt(h.opt(a.characterStyles[m.TypeLockupController.HIGHLIGHT_STYLE],(function(e){return e.font})),(function(e){return e.fontData}))||a.font.fontData,A=1;break}var x=c.Host.textModelUtils.calcFontMetrics(C,R,f);x.styleWeight=A,x.range=new L.TextRange(r,r+x.text.length),x.range.end<e.length&&e.substr(x.range.end,1).trim().length>0&&(x.isGlyph=!0,x.hspace*=d.MathUtils.maxDouble(l.GLYPH_HSPACE_ADJUSTMENT,f.kerning)),o.push(x),r+=x.text.length,i=i.substr(x.text.length)}return o},buildTokenListFromTree:function(e,t,n,a){void 0===n&&(n=null);for(var o=[],i=new s.FontMetricsParams(t,l.DEFAULT_FONT_SIZE,a),r=h.clone(e.getRoot().getTextNodes()),u=h.iter(r);!u.done;u.next()){var g=u.value;1==g.token_.styleWeight&&null!=n?i.font=n:i.font=t;var p=c.Host.textModelUtils.calcFontMetrics(g.token_.text,g.token_.weight,i);p.styleWeight=g.token_.styleWeight,p.range=g.token_.range,g.token_.isGlyph&&(p.isGlyph=!0,p.hspace*=d.MathUtils.maxDouble(l.GLYPH_HSPACE_ADJUSTMENT,i.kerning)),g.token_=p,o.push(p)}return o}},props:{layout:function(e){var t=R.TypographyTree.buildArchetypeTree(this.words_),n=h.clone(t.getRoot().getTextRuns()),a=l.layouts[e];return null==a&&(g.LegacyCoreAssert.isTrue(null==a,"No typography rule.",void 0,"TypographyComposer.layout","TypographyComposer.swift",289),a=l.layouts[p.LockupAlignment.Left]),a.arrangeText(t,n,this.params_),l.layoutTree(t)}}}),l)},XupS:function(e,t,n){var a,o=t,i=n("oAGj"),r=n("ascj"),l=n("JEnV"),s=n("cEEQ"),h=n("c+uM"),u=n("tGKA"),c=n("3DEm"),g=n("EoOi"),p=n("VJ9E"),d=n("ol4x"),f=n("8t9B"),m=n("oKlP"),y=n("1NAc");o.AutoTextLayoutStrategy=(a=function(){this.tokens_=null,this.text_=null,this.typeParams_=null,this.hiliteRanges_=null,this.autoRanges_=null,this.previousAutoAlignment_=h.LockupAlignment.UNSET,this.scale_=1,this.prevStyle_=null,this.prevFont_=null,this.prevHiliteFont_=null,this.prevTracking_=null,this.defaultStrategy_=null,this.cachedTree_=null,this.cachedAspectRatio=1,s.BaseLockupLayoutStrategy.call(this)},i.defineClass({name:"AutoTextLayoutStrategy",ctor:a,superName:"BaseLockupLayoutStrategy",statics:{_implements:function(e){return"LockupLayoutStrategy"==e}},props:{sameStyle:function(e){if(!i.eq(p._equality_TheoFont_TheoFont,this.prevFont_,e.font)||this.prevTracking_!=e.tracking)return!1;var t=i.opt(e.characterStyles[f.TypeLockupController.HIGHLIGHT_STYLE],(function(e){return e.font}));return null==this.prevHiliteFont_?null==t:null!=t&&i.eq(p._equality_TheoFont_TheoFont,this.prevHiliteFont_,t)},supportsConfiguration:function(e){return h.LockupStyle.isAutoLayout(e.style.layout)},calculateTracking:function(e,t){return null!=this.defaultStrategy_?this.defaultStrategy_.calculateTracking(e,t):e.style.tracking},calculateLeading:function(e,t){return null!=this.defaultStrategy_?this.defaultStrategy_.calculateLeading(e,t):e.style.spacing},adjustSizeForTracking:function(e,t,n,a){if(null!=this.defaultStrategy_)return this.defaultStrategy_.adjustSizeForTracking(e,t,n,a);var o;if(this.previousAutoAlignment_!=h.LockupAlignment.UNSET&&(o=this.cachedTree_)){var r=g.TypographyComposer.adjustTree(o,this.previousAutoAlignment_),l=r.tree.getBounds().size;this.tokens_=i.clone(g.TypographyComposer.buildTokenListFromTree(o,this.prevStyle_.font.fontData,i.opt(i.opt(this.prevStyle_.characterStyles[f.TypeLockupController.HIGHLIGHT_STYLE],(function(e){return e.font})),(function(e){return e.fontData})),a));var s=(r=g.TypographyComposer.adjustTree(o,this.previousAutoAlignment_)).tree.getBounds().size;return new y.TheoSize(this.scale_*(s.width-l.width),this.scale_*(s.height-l.height))}return null},adjustSizeForLeading:function(e,t,n,a){if(null!=this.defaultStrategy_)return this.defaultStrategy_.adjustSizeForLeading(e,t,n,a);var o;if(this.previousAutoAlignment_!=h.LockupAlignment.UNSET&&(o=this.cachedTree_)){d.TypographyLayout.lineSpacing=n;var i=g.TypographyComposer.adjustTree(o,this.previousAutoAlignment_),r=i.tree.getBounds().size;d.TypographyLayout.lineSpacing=a;var l=(i=g.TypographyComposer.adjustTree(o,this.previousAutoAlignment_)).tree.getBounds().size;return new y.TheoSize(this.scale_*(l.width-r.width),this.scale_*(l.height-r.height))}return y.TheoSize.Zero},updateTokens:function(e,t,n,a){null!=this.tokens_&&null!=this.text_&&this.text_==e&&null!=this.prevStyle_&&this.sameStyle(t)&&null!=this.hiliteRanges_&&f.TypeLockupController.rangesEqual(this.hiliteRanges_,n)&&null!=this.autoRanges_&&f.TypeLockupController.rangesEqual(this.autoRanges_,a)||(this.text_=e,this.hiliteRanges_=n.concat(),this.autoRanges_=a.concat(),this.previousAutoAlignment_=h.LockupAlignment.UNSET,this.prevStyle_=t,this.prevFont_=t.font,this.prevHiliteFont_=i.opt(t.characterStyles[f.TypeLockupController.HIGHLIGHT_STYLE],(function(e){return e.font})),this.prevTracking_=t.tracking,this.cachedTree_=null,this.tokens_=i.clone(g.TypographyComposer.buildTokenList(this.text_,this.hiliteRanges_,this.autoRanges_,t)))},layout:function(e){if(!g.TypographyComposer.canHandleText(e.text)||0==e.autoTextRanges.length||e.style.alignment==h.LockupAlignment.UNSET)return null==this.defaultStrategy_&&(this.defaultStrategy_=new l.EvenRowHeightsLayoutStrategy(h.LockupAlignment.Left)),i.opt(this.defaultStrategy_,(function(t){return t.layout(e)}));this.defaultStrategy_=null;var t,n=[],a=f.TypeLockupController.HIGHLIGHT_STYLE,o=e.containerSize,p=e.style.alignment;this.updateTokens(e.text,e.style,e.characterStyleRanges,e.autoTextRanges);var d=e.style.relativeFontScale==h.LockupStyle.UNSET_RELATIVE_FONT_SCALE?g.TypographyComposer.getDefaultRelativeFontScale(p):e.style.relativeFontScale;this.typeParams_=new g.TypographyParams(o,e.style.spacing,d);var y,T=new g.TypographyComposer(this.typeParams_,this.tokens_);null!=this.cachedTree_&&this.previousAutoAlignment_==p&&c.MathUtils.absDouble(this.cachedAspectRatio-o.aspectRatio)<.1?y=g.TypographyComposer.layoutTree(this.cachedTree_):(y=T.layout(p),this.cachedTree_=y.tree),this.previousAutoAlignment_=p;var L=y.tree.getBounds();e.fitContainerToArea?this.scale_=Math.sqrt(o.width*o.height/(L.width*L.height)):o.aspectRatio>L.aspectRatio?this.scale_=o.height/L.height:this.scale_=o.width/L.width;for(var R=new s.TypographicBoundingRatios(0,0,0,0,0,!1),v=i.clone(y.matrices),S=e.style,C=new m.TheoPoint(L.minX,L.minY),A=i.iter(i.toSequence(y.tokens));!A.done;A.next()){var b,x=A.value,_=x.offset,I=x.element,M=y.matrices[_].calculateTransformValuesSKRT(),w=this.scale_*M.yscale*g.TypographyComposer.DEFAULT_FONT_SIZE,D=u.Matrix2D.Identity.rotate(M.rotCosine,M.rotSine).translateTo((M.tx-C.x)*this.scale_,(M.ty-C.y)*this.scale_-I.postVertOffset*w);b=1==I.styleWeight&&i.opt(i.opt(S.characterStyles[a],(function(e){return e.font})),(function(e){return e.fontData}))||S.font.fontData;var k=s.LockupItem.init_bc20(r.ColorRole.FieldPrimary,1==I.styleWeight?a:null,v[_].transformRect(I.bounds).size.multiply(this.scale_),D,I.text,b,w,w,R,_,I.range);n.push(k)}return t=L.size.multiply(this.scale_),this.cachedAspectRatio=t.aspectRatio,new s.LayoutResults(n,t,u.Matrix2D.Identity,R,0,s.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e.text))}}}),a)},cYVN:function(e,t,n){var a,o=t,i=n("oAGj"),r=n("fNpk");o.RoleData=(a=function(e,t,n){for(var a=i.iter(t);!a.done;a.next()){var o=a.value;r.LegacyCoreAssert.isTrue(null!=n[o],"nil feature value",void 0,"RoleData.init","RoleData.swift",24)}for(var l=i.iter(i.keys(n));!l.done;l.next())o=l.value,r.LegacyCoreAssert.isTrue(t.includes(o),"missing feature order",void 0,"RoleData.init","RoleData.swift",27);this.forma=e,this.featureOrder=i.clone(t),this.featureValues=i.clone(n)},i.defineClass({name:"RoleData",ctor:a,props:{feat:function(e){return this.featureValues[e]},getUniqueKey:function(){for(var e="",t=i.iter(this.getFeatureVector());!t.done;t.next()){var n=t.value;e=e+i.toString("%.2f",n)+"-"}return e=i.replaceAll(e,".","")},asString:{get:function(){for(var e="",t=i.iter(this.featureOrder);!t.done;t.next()){var n=t.value,a=Math.round(1e3*this.featureValues[n])/1e3;e+=n+": "+i.toString(a)+",\n"}return e}},asJson:{get:function(){return"{\n"+this.asString+"\n}"}},getFeatureVector:function(){for(var e=[],t=i.iter(this.featureOrder);!t.done;t.next()){var n=t.value;e.push(this.featureValues[n])}return e}}}),a)},d2x6:function(e,t,n){var a,o=t,i=n("oAGj"),r=n("gXiO"),l=n("fNpk"),s=n("tGKA"),h=n("7l9C"),u=n("1NAc");o.TypographyTree=(a=function(){r.CoreObject.call(this),this.root_=null},i.defineClass({name:"TypographyTree",ctor:a,superName:"CoreObject",statics:{buildArchetypeTree:function(e){var t=new a;if(e.length>1){for(var n=-1,o=[],r=[],l=i.iter(i.toSequence(e));!l.done;l.next()){var s=l.value,c=s.offset,g=s.element,p=a.createTextNode(g,c);if(o.length>0&&g.weight!=n){var d=o[0];o.shift();for(var f=i.iter(o);!f.done;f.next()){var m=f.value;d=R=a.createGroupNode(d,m,h.AlignmentIdiom.LRBB)}r.push(d),o.splice(0)}o.push(p),n=g.weight}if(o.length>0){d=o[0],o.shift();for(var y=i.iter(o);!y.done;y.next())m=y.value,d=R=a.createGroupNode(d,m,h.AlignmentIdiom.LRBB);r.push(d)}var T=r[0];r.shift();for(var L=i.iter(r);!L.done;L.next())d=L.value,T=R=a.createGroupNode(T,d,h.AlignmentIdiom.LRBB);t.setRoot(T)}else{p=a.createTextNode(i.first(e),0);var R=a.createGroupNode(p,new h.SpacerNode(1,new u.TheoSize(0,0)),h.AlignmentIdiom.LRBB);t.setRoot(R)}return t},createTextNode:function(e,t){return new h.TextNode(e,t)},createGroupNode:function(e,t,n){var a=new h.GroupNode(e,t);return a.transAlign=n,a}},props:{setRoot:function(e){this.root_=e},getRoot:function(){return this.root_},getBounds:function(){return this.root_.localbounds()},calcGlobal:function(e){if(e.isSame(this.root_)){var t=e.local();e.globalMat=new s.Matrix2D(t.a,t.b,t.c,t.d,t.tx,t.ty)}else if(i.opt(e.parent,(function(e){return null==e.globalMat}))&&this.calcGlobal(e.parent),e instanceof h.TextNode){var n=new s.Matrix2D(1,0,0,1,0,e.getVerticalOffset());e.globalMat=n.concat(e.local()).concat(e.parent.globalMat)}else e.globalMat=e.local().concat(e.parent.globalMat);e instanceof h.GroupNode&&(this.calcGlobal(e.getChild(!0)),this.calcGlobal(e.getChild(!1)))},calcGlobalMatrices:function(){this.root_.calcTransform(),this.calcGlobal(this.root_)},rotateNode:function(e){if(null!=e.parent&&!i.opt(e.parent,(function(e){return null==e.parent}))){var t=e.parent,n=t.parent;if(null!=n.parent){var a=n.parent;t.parent=a,a.getChild(!0).isSame(n)?a.setChild(t,!0):a.setChild(t,!1)}else t.parent=null,this.setRoot(t);n.getChild(!0).isSame(t)?(n.setChild(t.getChild(!1),!0),t.setChild(n,!1)):(n.setChild(t.getChild(!0),!1),t.setChild(n,!0)),n.parent=t}},findCommonAncestor:function(e){l.LegacyCoreAssert.isTrue(e.length>1,"findCommonAncestor expects at least two nodes",void 0,"TypographyTree.findCommonAncestor","TypographyTree.swift",155);for(var t=[],n=[],a=e[0].parent;null!=a;)t.push(a),n.push(1),a=a.parent;for(var o=i.iter(i.range(1,e.length-1,!0));!o.done;o.next())for(a=e[o.value].parent;null!=a;){for(var r=a.getId(),s=i.iter(i.toSequence(t));!s.done;s.next()){var h=s.value,u=h.offset;if(h.element.getId()==r){n[u]+=1;break}}a=a.parent}for(var c=i.iter(i.toSequence(n));!c.done;c.next()){var g=c.value;if(u=g.offset,g.element==e.length)return t[u]}return l.LegacyCoreAssert.fail("Can't find common ancestor TypographyNode",void 0,"TypographyTree.findCommonAncestor","TypographyTree.swift",184),null},description:{get:function(){var e="TypographyTree:\r\n";return null!=this.root_&&(e+=this.root_.description),e}}}}),a)},lYNH:function(e,t,n){var a,o,i,r=t,l=n("oAGj"),s=n("uj1m"),h=n("7Ta2"),u=n("taeg");r.ShapeRoleSuggesterFactory=(a=function(){},l.defineClass({name:"ShapeRoleSuggesterFactory",ctor:a,statics:{Create:function(e){return void 0===e&&(e=""),"MLP"==e?new r.ShapeRoleSuggesterMLP:new r.ShapeRoleSuggesterSimple}}}),a),r.ShapeRoleSuggesterMLP=(o=function(){u.RoleSuggesterMLP.call(this)},l.defineClass({name:"ShapeRoleSuggesterMLP",ctor:o,superName:"RoleSuggesterMLP",statics:{_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRoleModel:function(){var e=s.MLPModel.loadNNModel("ShapeRole");return l.opt(e,(function(e){return e.finalSoftmax=!1})),e}}}),o),r.ShapeRoleSuggesterSimple=(i=function(){},l.defineClass({name:"ShapeRoleSuggesterSimple",ctor:i,statics:{_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRole:function(e){var t=h.InferredRoleType.Undefined;return e.forma.isGridCell()&&(t=e.forma.controller.floating?h.InferredRoleType.Backing:h.InferredRoleType.Background),h.InferredRole.init_84d1(t,1)}}}),i)},ol4x:function(e,t,n){var a,o,i,r,l,s,h,u,c,g,p,d=t,f=n("oAGj"),m=n("iCxV"),y=n("fNpk"),T=n("3DEm"),L=n("EoOi"),R=n("7l9C"),v=n("uUew"),S=n("1NAc");d.SpacerIdiom=f.defineEnum("SpacerIdiom",{insertLeft:0,insertRight:1,insertAbove:2,insertBelow:3}),d.LineMeasurements=(a=function(e,t){this.node=e,this.index=t,this.leaves=f.clone(e.getTextNodes()),this.width=e.localbounds().width},f.defineClass({name:"LineMeasurements",ctor:a}),a),d.TypographyLayout=(o=function(){this.fontScalingDiff=.25},f.defineClass({name:"TypographyLayout",ctor:o,statics:{worstScore:9999999.9,lineSpacing:.2,weightPairedText:function(e,t,n,a){if(void 0===a&&(a=null),n<2)return null;for(var o=[],i=f.toDouble(t.length)/f.toDouble(2*n),r=i,l=0,s=f.iter(f.range(0,n-1,!0));!s.done;s.next()){for(var h=T.MathUtils.minInt(f.toInt(r),t.length);l<h;)o.push(t[l]),l+=1;r+=i,l=h=T.MathUtils.minInt(f.toInt(r),t.length),r+=i}return o},divideIntoPairs:function(e,t,n){void 0===n&&(n=null);var a=f.toInt(t.length/2);if(a<2)return null;var i=T.MathUtils.minInt(T.MathUtils.maxInt(f.toInt(t.length/4),2),a);return o.weightPairedText(e,t,i,n)},scaleToRange:function(e,t,n,a){return e<0||e>1?a:t+e*(n-t)},longestWord:function(e){return f.sort(e,(function(e,t){return e.length>t.length}))[0]},longestRun:function(e,t){for(var n=0,a=null,o=f.iter(e);!o.done;o.next()){var i=o.value;t&&i.propagateDown(R.AlignmentIdiom.LRBB),i.calcTransform();var r=i.localbounds().width;r>n&&(n=r,a=i)}return a},longestLine:function(e){for(var t=null,n=0,a=f.iter(e);!a.done;a.next()){var o=a.value,i=o.localbounds().width;i>n&&(n=i,t=o)}return t},canRotate:function(e){e.calcTransform();var t=e.localbounds();return t.width/t.height>1},getDesiredSize:function(e,t){var n=t.aspectRatio,a=e.width,o=a/n;return o<e.height&&(a*=e.height/o,o=e.height),new S.TheoSize(a,o)},insertSpacer:function(e,t,n,a,o,i){var r=t.parent,l=new R.SpacerNode(a,n),s=o==d.SpacerIdiom.insertLeft||o==d.SpacerIdiom.insertAbove?new R.GroupNode(l,t):new R.GroupNode(t,l);return s.transAlign=i,s.parent=r,r.getChild(!0).isSame(t)?r.setChild(s,!0):r.setChild(s,!1),l},getScore:function(e,t){return T.MathUtils.absDouble(e.aspectRatio/t.aspectRatio-1)}},props:{category:function(){return L.TypographyLayoutCategory.UNSET},calculateWeighting:function(e,t,n,a){return void 0===n&&(n=null),void 0===a&&(a=null),null},supportsRelativeFontScale:function(){return!1},getDefaultRelativeFontScale:function(){return.5},arrangeWeightedText:function(e,t,n){},arrangeText:function(e,t,n){},adjustTree:function(e){y.LegacyCoreAssert.fail("Calling an abstract method.",void 0,"TypographyLayout.adjustTree","TypographyLayout.swift",114)}}}),o),d.SimpleAlignmentTypographyLayout=(i=function(e){this.alignment_=e,d.TypographyLayout.call(this)},f.defineClass({name:"SimpleAlignmentTypographyLayout",ctor:i,superName:"TypographyLayout",props:{calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),f.toInt(t.length/2)<1)return null;if(null!=n&&n.length>0&&(n[0].start>0||n[0].end<t.length-1)){for(var o=[],i=f.iter(n);!i.done;i.next())for(var r=i.value,l=r.start;l<=r.end;)o.push(t[l]),l+=1;return o}return d.TypographyLayout.divideIntoPairs(e,t,a)},arrangeText:function(e,t,n){for(var a=f.iter(t);!a.done;a.next()){var o=a.value;o.propagateDown(R.AlignmentIdiom.LRBB),null!=o.parent&&(o.parent.transAlign=this.alignment_)}}}}),i),d.ReflowAlignmentTypographyLayout=(r=function(e){d.SimpleAlignmentTypographyLayout.call(this,e)},f.defineClass({name:"ReflowAlignmentTypographyLayout",ctor:r,superName:"SimpleAlignmentTypographyLayout",props:{arrangeText:function(e,t,n){if(1!=e.getRoot().getTextNodes().length){var a;if(t.length>1)a=e.findCommonAncestor(t);else{if(!(f.first(t)instanceof R.GroupNode))return;a=f.first(t)}a.optimizeFlow(this.alignment_,n.size_,R.ReflowType.FULL)}else d.SimpleAlignmentTypographyLayout.prototype.arrangeText.call(this,e,t,n)}}}),r),d.DoubletTypographyLayout=(l=function(){d.TypographyLayout.call(this)},f.defineClass({name:"DoubletTypographyLayout",ctor:l,superName:"TypographyLayout",props:{calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),t.length<4)return null;var o=[];if(null!=n&&1==n.length&&(0==n[0].start&&n[n.length-1].end<t.length-1||n[0].start>0&&n[n.length-1].end==t.length-1)){for(var i=f.iter(n);!i.done;i.next())for(var r=i.value,l=r.start;l<=r.end;)o.push(t[l]),l+=1;return o}for(var s=f.toInt(e.length/2),h=f.iter(t);!h.done;h.next()){var u=h.value;if(!(u.start<s))break;o.push(u)}return o}}}),l),d.RotateTypographyLayout=(s=function(e){this.flavor_=e,d.SimpleAlignmentTypographyLayout.call(this,R.AlignmentIdiom.LLtb),this.fontScalingDiff=.1},f.defineClass({name:"RotateTypographyLayout",ctor:s,superName:"SimpleAlignmentTypographyLayout",statics:{FULL_START:0,FIT_START:1,TOP_START:2,BOTTOM_START:3,FULL_END:4,FIT_END:5,TOP_END:6,BOTTOM_END:7,MAX_LINES:4},props:{category:function(){return L.TypographyLayoutCategory.Rotate},calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),t.length<2)return null;if(this.flavor_<s.FULL_END){if(t[0].length>2)return(o=[]).push(t[0]),o}else if(t[t.length-1].length>2){var o;return(o=[]).push(t[t.length-1]),o}return null},arrangeText:function(e,t,n){var a,o,i;1==t[0].getWeight()?(a=t[0],o=t[1],a.rotateAlign=R.TypographyNode.CounterClockwise,i=R.AlignmentIdiom.LLtb):(a=t[1],o=t[0],a.rotateAlign=R.TypographyNode.Clockwise,i=R.AlignmentIdiom.RRtb),a.propagateDown(R.AlignmentIdiom.LRBB),a.calcTransform();var r,l,h=a.localbounds();switch(this.flavor_){case 2:case 3:case 6:case 7:l=.5,r=!1;break;default:l=1,r=!0}var u,c=new S.TheoSize(T.MathUtils.maxDouble(1,h.height*n.size_.aspectRatio-h.width),l*h.height);if(o instanceof R.GroupNode){var g,p;switch(this.flavor_){case 1:case 5:g=R.ReflowType.FIT,p=2;break;case 0:case 4:g=R.ReflowType.FULL,p=2;break;case 2:case 6:g=R.ReflowType.TOP,p=1;break;default:g=R.ReflowType.BOTTOM,p=1}u=o.optimizeFlow(i,c,g,p)}else u=1;e.getRoot().calcTransform(),o.scaleAlign=h.height/o.localbounds().height,r?e.getRoot().transAlign=R.AlignmentIdiom.LRtt:(o.scaleAlign*=f.toDouble(u)/f.toDouble(T.MathUtils.maxInt(s.MAX_LINES,o.getTextNodes().length)),this.flavor_==s.BOTTOM_START||this.flavor_==s.BOTTOM_END?e.getRoot().transAlign=R.AlignmentIdiom.LRbb:e.getRoot().transAlign=R.AlignmentIdiom.LRtt)},adjustTree:function(e){var t=e.getRoot().getChild(!0),n=e.getRoot().getChild(!1);t.scaleAlign=1,n.scaleAlign=1,e.getRoot().calcTransform();var a=this.flavor_==s.FIT_START||this.flavor_==s.FIT_END||this.flavor_==s.FULL_START||this.flavor_==s.FULL_END;if(1==t.getWeight()){if(n.scaleAlign=t.localbounds().height/n.localbounds().height,!a){var o=f.clone(n.getLines());n.scaleAlign*=f.toDouble(o.length)/f.toDouble(T.MathUtils.maxInt(s.MAX_LINES,n.getTextNodes().length))}}else t.scaleAlign=n.localbounds().height/t.localbounds().height,a||(o=f.clone(t.getLines()),t.scaleAlign*=f.toDouble(o.length)/f.toDouble(T.MathUtils.maxInt(s.MAX_LINES,t.getTextNodes().length)))}}}),s),d.DropCapTypographyLayout=(h=function(e){this.flavor_=e,d.SimpleAlignmentTypographyLayout.call(this,R.AlignmentIdiom.LLtb),this.fontScalingDiff=.1},f.defineClass({name:"DropCapTypographyLayout",ctor:h,superName:"SimpleAlignmentTypographyLayout",statics:{FULL:0,FIT:1,TOP:2,BOTTOM:3,MAX_LINES:4},props:{category:function(){return L.TypographyLayoutCategory.DropCap},calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),(this.flavor_==h.FULL||this.flavor_==h.FIT)&&t.length<2)return null;var o=null,i=f.clone(m.Host.pathUtils.matchesForRegexInString("^[0-9]+[%¢]$",e));return i.length>0?((o=[]).push(new v.TextRange(0,i[0].length-1)),o.push(new v.TextRange(i[0].length-1,i[0].length)),o):(i=f.clone(m.Host.pathUtils.matchesForRegexInString("^\\$[0-9]+[\\.][0-9][0-9]",e))).length>0?((o=[]).push(new v.TextRange(0,i[0].length-3)),o.push(new v.TextRange(i[0].length-3,i[0].length)),o):((i=f.clone(m.Host.pathUtils.matchesForRegexInString("^[0-9a-zA-Z]",e))).length>0&&(o=[]).push(new v.TextRange(0,i[0].length)),o)},arrangeText:function(e,t,n){var a=t[0]instanceof R.TextNode?t[0]:t[0].getTextNodes()[0],o=a.parent;if(o.getId()!=e.getRoot().getId()){var i;i=o.getChild(!0).getId()==a.getId()?o.getChild(!1):o.getChild(!0);var r=o.parent;r.getChild(!0).getId()==o.getId()?r.setChild(i,!0):r.setChild(i,!1),o.parent=null,o.setChild(e.getRoot(),!1),e.setRoot(o)}e.getRoot().transAlign=R.AlignmentIdiom.LRtt,a.calcTransform();var l,s=a.localbounds();l=this.flavor_==h.TOP||this.flavor_==h.BOTTOM?.5:1;var u,c=new S.TheoSize(T.MathUtils.maxDouble(1,s.height*n.size_.aspectRatio-s.width),l*s.height),g=e.getRoot().getChild(!1);u=g instanceof R.GroupNode?this.flavor_==h.FULL||this.flavor_==h.FIT?g.optimizeFlow(R.AlignmentIdiom.LLtb,c,this.flavor_==h.FIT?R.ReflowType.FIT:R.ReflowType.FULL,2):g.optimizeFlow(R.AlignmentIdiom.LLtb,c,this.flavor_==h.TOP?R.ReflowType.TOP:R.ReflowType.BOTTOM,1):1,e.getRoot().calcTransform(),g.scaleAlign=s.height/g.localbounds().height,this.flavor_==h.TOP||this.flavor_==h.BOTTOM?(g.scaleAlign*=f.toDouble(u)/f.toDouble(T.MathUtils.maxInt(h.MAX_LINES,g.getTextNodes().length)),this.flavor_==h.BOTTOM?e.getRoot().transAlign=R.AlignmentIdiom.LRbb:e.getRoot().transAlign=R.AlignmentIdiom.LRtt):e.getRoot().transAlign=R.AlignmentIdiom.LRtt},adjustTree:function(e){var t=e.getRoot().getChild(!0),n=e.getRoot().getChild(!1);if(t.scaleAlign=1,n.scaleAlign=1,e.getRoot().calcTransform(),n.scaleAlign=t.localbounds().height/n.localbounds().height,this.flavor_==h.TOP||this.flavor_==h.BOTTOM){var a=f.clone(n.getLines());n.scaleAlign*=f.toDouble(a.length)/f.toDouble(T.MathUtils.maxInt(h.MAX_LINES,n.getTextNodes().length))}}}}),h),d.TripletTypographyLayout=(u=function(){d.TypographyLayout.call(this)},f.defineClass({name:"TripletTypographyLayout",ctor:u,superName:"TypographyLayout",props:{calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),t.length<3)return null;if(null!=n&&(1==n.length&&n[0].start>0&&n[0].end<t.length-1||2==n.length&&0==n[0].start&&n[n.length-1].end==t.length-1)){for(var o=[],i=f.iter(n);!i.done;i.next())for(var r=i.value,l=r.start;l<=r.end;)o.push(t[l]),l+=1;return o}var s=1,h=t.length-2;if(s<h){var u=0;for(l=s;l<=h;)u+=t[l].length,l+=1;for(var c=f.toInt(e.length/3);h-s>1&&u>c;)t[s].length>t[h].length?u-=t[h-=1].length:u-=t[s+=1].length}for(var g=[];s<=h;)g.push(t[s]),s+=1;return g}}}),u),d.MiddleTypographyLayout=(c=function(e){this.flavor_=e,d.TripletTypographyLayout.call(this)},f.defineClass({name:"MiddleTypographyLayout",ctor:c,superName:"TripletTypographyLayout",statics:{TRIPLET:0,TRIPLET_ROTATED_MIDDLE:1,TRIPLET_ROTATED_MIDDLE_MULTI:2,TRIPLET_ROTATED_ENDS:3,minEndGlyphCount:12},props:{category:function(){return L.TypographyLayoutCategory.Triplet},calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),t.length<3)return null;if(null!=n&&1==n.length&&n[0].start>0&&n[0].end<t.length-1){var o=!1;switch(this.flavor_){case 0:o=n[0].start>2&&n[0].end<t.length-3;break;case 2:o=n[0].length>1;break;case 3:for(var i=0,r=f.iter(f.range(0,n[0].start-1,!0));!r.done;r.next())i+=t[g=r.value].length;if(i<c.minEndGlyphCount){i=0;for(var l=f.iter(f.range(n[0].end+1,t.length-1,!0));!l.done;l.next())i+=t[g=l.value].length;i<c.minEndGlyphCount&&(o=!0)}break;default:o=!0}if(o){for(var s=[],h=f.iter(n);!h.done;h.next())for(var u=h.value,g=u.start;g<=u.end;)s.push(t[g]),g+=1;return s}}var p=null;if(this.flavor_==c.TRIPLET_ROTATED_MIDDLE_MULTI)return t.length<8&&((p=[]).push(t[0]),p.push(t[t.length-1])),p;if(this.flavor_==c.TRIPLET){if(t.length>4){var d=0,m=f.toInt(t.length/2);if((v=t.length-3)>3)for(var y=f.iter(f.range(3,v,!0));!y.done;y.next())t[g=y.value].length>d&&(d=t[g].length,m=g);(p=[]).push(t[m])}return p}if(this.flavor_==c.TRIPLET_ROTATED_ENDS){i=0;for(var T=f.iter(t);!T.done;T.next())i+=T.value.length;var L=f.toInt(i/4);if(L<c.minEndGlyphCount){i=0;for(var R=0;i<L;)i+=t[R].length,R+=1;i=0;for(var v=t.length-1;i<L;)i+=t[v].length,v-=1;if(R>0&&v<t.length-1&&R<v)for(p=[];R<v;)p.push(t[R]),R+=1}return p}if(t.length>2){p=[];var S=f.sort(t,(function(e,t){return e.length>t.length}));for(g=0;S[g]==t[0]||S[g]==t[t.length-1];)g+=1;p.push(S[g])}return p},arrangeText:function(e,t,n){if(t[1].propagateDown(R.AlignmentIdiom.LRBB),this.flavor_==c.TRIPLET_ROTATED_ENDS)t[0].propagateDown(R.AlignmentIdiom.LRBB),t[2].propagateDown(R.AlignmentIdiom.LRBB);else if(this.flavor_==c.TRIPLET){t[1].calcTransform();var a,o,i=t[1].localbounds(),r=new S.TheoSize(i.height,i.height);(a=f.as(t[0],R.GroupNode))&&a.optimizeFlow(R.AlignmentIdiom.RRtb,r,R.ReflowType.FULL,3,3),(o=f.as(t[2],R.GroupNode))&&o.optimizeFlow(R.AlignmentIdiom.LLtb,r,R.ReflowType.FULL,3,3)}else t[0].propagateDown(R.AlignmentIdiom.RRtb),t[2].propagateDown(R.AlignmentIdiom.LLtb);var l;if(this.flavor_==c.TRIPLET_ROTATED_MIDDLE?t[1].rotateAlign=R.TypographyNode.Clockwise:this.flavor_==c.TRIPLET_ROTATED_MIDDLE_MULTI?t[1].rotateAlign=R.TypographyNode.CounterClockwise:this.flavor_==c.TRIPLET_ROTATED_ENDS&&(t[0].rotateAlign=R.TypographyNode.CounterClockwise,t[2].rotateAlign=R.TypographyNode.Clockwise),t[1].calcTransform(),i=t[1].localbounds(),f.clone(t[1].getTextNodes()).length>1&&(this.flavor_!=c.TRIPLET_ROTATED_MIDDLE_MULTI||t[1].getText().length>4)){t[0].calcTransform();var s=t[0].localbounds();t[2].calcTransform();var h=t[2].localbounds(),u=T.MathUtils.maxDouble(s.height,h.height);l=T.MathUtils.maxDouble(1,u*n.size_.aspectRatio-(s.width+h.width)),this.flavor_==c.TRIPLET_ROTATED_MIDDLE?t[1].optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(u,l),R.ReflowType.FIT,2):t[1].optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(l,u),R.ReflowType.FIT),t[1].calcTransform(),l=(i=t[1].localbounds()).height*n.size_.aspectRatio-i.width}else l=i.height*n.size_.aspectRatio-i.width;if(t[0].calcTransform(),t[2].calcTransform(),s=t[0].localbounds(),h=t[2].localbounds(),this.flavor_==c.TRIPLET_ROTATED_MIDDLE_MULTI)t[1].scaleAlign=T.MathUtils.maxDouble(s.height,h.height)/i.height;else if(this.flavor_==c.TRIPLET_ROTATED_ENDS)t[1].calcTransform(),i=t[1].localbounds(),t[0].scaleAlign=i.height/s.height,t[2].scaleAlign=i.height/h.height;else{var g=T.MathUtils.maxDouble(this.fontScalingDiff,l/(s.width+h.width+t[0].getMargin()+t[2].getMargin()));if(t[0].scaleAlign=g,t[2].scaleAlign=g,t[0].calcTransform(),t[2].calcTransform(),this.flavor_==c.TRIPLET_ROTATED_MIDDLE){var p=t[0].localbounds().height/i.height,d=t[2].localbounds().height/i.height;(g=T.MathUtils.maxDouble(p,d))>1&&(p>d?p>1&&(g=1/p):d>1&&(g=1/d),t[0].scaleAlign*=g,t[2].scaleAlign*=g)}else{var m=t[0].localbounds().height,y=i.height,L=t[2].localbounds().height;(m>=.5*y||L>=.5*i.height)&&(t[0].scaleAlign*=y/m,t[2].scaleAlign*=y/L)}}t[0].parent.transAlign=R.AlignmentIdiom.LRtt,t[2].parent.transAlign=R.AlignmentIdiom.LRbb},adjustTree:function(e){var t=e.getRoot().getChild(!0).getChild(!0),n=e.getRoot().getChild(!0).getChild(!1),a=e.getRoot().getChild(!1);if(this.flavor_==c.TRIPLET){t.scaleAlign=1,a.scaleAlign=1,e.getRoot().calcTransform();var o=n.localbounds().height;t.scaleAlign=o/t.localbounds().height,a.scaleAlign=o/a.localbounds().height}else if(this.flavor_==c.TRIPLET_ROTATED_MIDDLE_MULTI)n.scaleAlign=1,e.getRoot().calcTransform(),n.scaleAlign=T.MathUtils.maxDouble(t.localbounds().height,a.localbounds().height)/n.localbounds().height;else if(this.flavor_==c.TRIPLET_ROTATED_MIDDLE){t.scaleAlign=1,a.scaleAlign=1,e.getRoot().calcTransform();var i=t.localbounds().height/n.localbounds().height,r=a.localbounds().height/n.localbounds().height,l=T.MathUtils.maxDouble(i,r);l>1&&(i>r?i>1&&(l=1/i):r>1&&(l=1/r),t.scaleAlign*=l,a.scaleAlign*=l)}else this.flavor_==c.TRIPLET_ROTATED_ENDS?(t.scaleAlign=1,a.scaleAlign=1,e.getRoot().calcTransform(),o=n.localbounds().height,t.scaleAlign=o/t.localbounds().height,a.scaleAlign=o/a.localbounds().height):d.TripletTypographyLayout.prototype.adjustTree.call(this,e)}}}),c),d.QuadraticTypographyLayout=(g=function(){d.TypographyLayout.call(this)},f.defineClass({name:"QuadraticTypographyLayout",ctor:g,superName:"TypographyLayout",props:{calculateWeighting:function(e,t,n,a){if(void 0===n&&(n=null),void 0===a&&(a=null),t.length<4)return null;if(null!=n&&2==n.length&&(0==n[0].start&&n[n.length-1].end<t.length-1||n[0].start>0&&n[n.length-1].end==t.length-1)){for(var o=[],i=f.iter(n);!i.done;i.next())for(var r=i.value,l=r.start;l<=r.end;)o.push(t[l]),l+=1;return o}var s=[];s.push([]),s.push([]),s.push([]),s.push([]);for(var h=0,u=t.length%2==0?f.toInt(t.length/2)-1:f.toInt(t.length/2),c=u;h<c;)s[0].push(t[h]),s[1].splice(0,0,t[c]),h+=1,c-=1;if(h==c){var g=s[0][s[0].length-1].end-s[0][0].start,p=s[1][s[1].length-1].end-s[1][0].start;T.MathUtils.absInt(p+t[h].length-g)>T.MathUtils.absInt(g+t[h].length-p)?s[0].push(t[h]):s[1].splice(0,0,t[h])}if(s[0][s[0].length-1].end-s[0][0].start<2||s[1][s[1].length-1].end-s[1][0].start<2)return null;for(h=u+1,c=t.length-1;h<c;)s[2].push(t[h]),s[3].splice(0,0,t[c]),h+=1,c-=1;if(h==c){var d=s[2][s[2].length-1].end-s[2][0].start,m=s[3][s[3].length-1].end-s[3][0].start;T.MathUtils.absInt(m+t[h].length-d)>T.MathUtils.absInt(d+t[h].length-m)?s[2].push(t[h]):s[3].splice(0,0,t[h])}if(s[2][s[2].length-1].end-s[2][0].start<2||s[3][s[3].length-1].end-s[3][0].start<2)return null;var y=[];return f.append(y,s[0]),f.append(y,s[2]),y}}}),g),d.FitRotateFitTypographyLayout=(p=function(e){this.rotateFirst_=e,d.QuadraticTypographyLayout.call(this)},f.defineClass({name:"FitRotateFitTypographyLayout",ctor:p,superName:"QuadraticTypographyLayout",props:{category:function(){return L.TypographyLayoutCategory.RotateFit},arrangeText:function(e,t,n){var a,o,i,r;e.rotateNode(t[0].parent),n.size_.aspectRatio>1?(a=n.size_.width/2,o=n.size_.height):(a=n.size_.width,o=n.size_.height/2),this.rotateFirst_?((i=e.findCommonAncestor([t[0],t[1]])).optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(o,a),R.ReflowType.FIT),(r=e.findCommonAncestor([t[2],t[3]])).optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(a,o),R.ReflowType.FIT),i.rotateAlign=R.TypographyNode.CounterClockwise):((i=e.findCommonAncestor([t[0],t[1]])).optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(a,o),R.ReflowType.FIT),(r=e.findCommonAncestor([t[2],t[3]])).optimizeFlow(R.AlignmentIdiom.LLtb,new S.TheoSize(o,a),R.ReflowType.FIT),r.rotateAlign=R.TypographyNode.CounterClockwise),i.calcTransform(),r.calcTransform(),n.size_.aspectRatio>1?(r.scaleAlign=i.localbounds().height/r.localbounds().height,e.getRoot().transAlign=R.AlignmentIdiom.LRtt):(r.scaleAlign=i.localbounds().width/r.localbounds().width,e.getRoot().transAlign=R.AlignmentIdiom.LLtb)},adjustTree:function(e){var t=e.getRoot().getChild(!0),n=e.getRoot().getChild(!1);t.scaleAlign=1,n.scaleAlign=1,e.getRoot().calcTransform(),e.getRoot().transAlign==R.AlignmentIdiom.LRtt?n.scaleAlign=t.localbounds().height/n.localbounds().height:n.scaleAlign=t.localbounds().width/n.localbounds().width}}}),p)},"p+tC":function(e,t,n){var a,o,i,r=t,l=n("oAGj"),s=n("fNpk"),h=n("uj1m"),u=n("txj3"),c=n("nrTo"),g=n("35Q0"),p=n("UqVc"),d=n("ThKb");r.predictCategory=!0,r.RawDataShapeSuggester=(a=function(){},l.defineClass({name:"RawDataShapeSuggester",ctor:a,props:{init_b1f8:function(e,t,n,a,o,i,r,l,s,h){this.numImages=e,this.numShapes=t,this.charLength=n,this.lineHeight=a,this.font=o,this.layout=i,this.textWidth=r,this.textHeight=l,this.centerX=s,this.centerY=h},getUniqueKey:function(){var e="";return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e+l.toString(this.numImages)+"-")+l.toString(this.numShapes)+"-")+l.toString(this.charLength)+"-")+l.toString(this.lineHeight)+"-")+this.font+"-")+this.layout+"-")+l.toString(this.textWidth)+"-")+l.toString(this.textHeight)+"-")+l.toString(this.centerX)+"-")+l.toString(this.centerY)+"-"},init_implicit:function(e,t,n,a,o,i,r,l,s,h){this.numImages=e,this.numShapes=t,this.charLength=n,this.lineHeight=a,this.font=o,this.layout=i,this.textWidth=r,this.textHeight=l,this.centerX=s,this.centerY=h},clone:function(){return a.init_implicit(this.numImages,this.numShapes,this.charLength,this.lineHeight,this.font,this.layout,this.textWidth,this.textHeight,this.centerX,this.centerY)}}}),a),r.ShapeSuggester=(o=function(){this.shapeCatMap={},this.shapeCatMap.banner=g.TagGroup.banner,this.shapeCatMap.square=g.TagGroup.square,this.shapeCatMap.other=g.TagGroup.other,this.shapeCatMap.circle=g.TagGroup.circle,this.shapeCatMap.decorative=g.TagGroup.decorative,this.shapeCatMap.none=g.TagGroup.none,l.defctor(this)},i={},l.defineClass({name:"ShapeSuggester",ctor:o,statics:{cache:{get:function(){return void 0===i.cache&&(i.cache=new c.PredictionCacheDouble),i.cache},set:function(e){i.cache=e}}},props:{getShapeSuggesterFeatures:function(e,t){var n=e.numImages,a=e.shapeCount,i=e.selectedLockup.charCount,s=l.toInt(e.selectedLockup.lineHeight),h=e.selectedLockup.font,u=e.selectedLockup.styleAttributes.layout,c=l.clone(e.selectedLockup.pts),g=(c[0].x+c[3].x)/2/e.width,p=(c[0].y+c[3].y)/2/e.height,d=l.toInt(e.selectedLockup.width),f=l.toInt(e.selectedLockup.height),m=l.clone(r.RawDataShapeSuggester.init_b1f8(n,a,i,s,h,u,d,f,g,p));return o.cache.cleanup(t.page.document.uuid),m},getScores:function(e,t){var n=this,a=t.getUniqueKey();if(null==o.cache.getCacheValue(a)){var i,c=[],f=0;if(i=h.MLPModel.loadNNModel("Shape")){var m,y,T,L=l.repeat(0,55),R=l.repeat(0,4),v=l.repeat(0,8);v[0]=l.toDouble(t.numShapes),v[1]=l.toDouble(t.numShapes),v[2]=l.toDouble(t.charLength),v[3]=l.toDouble(t.lineHeight),v[4]=l.toDouble(t.textWidth),v[5]=l.toDouble(t.textHeight),v[6]=l.toDouble(t.centerX),v[7]=l.toDouble(t.centerY),null!=(y=l.indexOf(i.fonts,t.font))&&(L[y]=1),null!=(T=l.indexOf(i.layouts,t.layout))&&(R[T]=1);var S=v.concat(L).concat(R);s.LegacyCoreAssert.isTrue(67==S.length,"unexpected feature vector size",{count:S.length},"ShapeSuggester.getScores","ShapeSuggester.swift",148);var C=new d.TheoMatrix([S]).subtract(i.featureScalingMean).divide(i.featureScalingStd),A=new u.NNMLPClassifier(i.coefficients,i.intercepts).predict(C.transpose()),b=l.clone(A.transpose().asArray);m=l.clone(i.shapes);for(var x={},_=l.iter(l.toSequence(b[0]));!_.done;_.next()){var I=_.value,M=I.offset,w=I.element;x[m[M]]=w,f=Math.max(f,w)}0==r.predictCategory?e.forEach((function(e){var t;null!=(t=x[e])?c.push(t+.2):c.push(0)})):e.forEach((function(e){var t=0;m.forEach((function(a){var o;l.opt(g.ShapeLibrary.getShapeDataForArtworkId(e),(function(e){return 1==e.tags.includes(n.shapeCatMap[a])}))&&null!=(o=x[a])&&(t=o)})),"row"==e?t=f+.5:l.opt(g.ShapeLibrary.getShapeDataForArtworkId(e),(function(e){return 1==e.tags.includes(n.shapeCatMap.none)}))&&(t=.1),c.push(t)}))}o.cache.setCacheValue(a,(new p.SuggestionUtils).normalizedWeights(c))}return o.cache.getCacheValue(a)}}}),o)},taeg:function(e,t,n){var a,o,i=t,r=n("oAGj"),l=n("iCxV"),s=n("txj3"),h=n("nrTo"),u=n("7Ta2"),c=n("ThKb");i.RoleSuggesterMLP=(a=function(){},o={},r.defineClass({name:"RoleSuggesterMLP",ctor:a,statics:{cache:{get:function(){var e;return void 0===o.cache&&(o.cache=((e=r.opt(l.Host.platform,(function(e){return e.isService})))||null!=e)&&e?r.opt(l.Host.learning,(function(e){return e.getHostPredictionCache()})):new h.PredictionCacheInferredRole),o.cache},set:function(e){o.cache=e}},_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRoleModel:function(){return null},getRole:function(e){var t,n,o=r.clone(u.InferredRole.init_84d1()),i=e.getUniqueKey();if(null==a.cache.getCacheValue(i)){var l,h=0,g="",p=0,d="";if(l=this.getRoleModel()){var f,m=r.clone(e.getFeatureVector()),y=r.clone(m),T=new c.TheoMatrix([y]).subtract(l.featureScalingMean).divide(l.featureScalingStd),L=new s.NNMLPClassifier(l.coefficients,l.intercepts,l.finalSoftmax).predict(T.transpose()),R=r.clone(L.transpose().asArray);f=r.clone(l.roles);for(var v={},S=r.iter(r.toSequence(R[0]));!S.done;S.next()){var C=S.value,A=C.offset,b=C.element;v[f[A]]=b,b>h?(p=h,d=g,h=b,g=f[A]):b>p&&(p=b,d=f[A])}}var x=(t=u.InferredRoleType.toCaseValue(g))||null!=t?t:u.InferredRoleType.Undefined,_=(n=u.InferredRoleType.toCaseValue(d))||null!=n?n:u.InferredRoleType.Undefined;o=r.clone(u.InferredRole.init_84d1(x,h,_,p)),a.cache.setCacheValue(i,o)}return a.cache.getCacheValue(i)}}}),a)},"ws+m":function(e,t,n){var a,o,i=t,r=n("oAGj"),l=n("6ZWm"),s=n("7Ta2");i.ImageRoleSuggesterFactory=(a=function(){},r.defineClass({name:"ImageRoleSuggesterFactory",ctor:a,statics:{Create:function(e){return void 0===e&&(e=""),new i.ImageRoleSuggesterSimple}}}),a),i.ImageRoleSuggesterSimple=(o=function(){},r.defineClass({name:"ImageRoleSuggesterSimple",ctor:o,statics:{_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRole:function(e){var t,n=e.forma,a=s.InferredRoleType.Undefined;if(t=r.as(n.controller,l.FrameController)){if(n.isGridCell())return s.InferredRole.init_84d1(s.InferredRoleType.Background,1);if(n.isLogo())return s.InferredRole.init_84d1(s.InferredRoleType.Logo,1,s.InferredRoleType.GraphicContent,.5);if(t.floating)return s.InferredRole.init_84d1(s.InferredRoleType.GraphicContent,1)}return s.InferredRole.init_84d1(a,1)}}}),o)},xRbc:function(e,t,n){var a,o=t,i=n("oAGj"),r=n("wc1n"),l=n("cYVN"),s=n("35Q0");o.LockupRoleFeatures=i.defineEnum("LockupRoleFeatures",{WordCount:"WordCount",CharacterCount:"CharacterCount",intsSpecialsCount:"intsSpecialsCount",webReferencesCount:"webReferencesCount",checkSocialChar:"checkSocialChar",Spacing:"Spacing",Padding:"Padding",ShapeFilled:"ShapeFilled",TextWidth:"TextWidth",TextHeight:"TextHeight",PercentageArea:"PercentageArea",CenterX:"CenterX",CenterY:"CenterY",PageHeight:"PageHeight",PageWidth:"PageWidth",otherLockupPercDesignArea:"otherLockupPercDesignArea",TextCount:"TextCount",actionWordsCount:"actionWordsCount",TextString:"TextString",BackingShape:"BackingShape",PerAreaAllLockups:"PercentageAreaAllLockups",CollisionPercentage:"CollisionPercentage",SurroundingAlignment:"SurroundingAlignment"}),o.LockupRoleData=(a=function(e,t,n){l.RoleData.call(this,e,t,n)},i.defineClass({name:"LockupRoleData",ctor:a,superName:"RoleData",statics:{digits:"0123456789/@|",webReferenceStrings:[".com","http",".edu",".org",".gov"],actionWordStrings:["join","now","today","try","view","swipe"],socialMediaStrings:["#","instagram"],getLockupRoleData:function(e){var t=[o.LockupRoleFeatures.WordCount,o.LockupRoleFeatures.CharacterCount,o.LockupRoleFeatures.intsSpecialsCount,o.LockupRoleFeatures.checkSocialChar,o.LockupRoleFeatures.webReferencesCount,o.LockupRoleFeatures.Spacing,o.LockupRoleFeatures.Padding,o.LockupRoleFeatures.ShapeFilled,o.LockupRoleFeatures.TextWidth,o.LockupRoleFeatures.TextHeight,o.LockupRoleFeatures.PercentageArea,o.LockupRoleFeatures.CenterX,o.LockupRoleFeatures.CenterY,o.LockupRoleFeatures.PageWidth,o.LockupRoleFeatures.PageHeight,o.LockupRoleFeatures.otherLockupPercDesignArea,o.LockupRoleFeatures.TextCount,o.LockupRoleFeatures.actionWordsCount],n=[o.LockupRoleFeatures.TextString,o.LockupRoleFeatures.BackingShape,o.LockupRoleFeatures.PerAreaAllLockups],l=r.FeatureExtractorFactory.getFeatureExtractor(r.FeatureExtractorType.LockupStyle,e,i.as(t.concat(n),["Array","String"])),s=i.clone(l.numericalFeatures);i.removeKey(s,o.LockupRoleFeatures.PerAreaAllLockups);var h=l.categoricalFeatureForKey(o.LockupRoleFeatures.TextString),u=l.categoricalFeatureForKey(o.LockupRoleFeatures.BackingShape),c=l.numericFeatureForKey(o.LockupRoleFeatures.PerAreaAllLockups);return s[o.LockupRoleFeatures.actionWordsCount]=i.toDouble(a.getNumActionWordReferences(h)),s[o.LockupRoleFeatures.checkSocialChar]=a.checkSocialMediaCharacters(h,u)?1:0,s[o.LockupRoleFeatures.intsSpecialsCount]=i.toDouble(a.getNumIntsAndSpecials(h)),s[o.LockupRoleFeatures.webReferencesCount]=i.toDouble(a.getNumWebReferences(h)),s[o.LockupRoleFeatures.otherLockupPercDesignArea]=c-s[o.LockupRoleFeatures.PercentageArea],new a(e,t,s)},getNumIntsAndSpecials:function(e){for(var t=0,n=i.iter(i.range(0,e.length,!1));!n.done;n.next()){var o=n.value,r=e.substr(o,1);a.digits.includes(r)&&(t+=1)}return t},getNumWebReferences:function(e){for(var t=0,n=i.iter(a.webReferenceStrings);!n.done;n.next()){var o=n.value;e.toLowerCase().includes(o)&&(t+=1)}return t},getNumActionWordReferences:function(e){for(var t=0,n=i.iter(a.actionWordStrings);!n.done;n.next()){var o=n.value;e.toLowerCase().includes(o)&&(t+=1)}return t},checkSocialMediaCharacters:function(e,t){for(var n,o=!1,r=i.iter(a.socialMediaStrings);!r.done;r.next()){var l=r.value;e.includes(l)&&(o=!0)}return(n=s.ShapeLibrary.shapeDictionary[t])&&n.category==s.ShapeCategory.Social&&(o=!0),o},checkLockupIsGraphic:function(e,t){for(var n=!1,a="",o=i.iter(i.range(0,e.length,!1));!o.done;o.next()){var r=o.value,l=e.substr(r,1);" "!=l&&"\n"!=l&&"\t"!=l&&"\r"!=l&&(a+=l)}return a.length<=1&&t.category!=s.ShapeCategory.None&&(n=!0),n}}}),a)},zbwF:function(e,t,n){var a,o,i,r=t,l=n("oAGj"),s=n("xRbc"),h=n("uj1m"),u=n("7Ta2"),c=n("taeg");r.LockupRoleSuggesterFactory=(a=function(){},l.defineClass({name:"LockupRoleSuggesterFactory",ctor:a,statics:{Create:function(e){return void 0===e&&(e=""),"MLP"==e?new r.LockupRoleSuggesterMLP:new r.LockupRoleSuggesterSimple}}}),a),r.LockupRoleSuggesterMLP=(o=function(){c.RoleSuggesterMLP.call(this)},l.defineClass({name:"LockupRoleSuggesterMLP",ctor:o,superName:"RoleSuggesterMLP",statics:{_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRoleModel:function(){return h.MLPModel.loadNNModel("TextRole")}}}),o),r.LockupRoleSuggesterSimple=(i=function(){},l.defineClass({name:"LockupRoleSuggesterSimple",ctor:i,statics:{_implements:function(e){return"RoleSuggesterProtocol"==e}},props:{getRole:function(e){var t,n=u.InferredRoleType.Undefined;if(t=l.as(e,s.LockupRoleData)){var a=t.feat(s.LockupRoleFeatures.WordCount),o=t.feat(s.LockupRoleFeatures.TextCount),i=t.feat(s.LockupRoleFeatures.TextHeight),r=t.feat(s.LockupRoleFeatures.intsSpecialsCount),h=t.feat(s.LockupRoleFeatures.checkSocialChar)>0,c=t.feat(s.LockupRoleFeatures.PercentageArea),g=t.feat(s.LockupRoleFeatures.otherLockupPercDesignArea);n=a<=5&&i>=80||a<=9&&i>=250?u.InferredRoleType.Title:a<=14?u.InferredRoleType.SubTitle:u.InferredRoleType.Body,r>=5&&a<=18&&i<=220&&(n=u.InferredRoleType.Contact),h&&(n=u.InferredRoleType.Social),o<=3&&c>g&&(n!=u.InferredRoleType.Body&&n!=u.InferredRoleType.Social||(n=u.InferredRoleType.Title))}return u.InferredRole.init_84d1(n,1)}}}),i)}}]);
//# sourceMappingURL=vendors_npm_spark_f5b5a342-d3ceab74.js.map