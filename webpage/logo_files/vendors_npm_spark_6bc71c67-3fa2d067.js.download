(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[29],{"3HaQ":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("6ZWm"),l=n("7Pku"),u=n("w/+j"),c=n("9Lk3"),p=n("iCxV"),f=n("fNpk"),d=n("tGKA"),m=n("Ird5"),h=n("jLWG"),P=n("jfma"),M=n("yjxF"),g=n("euLT"),T=n("Aj79"),F=n("Ucb9"),G=n("g6aL"),A=n("Zifs"),y=n("djAF"),v=n("byfQ"),R=n("hgLm"),_=n("oKlP");a.ShapeFormaToPGMMapper=(r=function e(){l.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"ShapeFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=y.ShapeForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance},applyAnimations:function(e,t,n,r,o){var a,s=n;if(e.asDynamic&&(a=t.animation)){var l=i.clone(u.FormaToPGMUtils.convertAnimation(n,a,r,o));if(l.length>0){var c=m.PGMAnimationList.fromArray(l);s=n.withAnimations(n.animations.merge(c))}}return s},DUMMY_REF:{get:function(){return void 0===o.DUMMY_REF&&(o.DUMMY_REF=new T.PGMReference(new g.PGMNullNode("dummy"))),o.DUMMY_REF}},makePGMRefForArtwork:function(e,t,n,o,a,s){var l,u,c,p,d=m.PGMAnimationList.EMPTY;if(u=o.bounds)if(c=i.as(o,v.TheoArtworkShape))l=new T.PGMReference(new F.PGMShape(n,new M.PGMNodeMetadata(n,"shape"),d,u,c.paths,s),a);else if(p=i.as(o,v.TheoArtworkGroup)){var g,A=[],y=1;p.forEachChild((function(o){var a;if(a=r.makePGMRefForArtwork(e,t,n+"-"+y,o,P.PGMCompositingParams.DEFAULT,s)){var i=r.applyAnimations(e,t,a,!1,!0);A.push(i)}y+=1})),l=(g=i.as(p,v.TheoArtworkClipGroup))?new T.PGMReference(new h.PGMClip(n,new M.PGMNodeMetadata(n,"clip"),m.PGMAnimationList.EMPTY,A,[g.path]),a):1==A.length?A[0].withCompositing(a):new T.PGMReference(new G.PGMSimpleGroup(n,new M.PGMNodeMetadata(n,"group"),m.PGMAnimationList.EMPTY,A),a)}else f.LegacyCoreAssert.fail("unable to create PGM for artwork: not a shape or a group",void 0,"ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",156),l=null;else f.LegacyCoreAssert.fail("unable to create PGM for artwork: no bounds",void 0,"ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",160),l=null;return l},makePGMRefForShape:function(e,t,n){var o=r.DUMMY_REF,a=t.style.colors.fieldPrimary;null==a&&i.opt(p.Host.logging,(function(e){return e.warning("shape forma has no primary color; will not render")}));var u,h,F=a||A.SolidColor.ZERO,y=c.GridController.isBackgroundColoredCell(t)?e.backgroundOpacityOverride:1,v=F.withAlphaOf(F.alpha*y),R=l.FormaToPGMMapper.mapBlendMode(t);if(null==t.sliceBox)if((u=t.canonicalArtwork.bounds)&&(h=t.bounds)){var C,w=d.Matrix2D.calculateResizeTransform(u,h,_.TheoPoint.ZERO,s.FitType.Stretch);if(C=r.makePGMRefForArtwork(e,t,n,t.canonicalArtwork,new P.PGMCompositingParams(w,t.style.opacity,R),v)){var S=r.applyAnimations(e,t,C,!1,!0);o=new T.PGMReference(new G.PGMSimpleGroup(n+"-shape-container",new M.PGMNodeMetadata(n,"shape-container"),m.PGMAnimationList.EMPTY,[S]),new P.PGMCompositingParams(t.placement))}else f.LegacyCoreAssert.fail("unexpected artwork configuration",void 0,"ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",226),o=new T.PGMReference(new g.PGMNullNode(n+"-shape-error-1"))}else f.LegacyCoreAssert.fail("couldn't get artwork or forma bounds for shape",void 0,"ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",230),o=new T.PGMReference(new g.PGMNullNode(n+"-shape-error-2"));else(C=r.makePGMRefForArtwork(e,t,n,t.sizedArtwork,new P.PGMCompositingParams(t.placement,t.style.opacity,R),v))?o=C:(f.LegacyCoreAssert.fail("unexpected artwork configuration",void 0,"ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",245),o=new T.PGMReference(new g.PGMNullNode(n+"-shape-error-3")));return o},applyPathAsClip:function(e,t,n,o,a){var l,u,c,p,F=r.DUMMY_REF,A=m.PGMAnimationList.EMPTY,y=i.clone(o);if(null==t.sliceBox)(l=t.canonicalArtwork.bounds)&&(p=n.bounds)?((b=(D=d.Matrix2D.calculateResizeTransform(l,p,_.TheoPoint.ZERO,s.FitType.Stretch).concat(t.placement)).inverse)&&(y=[new T.PGMReference(new G.PGMSimpleGroup(a,new M.PGMNodeMetadata(a,"clipped-node-wrapper"),A,y),new P.PGMCompositingParams(b))]),(c=i.as(t.canonicalArtwork,v.TheoArtworkShape))?F=new T.PGMReference(new h.PGMClip(a+"-clip",new M.PGMNodeMetadata(a,"shape-clip"),A,y,c.paths),new P.PGMCompositingParams(D)):(u=i.as(t.canonicalArtwork,v.TheoArtworkClipGroup))&&(c=i.as(u.childAt(0),v.TheoArtworkShape))?F=new T.PGMReference(new h.PGMClip(a+"-clip",new M.PGMNodeMetadata(a,"outer-shape-clip"),m.PGMAnimationList.EMPTY,[new T.PGMReference(new h.PGMClip(a+"-inner-clip",new M.PGMNodeMetadata(a,"inner-shape-clip"),A,y,c.paths))],[u.path]),new P.PGMCompositingParams(D)):(f.LegacyCoreAssert.fail("unexpected artwork configuration",void 0,"ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",325),F=new T.PGMReference(new g.PGMNullNode(a)))):(f.LegacyCoreAssert.fail("no shape and/or primary color?",void 0,"ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",329),F=new T.PGMReference(new g.PGMNullNode(a)));else if((c=i.as(t.sizedArtwork,v.TheoArtworkShape))&&(p=n.bounds)){for(var C=(E=i.clone(c.paths))[0].bounds,w=i.iter(i.range(1,E.length,!1));!w.done;w.next()){var S=w.value;C=C.unionWith(E[S].bounds)}(b=(D=d.Matrix2D.calculateResizeTransform(C,p,_.TheoPoint.ZERO,s.FitType.Stretch).concat(t.placement)).inverse)&&(F=new T.PGMReference(new h.PGMClip(a,new M.PGMNodeMetadata(a,"shape"),A,[new T.PGMReference(new G.PGMSimpleGroup(a+"-clip-wrapper",new M.PGMNodeMetadata(a,"clipped-node-wrapper"),A,y),new P.PGMCompositingParams(b))],E),new P.PGMCompositingParams(D)))}else if((u=i.as(t.sizedArtwork,v.TheoArtworkClipGroup))&&(c=i.as(u.childAt(0),v.TheoArtworkShape))&&(p=n.bounds)){C=(E=i.clone(c.paths))[0].bounds;for(var E,N=i.iter(i.range(1,E.length,!1));!N.done;N.next())S=N.value,C=C.unionWith(E[S].bounds);var D,b;if(b=(D=d.Matrix2D.calculateResizeTransform(C,p,_.TheoPoint.ZERO,s.FitType.Stretch).concat(t.placement)).inverse){var x,O=!0;u.path instanceof R.TheoEmptyPath?O=!1:(x=i.as(u.path,R.TheoRectanglePath))&&(O=x.rect.contains(C));var k=new T.PGMReference(new h.PGMClip(a,new M.PGMNodeMetadata(a,"shape"),A,[new T.PGMReference(new G.PGMSimpleGroup(a+"-clip-wrapper",new M.PGMNodeMetadata(a,"clipped-node-wrapper"),A,y),new P.PGMCompositingParams(b))],E),new P.PGMCompositingParams(O?d.Matrix2D.Identity:D));F=O?new T.PGMReference(new h.PGMClip(a+"-clip",new M.PGMNodeMetadata(a,"clip"),m.PGMAnimationList.EMPTY,[k],[u.path]),new P.PGMCompositingParams(D)):k}}else f.LegacyCoreAssert.fail("unexpected artwork configuration",void 0,"ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",439),F=new T.PGMReference(new g.PGMNullNode(a));return F}},props:{makePGMRef:function(e,t,n,o){var a;return(a=i.as(e,y.ShapeForma))?0==t.backgroundOpacityOverride&&c.GridController.isBackgroundColoredCell(e)?new T.PGMReference(new g.PGMNullNode(a.formaID)):u.FormaToPGMUtils.applyAnimations(t,e,r.makePGMRefForShape(t,a,a.formaID)):(f.LegacyCoreAssert.fail("ShapeFormaToPGMMapper: not a shape forma",void 0,"ShapeFormaToPGMMapper.makePGMRef","ShapeFormaToPGMMapper.swift",50),null)}}}),r)},"44Iz":function(e,t,n){var r,o,a,i=t,s=n("oAGj");i.PGMExportSettings=(r=function(e,t){void 0===t&&(t=1),this.asDynamic=e,this.backgroundOpacityOverride=t},o={},s.defineClass({name:"PGMExportSettings",ctor:r,superName:"CoreObject",statics:{STATIC:{get:function(){return void 0===o.STATIC&&(o.STATIC=new r(!1)),o.STATIC}},DYNAMIC:{get:function(){return void 0===o.DYNAMIC&&(o.DYNAMIC=new r(!0)),o.DYNAMIC}}},props:{asString:{get:function(){return(this.asDynamic?"dynamic":"static")+(1==this.backgroundOpacityOverride?"":"bgop="+this.backgroundOpacityOverride)}}}}),r),i.PGMSource=(a=function(){},s.defineClass({name:"PGMSource",ctor:a,props:{getGraph:function(e){return null},getGraphForForma:function(e,t){return null}}}),a)},"5ex8":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("6ZWm"),l=n("cmoc"),u=n("7Pku"),c=n("w/+j"),p=n("fdtz"),f=n("lmwz"),d=n("fNpk"),m=n("tGKA"),h=n("Ird5"),P=n("jLWG"),M=n("jfma"),g=n("dmHI"),T=n("vTQu"),F=n("yjxF"),G=n("Aj79"),A=n("Ucb9"),y=n("g6aL"),v=n("Zifs"),R=n("djAF"),_=n("3HaQ"),C=n("hgLm"),w=n("oKlP");a.FrameFormaToPGMMapper=(r=function e(){u.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"FrameFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=l.FrameForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance}},props:{frameHasFillColor:function(e){var t,n;return!(!(t=i.as(e,l.FrameForma))||!(n=i.as(t.controller,s.FrameController)))&&n.hasCutout},makePGMRef:function(e,t,n,r){var o,a,S;if((o=i.as(e,l.FrameForma))&&(a=n.childReferences(o))&&(S=o.bounds)){var E,N,D=null,b=o.formaID,x=new F.PGMNodeMetadata(o.formaID,"frame"),O=h.PGMAnimationList.EMPTY,k=this.frameHasFillColor(e),I=o.style.opacity,L=M.PGMBlendModeEnum.Normal;if(k){var Y,B=o.style.colors.fieldPrimary||v.SolidColor.ZERO,U=new C.TheoRectanglePath(S);(Y=f.ImageFacade.getImageFormaForForma(o))&&(I=Y.style.opacity),D=new G.PGMReference(new A.PGMShape(o.formaID+"-background",new F.PGMNodeMetadata(o.formaID,"background"),h.PGMAnimationList.EMPTY,S,[U],B)),a.splice(0,0,D)}if(L=u.FormaToPGMMapper.mapBlendMode(o),N=f.ImageFacade.getMaskFormaForForma(o)){var K,W;if(K=i.as(N,R.ShapeForma))E=new y.PGMSimpleGroup(b,x,O,[_.ShapeFormaToPGMMapper.applyPathAsClip(t,K,e,a,K.formaID)]);else{if(!(W=i.as(N,p.ImageForma)))return d.LegacyCoreAssert.fail("child reference generation failed for frame: unknown mask type",void 0,"FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",150),null;var j,V;if(!(j=n.referenceForForma(W)))return d.LegacyCoreAssert.fail("child reference generation failed for frame: no image?",void 0,"FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",145),null;V=1==a.length?a[0]:new G.PGMReference(new y.PGMSimpleGroup(b+"-children-group",x,O,a));var H,q=m.Matrix2D.calculateResizeTransform(W.bounds,o.bounds,w.TheoPoint.ZERO,s.FitType.Stretch),z=j.withPlacement(q);E=new g.PGMFilter(b,x,O,[V,z],new T.PGMMaskFilterSpec),(H=D)&&(E=new y.PGMSimpleGroup(b,x,O,[H,new G.PGMReference(E)]))}}else{var Z,J=!1,Q=new C.TheoRectanglePath(o.bounds);(Z=i.as(o.controller,s.FrameController))&&(J=Z.clip),E=J?new P.PGMClip(b,x,O,a,[Q]):new y.PGMSimpleGroup(b,x,O,a)}return c.FormaToPGMUtils.applyAnimations(t,e,new G.PGMReference(E,new M.PGMCompositingParams(o.placement,I,L)))}return d.LegacyCoreAssert.fail("frame forma child reference generation failed",void 0,"FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",185),null}}}),r)},"7Pku":function(e,t,n){var r,o=t,a=n("oAGj"),i=n("SpAV"),s=n("QbzR"),l=n("fNpk"),u=n("T8w7"),c=n("jfma");o.FormaToPGMFactory=a.defineProtocol("FormaToPGMFactory",{childReferences:"(GroupForma) -> Array<PGMReference>",referenceForForma:"(Forma) -> PGMReference"}),o.FormaToPGMMapper=(r=function(e){this.formaKind=e},a.defineClass({name:"FormaToPGMMapper",ctor:r,statics:{mapBlendMode:function(e){var t=u.OpacityFacade.formaCanHaveBlendMode(e)?e.style.blendMode:s.FormaBlendMode.Normal;return t==s.FormaBlendMode.Multiply?c.PGMBlendModeEnum.Multiply:t==s.FormaBlendMode.Screen?c.PGMBlendModeEnum.Screen:(i.CoreAssertDebugOnly.isTrue(t==s.FormaBlendMode.Normal,"Only normal, multiply, and screen blend modes are supported in PGM",void 0,"FormaToPGMMapper.mapBlendMode","FormaToPGMMapper.swift",79),c.PGMBlendModeEnum.Normal)}},props:{makePGMRef:function(e,t,n,r){return l.LegacyCoreAssert.fail("PGMMapperForForma isn't overriding makePGMRef",{kind:this.formaKind},"FormaToPGMMapper.makePGMRef","FormaToPGMMapper.swift",52),null},canDoSimpleTransformUpdate:function(e){return!u.OpacityFacade.formaHasNonNormalBlendMode(e.forma)}}}),r)},"8Quq":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("7Pku"),l=n("w/+j"),u=n("fNpk"),c=n("c+uM"),p=n("Ird5"),f=n("jfma"),d=n("djwB"),m=n("yjxF"),h=n("Aj79"),P=n("W6ub"),M=n("bAjp"),g=n("bJhu"),T=n("enh0"),F=n("sIWg");a.TextFormaToPGMMapper=(r=function e(){s.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"TextFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=T.TextForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance},getPGMNodeForTextForma:function(e,t,n,r){var o;void 0===r&&(r=null);var a=p.PGMAnimationList.EMPTY,s=t.fontColor,l=t.fontDescriptor,f=t.textLook,h=t.fontStrokeColor,T=t.fontStrokeWidth;f==c.LockupTextLook.KnockoutAndOutline&&n.includes("-txt-ko#")&&(T=0);var G=t.tracking,A=t.fontSize,y=r||s;null==r&&T>0&&(f==c.LockupTextLook.KnockoutAndOutline||f==c.LockupTextLook.OutlineOnly||f==c.LockupTextLook.KnockoutAndShadow)&&(y=null),u.LegacyCoreAssert.isFalse(null==t.bounds,"nil text forma bounds encountered when getting PGM node",void 0,"TextFormaToPGMMapper.getPGMNodeForTextForma","TextFormaToPGMMapper.swift",95);var v=((o=i.opt(t.bounds,(function(e){return e.width})))||null!=o?o:i.toDouble(t.text.length)*A)-T,R=F.TheoRect.fromXYWH(0,A*(l.capRatio-l.ascentRatio),v,A*(l.ascentRatio+l.descentRatio));return new M.PGMText(n,new m.PGMNodeMetadata(t.formaID,"text"),a,R,t.text,g.PGMTextStyle.createCacheable(d.PGMFont.fromDescriptor(l),y,h,T,G),P.PGMRenderRuns.init_378c(t.renderRuns))}},props:{makePGMRef:function(e,t,n,o){var a;return(a=i.as(e,T.TextForma))?l.FormaToPGMUtils.applyAnimations(t,a,new h.PGMReference(r.getPGMNodeForTextForma(t,a,a.formaID,null),new f.PGMCompositingParams(a.placement,a.style.opacity))):(u.LegacyCoreAssert.fail("TextFormaToPGMMapper: not a text forma",void 0,"TextFormaToPGMMapper.makePGMRef","TextFormaToPGMMapper.swift",52),null)}}}),r)},Bcdx:function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("5ex8"),l=n("Bqrn"),u=n("dX/e"),c=n("pR+7"),p=n("3HaQ"),f=n("8Quq"),d=n("zW/s"),m=n("s3ad");a.FormaToPGMMapperFactory=(r=function(){},o={},i.defineClass({name:"FormaToPGMMapperFactory",ctor:r,statics:{instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},FORMA_KIND_TO_FN:{get:function(){return void 0===o.FORMA_KIND_TO_FN&&(o.FORMA_KIND_TO_FN={Root:function(e){return c.RootFormaToPGMMapper.createMapper(e)},Frame:function(e){return s.FrameFormaToPGMMapper.createMapper(e)},Text:function(e){return f.TextFormaToPGMMapper.createMapper(e)},Shape:function(e){return p.ShapeFormaToPGMMapper.createMapper(e)},Image:function(e){return u.ImageFormaToPGMMapper.createMapper(e)},Video:function(e){return m.VideoFormaToPGMMapper.createMapper(e)},Vector:function(e){return d.VectorFormaToPGMMapper.createMapper(e)},group:function(e){return l.GroupFormaToPGMMapper.createMapper(e)},"smart-group":function(e){return l.GroupFormaToPGMMapper.createMapper(e)}}),o.FORMA_KIND_TO_FN}}},props:{getMapper:function(e){return i.opt(r.FORMA_KIND_TO_FN[e.kind],(function(t){return t(e)}))}}}),r)},BgH2:function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("iCxV"),l=n("fNpk"),u=n("oKlP"),c=n("sIWg");a.TextPathSegment=(r=function(e,t,n,r){this._cachedTolerance=0,this._p0=e,this._p1=t,this._p2=n,this._p3=r},i.defineClass({name:"TextPathSegment",ctor:r,superName:"CoreObject",statics:{decodeFromJson:function(e){var t;if(t=e){var n=r.decodePoint(t[r.PROPERTY_P0]),o=r.decodePoint(t[r.PROPERTY_P1]),a=r.decodePoint(t[r.PROPERTY_P2]),i=r.decodePoint(t[r.PROPERTY_P3]);if(null!=n&&null!=o&&null!=a&&null!=i)return new r(n,o,a,i)}return null},encodePoint:function(e){return[e.x,e.y]},decodePoint:function(e){return u.TheoPoint.decodeJson(i.as(e,"AnyObject"))},PROPERTY_P0:"p0",PROPERTY_P1:"p1",PROPERTY_P2:"p2",PROPERTY_P3:"p3"},props:{p0:{get:function(){return this._p0}},p1:{get:function(){return this._p1}},p2:{get:function(){return this._p2}},p3:{get:function(){return this._p3}},clone:function(){return new r(this.p0,this.p1,this.p2,this.p3)},pointAt:function(e){if(!this.checkT(e))return u.TheoPoint.INVALID;var t=1-e,n=t*t*t*this.p0.x+3*e*t*t*this.p1.x+3*e*e*t*this.p2.x+e*e*e*this.p3.x,r=t*t*t*this.p0.y+3*e*t*t*this.p1.y+3*e*e*t*this.p2.y+e*e*e*this.p3.y;return new u.TheoPoint(n,r)},tangentUnitVectorAt:function(e){if(!this.checkT(e))return u.TheoPoint.INVALID;var t=e;t<.01?t=.01:t>.99&&(t=.99);var n=i.clone(this.calculateMidpoints(t)),r=u._minus_TheoPoint_TheoPoint(n[4],n[3]);return r.divide(r.length())},getBounds:function(){var e=this.getBoundsOneDim(this.p0.x,this.p1.x,this.p2.x,this.p3.x,(function(e){return e.x})),t=e.min,n=e.max,r=this.getBoundsOneDim(this.p0.y,this.p1.y,this.p2.y,this.p3.y,(function(e){return e.y})),o=r.min,a=r.max,i=new c.TheoRect(t,o,n,a),s=c.TheoRect.boundsOfPoints([this.p0,this.p1,this.p2,this.p3]);return s.equal(i)||s.contains(i)||l.LegacyCoreAssert.fail("Text path segment bounds incorrect",void 0,"TextPathSegment.getBounds","TextPath.swift",99),i},getBoundsOneDim:function(e,t,n,r,o){var a,i,s=3*r-9*n+9*t-3*e,l=6*e-12*t+6*n,u=3*(-e+t);if(Math.abs(s)<1e-6)i=a=-u/l;else{var c=Math.sqrt(l*l-4*s*u);a=(-l+c)/(2*s),i=(-l-c)/(2*s)}var p=this.checkT(a)?o(this.pointAt(a)):e,f=this.checkT(i)?o(this.pointAt(i)):r;return{min:Math.min(p,f,e,r),max:Math.max(p,f,e,r)}},multiply:function(e){return new r(this._p0.multiplyPoint(e),this._p1.multiplyPoint(e),this._p2.multiplyPoint(e),this._p3.multiplyPoint(e))},offset:function(e){return new r(u._plus_TheoPoint_TheoPoint(this._p0,e),u._plus_TheoPoint_TheoPoint(this._p1,e),u._plus_TheoPoint_TheoPoint(this._p2,e),u._plus_TheoPoint_TheoPoint(this._p3,e))},truncate:function(e){var t=i.clone(this.calculateMidpoints(e)),n=t[3].interpolate(t[4],e);return{prefix:new r(this.p0,t[0],t[3],n),suffix:new r(n,t[4],t[2],this._p3)}},getLength:function(e){if(null!=this._cachedLen&&this._cachedTolerance<=e)return this._cachedLen;for(var t=0,n=0,r=e,o=this.clone();!(o.getPolylineLength()-(t=o.getChordLength())<=e);){r/=2;var a=o.truncate(.5),i=a.prefix,s=a.suffix;n+=i.getLength(r),o=s}return this._cachedLen=n+t,this._cachedTolerance=r,this._cachedLen},getCorrectedLength:function(e,t,n){var r=this.getLength(n),o=u._minus_TheoPoint_TheoPoint(this.p3,this.p2),a=Math.atan2(o.y,o.x);return o=u._minus_TheoPoint_TheoPoint(this.p1,this.p0),(a-=Math.atan2(o.y,o.x))<-Math.PI&&(a+=2*Math.PI),a>Math.PI&&(a-=2*Math.PI),r+(a*=a>0?e:t)},findTValueByCorrectedPrefixLength:function(e,t,n,r){for(var o=r/2,a=0,l=1,u=0,c=0;c<1e3;){u=(a+l)/2;var p=this.truncate(u).prefix.getCorrectedLength(e,t,o);if(Math.abs(n-p)<=o)return u;n<p?l=u:a=u,c+=1}return i.opt(s.Host.logging,(function(e){return e.warning("findTValueByCorrectedPrefixLength did not converge")})),u},encodeJson:function(){var e={};return e[r.PROPERTY_P0]=r.encodePoint(this.p0),e[r.PROPERTY_P1]=r.encodePoint(this.p1),e[r.PROPERTY_P2]=r.encodePoint(this.p2),e[r.PROPERTY_P3]=r.encodePoint(this.p3),e},isEqual:function(e){return this.isEqualWithAccuracy(e,1e-6)},isEqualWithAccuracy:function(e,t){var n;return!!(n=i.as(e,r))&&this.p0.equalWithAccuracy(n.p0,t)&&this.p1.equalWithAccuracy(n.p1,t)&&this.p2.equalWithAccuracy(n.p2,t)&&this.p3.equalWithAccuracy(n.p3,t)},getPolylineLength:function(){return this.p0.distanceTo(this.p1)+this.p1.distanceTo(this.p2)+this.p2.distanceTo(this.p3)},getChordLength:function(){return this.p0.distanceTo(this.p3)},calculateMidpoints:function(e){var t=this.p0.interpolate(this.p1,e),n=this.p1.interpolate(this.p2,e),r=this.p2.interpolate(this.p3,e),o=t.interpolate(n,e),a=n.interpolate(r,e);return[t,n,r,o,a]},checkT:function(e){return e>=0&&e<=1}}}),r),a.TextPath=(o=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=1),this._segments=i.clone(e),this._flex=t},i.defineClass({name:"TextPath",ctor:o,superName:"CoreObject",statics:{decodeFromJson:function(e){var t,n;if(n=e){var r,s=(t=i.as(n[o.PROPERTY_FLEX],"Double"))||null!=t?t:1,l=[];if(r=i.as(n[o.PROPERTY_SEGMENTS],["Array","Any"]))for(var u=i.iter(r);!u.done;u.next()){var c=u.value,p=a.TextPathSegment.decodeFromJson(i.as(c,["Dictionary","String","Any"]));if(null==p)return null;l.push(p)}return new o(l,s)}return null},areSegmentsContiguous:function(e){for(var t=i.iter(i.toSequence(e));!t.done;t.next()){var n=t.value,r=n.offset,o=n.element;if(r<e.length-1){var a=e[r+1];if(!o.p3.equal(a.p0))return!1}}return!0},PROPERTY_FLEX:"flex",PROPERTY_SEGMENTS:"segment"},props:{segments:{get:function(){return this._segments}},numSegments:{get:function(){return this._segments.length}},flex:{get:function(){return this._flex}},isClosed:function(){return!(this.numSegments<2)&&o.areSegmentsContiguous(this._segments)&&i.first(this._segments).p0.equal(i.last(this._segments).p3)},clone:function(){var e=this._segments.map((function(e){return e.clone()}),this);return new o(e,this._flex)},pointAt:function(e){var t;return null!=(t=this.getSegementIndex(e))?this._segments[t].pointAt(e-i.toDouble(t)):u.TheoPoint.INVALID},tangentUnitVectorAt:function(e){var t;return null!=(t=this.getSegementIndex(e))?this._segments[t].tangentUnitVectorAt(e-i.toDouble(t)):u.TheoPoint.INVALID},getBounds:function(){for(var e,t=i.iter(this._segments);!t.done;t.next()){var n=t.value.getBounds();e=null==e?n:e.unionWith(n)}return e||c.TheoRect.Zero},multiply:function(e){var t=this._segments.map((function(t){return t.multiply(new u.TheoPoint(e.width,e.height))}),this);return new o(t,this._flex)},offset:function(e){var t=this._segments.map((function(t){return t.offset(e)}),this);return new o(t,this._flex)},truncate:function(e){if(e>=0&&e<i.toDouble(this.numSegments)){var t=i.toInt(Math.floor(e)),n=i.clone(this._segments),r=n.splice(0,t),a=e-i.toDouble(t);if(a>0){var s=n[0].truncate(a),l=s.prefix,u=s.suffix,c=l;n[0]=u,r.push(c)}return{prefix:new o(r),suffix:new o(n,this._flex)}}return{prefix:new o,suffix:this.clone()}},getLength:function(e){if(0==this.numSegments)return 0;for(var t=e/i.toDouble(this.numSegments),n=0,r=i.iter(this._segments);!r.done;r.next())n+=r.value.getLength(t);return n},getCorrectedLength:function(e,t,n){for(var r=n/i.toDouble(this.numSegments),o=0,a=i.iter(this._segments);!a.done;a.next())o+=a.value.getCorrectedLength(e,t,r);return o},findTValueByCorrectedPrefixLength:function(e,t,n,r){for(var o=r/i.toDouble(this.numSegments),a=n,s=0;s<this.numSegments&&a>0;){var l=this._segments[s].getCorrectedLength(e,t,o);if(a<=l-o){var u=this._segments[s].findTValueByCorrectedPrefixLength(e,t,a,o);return i.toDouble(s)+u}a-=l,s+=1}return i.toDouble(s)},encodeJson:function(){var e={};e[o.PROPERTY_FLEX]=this.flex;for(var t=[],n=i.iter(this.segments);!n.done;n.next()){var r=n.value;t.push(r.encodeJson())}return e[o.PROPERTY_SEGMENTS]=t,e},isEqual:function(e){return this.isEqualWithAccuracy(e,1e-6)},isEqualWithAccuracy:function(e,t){var n;if(n=i.as(e,o)){if(this.numSegments!=n.numSegments||Math.abs(this.flex-n.flex)>t)return!1;for(var r=i.iter(i.toSequence(this.segments));!r.done;r.next()){var a=r.value,s=a.offset;if(!a.element.isEqualWithAccuracy(n.segments[s],t))return!1}return!0}return!1},getSegementIndex:function(e){return e<0||e>i.toDouble(this.numSegments)?null:Math.min(i.toInt(Math.floor(e)),this.numSegments-1)}}}),o)},Bqrn:function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("7Pku"),l=n("w/+j"),u=n("9Lk3"),c=n("pnSN"),p=n("RBTN"),f=n("fNpk"),d=n("Ird5"),m=n("jfma"),h=n("yjxF"),P=n("Aj79"),M=n("g6aL"),g=n("8t9B"),T=n("QgdZ");i.gvar(a,"_groupSingleton",(function(){return new a.GroupFormaToPGMMapper})),i.gvar(a,"_typeLockupSingleton",(function(){return new T.TypeLockupToPGMMapper})),i.gvar(a,"_gridSingleton",(function(){return new p.GridToPGMMapper})),a.GroupFormaToPGMMapper=(r=function e(){s.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"GroupFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=c.GroupForma.KIND),o.FORMA_KIND}},createMapper:function(e){var t;if(t=e.controller){if(t instanceof g.TypeLockupController)return a._typeLockupSingleton;if(t instanceof u.GridController)return a._gridSingleton}return a._groupSingleton}},props:{makePGMRef:function(e,t,n,r){var o,a;if((o=i.as(e,c.GroupForma))&&(a=n.childReferences(o))){var u=s.FormaToPGMMapper.mapBlendMode(e);return l.FormaToPGMUtils.applyAnimations(t,e,new P.PGMReference(new M.PGMSimpleGroup(o.formaID,new h.PGMNodeMetadata(o.formaID,"group"),d.PGMAnimationList.EMPTY,a),new m.PGMCompositingParams(o.placement,o.style.opacity,u)))}return f.LegacyCoreAssert.fail("group forma child reference generation failed",void 0,"GroupFormaToPGMMapper.makePGMRef","GroupFormaToPGMMapper.swift",66),null}}}),r)},ML5t:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("hndY"),s=n("fNpk");o.FormaPagePGMSource=(r=function(e){this.caches_={},this.page=e},a.defineClass({name:"FormaPagePGMSource",ctor:r,superName:"PGMSource",props:{getCache:function(e){var t,n,r=e.asString,o=e.backgroundOpacityOverride<1;if(t=this.caches_[r])return t;if(n=this.page){var a=new i.FormaPGMCache(n,e,o);return o||(this.caches_[r]=a),a}return s.LegacyCoreAssert.fail("FormaPagePGMSource.getGraph: page is out of scope",void 0,"FormaPagePGMSource.getCache","FormaPagePGMSource.swift",46),null},getGraph:function(e){var t;if(t=this.getCache(e)){var n=t.getGraph();return t.adhoc&&t.destroy(),n}return null},getGraphForForma:function(e,t){var n;if(n=this.getCache(t)){var r=n.getGraphForForma(e);return n.adhoc&&n.destroy(),r}return null}}}),r)},QgZx:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("SpAV"),s=n("gXiO"),l=n("iCxV"),u=n("fNpk"),c=n("9YN4");o.FontOrigin=a.defineEnum("FontOrigin",{UNKNOWN_ORIGIN:0,USER_CHOSEN:1,STARTUP:2,ACTIVATE_MISSING:3}),o.describeFontOrigin=function(e){switch(e){case 0:return"unknown";case 1:return"user-chosen";case 2:return"startup";case 3:return"activate-missing"}},o.FontSource=a.defineEnum("FontSource",{UNKNOWN_SOURCE:0,WEB_FONT:1,EMBEDDED:2,SPARK_PROVIDED:3,USER_UPLOAD:4,TYPEKIT_FREE:5,TYPEKIT_PREMIUM:6}),o.describeFontSource=function(e){switch(e){case 0:return"unknown";case 1:return"web";case 2:return"embedded";case 3:return"spark";case 4:return"user-upload";case 5:return"typekit-free";case 6:return"typekit-premium"}},o.FontAvailability=a.defineEnum("FontAvailability",{UNKNOWN:0,LOADABLE:1,LOADED:2,NOT_LOADABLE:3}),o.FontEmbeddability=a.defineEnum("FontEmbeddability",{INSTALLABLE:0,RESTRICTED:2,PREVIEW_AND_PRINT:4,EDITABLE:8,NO_SUBSETTING:256,BITMAP_ONLY:512}),a.gvar(o,"fontDescriptorStrings",(function(){return{familyName:function(e,t){e.familyName=t},displaySample:function(e,t){e.displaySample=t},label:function(e,t){e.label=t},postScriptName:function(e,t){e.postScriptName=t},macPostScriptName:function(e,t){e.macPostScriptName=t},filename:function(e,t){e.filename=t},family:function(e,t){e.family=t},original_family:function(e,t){e.original_family=t},faceName:function(e,t){e.faceName=t},category:function(e,t){e.category=t},subfamilyName:function(e,t){e.subfamilyName=t},preferredFamilyName:function(e,t){e.preferredFamilyName=t},preferredSubfamilyName:function(e,t){e.preferredSubfamilyName=t},cssName:function(e,t){e.cssName=t},tkSyncId:function(e,t){e.tkSyncId=t},tkWebId:function(e,t){e.tkWebId=t},style:function(e,t){e.style=t}}})),a.gvar(o,"fontDescriptorDoubles",(function(){return{capAccentRatio:function(e,t){e.capAccentRatio=t},capRatio:function(e,t){e.capRatio=t},meanAccentRatio:function(e,t){e.meanAccentRatio=t},meanRatio:function(e,t){e.meanRatio=t},ascentRatio:function(e,t){e.ascentRatio=t},baselineOffsetRatio:function(e,t){e.baselineOffsetRatio=t},tailRatio:function(e,t){e.tailRatio=t},descentRatio:function(e,t){e.descentRatio=t},italicAngle:function(e,t){e.italicAngle=t},popularity:function(e,t){e.popularity=t}}})),a.gvar(o,"fontDescriptorInts",(function(){return{weight:function(e,t){e.weight=t},source:function(e,t){var n;e.source=(n=o.FontSource.toCaseValue(t))||null!=n?n:o.FontSource.UNKNOWN_SOURCE},formality:function(e,t){e.formality=t},blackness:function(e,t){e.blackness=t},drama:function(e,t){e.drama=t},width:function(e,t){e.width=t},usWidthClass:function(e,t){e.usWidthClass=t},usWeightClass:function(e,t){e.usWeightClass=t},fsType:function(e,t){e.fsType=t}}})),a.gvar(o,"fontDescriptorBools",(function(){return{allCapsAllowed:function(e,t){e.allCapsAllowed=t},displayAllowed:function(e,t){e.displayAllowed=t},bodyAllowed:function(e,t){e.bodyAllowed=t},serif:function(e,t){e.serif=t},slab:function(e,t){e.slab=t},handdrawn:function(e,t){e.handdrawn=t},calligraphic:function(e,t){e.calligraphic=t},decorative:function(e,t){e.decorative=t},square:function(e,t){e.square=t},geometric:function(e,t){e.geometric=t},italic:function(e,t){e.italic=t}}})),o.FontDescriptor=(r=function(e){this.displayFamilyName_="",this.displayFaceName_="",this._source=o.FontSource.UNKNOWN_SOURCE,this.availability=o.FontAvailability.LOADABLE,this._spaceWidthRatio=0,this.capAccentRatio=0,this.capRatio=0,this.meanAccentRatio=0,this.meanRatio=0,this.ascentRatio=0,this.baselineOffsetRatio=0,this.tailRatio=0,this.descentRatio=0,this.italicAngle=0,this.displaySample="",this.upperCaseCharsDict={},this.lowerCaseCharsDict={},this.capAccentCharsDict={},this.capCharsDict={},this.ascentCharsDict={},this.meanAccentCharsDict={},this.meanCharsDict={},this.baseCharsDict={},this.tailCharsDict={},this.descentCharsDict={},this.characterFeatures={},this.label="",this.postScriptName="",this.macPostScriptName="",this.filename="",this.family="",this.original_family="",this.category="",this.familyName="",this.subfamilyName="",this.preferredFamilyName="",this.preferredSubfamilyName="",this.faceName="",this.cssName="",this.tkSyncId="",this.tkWebId="",this.style="",this.popularity=0,this.weight=0,this.formality=0,this.blackness=0,this.drama=0,this.width=0,this.usWidthClass=0,this.usWeightClass=0,this.fsType=0,this.allCapsAllowed=!1,this.displayAllowed=!1,this.bodyAllowed=!1,this.serif=!1,this.slab=!1,this.handdrawn=!1,this.calligraphic=!1,this.decorative=!1,this.square=!1,this.geometric=!1,this.italic=!1,s.CoreObject.call(this);for(var t=a.iter(o.fontDescriptorStrings);!t.done;t.next()){var n=t.key,r=t.value;null!=(m=e[n])&&r(this,m)}for(var l=a.iter(o.fontDescriptorDoubles);!l.done;l.next())n=l.key,r=l.value,null!=(m=e[n])&&r(this,m);for(var u=a.iter(o.fontDescriptorInts);!u.done;u.next())if(n=u.key,r=u.value,null!=(m=e[n]))if("weight"==n&&null!=a.as(m,"String")){var c=m,p=a.isEmpty(c)?0:a.toInt(c);r(this,p>0?p:400)}else if("source"==n){var f=m;this.source=null!=o.FontSource.toCaseValue(f)?o.FontSource.toCaseValue(f):o.FontSource.UNKNOWN_SOURCE}else r(this,m);for(var d=a.iter(o.fontDescriptorBools);!d.done;d.next()){var m;n=d.key,r=d.value,null!=(m=e[n])&&r(this,m)}for(var h=e.uppercaseChars,P=e.lowercaseChars,M=e.capAccentChars,g=e.capChars,T=e.ascentChars,F=e.meanAccentChars,G=e.meanChars,A=e.baseChars,y=e.tailChars,v=e.descentChars,R=a.clone(a.as(e.characterFeatures,["Dictionary","String","Double"])),_=a.iter(a.chars(h));!_.done;_.next()){var C=_.value;this.upperCaseCharsDict[C]=!0}for(var w=a.iter(a.chars(P));!w.done;w.next()){var S=w.value;this.lowerCaseCharsDict[S]=!0}for(var E=a.iter(a.chars(M));!E.done;E.next()){var N=E.value;this.capAccentCharsDict[N]=!0}for(var D=a.iter(a.chars(g));!D.done;D.next()){var b=D.value;this.capCharsDict[b]=!0}for(var x=a.iter(a.chars(T));!x.done;x.next()){var O=x.value;this.ascentCharsDict[O]=!0}for(var k=a.iter(a.chars(F));!k.done;k.next()){var I=k.value;this.meanAccentCharsDict[I]=!0}for(var L=a.iter(a.chars(G));!L.done;L.next()){var Y=L.value;this.meanCharsDict[Y]=!0}for(var B=a.iter(a.chars(A));!B.done;B.next()){var U=B.value;this.baseCharsDict[U]=!0}for(var K=a.iter(a.chars(y));!K.done;K.next()){var W=K.value;this.tailCharsDict[W]=!0}for(var j=a.iter(a.chars(v));!j.done;j.next()){var V=j.value;this.descentCharsDict[V]=!0}if(null!=R)for(var H=a.iter(a.keys(R));!H.done;H.next()){var q=H.value;this.characterFeatures[q]=R[q]}0==this.meanRatio&&(i.CoreAssertDebugOnly.fail("FontDescriptor::init - meanRatio is 0 for font "+this.postScriptName+" with variationId "+a.toString(e.variationId),void 0,"FontDescriptor.init","FontDescriptor.swift",432),this.meanRatio=.5,this.capRatio<=0&&(this.capRatio=.75,this.ascentRatio=.75,this.meanAccentRatio=.75,this.capAccentRatio=.75,this.tailRatio=0,this.baselineOffsetRatio=0))},a.defineClass({name:"FontDescriptor",ctor:r,superName:"CoreObject",statics:{PROPERTY_POSTSCRIPT_NAME:"postscript-name",PROPERTY_SOURCE:"source",decodeJson:function(e,t){var n=a.as(e,["Dictionary","String","Any"]);if(null==n)return u.LegacyCoreAssert.fail("FontDescriptorAttribute: Data is missing or not a dictionary",void 0,"FontDescriptor.decodeJson","FontDescriptor.swift",472),null;var i=n[r.PROPERTY_POSTSCRIPT_NAME],s=l.Host.fontProvider.descriptorForPostScriptName(i,a.as(t,c.TheoDocument));return s.postScriptName==i&&s.availability==o.FontAvailability.LOADED||t.recordMissingFont(i),s}},props:{displayFamilyName:{get:function(){return""==this.displayFamilyName_&&(this.displayFamilyName_=this.preferredFamilyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.familyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.family),""==this.displayFamilyName_&&(this.displayFamilyName_=this.postScriptName),this.displayFamilyName_},set:function(e){this.displayFamilyName_=e}},displayFaceName:{get:function(){return""==this.displayFaceName_&&(this.displayFaceName_=this.preferredSubfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.subfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.faceName),""==this.displayFaceName_&&(this.displayFaceName_=this.label),""==this.displayFaceName_&&(this.displayFaceName_=this.postScriptName),this.displayFaceName_},set:function(e){this.displayFaceName_=e}},touaName:{get:function(){return this.displayFamilyName+" "+this.displayFaceName}},source:{get:function(){return this._source},set:function(e){this._source==o.FontSource.EMBEDDED?e!=o.FontSource.EMBEDDED&&a.info("Font "+this.postScriptName+" is already marked as EMBEDDED. Ignoring new font source"):this._source=e}},privateSetFontSource:function(e){this._source=e},spaceWidthRatio:{get:function(){if(0==this._spaceWidthRatio){var e=l.Host.textModelUtils.measureBoundsForLayout(" ",this,100,0);this._spaceWidthRatio=e.width/100}return this._spaceWidthRatio}},resolveFamily:function(){return this.family!=this.cssName||""==this.original_family?this.family:this.original_family},isEqual:function(e){var t=a.as(e,r);return null!=t&&this.postScriptName==t.postScriptName},encodeJson:function(){var e={};return e[r.PROPERTY_POSTSCRIPT_NAME]=this.postScriptName,e[r.PROPERTY_SOURCE]=o.describeFontSource(this.source),e}}}),r),o._equality_FontDescriptor_FontDescriptor=function(e,t){return e.isEqual(t)}},QgdZ:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("7Pku"),s=n("w/+j"),l=n("pnSN"),u=n("Bqrn"),c=n("fNpk"),p=n("c+uM"),f=n("tGKA"),d=n("T8w7"),m=n("Ird5"),h=n("jfma"),P=n("dmHI"),M=n("vTQu"),g=n("yjxF"),T=n("Aj79"),F=n("g6aL"),G=n("Zifs"),A=n("djAF"),y=n("3HaQ"),v=n("enh0"),R=n("8Quq");o.TypeLockupToPGMMapper=(r=function(){u.GroupFormaToPGMMapper.call(this)},a.defineClass({name:"TypeLockupToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",statics:{usesPageAnchoredStyle:function(e){var t;if(t=a.as(e.style,p.LockupStyle)){var n=t.backing;return n==p.LockupBacking.BannerHorizontal||n==p.LockupBacking.BannerVertical||n==p.LockupBacking.Banner||n==p.LockupBacking.Knockout}return!1},getPGMForTypeLockup:function(e,t,n){var r=0,o=0,i=function t(i){var u,f,d,P=null,M=null,_=null,C=null;if(u=a.as(i,l.GroupForma)){var w=null,S=null,E=null,N=null;u.childrenAsArray.forEach((function(e){var n=t(e),r=n.shapeRef,o=n.bottomTextRef,a=n.textRef,i=n.knockoutRef;null!=r&&(null==w&&(w=[]),w.push(r)),null!=o&&(null==S&&(S=[]),S.push(o)),null!=a&&(null==E&&(E=[]),E.push(a)),null!=i&&(null==N&&(N=[]),N.push(i))})),null!=w&&(P=s.FormaToPGMUtils.applyAnimations(e,u,new T.PGMReference(new F.PGMSimpleGroup(u.formaID+"-shapes",new g.PGMNodeMetadata(u.formaID,"group"),m.PGMAnimationList.EMPTY,w),h.PGMCompositingParams.smartInit(u.placement)))),null!=S&&(M=s.FormaToPGMUtils.applyAnimations(e,u,new T.PGMReference(new F.PGMSimpleGroup(u.formaID+"-bottomTexts",new g.PGMNodeMetadata(u.formaID,"group"),m.PGMAnimationList.EMPTY,S),h.PGMCompositingParams.smartInit(u.placement)))),null!=E&&(_=s.FormaToPGMUtils.applyAnimations(e,u,new T.PGMReference(new F.PGMSimpleGroup(u.formaID+"-texts",new g.PGMNodeMetadata(u.formaID,"group"),m.PGMAnimationList.EMPTY,E),h.PGMCompositingParams.smartInit(u.placement,u.style.opacity)))),null!=N&&(C=s.FormaToPGMUtils.applyAnimations(e,u,new T.PGMReference(new F.PGMSimpleGroup(u.formaID+"-knockouts",new g.PGMNodeMetadata(u.formaID,"group"),m.PGMAnimationList.EMPTY,N),h.PGMCompositingParams.smartInit(u.placement))))}else if(f=a.as(i,v.TextForma)){r+=1;var D=f.textLook,b=f.fontStrokeWidth,x=new h.PGMCompositingParams(f.placement,f.style.opacity);switch(c.LegacyCoreAssert.isTrue(!p.LockupStyle.isKnockoutLook(D)||D==p.LockupTextLook.KnockoutAndFill||D==p.LockupTextLook.KnockoutAndShadow||a.eq(G._equality_SolidColor_SolidColor,f.fontColor,G.SolidColor.BLACK),"did not set the fill color to black for knockout looks that don't fill",void 0,"TypeLockupToPGMMapper.getPGMForTypeLockup","TypeLockupToPGMMapper.swift",192),D){case 0:var O=R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+r);if(_=new T.PGMReference(O,x),e.asDynamic){var k=s.FormaToPGMUtils.createAnimations(_,f);_=_.withAnimations(k)}break;case 1:C=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+r),x));break;case 2:case 6:C=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-ko#"+r,G.SolidColor.BLACK),x)),_=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-fg#"+r),x));break;case 9:b>0?M=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-bg#"+r),x)):C=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt-ko#"+r),x));break;default:_=s.FormaToPGMUtils.applyAnimations(e,f,new T.PGMReference(R.TextFormaToPGMMapper.getPGMNodeForTextForma(e,f,n+"-txt#"+r),x))}}else(d=a.as(i,A.ShapeForma))&&(o+=1,P=s.FormaToPGMUtils.applyAnimations(e,d,y.ShapeFormaToPGMMapper.makePGMRefForShape(e,d,n+"-shp#"+o)));return{shapeRef:P,bottomTextRef:M,textRef:_,knockoutRef:C}}(t),u=i.shapeRef,_=i.bottomTextRef,C=i.textRef,w=i.knockoutRef,S=a.clone(a.opt(a.as(a.opt(u,(function(e){return e.child})),F.PGMSimpleGroup),(function(e){return e.children}))),E=a.clone(a.opt(a.as(a.opt(_,(function(e){return e.child})),F.PGMSimpleGroup),(function(e){return e.children}))),N=a.clone(a.opt(a.as(a.opt(C,(function(e){return e.child})),F.PGMSimpleGroup),(function(e){return e.children}))),D=a.clone(a.opt(a.as(a.opt(w,(function(e){return e.child})),F.PGMSimpleGroup),(function(e){return e.children})));if(null!=D&&null!=S){var b=new F.PGMSimpleGroup(n+"-mask",new g.PGMNodeMetadata(t.formaID,"mask"),m.PGMAnimationList.EMPTY,D),x=new F.PGMSimpleGroup(n+"-art",new g.PGMNodeMetadata(t.formaID,"art"),m.PGMAnimationList.EMPTY,S);if(null!=N||null!=E){var O=[];null!=E&&O.push(new T.PGMReference(new F.PGMSimpleGroup(n+"-bg",new g.PGMNodeMetadata(t.formaID,"text-on-bottom-of-knockout"),m.PGMAnimationList.EMPTY,E))),O.push(new T.PGMReference(new P.PGMFilter(n+"-ko",new g.PGMNodeMetadata(t.formaID,"shape-knocked-out-by-text"),m.PGMAnimationList.EMPTY,[new T.PGMReference(x),new T.PGMReference(b)],new M.PGMMaskFilterSpec(G.SolidColor.WHITE))));var k=[],I=h.PGMCompositingParams.smartInit(f.Matrix2D.Identity,d.OpacityFacade.getShapeOpacityForForma(t));return k.push(new T.PGMReference(new F.PGMSimpleGroup(n+"-ssg",new g.PGMNodeMetadata(t.formaID,"shape-shadow-group-on-knockout"),m.PGMAnimationList.EMPTY,O),I)),null!=N&&k.push(new T.PGMReference(new F.PGMSimpleGroup(n+"-fg",new g.PGMNodeMetadata(t.formaID,"text-on-top-of-knockout"),m.PGMAnimationList.EMPTY,N))),new F.PGMSimpleGroup(n,new g.PGMNodeMetadata(t.formaID,"lockup-sandwich"),m.PGMAnimationList.EMPTY,k)}var L=[];return L.push(new T.PGMReference(new F.PGMSimpleGroup(n+"-sg",new g.PGMNodeMetadata(t.formaID,"simple-shape-group"),m.PGMAnimationList.EMPTY,S),h.PGMCompositingParams.smartInit(f.Matrix2D.Identity,d.OpacityFacade.getShapeOpacityForForma(t)))),x=new F.PGMSimpleGroup(n+"-art",new g.PGMNodeMetadata(t.formaID,"art"),m.PGMAnimationList.EMPTY,L),new P.PGMFilter(n,new g.PGMNodeMetadata(t.formaID,"simple-text-knockout"),m.PGMAnimationList.EMPTY,[new T.PGMReference(x),new T.PGMReference(b)],new M.PGMMaskFilterSpec(G.SolidColor.WHITE))}var Y=[];return null!=S&&Y.push(new T.PGMReference(new F.PGMSimpleGroup(n+"-sg",new g.PGMNodeMetadata(t.formaID,"simple-shape-group"),m.PGMAnimationList.EMPTY,S),h.PGMCompositingParams.smartInit(f.Matrix2D.Identity,d.OpacityFacade.getShapeOpacityForForma(t)))),null!=N&&(Y=Y.concat(N)),new F.PGMSimpleGroup(n,new g.PGMNodeMetadata(t.formaID,"simple-lockup"),m.PGMAnimationList.EMPTY,Y)}},props:{makePGMRef:function(e,t,n,o){var a=i.FormaToPGMMapper.mapBlendMode(e);return s.FormaToPGMUtils.applyAnimations(t,e,new T.PGMReference(r.getPGMForTypeLockup(t,e,e.formaID),new h.PGMCompositingParams(e.placement,e.style.opacity,a)))},canDoSimpleTransformUpdate:function(e){return!r.usesPageAnchoredStyle(e.forma)}}}),r)},RBTN:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("Bqrn");o.GridToPGMMapper=(r=function(){i.GroupFormaToPGMMapper.call(this)},a.defineClass({name:"GridToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",props:{makePGMRef:function(e,t,n,r){return i.GroupFormaToPGMMapper.prototype.makePGMRef.call(this,e,t,n,r)}}}),r)},VJ9E:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("QgZx"),s=n("iCxV"),l=n("3lr5"),u=n("fNpk");o.TheoFont=(r=function(){this.roleOrder=["headline-font","body-font","body-font-italic","body-font-bold","body-font-bold-italic","secondary-font"]},a.defineClass({name:"TheoFont",ctor:r,superName:"CoreObject",statics:{SPARK_FONT_ROLE_HEADLINE:"headline-font",SPARK_FONT_ROLE_BODY:"body-font",SPARK_FONT_ROLE_BODY_ITALIC:"body-font-italic",SPARK_FONT_ROLE_BODY_BOLD:"body-font-bold",SPARK_FONT_ROLE_BODY_BOLD_ITALIC:"body-font-bold-italic",SPARK_FONT_ROLE_SECONDARY:"secondary-font",SPARK_FONT_ROLE_CUSTOM:"custom",decodeJson:function(e,t){if(null==e)return null;var n=a.as(e,["Dictionary","String","Any"]);if(null==n)return u.LegacyCoreAssert.fail("TheoFont.decodeJson: object passed isn't a dictionary",void 0,"TheoFont.decodeJson","TheoFont.swift",106),null;var o,s=a.as(n[i.FontDescriptor.PROPERTY_POSTSCRIPT_NAME],"String");if(o=i.FontDescriptor.decodeJson(e,t)){if(s==o.postScriptName){var l=a.as(n.sparkElementID,"String"),c=a.clone(a.as(n.sparkRoles,["Array","String"]));return r.init_9e5c(o,l,c)}return r.init_9e5c(o)}return null}},props:{init_9e5c:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this.fontData=e,this.sparkElementID=t,this.sparkRoles=a.clone(n)},init_a314:function(e){this.sparkElementID=e.id,this.sparkRoles=a.clone(e.acRoles);var t,n,r=s.Host.fontProvider.getIncludedFonts(l.ANY_DOCUMENT);(t=e.descriptor)?null!=(n=r.indexOf(t))?this.fontData=r.fontAt(n):(a.opt(s.Host.logging,(function(e){return e.warning("Failed to find brandkit font "+t.postScriptName+" in list of available fonts, using 0th")})),this.fontData=r.fontAt(0)):"faux-font"==e.sourceType?(a.opt(s.Host.logging,(function(e){return e.warning("TheoFont: Failed to find synthesized brandkit font in list of available fonts, using 0th font")})),this.fontData=r.fontAt(0)):(a.opt(s.Host.logging,(function(e){return e.warning("TheoFont: Failed to find brandkit font in list of available fonts, using 0th font")})),this.fontData=r.fontAt(0))},isSparkFont:function(){return null!=this.sparkRoles||null!=this.sparkElementID},getSparkFontRole:function(){if(null==this.sparkRoles)return null;for(var e=a.iter(this.roleOrder);!e.done;e.next()){var t=e.value;if(this.sparkRoles.includes(t))return t}return null},hasSparkFontRole:function(e){return null!=this.sparkRoles&&this.sparkRoles.includes(e)},encodeJson:function(){var e=this.fontData.encodeJson();return null!=this.sparkElementID&&(e.sparkElementID=this.sparkElementID),null!=this.sparkRoles&&(e.sparkRoles=a.clone(this.sparkRoles)),e},isEqual:function(e){var t;return!!(t=a.as(e,r))&&t.fontData.isEqual(this.fontData)&&t.sparkElementID==this.sparkElementID&&t.getSparkFontRole()==this.getSparkFontRole()}}}),r),o._equality_TheoFont_TheoFont=function(e,t){return e.isEqual(t)}},a9ow:function(e,t,n){var r,o,a,i,s,l,u,c,p,f=t,d=n("oAGj"),m=n("qsM9"),h=n("SpAV"),P=n("dJuF"),M=n("QgZx"),g=n("iCxV"),T=n("fNpk"),F=n("Zifs");f.TextAttribute=(r=function(e){this.value_=e},d.defineClass({name:"TextAttribute",ctor:r,superName:"CoreObject",statics:{PROPERTY_VALUE:"value",PROPERTY_START:"start",PROPERTY_LENGTH:"length"},props:{isEqual:function(e){return h.CoreAssert.fail("unimplemented override of isEqual",void 0,"TextAttribute.isEqual","TextAttribute.swift",23),!1},hash:{get:function(){return h.CoreAssert.fail("unimplemented override of hash",void 0,"TextAttribute","TextAttribute.swift",28),0}},description:{get:function(){return T.LegacyCoreAssert.fail("missing override of description",void 0,"TextAttribute","TextAttribute.swift",33),"TextAttribute"}},clone:function(){return new r(this.value_)}}}),r),f.UTF16Attribute=(o=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"UTF16Attribute",ctor:o,superName:"TextAttribute",statics:{NAME:{get:function(){return"text"}},codec:{get:function(){var e,t="UTF16Attribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var a,i=P.DBProperty.deleted(e);return(a=d.as(n,o))&&(i=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:P.DBProperty.stringProperty(e.append(f.TextAttribute.PROPERTY_VALUE),a.value)},t)),i}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&null!=(r=d.opt(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(e){return e.stringValue})))?new o(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,o))&&t.value==this.value},hash:{get:function(){return d.hashValue(this.value)}},description:{get:function(){return this.value}},clone:function(){return new o(this.value)}}}),o),f.FontDescriptorAttribute=(a=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"FontDescriptorAttribute",ctor:a,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-name"}},codec:{get:function(){var e,t="FontDescriptorAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,i=P.DBProperty.deleted(e);return(o=d.as(n,a))&&(i=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:m.Codecs.fontDescriptorCodec.encode(e.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},t)),i}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&(r=d.as(m.Codecs.fontDescriptorCodec.decode(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),M.FontDescriptor))?new a(r):null}),t))}}},props:{postscriptName:{get:function(){return this.value.postScriptName}},value:{get:function(){var e;return(e=d.as(this.value_,M.FontDescriptor))||null!=e?e:g.Host.textModelUtils.defaultFont()}},isEqual:function(e){var t;return!!(t=d.as(e,a))&&(t.value===this.value||d.eq(M._equality_FontDescriptor_FontDescriptor,t.value,this.value))},hash:{get:function(){return this.value.hash}},description:{get:function(){return this.value.postScriptName}},clone:function(){return new a(this.value)}}}),a),f.FontSizeAttribute=(i=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"FontSizeAttribute",ctor:i,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-size"}},codec:{get:function(){var e,t="FontSizeAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,i))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:P.DBProperty.doubleProperty(e.append(f.TextAttribute.PROPERTY_VALUE),o.value)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&null!=(r=d.opt(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(e){return e.doubleValue})))?new i(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,i))&&t.value==this.value},hash:{get:function(){return d.hashValue(this.value)}},description:{get:function(){return this.value}},clone:function(){return new i(this.value)}}}),i),f.FontColorAttribute=(s=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"FontColorAttribute",ctor:s,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-color"}},codec:{get:function(){var e,t="FontColorAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,s))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:m.Codecs.solidColorCodec.encode(e.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&(r=d.as(m.Codecs.solidColorCodec.decode(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),F.SolidColor))?new s(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,s))&&d.eq(F._equality_SolidColor_SolidColor,t.value,this.value)},hash:{get:function(){return this.value.hash}},description:{get:function(){return this.value.asString}},clone:function(){return new s(this.value)}}}),s),f.FontStrokeColorAttribute=(l=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"FontStrokeColorAttribute",ctor:l,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokecolor"}},codec:{get:function(){var e,t="FontStrokeColorAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,l))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:m.Codecs.solidColorCodec.encode(e.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&(r=d.as(m.Codecs.solidColorCodec.decode(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),F.SolidColor))?new l(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,l))&&d.eq(F._equality_SolidColor_SolidColor,t.value,this.value)},hash:{get:function(){return this.value.hash}},description:{get:function(){return this.value.asString}},clone:function(){return new l(this.value)}}}),l),f.FontStrokeWidthAttribute=(u=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"FontStrokeWidthAttribute",ctor:u,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokewidth"}},codec:{get:function(){var e,t="FontStrokeWidthAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,u))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:P.DBProperty.doubleProperty(e.append(f.TextAttribute.PROPERTY_VALUE),o.value)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&null!=(r=d.opt(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(e){return e.doubleValue})))?new u(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,u))&&t.value==this.value},hash:{get:function(){return d.hashValue(this.value)}},description:{get:function(){return this.value}},clone:function(){return new u(this.value)}}}),u),f.TextLookAttribute=(c=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"TextLookAttribute",ctor:c,superName:"TextAttribute",statics:{NAME:{get:function(){return"text-look"}},codec:{get:function(){var e,t="TextLookAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,c))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_VALUE),o.value)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&null!=(r=d.opt(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(e){return e.intValue})))?new c(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,c))&&t.value==this.value},hash:{get:function(){return d.hashValue(this.value)}},description:{get:function(){return this.value}},clone:function(){return new c(this.value)}}}),c),f.TrackingAttribute=(p=function(e){f.TextAttribute.call(this,e)},d.defineClass({name:"TrackingAttribute",ctor:p,superName:"TextAttribute",statics:{NAME:{get:function(){return"tracking"}},codec:{get:function(){var e,t="TrackingAttribute";return P.DBPropertyCodec.typeCodec(t)||P.DBPropertyCodec.registerCodec(t,P.DBPropertyCodec.codec((function(e,n,r){var o,a=P.DBProperty.deleted(e);return(o=d.as(n,p))&&(a=P.DBProperty.dictEncoded(e,{start:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_START),0),length:P.DBProperty.intProperty(e.append(f.TextAttribute.PROPERTY_LENGTH),0),value:P.DBProperty.doubleProperty(e.append(f.TextAttribute.PROPERTY_VALUE),o.value)},t)),a}),(function(t,n){var r;return((e=d.opt(t,(function(e){return e.isDictionary})))||null!=e)&&e&&null!=(r=d.opt(t.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(e){return e.doubleValue})))?new p(r):null}),t))}}},props:{value:{get:function(){return this.value_}},isEqual:function(e){var t;return!!(t=d.as(e,p))&&t.value==this.value},hash:{get:function(){return d.hashValue(this.value)}},description:{get:function(){return this.value}},clone:function(){return new p(this.value)}}}),p)},"dX/e":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("VQVe"),l=n("6ZWm"),u=n("7Pku"),c=n("w/+j"),p=n("Qlvz"),f=n("NkBu"),d=n("U010"),m=n("fdtz"),h=n("SDdr"),P=n("lmwz"),M=n("uWOl"),g=n("fNpk"),T=n("Ird5"),F=n("WjWV"),G=n("Iv44"),A=n("GDe9"),y=n("jfma"),v=n("ZTPx"),R=n("+ASD"),_=n("dmHI"),C=n("jfiy"),w=n("bauG"),S=n("jSYS"),E=n("vTQu"),N=n("yjxF"),D=n("dz2e"),b=n("Aj79"),x=n("sJQG"),O=n("44Iz"),k=n("JQ9Y"),I=n("g6aL"),L=n("zW52"),Y=n("Zifs");a.ImageFormaToPGMMapper=(r=function e(){u.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"ImageFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=m.ImageForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance}},props:{canDoSimpleTransformUpdate:function(e){var t,n;return!((t=P.ImageFacade.getFrameFormaForForma(e.forma))&&(n=i.as(t.controller,l.FrameController))&&n.hasCutout)&&u.FormaToPGMMapper.prototype.canDoSimpleTransformUpdate.call(this,e)},getCutoutImageRef:function(e){var t,n,r,o,a;if((t=P.ImageFacade.getFrameFormaForForma(e))&&(n=i.as(t.controller,l.FrameController))&&(r=n.cutout)&&(o=r.bounds)&&null!=(a=r.contentID)){g.LegacyCoreAssert.isTrue(n.cutoutMode==d.CutoutMode.BackgroundRemoval,"Only BackgroundRemoval type is supported",void 0,"ImageFormaToPGMMapper.getCutoutImageRef","ImageFormaToPGMMapper.swift",55);var s=new w.PGMImage(r.formaID,new N.PGMNodeMetadata(r.formaID,"image"),T.PGMAnimationList.EMPTY,o,a);return new b.PGMReference(s,new y.PGMCompositingParams(r.placement,1))}return null},makePGMRef:function(e,t,n,r){var o,a,s;if((a=i.as(e,m.ImageForma))&&null!=(s=a.contentID)){var l;if(l=a.bounds){var u,p,f=new w.PGMImage(a.formaID,new N.PGMNodeMetadata(a.formaID,"image"),T.PGMAnimationList.EMPTY,l,s),d=new y.PGMCompositingParams(a.placement,a.style.opacity);if(p=this.getCutoutImageRef(a)){var h=new b.PGMReference(f,d);u=this.applyMask(h,p),d=y.PGMCompositingParams.DEFAULT}else u=f;var P=null,M=0;t==O.PGMExportSettings.DYNAMIC&&null!=a.animation&&(P=i.opt(a.animation,(function(e){return e.animationStyle.name})),M=(o=i.opt(a.animation,(function(e){return e.animationStyle.variant})))||null!=o?o:0);var F=this.applyFilters(P,M,a.style,u,f,a.controller),G=new b.PGMReference(F,d),A=c.FormaToPGMUtils.applyAnimations(t,e,G);return this.applyStillAnimations(e,A)}return g.LegacyCoreAssert.fail("ImageFormaToPGMMapper: image is missing bounds or content ID",void 0,"ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",159),null}return g.LegacyCoreAssert.fail("ImageFormaToPGMMapper called for something that's not an ImageForma",void 0,"ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",164),null},applyFilters:function(e,t,n,r,o,a){var l,u,c,d=r,h=!0;if((l=i.as(a,f.ImageController))&&(u=i.as(l.forma,m.ImageForma))&&(h=!(l.floating||u.hasAlpha())),c=i.as(n,M.ImageStyle)){var P,g=!1;if(P=c.adjustments){var T=p.ImageAdjustments.createDefault();g=P.blur!=T.blur,P.sharpness!=T.sharpness&&(d=this.applySharpen(P,d,o,h)),d=this.applyColorAdjustments(P,d)}var G=d;if(d=this.applyStyleEffects(c,d,o,h),e==s.AnimationStyle.NAME_GRAYSCALE){var A=c.colors,y=i.opt(i.opt(A.library,(function(e){return e.color("themeDerivedDark")})),(function(e){return e.rgbColor}))||Y.SolidColor.BLACK,v=i.opt(i.opt(A.library,(function(e){return e.color("themeDerivedLight")})),(function(e){return e.rgbColor}))||Y.SolidColor.WHITE,_=this.wrapInFilter([G],"Greyscale",new R.PGMDuotoneFilterSpec(y,v,1));d=this.wrapInFilter([d,_],"AnimationBlend",new F.PGMBlendFilterSpec([0,1]))}else if(e==s.AnimationStyle.NAME_FILL){var w=Y.SolidColor.BLACK;(E=i.as(a,f.ImageController))&&(N=i.as(E.forma,m.ImageForma))&&(b=i.clone(N.page.colorLibraryController.getThemeColorKeys())).length>t&&(w=N.page.colorLibraryController.getSolidColorForKey(i.as(b[t],"String"))||Y.SolidColor.BLACK);var S=this.wrapInFilter([G],s.AnimationStyle.NAME_FILL,new C.PGMFillFilterSpec(w));d=this.wrapInFilter([d,S],"AnimationBlend",new F.PGMBlendFilterSpec([0,1]))}else if(e==s.AnimationStyle.NAME_COLOR){var E,N,b,x=Y.SolidColor.BLACK;(E=i.as(a,f.ImageController))&&(N=i.as(E.forma,m.ImageForma))&&(b=i.clone(N.page.colorLibraryController.getThemeColorKeys())).length>t&&(x=N.page.colorLibraryController.getSolidColorForKey(i.as(b[t],"String"))||Y.SolidColor.BLACK);var O=this.wrapInFilter([G],s.AnimationStyle.NAME_COLOR,new D.PGMOverlayFilterSpec(x));d=this.wrapInFilter([d,O],"AnimationBlend",new F.PGMBlendFilterSpec([1,0]))}g&&(d=this.applyBlur(c.adjustments.scaledBlur,d,o,h)),e==s.AnimationStyle.NAME_BLUR&&(d=this.applyBlur(0,d,o,h))}return d},getRootAnimation:function(e){for(var t=e;null!=t.parent;)t=t.parent;return t.animation},applyStillAnimations:function(e,t){var n;if(n=e.animation){var r,o,a=n.animationStyle;if((a.name==s.AnimationStyle.NAME_ZOOM||a.name==s.AnimationStyle.NAME_PAN)&&(r=this.getRootAnimation(e))&&n.endTime.earlierThan(r.endTime)&&(o=i.as(t.animations.animations.find((function(e){return e instanceof L.PGMTransformAnimation&&e.timeFn.domain.contains(a.endTime.seconds)}),this),L.PGMTransformAnimation))){var l=new x.PGMRange(a.endTime.seconds,r.endTime.seconds),u=new S.PGMLinearFunction(l,new x.PGMRange(1,1)),c=new L.PGMTransformAnimation(u,o.endXBounds,o.endXBounds),p=t.animations.append(c);return t.withAnimations(p)}}return t},applyMask:function(e,t){return this.wrapRefsInFilter([e,t],"CutoutMask",new E.PGMMaskFilterSpec)},applySharpen:function(e,t,n,r){var o=t,a=e.scaledSharpness/4,i=o;return o=this.wrapInFilter([i],"Blur",new G.PGMBlurFilterSpec(r,a,n.entity)),o=this.wrapInFilter([i,o],"Sharpen_mixback",new F.PGMBlendFilterSpec([1.5,-.5]))},applyBlur:function(e,t,n,r){var o=t;return o=this.wrapInFilter([o],"Blur",new G.PGMBlurFilterSpec(r,e,n.entity))},applyColorAdjustments:function(e,t){var n=t,r=p.ImageAdjustments.createDefault(),o=e.copyWithNewValues(r.blur,r.sharpness);return o.equals(r)||(n=this.wrapInFilter([n],"ColorAdjustment",new A.PGMColorAdjustmentFilterSpec(o.shadows,o.highlights,o.saturation,o.brightness,o.exposure,o.contrast,o.warmth,o.tint,o.fade,o.vibrance))),n},applyStyleEffects:function(e,t,n,r){var o,a=t;if(o=i.as(e.filter,h.CompositeFilter)){var s,l;if(1!=o.contrast?a=this.wrapInFilter([a],o.name+"_contrast",v.PGMColorTransformFilterSpec.createContrastTransform(o.contrast)):o.grayscale&&(a=this.wrapInFilter([a],o.name,new R.PGMDuotoneFilterSpec(Y.SolidColor.BLACK,Y.SolidColor.WHITE,1))),(s=o.colors)&&(l=s.fieldPrimary))switch(o.blend){case"normal":var u;a=(u=s.fieldSecondary)?this.wrapInFilter([a],o.name,new R.PGMDuotoneFilterSpec(l,u,1)):this.wrapInFilter([a],o.name,new C.PGMFillFilterSpec(l));break;case"overlay":a=this.wrapInFilter([a],o.name+"_overlay",new D.PGMOverlayFilterSpec(l));break;case"screen":a=this.wrapInFilter([a],o.name,new k.PGMScreenFilterSpec(l));break;case"multiply":a=this.wrapInFilter([a],o.name,v.PGMColorTransformFilterSpec.createColorizeTransform(l))}if(o.blurRadius>.05&&(a=this.wrapInFilter([a],o.name,new G.PGMBlurFilterSpec(r,o.blurRadius,n.entity))),1!=o.mix){var c=new I.PGMSimpleGroup(a.entity+"-mix-filtered",new N.PGMNodeMetadata(a.meta.id,"filter-"+o.name+"-mix-opacity"),T.PGMAnimationList.EMPTY,[new b.PGMReference(a)]),p=new b.PGMReference(c,y.PGMCompositingParams.DEFAULT.withOpacity(o.mix),T.PGMAnimationList.EMPTY);a=new I.PGMSimpleGroup(a.entity+"-mix",new N.PGMNodeMetadata(a.meta.id,"filter-"+o.name+"-mix"),T.PGMAnimationList.EMPTY,[new b.PGMReference(t),p])}}return a},wrapInFilter:function(e,t,n){var r=e.map((function(e){return new b.PGMReference(e)}),this);return this.wrapRefsInFilter(r,t,n)},wrapRefsInFilter:function(e,t,n){var r=e[0].child.entity+"-"+t,o=new N.PGMNodeMetadata(e[0].child.meta.id,"filter-"+t),a=T.PGMAnimationList.EMPTY;return new _.PGMFilter(r,o,a,e,n)}}}),r)},hndY:function(e,t,n){var r,o,a,i=t,s=n("oAGj"),l=n("OdB2"),u=n("Bcdx"),c=n("w/+j"),p=n("P83h"),f=n("iCxV"),d=n("IUM5"),m=n("fNpk"),h=n("K17h"),P=n("sq5L"),M=n("bauG"),g=n("euLT"),T=n("PlOi"),F=n("b94u"),G=n("ZA1K"),A=n("bAjp"),y=n("mj5y"),v=n("s3Tu"),R=n("t+nd"),_=n("fnrT"),C=n("uYSz"),w=n("KDc2"),S=n("T6jX"),E=n("sIWg"),N=n("qSCS");i.FormaDamage=(r=function(){this.descendants=!1,this.transform=!1},s.defineClass({name:"FormaDamage",ctor:r,props:{onlyTransform:function(){return!this.descendants&&this.transform},onlyDescendants:function(){return this.descendants&&!this.transform}}}),r),i.FormaPGMCacheEntry=(o=function(e,t){this.damage=null,this.forma=e,this.ref=t},s.defineClass({name:"FormaPGMCacheEntry",ctor:o,props:{addDamage:function(){return null==this.damage&&(this.damage=new i.FormaDamage),this.damage},damageDescendants:function(){this.addDamage().descendants=!0},damageTransform:function(){this.addDamage().transform=!0}}}),o),i.FormaPGMCache=(a=function(e,t,n){this.graph_=null,this.formaCache_={},this.mappers=u.FormaToPGMMapperFactory.instance,this.cachedGraphRef_=null,this.cachedGraph_=P.PGMGraph.EMPTY,this.validationCount_=0,this.fastValidationCount_=0,this.pageSubscription_=null,this.page=e,this.settings=t,this.adhoc=n,this.log=m.LegacyCoreAssert.newLog("FormaPGMCache-"+t.asString),this.pageSubscription_=e.subscribe(this,l.FormaEndUpdateMessage.TYPE)},s.defineClass({name:"FormaPGMCache",ctor:a,statics:{reportedFailures:{},failOnce:function(e){var t;((t=a.reportedFailures[e])||null!=t)&&t||(a.reportedFailures[e]=!0,m.LegacyCoreAssert.fail(e,void 0,"FormaPGMCache.failOnce","FormaPGMCache.swift",385))},_implements:function(e){return"TheoMessageSubscriber"==e||"FormaToPGMFactory"==e}},props:{destroy:function(){var e;(e=this.pageSubscription_)&&(s.opt(this.page,(function(t){return t.unsubscribe(e)})),this.pageSubscription_=null),s.removeAll(this.formaCache_)},onMessage:function(e){var t;if(t=s.as(e,l.FormaEndUpdateMessage)){var n,r,o=t.event.forma,a=!0;if((n=o)&&(r=this.formaCache_[n.formaID])&&(t.event instanceof p.FormaTransformChangedEvent?r.damageTransform():t.event instanceof p.FormaNullChangedEvent||t.event instanceof p.FormaAlignmentChangedEvent?a=!1:t.event instanceof p.FormaAnimationChangedEvent?this.settings.asDynamic?(this.log.info("animation changed invalidation on "+n.kind),s.removeKey(this.formaCache_,n.formaID)):a=!1:s.removeKey(this.formaCache_,n.formaID),o=n.parent),a){for(;null!=o;)s.opt(this.formaCache_[o.formaID],(function(e){return e.damageDescendants()})),o=o.parent;this.graph_=null}}},getPGMReferenceForForma:function(e){var t,n=this.formaCache_[e.formaID];if(t=this.mappers.getMapper(e)){var r,o;if(r=n){var s;if(!(s=r.damage))return r.ref;if(s.onlyTransform()&&t.canDoSimpleTransformUpdate(r))return r.ref=r.ref.withPlacement(e.placement),r.damage=null,r.ref}return this.validationCount_+=1,(o=t.makePGMRef(e,this.settings,this,n))?o.child instanceof g.PGMNullNode?null:(this.formaCache_[e.formaID]=new i.FormaPGMCacheEntry(e,o),o):(a.failOnce("Mapper at path "+S.TheoDocumentUtils.debugFormaPath(e)+" did not produce a reference."),null)}return a.failOnce("No pgm mapper available at path "+S.TheoDocumentUtils.debugFormaPath(e)+" "),null},childReferences:function(e){for(var t=[],n=s.iter(e.childrenAsArray);!n.done;n.next()){var r,o=n.value;(r=this.getPGMReferenceForForma(o))&&t.push(r)}return t},referenceForForma:function(e){return this.getPGMReferenceForForma(e)},getGraph:function(){return this.validate(),this.graph_},resourcesForGraph:function(e){var t=this,n={},r={};return e.visit((function(e){var o,i,l,u,p,m,h=null;if(o=s.as(e,M.PGMImage))h=o.contentID;else if(i=s.as(e,v.PGMVideo))h=i.contentID;else if(l=s.as(e,G.PGMSVG))h=l.contentID;else if(u=s.as(e,A.PGMText)){var P,g=u.style.font.postScriptName;if(null==r[g]&&(r[g]=u.style.font,(y=s.opt(t.page,(function(e){return e.document})))&&(P=s.opt(f.Host.fontProvider,(function(e){return e.descriptorForPostScriptName(g,y)}))))){var F;switch(P.source){case 2:F=new _.StorageSpecApplicationResource(d.CATEGORY_ID_FONT,d.FONT_RESOURCE_ID_EMBEDDED_PREFIX+g);break;case 1:case 3:F=new _.StorageSpecApplicationResource(d.CATEGORY_ID_FONT,d.FONT_RESOURCE_ID_SPARK_PREFIX+g);break;case 4:var y,S;(y=s.opt(t.page,(function(e){return e.document})))&&(S=s.opt(f.Host.brandkitManager,(function(e){return e.brandkitForDocument(y)})))?F=new C.StorageSpecExternalCC(C.StorageSpecExternalCC.BRANDKIT_SYNC_GROUP,S.id,null,g,null,null,null):(a.failOnce("can't obtain a brandkit for a custom font "+g),F=new w.StorageSpecInvalid);break;case 5:case 6:F=new R.StorageSpecAdobeFont(g);break;default:a.failOnce("unexpected font source for "+g),F=new w.StorageSpecInvalid}n["font:"+g]=new T.PGMResourceProvider("font/otf",F)}}null!=(p=h)&&(y=s.opt(t.page,(function(e){return e.document})))&&null==n[p]&&((m=s.as(y.content.nodeByID(p),N.URLBasedContentNode))?n[p]=c.FormaToPGMUtils.createResourceProviderForContentNode(m):a.failOnce("couldn't look up content by ID; no resource available"))})),new F.PGMResourceProviderList(n)},getGraphForForma:function(e){var t;return(t=this.getPGMReferenceForForma(e))?(t===this.cachedGraphRef_||(this.cachedGraph_=new P.PGMGraph(t.child,e.bounds,this.settings.asDynamic?y.PGMUtils.calculateDuration(t):0,this.resourcesForGraph(t.child)),this.cachedGraphRef_=t),this.cachedGraph_):(a.failOnce("getGraphForForma: couldn't get a reference from which to build a graph."),null)},validate:function(){var e,t;if(null==this.graph_&&(e=this.page))if(this.validationCount_=0,this.fastValidationCount_=0,t=this.getPGMReferenceForForma(e.root)){var n=0;if(this.settings.asDynamic){var r,o=!1;(r=e.animationController.animationStyle)&&(o=!r.isNoStyle()),n=o?h.MotionUtils.determineTotalDuration(e).seconds:y.PGMUtils.calculateDuration(t)}this.log.info("validate: "+this.validationCount_+" slow, "+this.fastValidationCount_+" fast");var i=e.pageSize;this.graph_=new P.PGMGraph(t.child,E.TheoRect.fromSize(i),n,this.resourcesForGraph(t.child))}else a.failOnce("failed to generate a reference for root")}}}),a)},kwVJ:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("IUM5"),s=n("tGKA"),l=n("Ird5"),u=n("jfma"),c=n("sq5L"),p=n("bauG"),f=n("yjxF"),d=n("Aj79"),m=n("PlOi"),h=n("g6aL"),P=n("fnrT"),M=n("sIWg");o.PGMWatermarkingUtils=(r=function(){},a.defineClass({name:"PGMWatermarkingUtils",ctor:r,statics:{WATERMARK_ENTITY:"watermark",WATERMARK_GROUP_ENTITY:"add-watermark-group",WATERMARK_CONTENT_TYPE:"image/png",WATERMARK_RESOURCE_ID:"watermark-spark.png",WATERMARK_V2_RESOURCE_ID:"watermark-spark-v2.png",WATERMARK_WIDTH:380,WATERMARK_HEIGHT:80,WATERMARK_SCALE:.5,addWatermark:function(e){var t,n,o=new p.PGMImage(r.WATERMARK_ENTITY,f.PGMNodeMetadata.EMPTY,l.PGMAnimationList.EMPTY,M.TheoRect.fromXYWH(0,0,r.WATERMARK_WIDTH,r.WATERMARK_HEIGHT),r.WATERMARK_V2_RESOURCE_ID),g=new d.PGMReference(o,new u.PGMCompositingParams(s.Matrix2D.translationXY(e.bounds.width-r.WATERMARK_WIDTH,e.bounds.height-r.WATERMARK_HEIGHT).scaleXYfromPoint(e.bounds.evalXY(1,1),r.WATERMARK_SCALE,r.WATERMARK_SCALE)));return t=(n=a.as(e.root,h.PGMSimpleGroup))?n.withEntityAndChildren(n.entity,n.children.concat([g])):new h.PGMSimpleGroup(r.WATERMARK_GROUP_ENTITY,f.PGMNodeMetadata.EMPTY,l.PGMAnimationList.EMPTY,[new d.PGMReference(e.root),g]),new c.PGMGraph(t,e.bounds,e.duration,e.resources.adding(o.contentID,new m.PGMResourceProvider(r.WATERMARK_CONTENT_TYPE,new P.StorageSpecApplicationResource(i.CATEGORY_ID_IMAGES,r.WATERMARK_V2_RESOURCE_ID))))}}}),r)},mGL3:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("gXiO"),s=n("QgZx"),l=n("ZhwN"),u=n("iCxV"),c=n("fNpk");o.OrderedFontSet=(r=function(){this.descriptors_=[],this.familyKeys_=[],this.familyFaces_=[],this.clock_=0,this.fontSetID=l.GUIDUtils.makeGUID(),i.CoreObject.call(this)},a.defineClass({name:"OrderedFontSet",ctor:r,superName:"CoreObject",statics:{fromList:function(e){for(var t=new r,n=a.iter(e);!n.done;n.next()){var o=n.value;t.append(o)}return t}},props:{descriptors:{get:function(){return this.descriptors_.concat()}},count:{get:function(){return this.descriptors_.length}},familyCount:{get:function(){return this.familyKeys_.length}},familyAt:function(e){return a.as(this.familyKeys_[e],"String")},facesInFamily:function(e){var t=a.indexOf(this.familyKeys_,e);return null==t?(a.opt(u.Host.logging,(function(t){return t.warning("Invalid family ("+e+") in facesInFamily()")})),null):a.sort(this.familyFaces_[t],(function(e,t){var n=e.source==s.FontSource.TYPEKIT_PREMIUM||e.source==s.FontSource.TYPEKIT_FREE,r=t.source==s.FontSource.TYPEKIT_PREMIUM||t.source==s.FontSource.TYPEKIT_FREE;return!(!n||r)||!(!n&&r)&&(0==e.usWeightClass||0==t.usWeightClass?e.weight==t.weight?(e.italic||0!=e.italicAngle)==(t.italic||0!=t.italicAngle)?e.label.length<t.label.length:!e.italic&&0==e.italicAngle:e.weight<t.weight:e.usWeightClass==t.usWeightClass?e.usWidthClass==t.usWidthClass?e.weight==t.weight?(e.italic||0!=e.italicAngle)==(t.italic||0!=t.italicAngle)?e.label.length<t.label.length:!e.italic&&0==e.italicAngle:e.weight<t.weight:e.usWidthClass<t.usWidthClass:e.usWeightClass<t.usWeightClass)}))},defaultFaceInFamily:function(e){var t=a.clone(this.facesInFamily(e)||[]);function n(e){for(var n=a.iter(t);!n.done;n.next()){var r=n.value;if(r.displayFaceName.includes(e))return r}return null}c.LegacyCoreAssert.isTrue(0==!t.length,"facesInFamily is empty",{family:e},"OrderedFontSet.defaultFaceInFamily","OrderedFontSet.swift",111);for(var r=a.iter(["Regular","Normal","Plain","Book","Display"]);!r.done;r.next())if(o=n(r.value))return o;for(var o,i,s=1e5,l=1e5,u=a.iter(t);!u.done;u.next()){var p=u.value,f=p.usWeightClass;f=0==f?p.weight:f,!p.italic&&Math.abs(f-400)<s?(s=Math.abs(f-400),o=p):p.italic&&Math.abs(f-400)<l&&(l=Math.abs(f-400),i=p)}return null!=o?o:null!=i?i:a.first(t)},fontAt:function(e){return e<0||e>=this.descriptors_.length?(c.LegacyCoreAssert.fail("Invalid index in fontAt()",{index:e},"OrderedFontSet.fontAt","OrderedFontSet.swift",165),null):this.descriptors_[e]},forEach:function(e){this.descriptors_.forEach(e)},indexOf:function(e){return a.indexOfEq(this.descriptors_,e,s._equality_FontDescriptor_FontDescriptor)},getIndexOfPostScriptName:function(e){for(var t=0,n=a.iter(this.descriptors_);!n.done;n.next()){if(n.value.postScriptName==e)return t;t+=1}return null},filter:function(e){return this.descriptors_.filter(e,this)},find:function(e){return this.descriptors_.find(e,this)},append:function(e){if(!this.contains(e)){this.clock_+=1,this.descriptors_.push(e);var t=e.displayFamilyName,n=a.indexOf(this.familyKeys_,t);null==n&&(this.familyKeys_.push(t),this.familyFaces_.push([])),n=a.indexOf(this.familyKeys_,t),this.familyFaces_[n].push(e)}},contains:function(e){return a.containsEq(this.descriptors_,e,s._equality_FontDescriptor_FontDescriptor)},remove:function(e){this.clock_+=1,a.remove(this.descriptors_,e);var t=e.displayFamilyName,n=a.indexOf(this.familyKeys_,t);if(null!=n){var r=this.familyFaces_[n];a.remove(r,e),0==r.length&&(a.remove(this.familyKeys_,t),this.familyFaces_.splice(n,1))}},clone:function(){var e=new r;return this.descriptors_.forEach((function(t){return e.append(t)})),e},sort:function(){var e=a.sort(this.descriptors_,(function(e,t){return e.postScriptName>t.postScriptName}));this.descriptors_=[];for(var t=a.iter(e);!t.done;t.next()){var n=t.value;this.descriptors_.push(n)}},revisionNumber:{get:function(){return this.clock_}}}}),r)},"pR+7":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("7Pku"),l=n("w/+j"),u=n("fNpk"),c=n("Ird5"),p=n("jLWG"),f=n("jfma"),d=n("yjxF"),m=n("Aj79"),h=n("Ucb9"),P=n("K0Rh"),M=n("Zifs"),g=n("hgLm");a.RootFormaToPGMMapper=(r=function e(){s.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"RootFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=P.RootForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance}},props:{makePGMRef:function(e,t,n,r){var o,a,s;if((o=i.as(e,P.RootForma))&&(a=n.childReferences(o))&&(s=o.bounds)){var T,F=new g.TheoRectanglePath(s),G=o.style.colors.fieldPrimary||M.SolidColor.WHITE,A=G.withAlphaOf(G.alpha*t.backgroundOpacityOverride);if(A.alpha>0){var y=new m.PGMReference(new h.PGMShape(o.formaID+"-background",new d.PGMNodeMetadata(o.formaID,"background"),c.PGMAnimationList.EMPTY,s,[F],A));T=[l.FormaToPGMUtils.applyAnimations(t,e,y)].concat(a)}else T=i.clone(a);return l.FormaToPGMUtils.applyAnimations(t,e,new m.PGMReference(new p.PGMClip(o.formaID,new d.PGMNodeMetadata(o.formaID,"clip"),c.PGMAnimationList.EMPTY,T,[F]),new f.PGMCompositingParams(o.placement,o.style.opacity)))}return u.LegacyCoreAssert.fail("root forma child reference generation failed",void 0,"RootFormaToPGMMapper.makePGMRef","RootFormaToPGMMapper.swift",87),null}}}),r)},s3ad:function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("7Pku"),l=n("w/+j"),u=n("iCxV"),c=n("fNpk"),p=n("Ird5"),f=n("jfma"),d=n("bauG"),m=n("jSYS"),h=n("KB91"),P=n("wH/i"),M=n("yjxF"),g=n("Aj79"),T=n("sJQG"),F=n("s3Tu"),G=n("zjod"),A=n("mxdD");a.VideoFormaToPGMMapper=(r=function e(){s.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"VideoFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=G.VideoForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance}},props:{makePGMRef:function(e,t,n,r){var o,a,s,y;if((s=i.as(e,G.VideoForma))&&(y=s.bounds)){var v,R,_="unknown";if((v=s.videoContentNode)&&(_=v.isGIF?"gif":"video"),((o=i.opt(u.Host.videoUtils,(function(e){return e.hostSupportsPGMVideos()})))||null!=o)&&o){var C;if(null!=(C=s.videoContentID)){var w,S=A.VideoFacade.getDurationForVideo(s),E=A.VideoFacade.getStartTimeForVideoForma(s,!(!(a=i.opt(s.videoContentNode,(function(e){return e.isForLocalVideo})))&&null==a)&&a),N=E.seconds,D=E;if(s.mode==G.VideoMode.trim&&(D=s.currentTime),S.seconds>0){var b=new m.PGMLinearFunction(new T.PGMRange(0,S.seconds),T.PGMRange.UNIT),x=new h.PGMLoopingFunction(new T.PGMRange(0,S.seconds),b);w=new p.PGMAnimationList([new P.PGMMediaPlayAnimation(x)])}else w=p.PGMAnimationList.EMPTY;return l.FormaToPGMUtils.applyAnimations(t,e,new g.PGMReference(new F.PGMVideo(s.formaID,new M.PGMNodeMetadata(s.formaID,_),w,y,C,N,D.seconds),new f.PGMCompositingParams(s.placement,s.style.opacity)))}return c.LegacyCoreAssert.fail("videoForma has a nil videoContentID",void 0,"VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",86),null}return _="poster",null!=(R=s.contentID)?l.FormaToPGMUtils.applyAnimations(t,e,new g.PGMReference(new d.PGMImage(s.formaID+"-"+_,new M.PGMNodeMetadata(s.formaID,_),p.PGMAnimationList.EMPTY,y,R),new f.PGMCompositingParams(s.placement,s.style.opacity))):(c.LegacyCoreAssert.fail("videoForma has a nil contentID",void 0,"VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",110),null)}return c.LegacyCoreAssert.fail("not a video forma, or no bounds",void 0,"VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",115),null}}}),r)},uUew:function(e,t,n){var r,o=t,a=n("oAGj"),i=n("gXiO"),s=n("fNpk");o.TextRange=(r=function(e,t){this.start=e,this.end=t,s.LegacyCoreAssert.isTrue(t>=e&&e>=0,"TextRange is invalid",{start:e,end:t},"TextRange.init","TextRange.swift",19),i.CoreObject.call(this)},a.defineClass({name:"TextRange",ctor:r,superName:"CoreObject",statics:{makeRangesContiguous:function(e){for(var t=a.iter(a.toSequence(e));!t.done;t.next()){var n=t.value,o=n.offset,i=n.element;o+1<e.length&&(e[o]=new r(i.start,e[o+1].start))}}},props:{length:{get:function(){return this.end-this.start}},asString:{get:function(){return"["+this.start+"-"+this.end+"]"}},contains:function(e){return e.start>=this.start&&e.end<=this.end},unionWith:function(e){return new r(Math.min(this.start,e.start),Math.max(this.end,e.end))}}}),r)},"w/+j":function(e,t,n){var r,o=t,a=n("oAGj"),i=n("ko5Z"),s=n("WF+G"),l=n("iCxV"),u=n("SDdr"),c=n("fNpk"),p=n("c+uM"),f=n("tGKA"),d=n("Ird5"),m=n("WjWV"),h=n("Iv44"),P=n("dmHI"),M=n("9MJV"),g=n("jSYS"),T=n("WUDy"),F=n("sJQG"),G=n("PlOi"),A=n("W6ub"),y=n("Ucb9"),v=n("9K9k"),R=n("/eOI"),_=n("bAjp"),C=n("f/aw"),w=n("zW52"),S=n("bJhu"),E=n("mj5y"),N=n("RiZt"),D=n("KQHZ"),b=n("6ftY"),x=n("uYSz"),O=n("VXZl"),k=n("KDc2"),I=n("GOtr"),L=n("ll2+"),Y=n("GtBD"),B=n("sIWg"),U=n("xm77"),K=n("sW6f");o.FormaToPGMUtils=(r=function(){},a.defineClass({name:"FormaToPGMUtils",ctor:r,statics:{cpEnv:"prod",createTimeFunc:function(e,t){var n,r=new F.PGMRange(e.time.seconds,t.time.seconds);switch(t.timingFunction){case"Linear":n=new g.PGMLinearFunction(r,F.PGMRange.UNIT);break;case"Step":case"Step0":case"Step1":n=new g.PGMLinearFunction(r,new F.PGMRange(0,0));break;case"EaseIn":case"EaseOut":case"EaseInOut":var o=e.timingFunction==U.TimingFunctionType.EaseIn?R.PGMEasingType.EaseIn:e.timingFunction==U.TimingFunctionType.EaseOut?R.PGMEasingType.EaseOut:R.PGMEasingType.EaseInAndOut;n=new R.PGMSineEasingFunction(o,r,F.PGMRange.UNIT);break;default:a.opt(l.Host.logging,(function(t){return t.warning("Timing-func not yet converyed to PGM: "+e.timingFunction)})),n=new g.PGMLinearFunction(r,F.PGMRange.UNIT)}return n},determineOpacity:function(e){var t;return(t=a.as(e.style,p.LockupStyle))?t.textOpacity:a.opt(e.style,(function(e){return e.opacity}))},createTransformAnimation:function(e,t,n){var o,a=e.compositing.placement,i=t.placement,s=n.placement;return i.isIdentity&&s.isIdentity||(o=new w.PGMTransformAnimation(r.createTimeFunc(t,n),new w.PGMTransformedBounds(a.concat(i),E.PGMUtils.calcBounds(e.child,f.Matrix2D.Identity)||B.TheoRect.Zero),new w.PGMTransformedBounds(a.concat(s),E.PGMUtils.calcBounds(e.child,f.Matrix2D.Identity)||B.TheoRect.Zero))),o},createOpacityAnimation:function(e,t){var n,o=r.determineOpacity(e);if(null==o)return n;var a=r.determineOpacity(t);return null==a?n:n=new T.PGMOpacityAnimation(r.createTimeFunc(e,t),o,a)},createTextAnimation:function(e,t,n){var o,i=a.as(e,_.PGMText);if(null==i)return o;var s=a.opt(t.style,(function(e){return e.colors.fieldPrimary}));if(null==s)return o;var l=a.opt(n.style,(function(e){return e.colors.fieldPrimary}));if(null==l)return o;null==i.style.fillColor&&(s=null,l=null);var u=a.opt(t.style,(function(e){return e.colors.fieldSecondary})),c=a.opt(n.style,(function(e){return e.colors.fieldSecondary}));null==u&&(u=i.style.strokeColor),null==c&&(c=i.style.strokeColor);var p=new S.PGMTextStyle(i.style.font,s,u,i.style.strokeWidth,i.style.tracking),f=new S.PGMTextStyle(i.style.font,l,c,i.style.strokeWidth,i.style.tracking);return o=new C.PGMTextAnimation(r.createTimeFunc(t,n),t.bounds||i.bounds,p,n.bounds||i.bounds,f,A.PGMRenderRuns.init_378c(t.renderRuns),A.PGMRenderRuns.init_378c(n.renderRuns))},createShapeAnimation:function(e,t,n){var o,i=a.as(e,y.PGMShape);if(null==i)return o;var s=a.opt(t.style,(function(e){return e.colors.fieldPrimary}));if(null==s)return o;var l=a.opt(n.style,(function(e){return e.colors.fieldPrimary}));return null==l?o:o=new v.PGMShapeAnimation(r.createTimeFunc(t,n),s,t.bounds||i.bounds,l,n.bounds||i.bounds)},createFilterAnimation:function(e,t,n){var o,i,s,l,c,p;if(i=a.as(e,P.PGMFilter))if((s=a.as(i.spec,h.PGMBlurFilterSpec))&&(l=a.as(a.opt(t.style,(function(e){return e.filter})),u.CompositeFilter))&&(c=a.as(a.opt(n.style,(function(e){return e.filter})),u.CompositeFilter))){var f=new h.PGMBlurFilterSpec(s.edgeClamp,l.blurRadius,s.originalImageEntity),d=new h.PGMBlurFilterSpec(s.edgeClamp,c.blurRadius,s.originalImageEntity);o=new M.PGMFilterAnimation(r.createTimeFunc(t,n),f,d)}else if(p=a.as(i.spec,m.PGMBlendFilterSpec)){var g=p.weights[0],T=p.weights[1],F=new m.PGMBlendFilterSpec([g,T]),G=new m.PGMBlendFilterSpec([T,g]);o=new M.PGMFilterAnimation(r.createTimeFunc(t,n),F,G)}return o},createContentAnimation:function(e,t,n){var o,a=e.child;return a instanceof _.PGMText?o=r.createTextAnimation(a,t,n):a instanceof y.PGMShape?o=r.createShapeAnimation(a,t,n):a instanceof P.PGMFilter&&(o=r.createFilterAnimation(a,t,n)),o},convertAnimation:function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var i=[];if(!(t.keyFrames.length>1))return i;for(var s=t.keyFrames.length-2,l=a.iter(a.range(0,s,!0));!l.done;l.next()){var u,c,p,f=l.value,d=t.keyFrames[f],m=t.keyFrames[f+1];if(m.time!=d.time)n&&((u=r.createTransformAnimation(e,d,m))&&i.push(u),(c=r.createOpacityAnimation(d,m))&&i.push(c)),o&&(p=r.createContentAnimation(e,d,m))&&i.push(p)}return i},createAnimations:function(e,t){var n,o=[];if(n=t.animation){var i=a.clone(r.convertAnimation(e,n));a.append(o,i)}return d.PGMAnimationList.fromArray(o)},applyAnimations:function(e,t,n){if(!e.asDynamic)return n;var o=r.createAnimations(n,t),a=n.animations.merge(o);return n.withAnimations(a)},createResourceProviderForContentNode:function(e){var t,n,o,l=e.type,u=e.localIdentifier,p=a.as(e,K.VideoContentNode);if(null!=u&&null!=p&&p.isForLocalVideo){var f,d=null;null!=(f=p.url)&&f.startsWith("file:")&&(d=new s.CorePath(f.substr("file:".length))),o=new Y.StorageSpecLocalIdentifier(u,d)}else if(null!=(f=e.url))if(f.startsWith("component:"))(g=f.substr("component:".length).split("/")).length>2&&"logo"==g[2]&&g.splice(2,1),l=g.length>=3?a.replaceAll(g[2],"+","/"):l,g.length>=2?o=new I.StorageSpecLocalComposite(g[1],l):(c.LegacyCoreAssert.fail("unexpected component encoding",void 0,"FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",364),o=new k.StorageSpecInvalid);else if(f.startsWith("cp:")){var m=f.substr("cp:".length),h=(g=m.split("/"))[0];if(g.splice(0,1),"original"==g[0]&&g.splice(0,1),g.length>=1){var P=g.join("/");o=new b.StorageSpecCommunityPlatform(h,new s.CorePath(P),null,r.cpEnv)}else c.LegacyCoreAssert.fail("unexpected component encoding",void 0,"FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",382),o=new k.StorageSpecInvalid}else if(f.startsWith("acp:")){var M=f.substr("acp:".length);o=new N.StorageSpecAdobeContentPlatform(M)}else if(f.startsWith("ac:")){var g;(g=f.substr("ac:".length).split("/")).length>=3&&"logo"==g[2]&&g.splice(2,1);var T=g.length>=3&&null!=["image+","video+","audio+","font+","application+"].find((function(e){return g[2].startsWith(e)}),this),F=g.length>=3&&!T?g[2]:null,A=null==F?2:3;g.length>A&&(l=a.replaceAll(g[A],"+","/")),o=new x.StorageSpecExternalCC(x.StorageSpecExternalCC.BRANDKIT_SYNC_GROUP,g[0],g[1],null,l,null,F)}else if(f.startsWith("file:")){var y=f.substr("file:".length);o=new L.StorageSpecLocalFile(new s.CorePath(y))}else if(f.startsWith("data:")){var v;if(null!=(v=a.indexOf(f,"base64,"))){var R=f.substr(v+"base64,".length),_=f.substr("data:".length,v-"data:".length);_.endsWith(";")&&(l=_.substr(0,_.length-1)),o=new D.StorageSpecContentLiteral(new i.CoreContentBase64(R,(t=l)||null!=t?t:""))}else c.LegacyCoreAssert.fail("data URL is not base64; unsupported",void 0,"FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",437),o=new k.StorageSpecInvalid}else f.startsWith("http:")||f.startsWith("https:")||f.startsWith("blob:")?o=new O.StorageSpecHTTP(f):f.startsWith("/storage/")?o=new L.StorageSpecLocalFile(new s.CorePath(f)):(c.LegacyCoreAssert.fail("URL does not have a known pattern",void 0,"FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",454),o=new k.StorageSpecInvalid);else c.LegacyCoreAssert.fail("no URL to inspect",void 0,"FormaToPGMUtils.createResourceProviderForContentNode","FormaToPGMUtils.swift",458),o=new k.StorageSpecInvalid;return new G.PGMResourceProvider((n=l)||null!=n?n:"",o)}}}),r)},x4Gy:function(e,t,n){var r,o,a,i,s,l,u,c=t,p=n("oAGj"),f=n("SpAV"),d=n("gXiO"),m=n("dJuF"),h=n("QgZx"),P=n("ZhwN"),M=n("iCxV"),g=n("fNpk"),T=n("c+uM"),F=n("Quhx"),G=n("Zifs"),A=n("a9ow"),y=n("enh0"),v=n("90dd");c.SolidColorRun=(r=function(e,t){this.attr=e,this.range=t},p.defineClass({name:"SolidColorRun",ctor:r}),r),c.SolidColorRuns=(o=function(){this.runArrays_=[],d.CoreObject.call(this)},p.defineClass({name:"SolidColorRuns",ctor:o,superName:"CoreObject",props:{apply:function(e,t){0!=t.length&&this.runArrays_.push(new c.SolidColorRun(e,t))},clear:function(){this.runArrays_.splice(0)},applyNewAlpha:function(e,t){for(var n=p.iter(e.runArrays);!n.done;n.next()){var r=n.value,o=(1-t)*r.attr.alpha+1*t,a=new G.SolidColor(r.attr.red,r.attr.green,r.attr.blue,o);this.apply(a,r.range)}},runArrays:{get:function(){return this.runArrays_}},clone:function(){for(var e=new o,t=p.iter(this.runArrays_);!t.done;t.next()){var n=t.value;e.apply(n.attr,n.range)}return e},asString:{get:function(){for(var e="",t=p.iter(this.runArrays_);!t.done;t.next()){var n=t.value;e=e+" "+n.range.asString+" "+n.attr.asString}return e}}}}),o),c.RenderRuns=(a=function(){this.fillColors=new c.SolidColorRuns,this.strokeColors=new c.SolidColorRuns,d.CoreObject.call(this)},p.defineClass({name:"RenderRuns",ctor:a,superName:"CoreObject",props:{applyColors:function(e,t,n){0!=n.length&&(this.fillColors.apply(e,n),this.strokeColors.apply(t,n))},copyColorAlpha:function(e,t){for(var n=e.fontColor,r=e.fontStrokeColor,o=p.iter(t.fillColors.runArrays);!o.done;o.next()){var a=o.value,i=new G.SolidColor(n.red,n.green,n.blue,a.attr.alpha);this.fillColors.apply(i,a.range)}for(var s=p.iter(t.strokeColors.runArrays);!s.done;s.next()){var l=s.value,u=new G.SolidColor(r.red,r.green,r.blue,l.attr.alpha);this.strokeColors.apply(u,l.range)}},setAlphaFromAnimation:function(e,t,n){this.clear(),this.fillColors.applyNewAlpha(e.fillColors,n),this.strokeColors.applyNewAlpha(e.strokeColors,n)},clear:function(){this.fillColors.clear(),this.strokeColors.clear()},clone:function(){var e=new a;return e.fillColors=this.fillColors.clone(),e.strokeColors=this.strokeColors.clone(),e},asString:{get:function(){return"Fill:"+this.fillColors.asString+" Stroke:"+this.strokeColors.asString}}}}),a),c.ContentTextModel=(i=function(){},p.defineClass({name:"ContentTextModel",ctor:i,superName:"TextModel",statics:{SCHEMA_CLASS_NAME:{get:function(){return"ContentTextModel"}},codec:{get:function(){return m.DBPropertyCodec.registerCodec(i.SCHEMA_CLASS_NAME,m.DBPropertyCodec.directObjectCodec(i.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(e,t,n,r){return i.init_866e(n,e)}}},_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{init_d41d:function(){var e={text:[new A.UTF16Attribute("")]};p.super_init(this,c.TextModel,c.TextModel.prototype.init_dd5d,{},e)},init_5aae:function(e){var t={},n={};if(null!=e)t=p.clone(e.state.allProperties);else{var r=[new A.UTF16Attribute("")];n[c.TextModel.PROPERTY_UTF16_NAME]=p.clone(r)}p.super_init(this,c.TextModel,c.TextModel.prototype.init_dd5d,t,n)},init_866e:function(e,t){p.super_init(this,c.TextModel,c.TextModel.prototype.init_866e,e,t);for(var n=p.iter(c.TextModel.allAttributeNames_);!n.done;n.next()){var r=n.value;r!=c.TextModel.PROPERTY_UTF16_NAME&&p.opt(this.getProperty(r),(function(e){return e.shouldWrite=!1}))}},className:{get:function(){return i.SCHEMA_CLASS_NAME}},clone:function(){return i.init_5aae(this)},match:function(e){this.set(c.TextModel.PROPERTY_UTF16_NAME,e.get(c.TextModel.PROPERTY_UTF16_NAME)),this.publish(new c.TextModelDidInsertMessage(this,0,this.text))},isEqual:function(e){var t;return!!(t=p.as(e,c.TextModel))&&this.text==t.text}}}),i),c.TextModel=(s=function(){},l={},p.defineClass({name:"TextModel",ctor:s,superName:"PostPublishingObject",statics:{PROPERTY_UTF16_NAME:"text",PROPERTY_FONT_NAME:"font-name",PROPERTY_FONT_SIZE:"font-size",PROPERTY_FONT_COLOR:"font-color",PROPERTY_FONT_STROKE_COLOR:"font-strokecolor",PROPERTY_FONT_STROKE_WIDTH:"font-strokewidth",PROPERTY_TEXT_LOOK:"text-look",PROPERTY_TRACKING:"tracking",SCHEMA_CLASS_NAME:{get:function(){return"TextModel"}},codec:{get:function(){return m.DBPropertyCodec.registerCodec(s.SCHEMA_CLASS_NAME,m.DBPropertyCodec.directObjectCodec(s.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(e,t,n,r){return s.init_866e(n,e)}}},defaultText:{get:function(){return null==s.defaultText_&&(s.defaultText_=new A.UTF16Attribute("")),s.defaultText_}},defaultFontColor:{get:function(){return null==s.defaultFontColor_&&(s.defaultFontColor_=new A.FontColorAttribute(M.Host.textModelUtils.defaultColor())),s.defaultFontColor_}},defaultFontName:{get:function(){return null==s.defaultFontName_&&(s.defaultFontName_=new A.FontDescriptorAttribute(M.Host.textModelUtils.defaultFont())),s.defaultFontName_}},defaultFontSize:{get:function(){return null==s.defaultFontSize_&&(s.defaultFontSize_=new A.FontSizeAttribute(M.Host.textModelUtils.defaultFontSize())),s.defaultFontSize_}},defaultFontStrokeColor:{get:function(){return null==s.defaultFontStrokeColor_&&(s.defaultFontStrokeColor_=new A.FontStrokeColorAttribute(M.Host.textModelUtils.defaultColor())),s.defaultFontStrokeColor_}},defaultFontStrokeWidth:{get:function(){return null==s.defaultFontStrokeWidth_&&(s.defaultFontStrokeWidth_=new A.FontStrokeWidthAttribute(y.TextForma.STROKEWIDTH_ZERO)),s.defaultFontStrokeWidth_}},defaultTextLook:{get:function(){return null==s.defaultTextLook_&&(s.defaultTextLook_=new A.TextLookAttribute(T.LockupTextLook.Fill)),s.defaultTextLook_}},defaultTracking:{get:function(){return null==s.defaultTracking_&&(s.defaultTracking_=new A.TrackingAttribute(y.TextForma.TRACKING_ZERO)),s.defaultTracking_}},allAttributeNames_:{get:function(){return void 0===l.allAttributeNames_&&(l.allAttributeNames_=[s.PROPERTY_UTF16_NAME,s.PROPERTY_FONT_COLOR,s.PROPERTY_FONT_NAME,s.PROPERTY_FONT_SIZE,s.PROPERTY_FONT_STROKE_COLOR,s.PROPERTY_FONT_STROKE_WIDTH,s.PROPERTY_TEXT_LOOK,s.PROPERTY_TRACKING]),l.allAttributeNames_}},defaultAttribute:function(e){switch(e){case"text":return s.defaultText;case"font-color":return s.defaultFontColor;case"font-name":return s.defaultFontName;case"font-size":return s.defaultFontSize;case"font-strokecolor":return s.defaultFontStrokeColor;case"font-strokewidth":return s.defaultFontStrokeWidth;case"text-look":return s.defaultTextLook;case"tracking":return s.defaultTracking;default:return null}},_implements:function(e){return"IDBObject"==e||"TheoMessagePublisher"==e}},props:{init_d41d:function(){p.super_init(this,F.PostPublishingObject,F.PostPublishingObject.prototype.init_dd5d,{},{})},init_dd5d:function(e,t){p.super_init(this,F.PostPublishingObject,F.PostPublishingObject.prototype.init_dd5d,e,t)},init_36cd:function(e){p.super_init(this,F.PostPublishingObject,F.PostPublishingObject.prototype.init_dd5d,p.opt(e,(function(e){return e.state.allProperties}))||{},{})},init_866e:function(e,t){p.super_init(this,F.PostPublishingObject,F.PostPublishingObject.prototype.init_866e,e,t)},className:{get:function(){return s.SCHEMA_CLASS_NAME}},textAttr:{get:function(){var e;return(e=p.as(p.opt(p.as(this.get(s.PROPERTY_UTF16_NAME),["Array",A.TextAttribute]),(function(e){return e[0]})),A.UTF16Attribute))||null!=e?e:s.defaultText},set:function(e){this.set(s.PROPERTY_UTF16_NAME,[e])}},fontColor:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_FONT_COLOR),["Array",A.TextAttribute]))?p.as(p.first(e),A.FontColorAttribute):null}},fontName:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_FONT_NAME),["Array",A.TextAttribute]))?p.as(p.first(e),A.FontDescriptorAttribute):null}},fontSize:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_FONT_SIZE),["Array",A.TextAttribute]))?p.as(p.first(e),A.FontSizeAttribute):null}},fontStrokeColor:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_FONT_STROKE_COLOR),["Array",A.TextAttribute]))?p.as(p.first(e),A.FontStrokeColorAttribute):null}},fontStrokeWidth:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_FONT_STROKE_WIDTH),["Array",A.TextAttribute]))?p.as(p.first(e),A.FontStrokeWidthAttribute):null}},textLook:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_TEXT_LOOK),["Array",A.TextAttribute]))?p.as(p.first(e),A.TextLookAttribute):null}},tracking:{get:function(){var e;return(e=p.as(this.get(s.PROPERTY_TRACKING),["Array",A.TextAttribute]))?p.as(p.first(e),A.TrackingAttribute):null}},description:{get:function(){for(var e,t="TextModel: ",n=p.iter(s.allAttributeNames_);!n.done;n.next()){var r=n.value;t+=r+": "+((e=p.opt(p.first(p.as(this.get(r),["Array",A.TextAttribute])),(function(e){return e.description})))||null!=e?e:"<unset>")+" | "}return t}},runArraysByAttrName:{get:function(){for(var e={},t=p.iter(s.allAttributeNames_);!t.done;t.next()){var n=t.value,r=p.clone(p.as(this.get(n),["Array",A.TextAttribute]));if(null!=r)e[n]=p.clone(r);else{var o=s.defaultAttribute(n);null!=o&&(e[n]=[o])}}return e}},text:{get:function(){return this.textAttr.value},set:function(e){e!=this.textAttr.value&&(this.textAttr=new A.UTF16Attribute(e))}},isEqual:function(e){var t;if(t=p.as(e,s)){var n=p.clone(this.runArraysByAttrName),r=p.clone(t.runArraysByAttrName);if(p.count(r)!=p.count(n))return!1;for(var o=p.iter(n);!o.done;o.next()){var a,i=o.key,l=o.value;if(!(a=r[i]))return!1;if(a[0]!=l[0])return!1}return!0}return!1},hash:{get:function(){return p.hashValue(this.text)}},setAttr:function(e,t){var n;if(null!=e)if(t!=s.PROPERTY_UTF16_NAME)if(t==s.PROPERTY_FONT_NAME)(n=p.as(e,h.FontDescriptor))&&(p.eq(h._equality_FontDescriptor_FontDescriptor,n,p.opt(this.fontName,(function(e){return e.value})))||this.set(t,[new A.FontDescriptorAttribute(n)]));else if(t==s.PROPERTY_FONT_SIZE){var r;if(null!=(r=p.as(e,"Double"))){if(r==p.opt(this.fontSize,(function(e){return e.value})))return;if(0==r){g.LegacyCoreAssert.fail("attempted to set font size to 0.0",void 0,"TextModel.setAttr","TextModel.swift",476);var o=new A.FontSizeAttribute(1);this.set(t,[o])}else this.set(t,[new A.FontSizeAttribute(r)])}}else if(t==s.PROPERTY_FONT_COLOR)(a=p.as(e,G.SolidColor))&&(p.eq(G._equality_SolidColor_SolidColor,a,p.opt(this.fontColor,(function(e){return e.value})))||this.set(t,[new A.FontColorAttribute(a)]));else if(t==s.PROPERTY_FONT_STROKE_COLOR){var a;(a=p.as(e,G.SolidColor))&&(p.eq(G._equality_SolidColor_SolidColor,a,p.opt(this.fontStrokeColor,(function(e){return e.value})))||this.set(t,[new A.FontStrokeColorAttribute(a)]))}else if(t==s.PROPERTY_FONT_STROKE_WIDTH){var i;null!=(i=p.as(e,"Double"))&&i!=p.opt(this.fontStrokeWidth,(function(e){return e.value}))&&this.set(t,[new A.FontStrokeWidthAttribute(i)])}else if(t==s.PROPERTY_TEXT_LOOK){var l;null!=(l=p.as(e,T.LockupTextLook))&&l!=p.opt(this.textLook,(function(e){return e.value}))&&this.set(t,[new A.TextLookAttribute(l)])}else if(t==s.PROPERTY_TRACKING){var u;null!=(u=p.as(e,"Double"))&&u!=p.opt(this.tracking,(function(e){return e.value}))&&this.set(t,[new A.TrackingAttribute(u)])}else f.CoreAssert.fail("Missing setAttr code for "+t,void 0,"TextModel.setAttr","TextModel.swift",521);else f.CoreAssert.fail("Attempted to set text through apply!",void 0,"TextModel.setAttr","TextModel.swift",459);else null!=this.get(t)&&this.set(t,null)},match:function(e){for(var t=p.iter(s.allAttributeNames_);!t.done;t.next()){var n=t.value;this.set(n,e.get(n))}this.publish(new c.TextModelDidInsertMessage(this,0,this.text))},clone:function(){return this.fork(P.GUIDUtils.makeGUID())},insertTextUsingSubstring:function(e){var t=e+this.text.substr(0);this.text=t,this.publish(new c.TextModelDidInsertMessage(this,0,e))},replaceText:function(e){this.text=e,this.publish(new c.TextModelDidInsertMessage(this,0,e))}}}),s),c.TextModelDidInsertMessage=(u=function e(t,n,r){this.model=t,this.index=n,this.text=r,v.TheoMessage.call(this,e.TYPE,t)},p.defineClass({name:"TextModelDidInsertMessage",ctor:u,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidInsertMessage"}}}}),u)},"zW/s":function(e,t,n){var r,o,a=t,i=n("oAGj"),s=n("7Pku"),l=n("w/+j"),u=n("fNpk"),c=n("Ird5"),p=n("jfma"),f=n("yjxF"),d=n("Aj79"),m=n("ZA1K"),h=n("WWR6");a.VectorFormaToPGMMapper=(r=function e(){s.FormaToPGMMapper.call(this,e.FORMA_KIND)},o={},i.defineClass({name:"VectorFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=h.VectorForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(e){return r.instance}},props:{makePGMRef:function(e,t,n,r){var o;return(o=i.as(e,h.VectorForma))?l.FormaToPGMUtils.applyAnimations(t,e,new d.PGMReference(new m.PGMSVG(o.formaID,new f.PGMNodeMetadata(o.formaID,"VectorForma"),c.PGMAnimationList.EMPTY,o.bounds,o.contentNode.url),new p.PGMCompositingParams(o.placement,o.style.opacity))):(u.LegacyCoreAssert.fail("VectorFormaToPGMMapper called for something that's not a VectorForma",void 0,"VectorFormaToPGMMapper.makePGMRef","VectorFormaToPGMMapper.swift",49),null)}}}),r)}}]);
//# sourceMappingURL=vendors_npm_spark_6bc71c67-3fa2d067.js.map