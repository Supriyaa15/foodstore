(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[48],{"53P9":function(t,e,o){var a,i=e,n=o("oAGj"),r=o("gXiO");i.GraphemeUtils=(a=function(){r.CoreObject.call(this)},n.defineClass({name:"GraphemeUtils",ctor:a,superName:"CoreObject",statics:{CR:0,LF:1,Control:2,Extend:3,Regional_Indicator:4,SpacingMark:5,L_Type:6,V_Type:7,T_Type:8,LV:9,LVT:10,Other:11,Prepend:12,E_Base:13,E_Modifier:14,ZWJ:15,Glue_After_Zwj:16,E_Base_GAZ:17,NotBreak:0,BreakStart:1,Break:2,BreakLastRegional:3,BreakPenultimateRegional:4,isSurrogate:function(t,e){var o=n.utf16s(t);return 55296<=o[e]&&o[e]<=56319&&56320<=o[e+1]&&o[e+1]<=57343},codePointAt:function(t,e){var o=n.utf16s(t),a=o[e];if(55296<=a&&a<=56319&&e<t.length-1){var i=n.toInt(a);return 56320<=(r=o[e+1])&&r<=57343?n.toInt(1024*(i-55296))+(n.toInt(r)-56320)+65536:i}if(56320<=a&&a<=57343&&e>=1){i=o[e-1];var r=n.toInt(a);return 55296<=i&&i<=56319?n.toInt(1024*(i-55296))+(n.toInt(r)-56320)+65536:r}return n.toInt(a)},shouldBreak:function(t,e,o){var i,r,s,c=[t].concat(e).concat([o]),l=c[c.length-2],u=o,h=(i=c.lastIndexOf(a.E_Modifier))||null!=i?i:0;if(h>1){var p=c.slice(1,h),g=!0;if(p.forEach((function(t){t!=a.Extend&&(g=!1)})),g&&-1==n.indexOf([a.Extend,a.E_Base,a.E_Base_GAZ],t))return a.Break}var d=(r=c.lastIndexOf(a.Regional_Indicator))||null!=r?r:0;if(d>0){p=c.slice(1,d);var f=!0;if(p.forEach((function(t){t!=a.Regional_Indicator&&(f=!1)})),f&&-1==n.indexOf([a.Prepend,a.Regional_Indicator],l))return c.filter((function(t){return t==a.Regional_Indicator}),this).length%2==1?a.BreakLastRegional:a.BreakPenultimateRegional}if(l==a.CR&&u==a.LF)return a.NotBreak;if(l==a.Control||l==a.CR||l==a.LF){var y=!0;return e.forEach((function(t){t!=a.Extend&&(y=!1)})),u==a.E_Modifier&&y?a.Break:a.BreakStart}if(u==a.Control||u==a.CR||u==a.LF)return a.BreakStart;if(l==a.L_Type&&(u==a.L_Type||u==a.V_Type||u==a.LV||u==a.LVT))return a.NotBreak;if(!(l!=a.LV&&l!=a.V_Type||u!=a.V_Type&&u!=a.T_Type))return a.NotBreak;if((l==a.LVT||l==a.T_Type)&&u==a.T_Type)return a.NotBreak;if(u==a.Extend||u==a.ZWJ)return a.NotBreak;if(u==a.SpacingMark)return a.NotBreak;if(l==a.Prepend)return a.NotBreak;var m=(s=c.lastIndexOf(a.Extend))||null!=s?s:0,R=null!=n.indexOf(c,a.Extend)?m-1:c.length-2;return-1!=n.indexOf([a.E_Base,a.E_Base_GAZ],c[R])&&u==a.E_Modifier&&(p=c.slice(R+1,c.length-1),g=!0,p.forEach((function(t){t!=a.Extend&&(g=!1)})),g)||l==a.ZWJ&&-1!=n.indexOf([a.Glue_After_Zwj,a.E_Base_GAZ],u)?a.NotBreak:-1!=n.indexOf(e,a.Regional_Indicator)?a.Break:l==a.Regional_Indicator&&u==a.Regional_Indicator?a.NotBreak:a.BreakStart},nextBreak:function(t,e){if(e<0)return 0;var o=n.utf16s(t).length;if(e>=o-1)return o;for(var i=a.getGraphemeBreakProperty(a.codePointAt(t,e)),r=[],s=n.iter(n.range(e+1,o,!1));!s.done;s.next()){var c=s.value;if(!a.isSurrogate(t,c-1)){var l=a.getGraphemeBreakProperty(a.codePointAt(t,c));if(a.shouldBreak(i,r,l)!=a.NotBreak)return c;r.push(l)}}return o},splitGraphemes:function(t){for(var e=n.utf16s(t),o=[],i=0,r=a.nextBreak(t,i);r<e.length;){var s=e.slice(i,r);0==i&&8235==s[0]||o.push(n.toStringFromCharCodes(s,s.length)),r=a.nextBreak(t,i=r)}if(i<e.length){var c=e.slice(i,e.length);0==i&&8235==c[0]||o.push(n.toStringFromCharCodes(c,c.length))}return o},countGraphemes:function(t){var e=0,o=0,i=a.nextBreak(t,o),r=n.utf16s(t).length;if(r<1)return 0;for(8235==a.codePointAt(t,0)&&(e=-1);i<r;)e+=1,i=a.nextBreak(t,o=i);return o<r&&(e+=1),e},getGraphemeBreakProperty:function(t){return 1536<=t&&t<=1541||1757==t||1807==t||2274==t||3406==t||69821==t||70082<=t&&t<=70083||72250==t||72326<=t&&t<=72329||73030==t?a.Prepend:13==t?a.CR:10==t?a.LF:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173==t||1564==t||6158==t||8203==t||8206<=t&&t<=8207||8232==t||8233==t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293==t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279==t||65520<=t&&t<=65528||65529<=t&&t<=65531||113824<=t&&t<=113827||119155<=t&&t<=119162||917504==t||917505==t||917506<=t&&t<=917535||917632<=t&&t<=917759||918e3<=t&&t<=921599?a.Control:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471==t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479==t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648==t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809==t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2260<=t&&t<=2273||2275<=t&&t<=2306||2362==t||2364==t||2369<=t&&t<=2376||2381==t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433==t||2492==t||2494==t||2497<=t&&t<=2500||2509==t||2519==t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620==t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641==t||2672<=t&&t<=2673||2677==t||2689<=t&&t<=2690||2748==t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765==t||2786<=t&&t<=2787||2810<=t&&t<=2815||2817==t||2876==t||2878==t||2879==t||2881<=t&&t<=2884||2893==t||2902==t||2903==t||2914<=t&&t<=2915||2946==t||3006==t||3008==t||3021==t||3031==t||3072==t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201==t||3260==t||3263==t||3266==t||3270==t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3328<=t&&t<=3329||3387<=t&&t<=3388||3390==t||3393<=t&&t<=3396||3405==t||3415==t||3426<=t&&t<=3427||3530==t||3535==t||3538<=t&&t<=3540||3542==t||3551==t||3633==t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761==t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893==t||3895==t||3897==t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038==t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226==t||4229<=t&&t<=4230||4237==t||4253==t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086==t||6089<=t&&t<=6099||6109==t||6155<=t&&t<=6157||6277<=t&&t<=6278||6313==t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450==t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683==t||6742==t||6744<=t&&t<=6750||6752==t||6754==t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783==t||6832<=t&&t<=6845||6846==t||6912<=t&&t<=6915||6964==t||6966<=t&&t<=6970||6972==t||6978==t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142==t||7144<=t&&t<=7145||7149==t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405==t||7412==t||7416<=t&&t<=7417||7616<=t&&t<=7673||7675<=t&&t<=7679||8204==t||8400<=t&&t<=8412||8413<=t&&t<=8416||8417==t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647==t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607==t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010==t||43014==t||43019==t||43045<=t&&t<=43046||43204<=t&&t<=43205||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443==t||43446<=t&&t<=43449||43452==t||43493==t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587==t||43596==t||43644==t||43696==t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713==t||43756<=t&&t<=43757||43766==t||44005==t||44008==t||44013==t||64286==t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045==t||66272==t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159==t||68325<=t&&t<=68326||69633==t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003==t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196==t||70198<=t&&t<=70199||70206==t||70367==t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460==t||70462==t||70464==t||70487==t||70502<=t&&t<=70508||70512<=t&&t<=70516||70712<=t&&t<=70719||70722<=t&&t<=70724||70726==t||70832==t||70835<=t&&t<=70840||70842==t||70845==t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087==t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229==t||71231<=t&&t<=71232||71339==t||71341==t||71344<=t&&t<=71349||71351==t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||72193<=t&&t<=72198||72201<=t&&t<=72202||72243<=t&&t<=72248||72251<=t&&t<=72254||72263==t||72273<=t&&t<=72278||72281<=t&&t<=72283||72330<=t&&t<=72342||72344<=t&&t<=72345||72752<=t&&t<=72758||72760<=t&&t<=72765||72767==t||72850<=t&&t<=72871||72874<=t&&t<=72880||72882<=t&&t<=72883||72885<=t&&t<=72886||73009<=t&&t<=73014||73018==t||73020<=t&&t<=73021||73023<=t&&t<=73029||73031==t||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141==t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461==t||121476==t||121499<=t&&t<=121503||121505<=t&&t<=121519||122880<=t&&t<=122886||122888<=t&&t<=122904||122907<=t&&t<=122913||122915<=t&&t<=122916||122918<=t&&t<=122922||125136<=t&&t<=125142||125252<=t&&t<=125258||917536<=t&&t<=917631||917760<=t&&t<=917999?a.Extend:127462<=t&&t<=127487?a.Regional_Indicator:2307==t||2363==t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563==t||2622<=t&&t<=2624||2691==t||2750<=t&&t<=2752||2761==t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880==t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007==t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262==t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635==t||3763==t||3902<=t&&t<=3903||3967==t||4145==t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228==t||6070==t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741==t||6743==t||6765<=t&&t<=6770||6916==t||6965==t||6971==t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042==t||7073==t||7078<=t&&t<=7079||7082==t||7143==t||7146<=t&&t<=7148||7150==t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393==t||7410<=t&&t<=7411||7415==t||43043<=t&&t<=43044||43047==t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395==t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597==t||43755==t||43758<=t&&t<=43759||43765==t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012==t||69632==t||69634==t||69762==t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932==t||70018==t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197==t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463==t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70709<=t&&t<=70711||70720<=t&&t<=70721||70725==t||70833<=t&&t<=70834||70841==t||70843<=t&&t<=70844||70846==t||70849==t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102==t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230==t||71340==t||71342<=t&&t<=71343||71350==t||71456<=t&&t<=71457||71462==t||72199<=t&&t<=72200||72249==t||72279<=t&&t<=72280||72343==t||72751==t||72766==t||72873==t||72881==t||72884==t||94033<=t&&t<=94078||119142==t||119149==t?a.SpacingMark:4352<=t&&t<=4447||43360<=t&&t<=43388?a.L_Type:4448<=t&&t<=4519||55216<=t&&t<=55238?a.V_Type:4520<=t&&t<=4607||55243<=t&&t<=55291?a.T_Type:44032==t||44060==t||44088==t||44116==t||44144==t||44172==t||44200==t||44228==t||44256==t||44284==t||44312==t||44340==t||44368==t||44396==t||44424==t||44452==t||44480==t||44508==t||44536==t||44564==t||44592==t||44620==t||44648==t||44676==t||44704==t||44732==t||44760==t||44788==t||44816==t||44844==t||44872==t||44900==t||44928==t||44956==t||44984==t||45012==t||45040==t||45068==t||45096==t||45124==t||45152==t||45180==t||45208==t||45236==t||45264==t||45292==t||45320==t||45348==t||45376==t||45404==t||45432==t||45460==t||45488==t||45516==t||45544==t||45572==t||45600==t||45628==t||45656==t||45684==t||45712==t||45740==t||45768==t||45796==t||45824==t||45852==t||45880==t||45908==t||45936==t||45964==t||45992==t||46020==t||46048==t||46076==t||46104==t||46132==t||46160==t||46188==t||46216==t||46244==t||46272==t||46300==t||46328==t||46356==t||46384==t||46412==t||46440==t||46468==t||46496==t||46524==t||46552==t||46580==t||46608==t||46636==t||46664==t||46692==t||46720==t||46748==t||46776==t||46804==t||46832==t||46860==t||46888==t||46916==t||46944==t||46972==t||47e3==t||47028==t||47056==t||47084==t||47112==t||47140==t||47168==t||47196==t||47224==t||47252==t||47280==t||47308==t||47336==t||47364==t||47392==t||47420==t||47448==t||47476==t||47504==t||47532==t||47560==t||47588==t||47616==t||47644==t||47672==t||47700==t||47728==t||47756==t||47784==t||47812==t||47840==t||47868==t||47896==t||47924==t||47952==t||47980==t||48008==t||48036==t||48064==t||48092==t||48120==t||48148==t||48176==t||48204==t||48232==t||48260==t||48288==t||48316==t||48344==t||48372==t||48400==t||48428==t||48456==t||48484==t||48512==t||48540==t||48568==t||48596==t||48624==t||48652==t||48680==t||48708==t||48736==t||48764==t||48792==t||48820==t||48848==t||48876==t||48904==t||48932==t||48960==t||48988==t||49016==t||49044==t||49072==t||49100==t||49128==t||49156==t||49184==t||49212==t||49240==t||49268==t||49296==t||49324==t||49352==t||49380==t||49408==t||49436==t||49464==t||49492==t||49520==t||49548==t||49576==t||49604==t||49632==t||49660==t||49688==t||49716==t||49744==t||49772==t||49800==t||49828==t||49856==t||49884==t||49912==t||49940==t||49968==t||49996==t||50024==t||50052==t||50080==t||50108==t||50136==t||50164==t||50192==t||50220==t||50248==t||50276==t||50304==t||50332==t||50360==t||50388==t||50416==t||50444==t||50472==t||50500==t||50528==t||50556==t||50584==t||50612==t||50640==t||50668==t||50696==t||50724==t||50752==t||50780==t||50808==t||50836==t||50864==t||50892==t||50920==t||50948==t||50976==t||51004==t||51032==t||51060==t||51088==t||51116==t||51144==t||51172==t||51200==t||51228==t||51256==t||51284==t||51312==t||51340==t||51368==t||51396==t||51424==t||51452==t||51480==t||51508==t||51536==t||51564==t||51592==t||51620==t||51648==t||51676==t||51704==t||51732==t||51760==t||51788==t||51816==t||51844==t||51872==t||51900==t||51928==t||51956==t||51984==t||52012==t||52040==t||52068==t||52096==t||52124==t||52152==t||52180==t||52208==t||52236==t||52264==t||52292==t||52320==t||52348==t||52376==t||52404==t||52432==t||52460==t||52488==t||52516==t||52544==t||52572==t||52600==t||52628==t||52656==t||52684==t||52712==t||52740==t||52768==t||52796==t||52824==t||52852==t||52880==t||52908==t||52936==t||52964==t||52992==t||53020==t||53048==t||53076==t||53104==t||53132==t||53160==t||53188==t||53216==t||53244==t||53272==t||53300==t||53328==t||53356==t||53384==t||53412==t||53440==t||53468==t||53496==t||53524==t||53552==t||53580==t||53608==t||53636==t||53664==t||53692==t||53720==t||53748==t||53776==t||53804==t||53832==t||53860==t||53888==t||53916==t||53944==t||53972==t||54e3==t||54028==t||54056==t||54084==t||54112==t||54140==t||54168==t||54196==t||54224==t||54252==t||54280==t||54308==t||54336==t||54364==t||54392==t||54420==t||54448==t||54476==t||54504==t||54532==t||54560==t||54588==t||54616==t||54644==t||54672==t||54700==t||54728==t||54756==t||54784==t||54812==t||54840==t||54868==t||54896==t||54924==t||54952==t||54980==t||55008==t||55036==t||55064==t||55092==t||55120==t||55148==t||55176==t?a.LV:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?a.LVT:9757==t||9977==t||9994<=t&&t<=9997||127877==t||127938<=t&&t<=127940||127943==t||127946<=t&&t<=127948||128066<=t&&t<=128067||128070<=t&&t<=128080||128110==t||128112<=t&&t<=128120||128124==t||128129<=t&&t<=128131||128133<=t&&t<=128135||128170==t||128372<=t&&t<=128373||128378==t||128400==t||128405<=t&&t<=128406||128581<=t&&t<=128583||128587<=t&&t<=128591||128675==t||128692<=t&&t<=128694||128704==t||128716==t||129304<=t&&t<=129308||129310<=t&&t<=129311||129318==t||129328<=t&&t<=129337||129341<=t&&t<=129342||129489<=t&&t<=129501?a.E_Base:127995<=t&&t<=127999?a.E_Modifier:8205==t?a.ZWJ:9792==t||9794==t||9877<=t&&t<=9878||9992==t||10084==t||127752==t||127806==t||127859==t||127891==t||127908==t||127912==t||127979==t||127981==t||128139==t||128187<=t&&t<=128188||128295==t||128300==t||128488==t||128640==t||128658==t?a.Glue_After_Zwj:128102<=t&&t<=128105?a.E_Base_GAZ:a.Other}}}),a)},"8/a0":function(t,e,o){var a,i=e,n=o("oAGj"),r=o("ascj"),s=o("fNpk"),c=o("JgVS"),l=o("cEEQ"),u=o("c+uM"),h=o("tGKA"),p=o("hgLm"),g=o("oKlP"),d=o("sIWg"),f=o("1NAc");i.BannerDecorationStrategy=(a=function(){this.spacingScalar=.75,c.BaseDecorationStrategy.call(this)},n.defineClass({name:"BannerDecorationStrategy",ctor:a,superName:"BaseDecorationStrategy",statics:{_implements:function(t){return"LockupDecorationStrategy"==t}},props:{easeOutQuad:function(t,e,o,a){var i=t/a;return-o*i*(i-2)+e},easeOut:function(t,e,o){return this.easeOutQuad(o,t,e-t,1)},supportsConfiguration:function(t){return t.style.backing==u.LockupBacking.Banner},decorate:function(t,e){function o(t,e){return new g.TheoPoint(t,e)}var a=t.style,i=a.padding;e.numberOfLines>1&&(i+=a.spacing*this.spacingScalar);var y=e.avgTextPointSize*i,m=[],R=d.TheoRect.fromSize(e.size).transform(e.placement),S=!1;t.style.backing==u.LockupBacking.BannerHorizontal?S=!1:t.style.backing==u.LockupBacking.BannerVertical?S=!0:s.LegacyCoreAssert.fail("Invalid backing shape.",void 0,"BannerDecorationStrategy.decorate","BannerDecorationStrategy.swift",99);var L=c.BaseDecorationStrategy.getHorizontalOffsetForItalicAngle(e.avgLinePointSize*e.typographicBoundingRatios.heightFromBaselineRatio,t.style.font.fontData.italicAngle),v=e.typographicBoundingRatios.backingVerticalOffsetRatio*e.avgLinePointSize,w=this.easeOut(0,v,Math.min(1,i)),k=S?R.minX-y:-4093,A=S?-4093:R.minY-y+w,C=p.TheoPathBuilder.init_d41d(),x=L+(S?R.size.width+2*y:8186),T=S?8186:R.size.height+2*y,I=new f.TheoSize(x,T),B=h.Matrix2D.translationXY(k,A),D=function(t,e,a){var i=p.TheoPathBuilder.init_d41d(),r=e.transformPoint(t.eval(o(0,0)));i.moveTo(r.x,r.y);var s=new d.TheoRect(r.x,r.y,r.x,r.y);if(a)for(var c=n.iter([o(0,1),o(1,1),o(1,0)]);!c.done;c.next()){var l=c.value;r=e.transformPoint(t.eval(l)),i.lineTo(r.x,r.y),s=s.expandToFit(r)}else for(var u=n.iter([o(1,0),o(1,1),o(0,1)]);!u.done;u.next())l=u.value,r=e.transformPoint(t.eval(l)),i.lineTo(r.x,r.y),s=s.expandToFit(r);return i.closePath(),{path:i.path,bounds:s}}(d.TheoRect.fromSize(I),h.Matrix2D.Identity,!0).path;C.addPath(D,e.placement);var z=C.path,M=new f.TheoSize(n.opt(z.bounds,(function(t){return t.width})),n.opt(z.bounds,(function(t){return t.height})));return m.push(l.LockupItem.init_79d9(r.ColorRole.FieldSecondary,M,B,z)),new c.DecorationResults(m)}}}),a)},JEnV:function(t,e,o){var a,i,n,r=e,s=o("oAGj"),c=o("ascj"),l=o("fNpk"),u=o("cEEQ"),h=o("9kak"),p=o("c+uM"),g=o("GFAD"),d=o("tGKA"),f=o("8t9B"),y=o("3UhB"),m=o("uUew"),R=o("1NAc");r.paddingScalar=.6,r.spacingScalar=.75,r.EvenRowHeightsLayoutStrategy=(a=function(t,e){void 0===e&&(e=!1),t==p.LockupAlignment.Left||t==p.LockupAlignment.Right||t==p.LockupAlignment.Center?this.alignment=t:(l.LegacyCoreAssert.fail("Unexpected alignment",{alignment:t},"EvenRowHeightsLayoutStrategy.init","EvenRowHeightsLayoutStrategy.swift",30),this.alignment=p.LockupAlignment.Left),this.capToTargetAspectRatio=e},s.defineClass({name:"EvenRowHeightsLayoutStrategy",ctor:a,superName:"BaseLockupLayoutStrategy",statics:{calcNonCombiningItemCount:function(t,e,o){return e>20||t>300&&o>5?0:6},canCombineItemPair:function(t,e,o,a,i,n,r){var c,l,u;if((c=t.font)&&null!=(l=t.pointSize)&&null!=(u=e.spaceWidth)){var h=c.spaceWidthRatio*l,p=Math.abs(h-u)<.001||0==u,g=s.toInt(r/2);return p&&o&&!a&&t.characterStyle==e.characterStyle&&t.placement.ty==e.placement.ty&&i>g&&i<n-g}return!1},isFirstWordHighlighted:function(t){var e=t.highlightMethod;return e==f.HighlightMethod.EvenRows||e==f.HighlightMethod.Bracket||e==f.HighlightMethod.Manual&&s.opt(s.first(t.characterStyleRanges),(function(t){return 0==t.start}))},isAutoHighlightMethod:function(t){return t==f.HighlightMethod.EvenRows||t==f.HighlightMethod.OddRows||t==f.HighlightMethod.Bracket||t==f.HighlightMethod.InsideBracket},useCharStyleForAutoMethod:function(t,e,o){var a=t%2==(o==f.HighlightMethod.EvenRows?0:1);return o!=f.HighlightMethod.Bracket&&o!=f.HighlightMethod.InsideBracket||(a=0==t||e?o==f.HighlightMethod.Bracket:o==f.HighlightMethod.InsideBracket),a},usesVariableCharacterSizes:function(t){var e,o=t.style;return!(0!=!t.characterStyleRanges.length||!(e=o.characterStyles[f.TypeLockupController.HIGHLIGHT_STYLE])||-1==e.spacing||0==e.spacing)},_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return t.style.layout==p.LockupLayout.Standard&&t.style.alignment==this.alignment},layout:function(t){var e=t.text,o=t.style,i=o.font.fontData,n=o.spacing*r.spacingScalar,l=u.getTypographicBoundingRatiosOfString(e,i,!1),p=f.TypeLockupController.HIGHLIGHT_STYLE,g=s.opt(s.opt(o.characterStyles[p],(function(t){return t.font})),(function(t){return t.fontData})),m=y.TypeLockupUtils.getCharFontAdjust(o,l.hasUppercase),S=!1,L=a.usesVariableCharacterSizes(t);L&&o.characterStyles[p].spacing>1&&((o=t.style.clone()).characterStyles[p].spacing=m,S=!0,null!=g&&(g=i,i=o.characterStyles[p].font.fontData,o.characterStyles[p].font=o.font));var v,w,k,A=t;if(null!=(v=t.preferredFontSize)&&a.isFirstWordHighlighted(t)&&1!=m&&((A=t.clone()).preferredFontSize=v/m),(w=(k=A.expansionSize)?this.getLayoutForFlexibleWidth(A,k,n,l):this.getLayoutForFixedWidth(A,n,l))===h.LockupRowsInfo.EMPTY)return new u.LayoutResults([],new R.TheoSize(0,0),d.Matrix2D.Identity,l,0,u.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e));for(var C=s.clone(w.rows),x=w.widestRow,T=w.averageRowHeight,I=w.primaryFontSize,B=w.height,D=w.width,z=D/(x.aspectRatio/n),M=I*m,b=I*i.capRatio,F=I*l.textVerticalOffsetRatio-b,W=y.TypeLockupUtils.getCharFontYAdjust(o,I,M),H=F,E=0,O=[],_=0,G=s.iter(s.range(0,C.length,!1));!G.done;G.next()){var P=G.value,U=C[P],N=a.calcNonCombiningItemCount(e.length,U.words.length,C.length);if(_=I,L){for(var V=!0,j=s.iter(U.words);!j.done;j.next()){var Y=j.value;if(s.isEmpty(Y.characterStyle)||I==M){V=!1;break}}_=V?M:I}P>0&&(H+=z);var X=U.aspectRatio*T;switch(this.alignment){case 0:E=0;break;case 1:E=D-X+0;break;case 2:E=0+(D-X)/2}for(var Z=0,J=0,q=s.iter(U.words);!q.done;q.next()){Y=q.value;var K=s.isEmpty(Y.characterStyle)||_==M?0:W,Q=s.isEmpty(Y.characterStyle)?I:M,$=Y.aspectRatio*T,tt=E,et=H+0+K,ot=s.isEmpty(Y.characterStyle)?null:Y.characterStyle;S&&(ot=s.isEmpty(Y.characterStyle)?p:null),Z=Y.spaceAspectRatio*T;var at,it=null;null!=(at=Y.complementaryStyleAspectRatio)&&(it=at*T);var nt,rt=null;null!=(nt=Y.complementaryStyleSpaceAspectRatio)&&(rt=nt*T);var st,ct=this.getLockupSize($,b,i.postScriptName),lt=this.getLockupPlacement(tt,et,i.postScriptName),ut=u.LockupItem.init_bc20(c.ColorRole.FieldPrimary,ot,ct,lt,Y.text,s.isEmpty(Y.characterStyle)?i:g||i,Q,I,l,P,Y.rangeInLockup,void 0,Z,it,rt);(st=s.last(O))&&(st.canAppendNext=a.canCombineItemPair(st,ut,A.useOptimization,A.forceLetterForma,J,U.words.length,N)),O.push(ut),J+=1,E+=$+Z}H+=_*l.heightRatio}return new u.LayoutResults(O,new R.TheoSize(D,B),d.Matrix2D.translationXY(0,0),l,x.aspectRatio,u.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e))},getLayoutForFixedWidth:function(t,e,o){var a=t.containerSize.height,i=t.containerSize.width,n=i/a,r=s.clone(this.getCompactedRows(t,n,t.highlightMethod,this.capToTargetAspectRatio||null!=t.preferredFontSize,o));if(0==r.length)return h.LockupRowsInfo.EMPTY;var c,l,u,p=this.getAspectRatioOfAllRows(r,e),g=this.getWidestRowAspectRatio(r);return 0==g.aspectRatio?h.LockupRowsInfo.EMPTY:(null!=(u=t.preferredFontSize)?a=(i=(l=(c=u)*o.heightRatio)*g.aspectRatio)/p:(p<n?i=a*p:a=i/p,c=(l=i/g.aspectRatio)/o.heightRatio),new h.LockupRowsInfo(r,g,c,l,i,a))},getLayoutForFlexibleWidth:function(t,e,o,a){var i=t.containerSize,n=i.width,r=i.height,s=Math.max(e.height,r),c=Math.max(e.width,n),l=n,u=l,p=t.clone();p.containerSize=new R.TheoSize(u,r);for(var g=h.LockupRowsInfo.EMPTY,d=0;d<12;){var f=this.getLayoutForFixedWidth(p,o,a);if(f===h.LockupRowsInfo.EMPTY)break;if(u==l){if(f.height<=s||c-l<5){g=f;break}u=c}else if(u==c){if(f.height>s){g=f;break}u=(c+l)/2}else{if(f.height>s?l=u:(g=f,c=u),c-l<5)break;u=(c+l)/2}p.containerSize=new R.TheoSize(u,r),d+=1}return g},calculateTracking:function(t,e){var o=t.text,a=t.style.font.fontData,i=t.containerSize.width,n=t.style.spacing*r.spacingScalar,c=u.getTypographicBoundingRatiosOfString(o,a,!1),l=0,h=e.width,p=e.height,g=h/p,d=s.clone(this.getCompactedRows(t,g,t.highlightMethod,!1,c,!0));if(0==d.length)return t.style.tracking;if(t.style.tracking>0)for(var f=s.iter(s.range(0,d.length,!1));!f.done;f.next()){var y=f.value;d[y].aspectRatio=0;for(var m=s.iter(s.range(0,d[y].words.length,!1));!m.done;m.next()){var R=m.value;d[y].aspectRatio+=d[y].words[R].aspectRatio,d[y].words[R].canBreak&&R!=d[y].words.length-1?(d[y].words[R].spaceAspectRatio=a.spaceWidthRatio/c.heightRatio,d[y].aspectRatio+=d[y].words[R].spaceAspectRatio):d[y].words[R].spaceAspectRatio=0}}var S=this.getAspectRatioOfAllRows(d,n),L=this.getWidestRowAspectRatio(d),v=L.aspectRatio;if(0==v)return t.style.tracking;var w=(h=p*S)/v,k=v*w;if(k<i){l=this.getSpacing(d,L,w,i,!1).letterSpacing;for(var A=s.iter(d);!A.done;A.next()){var C=A.value;if(C.words.length>1){var x=this.getSpacing(d,C,w,i,!1);x.letterSpacing<l&&(l=x.letterSpacing)}}(l/=w/c.heightRatio)<.01&&(l=0)}else l=-k;return l},calculateLeading:function(t,e){var o=t.containerSize,a=o.width,i=o.height,n=0,c=e.width,l=e.height,h=c/l,p=u.getTypographicBoundingRatiosOfString(t.text,t.style.font.fontData,!1),g=s.clone(this.getCompactedRows(t,h,t.highlightMethod,!1,p));if(g.length<=1)return t.style.spacing;var d=this.getAspectRatioOfAllRows(g,n),f=this.getWidestRowAspectRatio(g);l=c/d;var y=c/f.aspectRatio,m=f.aspectRatio*y;if(l<i){var R=a/((i-l)/(s.toDouble(g.length)-1));n=f.aspectRatio/R/r.spacingScalar}else s.info("fits in width. old tracking is :",t.style.tracking,m,"CW:",a,i,c,l),n=-l;return n},getSpacing:function(t,e,o,a,i){var n=0,r=0,c=0,l=0;if(e.words.length<=1)return{letterSpacing:c,wordSpacing:l};for(var u=s.iter(e.words);!u.done;u.next()){var h=u.value;n+=h.aspectRatio*o+h.spaceAspectRatio*o,0!=h.spaceAspectRatio&&h.canBreak&&(r+=1)}return n-=s.last(e.words).spaceAspectRatio*o,i?l=(a-n)/(s.toDouble(r)-1):(c=(a-n)/(s.toDouble(e.words.length)-1),r>1&&c>0&&(c=(a-n-(l=c)*(s.toDouble(r)-1))/(s.toDouble(e.words.length)-1))),{letterSpacing:c,wordSpacing:l}},getWidestRowAspectRatio:function(t){for(var e=t[0],o=s.iter(t);!o.done;o.next()){var a=o.value;a.aspectRatio>e.aspectRatio&&(e=a)}return e},getAspectRatioOfAllRows:function(t,e){var o=t.length-1,a=this.getWidestRowAspectRatio(t);if(0==a.aspectRatio)return 0;for(var i=a.aspectRatio/e,n=0,r=s.iter(t);!r.done;r.next()){var c=r.value;n+=1/a.aspectRatio*c.rowHeightAdjustRatio}return 1/(n+1/i*s.toDouble(o))},rowsForTargetRowAspectRatio:function(t,e,o,a){var i=[];i.push(new h.LockupRowInfo);for(var n=0,r=0,s=!0,c=t.length,l=0;l<c;){var u=i[n],p=t[l];if(p.isNewLine)u.appendable=!1,i[n]=u,l+=1;else{for(var d=u.aspectRatio,f=p.aspectRatio+p.spaceAspectRatio,y=l;y+1<c&&!t[y].canBreak;)f+=t[y+=1].aspectRatio+t[y].spaceAspectRatio;var m=l>0&&t[l-1].canBreak,R=u.appendable&&(s||!m);if(R&&r>0){var S=d+f;if(a&&S>e)R=!1;else{var L=g.LockupUtils.percentageDiff(e,d);R=g.LockupUtils.percentageDiff(e,S)<L}}if(R){if(!o)for(;!p.canBreak&&l<c;)u.addWord(p),(l+=1)<c&&(p=t[l]);u.addWord(p),r+=1,i[n]=u}else{n+=1,r=1;var v=new h.LockupRowInfo;if(o)s=!(l>0&&!t[l-1].canBreak);else for(;!p.canBreak&&l<c;)v.addWord(p),(l+=1)<c&&(p=t[l]);v.addWord(p),i.push(v)}l+=1}}return i},getCompactedRows:function(t,e,o,i,n,c){void 0===c&&(c=!1);var l=t.text,u=t.style,p=u.font.fontData,g=u.spacing*r.spacingScalar,d=u.tracking,R=c||t.forceLetterForma,S=s.clone(t.characterStyleRanges),L=f.TypeLockupController.HIGHLIGHT_STYLE,v=s.opt(s.opt(u.characterStyles[L],(function(t){return t.font})),(function(t){return t.fontData})),w=y.TypeLockupUtils.getCharFontAdjust(u,n.hasUppercase);t.characterStyleRanges.length>0&&null!=u.characterStyles[L]&&-1!=u.characterStyles[L].spacing&&0!=u.characterStyles[L].spacing&&u.characterStyles[L].spacing>1&&((u=t.style.clone()).characterStyles[L].spacing=w,S=s.clone(y.TypeLockupUtils.invertRanges(t.characterStyleRanges,l.length)),null!=v&&(v=p,p=u.characterStyles[L].font.fontData,u.characterStyles[L].font=u.font));var k=s.clone(y.TypeLockupUtils.computeLockupMeasurements(l,p,n.heightRatio,!1,R,d,S,u.characterStyles,w,t.forceLetterForma)),A=k.length;if(0==A)return[];var C,x=new h.LockupRowInfo(k).aspectRatio,T=.5,I=.6+1.6*x;if(null!=(C=t.preferredFontSize)){var B=C*n.heightRatio,D=t.containerSize.width/B;T=D,I=D}for(var z=s.clone(this.getOptimalCompactedRows(k,x,e,g,T,I,!1,i)),M=0,b=s.iter(k);!b.done;b.next())M+=b.value.isNewLine?0:1;if(null!=t.rowWordLengths&&t.rowWordLengths.reduce((function(t,e){return t+e}),0)==M&&(!t.allowFewerLineBreaks||z.length>=t.rowWordLengths.length)&&(z=s.clone(this.getPrecomputedRows(k,t.rowWordLengths))),null!=u.characterStyles[L]&&null!=u.characterStyles[L].font&&(A>1&&!R||R&&z.length>1)&&a.isAutoHighlightMethod(o)){var F=s.clone(y.TypeLockupUtils.computeLockupMeasurements(l,p,n.heightRatio,!1,R,d,[],{},void 0,t.forceLetterForma)),W=[new m.TextRange(0,s.chars(l).length)],H=s.clone(y.TypeLockupUtils.computeLockupMeasurements(l,v,n.heightRatio,!1,R,d,W,u.characterStyles,w,t.forceLetterForma));z=s.clone(this.getOptimalCompactedAutoRows(F,H,x,e,g,T,I,!1,this.capToTargetAspectRatio||null!=t.preferredFontSize,o))}return z},getOptimalCompactedRows:function(t,e,o,a,i,n,r,c){var l=n-i,u=.25*l,h=i+.5*l,p=i+u,d=n-u,f=s.clone(this.rowsForTargetRowAspectRatio(t,p,r,c));if(i==n)return f;var y=s.clone(this.rowsForTargetRowAspectRatio(t,d,r,c)),m=this.getAspectRatioOfAllRows(f,a),R=this.getAspectRatioOfAllRows(y,a),S=g.LockupUtils.percentageDiff(o,m),L=g.LockupUtils.percentageDiff(o,R);return l<.2?S<L?f:y:S<=L?this.getOptimalCompactedRows(t,e,o,a,i,h,r,c):this.getOptimalCompactedRows(t,e,o,a,h,n,r,c)},getWordForAutoMethod:function(t,e,o,i,n){var r=a.useCharStyleForAutoMethod(o,i,n),s=r?e:t,c=r?t:e;return s.complementaryStyleAspectRatio=c.aspectRatio,s.complementaryStyleSpaceAspectRatio=c.spaceAspectRatio,s},rowsForTargetRowAspectRatioAutoRows:function(t,e,o,a,i,n,r){var c=[];c.push(new h.LockupRowInfo);for(var l=0,u=0,p=!0,d=t.length,y=0,m=0;y<d;){var R=c[l],S=this.getWordForAutoMethod(t[y],e[y],l,y==d-1,r);if(S.isNewLine)R.appendable=!1,c[l]=R,y+=1;else{for(var L=R.aspectRatio,v=S.aspectRatio+S.spaceAspectRatio,w=y;w+1<d&&!t[w].canBreak;)v+=t[w+=1].aspectRatio+t[w].spaceAspectRatio;var k=y>0&&t[y-1].canBreak,A=R.appendable&&(p||!k);if(A&&u>0){var C=L+v;if(n&&C>a)A=!1;else{var x=g.LockupUtils.percentageDiff(a,L);A=g.LockupUtils.percentageDiff(a,C)<x}}if(A){if(!i)for(;!S.canBreak&&y<d;)R.addWord(S),(y+=1)<d&&(S=this.getWordForAutoMethod(t[y],e[y],l,y==d-1,r));R.addWord(S),u+=1,c[l]=R}else{l+=1,m=y,S=this.getWordForAutoMethod(t[y],e[y],l,y==d-1,r),u=1;var T=new h.LockupRowInfo;if(i)p=!(y>0&&!t[y-1].canBreak);else for(;!S.canBreak&&y<d;)T.addWord(S),(y+=1)<d&&(S=this.getWordForAutoMethod(t[y],e[y],l,y==d-1,r));T.addWord(S),c.push(T)}y+=1}}if(r==f.HighlightMethod.Bracket||r==f.HighlightMethod.InsideBracket){for(var I,B,D=new h.LockupRowInfo,z=s.iter(s.range(m,d,!1));!z.done;z.next()){y=z.value;var M=this.getWordForAutoMethod(t[y],e[y],l,!0,r);D.addWord(M)}n&&D.aspectRatio>a?(I=s.last(c))&&(B=I.removeLastWord())&&((D=new h.LockupRowInfo).addWord(B),c.push(D)):c[c.length-1]=D}return c},getOptimalCompactedAutoRows:function(t,e,o,a,i,n,r,c,u,h){l.LegacyCoreAssert.isTrue(t.length==e.length,"application of char style to entire range should not change word count",void 0,"EvenRowHeightsLayoutStrategy.getOptimalCompactedAutoRows","EvenRowHeightsLayoutStrategy.swift",1055);var p=r-n,d=.25*p,f=n+.5*p,y=n+d,m=r-d,R=s.clone(this.rowsForTargetRowAspectRatioAutoRows(t,e,i,y,c,u,h));if(n==r)return R;var S=s.clone(this.rowsForTargetRowAspectRatioAutoRows(t,e,i,m,c,u,h)),L=this.getAspectRatioOfAllRows(R,i),v=this.getAspectRatioOfAllRows(S,i),w=g.LockupUtils.percentageDiff(a,L),k=g.LockupUtils.percentageDiff(a,v);return p<.2?w<k?R:S:w<=k?this.getOptimalCompactedAutoRows(t,e,o,a,i,n,f,c,u,h):this.getOptimalCompactedAutoRows(t,e,o,a,i,f,r,c,u,h)},reflow:function(t,e,o,i){if(s.opt(e,(function(t){return.5!=t.y})))return null;if(a.usesVariableCharacterSizes(o))return null;var n,c,l,u=o.style,h=s.clone(i.itemsForReflow);if((n=s.opt(u.font,(function(t){return t.fontData})))&&(c=s.first(h))&&null!=(l=c.rowPointSize)){var p=o.text;return y.TypeLockupUtils.isTextRightToLeft(p)&&(h=s.reverse(h)),new r.ReflowHelper(this.alignment,p,o.highlightMethod,u,n,i.typographicBoundingRatios,t.width,h,l,o.useOptimization,o.forceLetterForma).perform()}return i}}}),a),r.ReflowHelper=(i=function(t,e,o,a,i,n,c,l,u,h,p){this.alignment=t,this.text=e,this.highlightMethod=o,this.style=a,this.font=i,this.typographicBoundingRatios=n,this.items=s.clone(l),this.canonicalFontSize=u,this.useOptimization=h,this.forceLetterForma=p,this.maxWidth=c;for(var g=s.iter(l);!g.done;g.next()){var d=g.value;null!=this.primaryStyleItem||d.hasCharacterStyle||(this.primaryStyleItem=d),null==this.charStyleItem&&d.hasCharacterStyle&&(this.charStyleItem=d),this.maxWidth=Math.max(this.maxWidth,d.size.width)}this.rowHeight=u*n.heightRatio,this.leadingHeight=a.spacing*r.spacingScalar*this.rowHeight,this.accumulatedHeight=0,this.slugs=[],this.yValues=[]},s.defineClass({name:"ReflowHelper",ctor:i,props:{perform:function(){for(var t=this.createSlug(),e=s.iter(s.toSequence(this.items));!e.done;e.next()){var o,a=e.value,i=a.offset,n=a.element;if(null!=(o=s.opt(n.rangeInLockup,(function(t){return t.start})))){var r=i==this.items.length-1,c=this.shouldForceCharStyle(r),u=o>0&&"\n"==this.text.substr(o-1,1);!u&&t.appendItem(n,c)||(u&&0==this.slugs.length||l.LegacyCoreAssert.isFalse(t.isEmpty,"Could not fit even one word?",void 0,"ReflowHelper.perform","EvenRowHeightsLayoutStrategy.swift",1322),this.appendSlug(t),t=this.createSlug(),c=this.shouldForceCharStyle(r),t.appendItem(n,c)||l.LegacyCoreAssert.fail("Could not fit a word in an empty slug?",void 0,"ReflowHelper.perform","EvenRowHeightsLayoutStrategy.swift",1331))}}return this.highlightMethod!=f.HighlightMethod.Bracket&&this.highlightMethod!=f.HighlightMethod.InsideBracket||(t=t.harmonizeStyleForBracketing()),this.appendSlug(t,!0),this.slugsToResults()},slugsToResults:function(){var t,e,o=this.slugs.map((function(t){return t.width}),this),a=(t=s.max(o))||null!=t?t:0,i=this.accumulatedHeight,n=this.canonicalFontSize*(this.typographicBoundingRatios.textVerticalOffsetRatio-this.font.capRatio),c=0;null!=(e=s.opt(this.charStyleItem,(function(t){return t.pointSize})))&&(c=y.TypeLockupUtils.getCharFontYAdjust(this.style,this.canonicalFontSize,e));for(var l=[],h=s.iter(s.toSequence(this.slugs));!h.done;h.next()){var p=h.value,g=p.offset,f=p.element,m=r.EvenRowHeightsLayoutStrategy.calcNonCombiningItemCount(this.text.length,f.numItems,this.slugs.length);f.output(l,g,n+this.yValues[g],c,a,this.alignment,m,this.useOptimization,this.forceLetterForma)}return new u.LayoutResults(l,new R.TheoSize(a,i),d.Matrix2D.Identity,this.typographicBoundingRatios,a/this.rowHeight,u.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(this.text))},createSlug:function(){return new r.Slug(this.maxWidth,this.canonicalFontSize,this.typographicBoundingRatios,this.primaryStyleItem,this.charStyleItem)},appendSlug:function(t,e){void 0===e&&(e=!1),this.slugs.push(t),this.yValues.push(this.accumulatedHeight),this.accumulatedHeight+=t.height,e||(this.accumulatedHeight+=this.leadingHeight)},shouldForceCharStyle:function(t){return r.EvenRowHeightsLayoutStrategy.isAutoHighlightMethod(this.highlightMethod)?r.EvenRowHeightsLayoutStrategy.useCharStyleForAutoMethod(this.slugs.length,t,this.highlightMethod):null}}}),i),r.Slug=(n=function(t,e,o,a,i){this.items=[],this.lastItemSpaceWidth=0,this.xValues=[],this.width=0,void 0===a&&(a=null),void 0===i&&(i=null),this.maxWidth=t,this.canonicalFontSize=e,this.typographicBoundingRatios=o,this.primaryStyleItem=a,this.charStyleItem=i},s.defineClass({name:"Slug",ctor:n,props:{appendItem:function(t,e){var o;void 0===e&&(e=null);var a,i,n=t;if(null!=e&&t.hasCharacterStyle!=e&&(n=this.flipItemStyle(t)||t),null!=(a=n.pointSize)&&(i=n.font)){var r=n.size.width,s=(o=n.spaceWidth)||null!=o?o:a*i.spaceWidthRatio,c=this.width+this.lastItemSpaceWidth+r;return!!(this.isEmpty||c<=this.maxWidth)&&(this.items.push(n),this.width+=this.lastItemSpaceWidth,this.xValues.push(this.width),this.width+=r,this.lastItemSpaceWidth=s,!0)}return!0},output:function(t,e,o,a,i,n,c,l,h){for(var g=s.iter(s.toSequence(this.items));!g.done;g.next()){var f,y,m,R,S=g.value,L=S.offset,v=S.element;if(null!=(f=v.pointSize)&&null!=(y=v.text)&&(m=v.font)&&(R=v.rangeInLockup)){var w=this.xValues[L];n!=p.LockupAlignment.Center&&n!=p.LockupAlignment.Right||(w+=(i-this.width)/(n==p.LockupAlignment.Center?2:1));var k,A=o+(v.hasCharacterStyle&&this.canonicalFontSize!=f?a:0),C=u.LockupItem.init_bc20(v.colorRole,v.characterStyle,v.size,d.Matrix2D.translationXY(w,A),y,m,f,this.canonicalFontSize,this.typographicBoundingRatios,e,R,void 0,v.spaceWidth,v.complementaryStyleWordWidth,v.complementaryStyleSpaceWidth);(k=s.last(t))&&(k.canAppendNext=r.EvenRowHeightsLayoutStrategy.canCombineItemPair(k,C,l,h,L,this.numItems,c)),t.push(C)}}},harmonizeStyleForBracketing:function(){if(this.items.length<2)return this;var t,e=new n(1e5,this.canonicalFontSize,this.typographicBoundingRatios,this.primaryStyleItem,this.charStyleItem);if(null!=(t=s.opt(s.last(this.items),(function(t){return t.hasCharacterStyle}))))for(var o=s.iter(this.items);!o.done;o.next()){var a=o.value,i=e.appendItem(a,t);l.LegacyCoreAssert.isTrue(i,"Could not fit a word in a super wide slug?",void 0,"Slug.harmonizeStyleForBracketing","EvenRowHeightsLayoutStrategy.swift",1578)}return e},flipItemStyle:function(t){var e,o,a,i,n,r,s,c;if(null!=(a=t.text)&&(i=t.rangeInLockup)&&null!=(n=t.rowIndex)&&(r=t.hasCharacterStyle?this.primaryStyleItem:this.charStyleItem)&&(s=r.font)&&null!=(c=r.pointSize)){var l=t.hasCharacterStyle?"":f.TypeLockupController.HIGHLIGHT_STYLE,h=t.size.width,p=new R.TheoSize((e=t.complementaryStyleWordWidth)||null!=e?e:h,t.size.height),g=h,d=t.spaceWidth,y=(o=t.complementaryStyleSpaceWidth)||null!=o?o:d,m=d;return u.LockupItem.init_bc20(t.colorRole,l,p,t.placement,a,s,c,this.canonicalFontSize,this.typographicBoundingRatios,n,i,void 0,y,g,m)}return null},height:{get:function(){return this.canonicalFontSize*this.typographicBoundingRatios.heightRatio}},isEmpty:{get:function(){return 0==this.items.length}},numItems:{get:function(){return this.items.length}}}}),n)},JgVS:function(t,e,o){var a,i,n=e,r=o("oAGj"),s=o("fNpk");n.DecorationResults=(a=function(t){this.items=r.clone(t)},r.defineClass({name:"DecorationResults",ctor:a}),a),n.LockupDecorationStrategy=r.defineProtocol("LockupDecorationStrategy",{supportsConfiguration:"(LockupConfiguration) -> Boolean",decorate:"(LockupConfiguration, LayoutResults) -> DecorationResults"}),n.BaseDecorationStrategy=(i=function(){},r.defineClass({name:"BaseDecorationStrategy",ctor:i,statics:{getHorizontalOffsetForItalicAngle:function(t,e){var o=Math.abs(e),a=(180-o-90)*Math.PI/180,i=o*Math.PI/180,n=t/Math.sin(a)*Math.sin(i);return(n>t||n<0)&&(n=t/2),n},_implements:function(t){return"LockupDecorationStrategy"==t}},props:{supportsConfiguration:function(t){return s.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseDecorationStrategy.supportsConfiguration","LockupDecorationStrategy.swift",31),!1},decorate:function(t,e){return s.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseDecorationStrategy.decorate","LockupDecorationStrategy.swift",36),new n.DecorationResults([])}}}),i)},PXlJ:function(t,e,o){var a,i=e,n=o("oAGj"),r=o("ascj"),s=o("JgVS"),c=o("cEEQ"),l=o("c+uM"),u=o("tGKA"),h=o("JKVa"),p=o("8t9B"),g=o("sIWg");i.LetterDecorationStrategy=(a=function(){s.BaseDecorationStrategy.call(this)},n.defineClass({name:"LetterDecorationStrategy",ctor:a,superName:"BaseDecorationStrategy",statics:{_implements:function(t){return"LockupDecorationStrategy"==t}},props:{supportsConfiguration:function(t){return l.LockupStyle.isLetterGrid(t.style.layout)},decorate:function(t,e){var o,a,i=[];if(0==e.items.length)return new s.DecorationResults(i);var h,d,f,y,m=t.style,R=n.opt(m.font,(function(t){return t.fontData}));m.backing==l.LockupBacking.SVGBackground&&(h=m.backingArtworkID);var S,L,v,w=null;if(0==!t.characterStyleRanges.length&&(S=m.characterStyles[p.TypeLockupController.HIGHLIGHT_STYLE])&&(d=n.opt(S.font,(function(t){return t.fontData})),(f=S.backing)!=l.LockupBacking.UNSET&&(w=S.padding),f==l.LockupBacking.SVGBackground&&(y=S.backingArtworkID)),null==h&&null==y)return new s.DecorationResults(i);for(var k=n.iter(n.toSequence(e.items));!k.done;k.next()){var A=k.value,C=A.offset,x=A.element,T=R,I=null,B=!1;if(x.characterStyle==p.TypeLockupController.HIGHLIGHT_STYLE?(B=!0,T=d||T,I=f==l.LockupBacking.UNSET?h:y):I=h,null!=I){var D,z,M,b,F=g.TheoRect.fromXYWH(x.placement.tx,x.placement.ty,x.size.width,x.size.height).outsetXY((o=n.opt(x.margins,(function(t){return t.width})))||null!=o?o:0,(a=n.opt(x.margins,(function(t){return t.height})))||null!=a?a:0),W=B?v:L;if(null==W&&(W=this.getSVGConfig(t.style,B?w:null,e,I,x,F),B?v=W:L=W),null!=(D=n.opt(T,(function(t){return t.capRatio})))&&null!=(z=x.pointSize)&&null!=(M=W)&&null!=(b=I)){var H=(e.typographicBoundingRatios.textVerticalOffsetRatio-D)*z,E=u.Matrix2D.translation(M.frame.origin).translate(F.origin).translateXY(0,-H);i.push(c.LockupItem.init_fbd7(r.ColorRole.FieldSecondary,M.frame.size,E,b,M.preScale,C+e.numberOfLines,x.characterStyle))}}}return new s.DecorationResults(i)},getSVGConfig:function(t,e,o,a,i,r){var s,u,p=new c.LayoutResults([i],r.size,o.placement,o.typographicBoundingRatios,o.avgRowAspect),g=t;return null!=(s=e)&&(u=n.as(g.clone(),l.LockupStyle))&&(u.padding=s,g=u),new h.SVGBackgroundDecorationStrategy(a).calcSVGConfiguration(g,p)}}}),a)},UB0O:function(t,e,o){var a,i=e,n=o("oAGj"),r=o("ascj"),s=o("iCxV"),c=o("fNpk"),l=o("cEEQ"),u=o("9kak"),h=o("c+uM"),p=o("GFAD"),g=o("tGKA"),d=o("8t9B"),f=o("3UhB"),y=o("uUew"),m=o("1NAc");i.EvenRowWidthsLayoutStrategy=(a=function(){this.paddingScalar=.6,this.spacingScalar=.75,l.BaseLockupLayoutStrategy.call(this)},n.defineClass({name:"EvenRowWidthsLayoutStrategy",ctor:a,superName:"BaseLockupLayoutStrategy",statics:{getCombinedAspectOfAllRows:function(t,e){for(var o=0,a=n.iter(t);!a.done;a.next())o+=1/a.value.aspectRatio;return e>0?1/(n.toDouble(t.length-1)*(1/e)+o):1/o},getCombinedAspectOfAllRowsFinal:function(t,e){for(var o=0,a=n.iter(t);!a.done;a.next()){var i=a.value,r=i.rowHeightAdjustRatio<1?i.rowHeightAdjustRatio:1;o+=1/i.aspectRatio*(r*r)}return 0!=e?1/(n.toDouble(t.length-1)*(1/e)+o):1/o},getAverageRowAspect:function(t){for(var e=0,o=n.iter(n.range(0,t.length,!1).reversed());!o.done;o.next())e+=t[o.value].aspectRatio;return e/n.toDouble(t.length)},getTallestRowPairIndex:function(t){for(var e=5e3,o=t.length,a=null,i=n.iter(n.range(0,o-1,!1));!i.done;i.next()){var r=i.value,s=t[r];if(s.appendable){var c=t[r+1],l=s.aspectRatio+c.aspectRatio;l<e&&(e=l,a=r)}}return a},aspectDifference:function(t,e){return 1/(1/t-1/e)},aspectStacked:function(t,e){return 1/(1/t+1/e)},mergeRows:function(t,e,o){var a=n.clone(t);c.LegacyCoreAssert.isTrue(e<o,"merging out of order rows",void 0,"EvenRowWidthsLayoutStrategy.mergeRows","EvenRowWidthsLayoutStrategy.swift",607);var i=a[e].words.concat(a[o].words),r=new u.LockupRowInfo(i,a[o].appendable);return a.splice(o,1),a.splice(e,1),a.splice(e,0,r),a},mergeAutoRows:function(t,e,o,i,r,s){for(var c=n.clone(a.mergeRows(t,e,o)),l=s==d.HighlightMethod.EvenRows?0:1,u=0,h=n.iter(n.range(0,c.length,!1));!h.done;h.next()){for(var p=h.value,g=0,f=n.iter(n.range(0,c[p].words.length,!1));!f.done;f.next()){for(var y=f.value;i[u].isNewLine;)u+=1;var m=p%2==l?r[u]:i[u];c[p].words[y]=m,g+=m.aspectRatio,y-1>=0&&(g+=c[p].words[y-1].spaceAspectRatio),u+=1}c[p].aspectRatio=g}return c},compactRowsIntoAspect:function(t,e,o){var i=t.length;if(i<=1)return t;var r=a.getCombinedAspectOfAllRows(t,0),s=a.getTallestRowPairIndex(t);if(null==s)return t;for(var c=s+1,l=t[s],u=t[c],h=l.aspectRatio,g=u.aspectRatio,d=h+g,f=0,y=0,m=n.iter(n.toSequence(t));!m.done;m.next()){var R=m.value,S=R.offset,L=R.element;f+=L.aspectRatio,S==s?y+=d:S!=c&&(y+=L.aspectRatio)}var v=f/n.toDouble(i),w=y/n.toDouble(i)/o,k=v/o/n.toDouble(i-1),A=w/n.toDouble(i-2),C=a.aspectStacked(a.aspectDifference(r,a.aspectStacked(g,h)),d),x=a.aspectStacked(A,C),T=a.aspectStacked(k,r);if(p.LockupUtils.percentageDiff(e,T)<=p.LockupUtils.percentageDiff(e,x))return t;var I=n.clone(a.mergeRows(t,s,c));return a.compactRowsIntoAspect(I,e,o)},compactAutoRowsIntoAspect:function(t,e,o,i,r,s){var c=t.length;if(c<=1)return t;var l=a.getCombinedAspectOfAllRows(t,0),u=a.getTallestRowPairIndex(t);if(null==u)return t;for(var h=u+1,g=t[u],d=t[h],f=g.aspectRatio,y=d.aspectRatio,m=f+y,R=0,S=0,L=n.iter(n.toSequence(t));!L.done;L.next()){var v=L.value,w=v.offset,k=v.element;R+=k.aspectRatio,w==u?S+=m:w!=h&&(S+=k.aspectRatio)}var A=R/n.toDouble(c),C=S/n.toDouble(c)/o,x=A/o/n.toDouble(c-1),T=C/n.toDouble(c-2),I=a.aspectStacked(a.aspectDifference(l,a.aspectStacked(y,f)),m),B=a.aspectStacked(T,I),D=a.aspectStacked(x,l);if(p.LockupUtils.percentageDiff(e,D)<=p.LockupUtils.percentageDiff(e,B))return t;var z=n.clone(a.mergeAutoRows(t,u,h,i,r,s));return a.compactAutoRowsIntoAspect(z,e,o,i,r,s)},getOptimalCompactedAutoRows:function(t,e,o,i,r,s){var c=t.length;if(c<=1)return t;var l=a.getCombinedAspectOfAllRows(t,0),u=a.getTallestRowPairIndex(t);if(null==u)return t;for(var h=u+1,g=t[u],d=t[h],f=g.aspectRatio,y=d.aspectRatio,m=f+y,R=0,S=0,L=n.iter(n.toSequence(t));!L.done;L.next()){var v=L.value,w=v.offset,k=v.element;R+=k.aspectRatio,w==u?S+=m:w!=h&&(S+=k.aspectRatio)}var A=R/n.toDouble(c),C=S/n.toDouble(c)/r,x=A/r/n.toDouble(c-1),T=C/n.toDouble(c-2),I=a.aspectStacked(a.aspectDifference(l,a.aspectStacked(y,f)),m),B=a.aspectStacked(T,I),D=a.aspectStacked(x,l);if(p.LockupUtils.percentageDiff(i,D)<=p.LockupUtils.percentageDiff(i,B))return t;var z=n.clone(a.mergeAutoRows(t,u,h,e,o,s));return a.compactAutoRowsIntoAspect(z,i,r,e,o,s)},_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return t.style.layout==h.LockupLayout.FitJustified},layout:function(t){var e=t.text,o=t.style.font.fontData,i=t.containerSize,c=i.width,u=i.height,p=t.style,R=p.spacing*this.spacingScalar,S=c,L=u,v=S/L,w=n.clone(t.characterStyleRanges);p.alignment!=h.LockupAlignment.UNSET&&n.opt(s.Host.logging,(function(t){return t.warning("Unexpected alignment "+p.alignment+" for fit-justified text")}));var k=o.allCapsAllowed?e.toUpperCase():e,A=l.getTypographicBoundingRatiosOfString(k,o),C=d.TypeLockupController.HIGHLIGHT_STYLE,x=n.opt(n.opt(p.characterStyles[C],(function(t){return t.font})),(function(t){return t.fontData})),T=f.TypeLockupUtils.getCharFontAdjust(p,A.hasUppercase),I=!1;t.characterStyleRanges.length>0&&null!=p.characterStyles[C]&&-1!=p.characterStyles[C].spacing&&0!=p.characterStyles[C].spacing&&p.characterStyles[C].spacing>1&&((p=t.style.clone()).characterStyles[C].spacing=T,w=n.clone(f.TypeLockupUtils.invertRanges(t.characterStyleRanges,e.length)),I=!0,null!=x&&(x=o,o=p.characterStyles[C].font.fontData,p.characterStyles[C].font=p.font));for(var B=n.clone(f.TypeLockupUtils.computeLockupMeasurements(k,o,A.heightRatio,o.allCapsAllowed,t.forceLetterForma,p.tracking,w,p.characterStyles,T,t.forceLetterForma)),D=n.clone(this.getUncompactedRows(B,!1)),z=n.clone(a.compactRowsIntoAspect(D,v,R)),M=0,b=n.iter(B);!b.done;b.next())M+=(ut=b.value).isNewLine?0:1;if(null!=t.rowWordLengths&&t.rowWordLengths.reduce((function(t,e){return t+e}),0)==M&&(!t.allowFewerLineBreaks||z.length>=t.rowWordLengths.length)&&(z=n.clone(this.getPrecomputedRows(B,t.rowWordLengths))),B.length>1&&(t.highlightMethod==d.HighlightMethod.EvenRows||t.highlightMethod==d.HighlightMethod.OddRows)&&""!=C&&null!=p.characterStyles[C]&&null!=x){var F=n.clone(f.TypeLockupUtils.computeLockupMeasurements(k,o,A.heightRatio,o.allCapsAllowed,!1,p.tracking,[],{})),W=[new y.TextRange(0,n.chars(e).length)],H=n.clone(f.TypeLockupUtils.computeLockupMeasurements(k,x,A.heightRatio,o.allCapsAllowed,!1,p.tracking,W,p.characterStyles,T)),E=n.clone(this.getUncompactedAutoRows(F,H,!1,t.highlightMethod));z=n.clone(a.getOptimalCompactedAutoRows(E,F,H,v,R,t.highlightMethod))}if(0==z.length)return new l.LayoutResults([],new m.TheoSize(0,0),g.Matrix2D.Identity,A,0,l.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e));var O=a.getAverageRowAspect(z);if(0==O)return new l.LayoutResults([],new m.TheoSize(0,0),g.Matrix2D.Identity,A,0,l.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e));var _=O/R,G=a.getCombinedAspectOfAllRowsFinal(z,_);G<v?S=L*G:L=S/G;for(var P=S/_,U=L,N=S,V=0,j=0,Y=[],X=n.iter(n.range(0,z.length,!1));!X.done;X.next()){var Z=X.value,J=z[Z],q=J.rowHeightAdjustRatio<1?J.rowHeightAdjustRatio:1,K=S/(isFinite(J.aspectRatio)?J.aspectRatio:1)*q,Q=l.getTypographicBoundingRatiosOfString(J.text,o);j=0,q<1&&(j+=(S-J.aspectRatio*K)/2);for(var $=K/A.heightRatio,tt=$*T,et=$*o.capRatio,ot=A.textVerticalOffsetRatio,at=A.heightRatio,it=Q.textVerticalOffsetRatio,nt=ot-(at/2-Q.heightRatio/2)-it,rt=f.TypeLockupUtils.getCharFontYAdjust(p,$,tt),st=(A.textVerticalOffsetRatio-o.capRatio-nt)*$,ct=V+0,lt=n.iter(n.range(0,J.words.length,!1));!lt.done;lt.next()){var ut,ht=lt.value,pt=(ut=J.words[ht]).aspectRatio*K,gt=ut.spaceAspectRatio*K,dt=j,ft=o.allCapsAllowed?ut.text.toUpperCase():ut.text,yt=n.isEmpty(ut.characterStyle)?$:tt,mt=n.isEmpty(ut.characterStyle)||1!=q?0:rt,Rt=n.isEmpty(ut.characterStyle)?null:ut.characterStyle;I&&(Rt=n.isEmpty(ut.characterStyle)?C:null);var St=this.getLockupSize(pt,et,o.postScriptName),Lt=this.getLockupPlacement(dt,ct+st+mt,o.postScriptName),vt=l.LockupItem.init_bc20(r.ColorRole.FieldPrimary,Rt,St,Lt,ft,n.isEmpty(ut.characterStyle)?o:x||o,yt,$,Q,Z,ut.rangeInLockup);Y.push(vt),j+=pt+gt}V+=q<1?tt*A.heightRatio+P:K+P}return new l.LayoutResults(Y,new m.TheoSize(N,U),g.Matrix2D.translationXY(0,0),A,O,l.BaseLockupLayoutStrategy.createMultipleReturnAnnotations(e))},calculateTracking:function(t,e){var o=t.text,i=t.style.font.fontData,r=t.containerSize,s=r.width,c=r.height,u=t.style,h=u.spacing*this.spacingScalar,p=c,g=i.allCapsAllowed?o.toUpperCase():o,m=l.getTypographicBoundingRatiosOfString(g,i),R=0,S=d.TypeLockupController.HIGHLIGHT_STYLE,L=n.opt(n.opt(u.characterStyles[S],(function(t){return t.font})),(function(t){return t.fontData})),v=1;null!=L&&(v=m.hasUppercase?i.capRatio/L.capRatio:i.meanRatio/L.meanRatio);var w=n.clone(f.TypeLockupUtils.computeLockupMeasurements(g,i,m.heightRatio,!1,!0,u.tracking,t.characterStyleRanges,u.characterStyles,v,t.forceLetterForma));if(0==w.length)return t.style.tracking;var k=n.clone(this.getUncompactedRows(w,!1)),A=e.width/e.height,C=n.clone(a.compactRowsIntoAspect(k,A,h));if(w.length>1&&(t.highlightMethod==d.HighlightMethod.EvenRows||t.highlightMethod==d.HighlightMethod.OddRows)&&""!=S&&null!=u.characterStyles[S]&&null!=L){var x=n.clone(f.TypeLockupUtils.computeLockupMeasurements(g,i,m.heightRatio,i.allCapsAllowed,!0,u.tracking,[],{},void 0,t.forceLetterForma)),T=[new y.TextRange(0,n.chars(o).length)],I=n.clone(f.TypeLockupUtils.computeLockupMeasurements(g,L,m.heightRatio,i.allCapsAllowed,!0,u.tracking,T,u.characterStyles,v,t.forceLetterForma)),B=n.clone(this.getUncompactedAutoRows(x,I,!1,t.highlightMethod));C=n.clone(a.getOptimalCompactedAutoRows(B,x,I,A,h,t.highlightMethod))}if(0==C.length)return t.style.tracking;if(u.tracking>0)for(var D=n.iter(n.range(0,C.length,!1));!D.done;D.next()){var z=D.value;C[z].aspectRatio=0;for(var M=n.iter(n.range(0,C[z].words.length,!1));!M.done;M.next()){var b=M.value;C[z].aspectRatio+=C[z].words[b].aspectRatio,C[z].words[b].canBreak&&b!=C[z].words.length-1?(C[z].words[b].spaceAspectRatio=i.spaceWidthRatio/m.heightRatio,C[z].aspectRatio+=C[z].words[b].spaceAspectRatio):C[z].words[b].spaceAspectRatio=0}}var F=a.getAverageRowAspect(C),W=p*a.getCombinedAspectOfAllRows(C,F/h)/(isFinite(C[0].aspectRatio)?C[0].aspectRatio:1),H=C[0].aspectRatio*W;if(H<s)if(C[0].words.length<=1)R=0;else{var E=(s-H)/n.toDouble(C[0].words.length-1);R=E<1?0:E/(W/m.heightRatio)}else R=-H;return R},calculateLeading:function(t,e){var o=t.text,i=t.style.font.fontData,r=t.containerSize,s=r.width,c=r.height,u=t.style,h=0,p=i.allCapsAllowed?o.toUpperCase():o,g=l.getTypographicBoundingRatiosOfString(p,i),m=u.tracking,R=d.TypeLockupController.HIGHLIGHT_STYLE,S=n.opt(n.opt(u.characterStyles[R],(function(t){return t.font})),(function(t){return t.fontData})),L=1;null!=S&&(L=g.hasUppercase?i.capRatio/S.capRatio:i.meanRatio/S.meanRatio);var v=n.clone(f.TypeLockupUtils.computeLockupMeasurements(p,i,g.heightRatio,!1,!0,m,t.characterStyleRanges,u.characterStyles,L,t.forceLetterForma));if(0==v.length)return t.style.spacing;var w=n.clone(this.getUncompactedRows(v,!1)),k=e.width,A=e.height,C=k/A,x=n.clone(a.compactRowsIntoAspect(w,C,t.style.spacing));if(v.length>1&&(t.highlightMethod==d.HighlightMethod.EvenRows||t.highlightMethod==d.HighlightMethod.OddRows)&&""!=R&&null!=u.characterStyles[R]&&null!=S){var T=n.clone(f.TypeLockupUtils.computeLockupMeasurements(p,i,g.heightRatio,i.allCapsAllowed,!0,u.tracking,[],{},void 0,t.forceLetterForma)),I=[new y.TextRange(0,n.chars(o).length)],B=n.clone(f.TypeLockupUtils.computeLockupMeasurements(p,S,g.heightRatio,i.allCapsAllowed,!0,u.tracking,I,u.characterStyles,L,t.forceLetterForma)),D=n.clone(this.getUncompactedAutoRows(T,B,!1,t.highlightMethod));x=n.clone(a.getOptimalCompactedAutoRows(D,T,B,C,h,t.highlightMethod))}if(x.length<=1)return u.spacing;var z=a.getAverageRowAspect(x);if((A=k/a.getCombinedAspectOfAllRows(x,z/h))<c){var M=s/((c-A)/(n.toDouble(x.length)-1));h=x[0].aspectRatio/M/this.spacingScalar}else h=-A;return h},getUncompactedRows:function(t,e){for(var o=[],a=0;a<t.length;){var i=t[a],n=new u.LockupRowInfo;if(i.isNewLine)o.length>0&&(o[o.length-1].appendable=!1);else{if(!e)for(;!i.canBreak&&a<t.length;)n.addWord(i),(a+=1)<t.length&&(i=t[a]);n.addWord(i),o.push(n)}a+=1}return o},getUncompactedAutoRows:function(t,e,o,a){c.LegacyCoreAssert.isTrue(t.length==e.length,"application of char style to entire range should not change word count",void 0,"EvenRowWidthsLayoutStrategy.getUncompactedAutoRows","EvenRowWidthsLayoutStrategy.swift",827);for(var i=[],n=0,r=a==d.HighlightMethod.EvenRows?0:1,s=0;s<t.length;){var l=n%2==r?e[s]:t[s],h=new u.LockupRowInfo;if(l.isNewLine)i.length>0&&(i[i.length-1].appendable=!1);else{if(!o)for(;!l.canBreak&&s<t.length;)h.addWord(l),(s+=1)<t.length&&(l=t[s]);h.addWord(l),i.push(h),n+=1}s+=1}return i}}}),a)},VDg0:function(t,e,o){var a,i=e,n=o("oAGj"),r=o("8t9B");i.LockupConfiguration=(a=function(t,e,o,a,i,s,c,l,u,h,p,g,d,f,y){void 0===a&&(a=null),void 0===i&&(i=null),void 0===s&&(s=!1),void 0===c&&(c=!1),void 0===l&&(l=null),void 0===u&&(u=null),void 0===h&&(h=r.HighlightMethod.Manual),void 0===p&&(p=[]),void 0===g&&(g=[]),void 0===d&&(d=null),void 0===f&&(f=!1),void 0===y&&(y=!1),this.text=t,this.style=e,this.containerSize=o,this.placement=a,this.parentBounds=i,this.useOptimization=s,this.forceLetterForma=c,this.preferredFontSize=l,this.expansionSize=u,this.highlightMethod=h,this.characterStyleRanges=n.clone(p),this.autoTextRanges=n.clone(g),this.rowWordLengths=n.clone(d),this.allowFewerLineBreaks=f,this.fitContainerToArea=y},n.defineClass({name:"LockupConfiguration",ctor:a,props:{clone:function(){return new a(this.text,this.style,this.containerSize,this.placement,this.parentBounds,this.useOptimization,this.forceLetterForma,this.preferredFontSize,this.expansionSize,this.highlightMethod,this.characterStyleRanges,this.autoTextRanges,this.rowWordLengths,this.allowFewerLineBreaks,this.fitContainerToArea)}}}),a)},Zc5V:function(t,e,o){var a,i=e,n=o("oAGj");i.GridArrangementUtils=(a=function(){},n.defineClass({name:"GridArrangementUtils",ctor:a,statics:{MAX_COLS:100,ASPECT_RATIO_EPSILON:.005,getArrangement:function(t,e,o,i){var r=n.max(i),s=t*n.toDouble(o)/n.toDouble(r),c=a.getBestFittingArrangement(s,e,r),l=c.numCols,u=a.evaluateAllSegments(t,e,o,i,l),h=u.penalty,p=u.aspectRatioDelta;if(0!=h)for(var g=a.getColumnCountSearchRange(o,l),d=n.iter(n.range(g.start,g.end,!0));!d.done;d.next()){var f=d.value;if(f!=c.numCols){var y=(u=a.evaluateAllSegments(t,e,o,i,f)).penalty,m=u.aspectRatioDelta;(y<h||y==h&&m<p)&&(l=f,h=y,p=m)}}return{numRows:a.getNumRows(o,l),numCols:l}},getNumRows:function(t,e){return n.toInt(t/e)+(t%e==0?0:1)},getGridAspectRatio:function(t,e,o){var i=a.getNumRows(e,o);return n.toDouble(o)/n.toDouble(i)*t},getBestFittingArrangement:function(t,e,o,i,r){var s,c;void 0===i&&(i=1),void 0===r&&(r=a.MAX_COLS);var l=Math.min(o,r);if(i<l){s=n.toInt((i+l)/2),c=a.getGridAspectRatio(e,o,s);var u=Math.abs(t-c);if(u>a.ASPECT_RATIO_EPSILON){var h,p=(h=c<t?a.getBestFittingArrangement(t,e,o,s+1,l):a.getBestFittingArrangement(t,e,o,i,s-1)).numCols,g=h.aspectRatio;Math.abs(t-g)<u&&(s=p,c=g)}}else c=a.getGridAspectRatio(e,o,s=i);return{numCols:s,aspectRatio:c}},evaluateAllSegments:function(t,e,o,i,r){for(var s=0,c=0,l=n.iter(i);!l.done;l.next()){var u=l.value;a.evaluateOneSegment(u,r)||(s+=1),c+=1/a.getGridAspectRatio(e,u,r)}return c=1/c,{penalty:s,aspectRatioDelta:Math.abs(t-c)}},evaluateOneSegment:function(t,e){if(t<=e)return!0;var o=t%e;0==o&&(o=e);var i=n.toDouble(o)/n.toDouble(e),r=.5;return e>4&&a.getNumRows(t,e)>2&&(r=.25),i>=r},getColumnCountSearchRange:function(t,e){var o=Math.min(2,n.toInt(t/6));return{start:Math.max(1,e-o),end:Math.min(e+o,t)}}}}),a)},cEEQ:function(t,e,o){var a,i,n,r,s=e,c=o("oAGj"),l=o("EGPT"),u=o("SpAV"),h=o("53P9"),p=o("fNpk"),g=o("9kak"),d=o("tGKA"),f=o("1NAc");s.LockupItemType=c.defineEnum("LockupItemType",{Text:0,Path:1,Artwork:2}),s.LockupItem=(a=function(){this.spaceWidth=null,this.complementaryStyleWordWidth=null,this.complementaryStyleSpaceWidth=null,this.canAppendNext=!1,this.isFullCanvas=!1},c.defineClass({name:"LockupItem",ctor:a,props:{init_447b:function(t){this.type=t.type,this.colorRole=t.colorRole,this.size=t.size,this.placement=t.placement,this.text=t.text,this.font=t.font,this.pointSize=t.pointSize,this.rowPointSize=t.rowPointSize,this.rowIndex=t.rowIndex,this.margins=t.margins,this.typographicBoundingRatios=t.typographicBoundingRatios,this.characterStyle=t.characterStyle,this.rangeInLockup=t.rangeInLockup,this.spaceWidth=t.spaceWidth,this.complementaryStyleWordWidth=t.complementaryStyleWordWidth,this.complementaryStyleSpaceWidth=t.complementaryStyleSpaceWidth,this.canAppendNext=t.canAppendNext,this.path=t.path,this.artworkID=t.artworkID,this.preScale=t.preScale,this.isFullCanvas=t.isFullCanvas},init_bc20:function(t,e,o,a,i,n,r,c,l,u,h,p,g,d,f,y){void 0===p&&(p=null),void 0===g&&(g=null),void 0===d&&(d=null),void 0===f&&(f=null),void 0===y&&(y=!1),this.type=s.LockupItemType.Text,this.colorRole=t,this.characterStyle=e,this.size=o,this.placement=a,this.text=i,this.font=n,this.pointSize=r,this.rowPointSize=c,this.typographicBoundingRatios=l,this.rowIndex=u,this.rangeInLockup=h,this.margins=p,this.spaceWidth=g,this.complementaryStyleWordWidth=d,this.complementaryStyleSpaceWidth=f,this.canAppendNext=y},init_79d9:function(t,e,o,a,i,n,r){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===r&&(r=null),this.type=s.LockupItemType.Path,this.colorRole=t,this.size=e,this.placement=o,this.path=a,this.rowIndex=i,this.isFullCanvas=n,this.characterStyle=r},init_fbd7:function(t,e,o,a,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.type=s.LockupItemType.Artwork,this.colorRole=t,this.size=e,this.placement=o,this.artworkID=a,this.preScale=i,this.rowIndex=n,this.characterStyle=r},clone:function(){return a.init_447b(this)},hasCharacterStyle:{get:function(){var t;return!(!(t=c.isEmpty(this.characterStyle))&&null==t||t)}},append:function(t){var e,o,a,i,n,r,c,l;if(p.LegacyCoreAssert.isTrue(this.type==s.LockupItemType.Text&&t.type==s.LockupItemType.Text,"Only text lockup items support appending",void 0,"LockupItem.append","LockupLayoutStrategy.swift",165),p.LegacyCoreAssert.isTrue(this.canAppendNext,"Asked to append to an item that does not support it",void 0,"LockupItem.append","LockupLayoutStrategy.swift",166),null!=(e=this.text)&&(o=this.rangeInLockup)&&null!=(a=this.spaceWidth)&&null!=(i=this.pointSize)&&(n=this.font)&&null!=(r=t.text)&&(c=t.rangeInLockup)&&null!=(l=t.spaceWidth)){var u=i*n.spaceWidthRatio,h=Math.abs(a-u)<.001?" ":"";this.text=e+h+r,this.rangeInLockup=o.unionWith(c),this.size=new f.TheoSize(this.size.width+a+t.size.width,Math.max(this.size.height,t.size.height)),this.spaceWidth=l,this.canAppendNext=t.canAppendNext}}}}),a),s.descenderCharacters="gjqpyQ",s.shortCharacters=" qweryuopasg;zxcvnm,.*-~",s.tallSpecialsThatAreNotCaps="!^'",s.TypographicBoundingRatios=(i=function(t,e,o,a,i,n){this.sideInsetRatio=t,this.textVerticalOffsetRatio=e,this.backingVerticalOffsetRatio=o,this.heightRatio=a,this.heightFromBaselineRatio=i,this.hasUppercase=n},c.defineClass({name:"TypographicBoundingRatios",ctor:i}),i),s.getTypographicBoundingRatiosOfString=function(t,e,o){void 0===o&&(o=!0);for(var a=t.split("\n").join(),i=!1,n=!1,r=!1,l=!1,u=!1,h=!1,p=!1,g=!1,d=!1,f=e.meanRatio,y=0,m=0,R=0,S=0,L=0,v=0,w=c.iter(c.chars(a));!w.done;w.next()){var k=w.value,A=!1,C=!1;" "!=k&&(m+=1,A||null==e.upperCaseCharsDict[k]?C||null==e.lowerCaseCharsDict[k]||(C=!0):A=!0,!i&&A?i=!0:!n&&C&&(n=!0),null!=e.meanCharsDict[k]?R+=e.meanRatio:null!=e.capCharsDict[k]?(u=!0,R+=e.capRatio):null!=e.ascentCharsDict[k]?(l=!0,R+=e.ascentRatio):null!=e.meanAccentCharsDict[k]?(h=!0,R+=e.meanAccentRatio):null!=e.capAccentCharsDict[k]?(r=!0,R+=e.capAccentRatio):(u=!0,R+=e.capRatio),A&&(m+=1,R+=e.capRatio),A||C||"•"==k||"–"==k||"—"==k||(d=!0),null!=e.tailCharsDict[k]?(p=!0,S+=e.tailRatio):null!=e.descentCharsDict[k]&&(g=!0,S+=e.descentRatio))}if(d&&(f=1),r&&(f=Math.max(f,e.capAccentRatio)),l&&(f=Math.max(f,e.ascentRatio)),u&&(f=Math.max(f,e.capRatio)),h&&(f=Math.max(f,e.meanAccentRatio)),p&&(y=Math.max(y,e.tailRatio)),g&&(y=Math.max(y,e.descentRatio)),m>0&&(L=R/m,v=S/m),o){var x=f-(i?e.capRatio:e.meanRatio);L=f+=Math.max(0,y-x),v=y}var T=y/2,I=e.baselineOffsetRatio+f,B=.8*(f-L-y+v),D=f+y;return new s.TypographicBoundingRatios(T,I,B,D,f,i)},s.LayoutResults=(n=function t(e,o,a,i,n,r){void 0===r&&(r=null),this.itemsForReflow_=c.clone(e),this.items_=c.clone(t.optimize(e));for(var l=0,u=0,h=0,p=1e5,g=0,d=0,f=0,y={},m=c.iter(this.items_);!m.done;m.next()){var R=m.value;R.type==s.LockupItemType.Text&&(l+=R.size.height,u+=R.pointSize,h+=1,R.rowIndex<p&&(p=R.rowIndex),R.rowIndex>g&&(g=R.rowIndex),null==y[R.rowIndex]&&(d+=R.pointSize,y[R.rowIndex]=!0),R.pointSize>f&&(f=R.pointSize))}this.size=o,this.placement=a,this.numberOfLines=g<p?0:g-p+1,this.avgLinePointSize=d/c.toDouble(this.numberOfLines),this.avgTextItemHeight=l/h,this.avgTextPointSize=u/h,this.largestPointSize=f,this.typographicBoundingRatios=i,this.avgRowAspect=n,this.annotations=c.clone(r)},c.defineClass({name:"LayoutResults",ctor:n,statics:{optimize:function(t){for(var e=[],o=null,a=c.iter(t);!a.done;a.next()){var i,n=a.value.clone();n.canAppendNext&&null==o?o=n:(i=o)?(i.append(n),n.canAppendNext||(e.push(i),o=null)):e.push(n)}return(i=o)&&(p.LegacyCoreAssert.fail("Why does the last lockup item claim to be appendable?",void 0,"LayoutResults.optimize","LockupLayoutStrategy.swift",497),e.push(i)),e},mirrorItems:function(t,e){for(var o=[],a=c.iter(t);!a.done;a.next()){var i=a.value;i.placement=d.Matrix2D.scalingXY(-1,1).translateXY(i.size.width,0).concat(i.placement.scaleXY(-1,1)).translateXY(e,0),o.splice(0,0,i)}return o}},props:{items:{get:function(){return this.items_}},itemsForReflow:{get:function(){return this.itemsForReflow_}},flipForRightToLeft:function(){var t=this.size.width;this.items_=c.clone(n.mirrorItems(this.items_,t)),this.itemsForReflow_=c.clone(n.mirrorItems(this.itemsForReflow_,t))}}}),n),s.LockupLayoutStrategy=c.defineProtocol("LockupLayoutStrategy",{supportsConfiguration:"(LockupConfiguration) -> Boolean",layout:"(LockupConfiguration) -> LayoutResults",reflow:"(TheoSize, TheoPoint, LockupConfiguration, LayoutResults) -> LayoutResults",calculateTracking:"(LockupConfiguration, TheoSize) -> Double",calculateLeading:"(LockupConfiguration, TheoSize) -> Double",adjustSizeForLeading:"(TheoRect, LayoutResults, Double, Double) -> TheoSize",adjustSizeForTracking:"(String, LayoutResults, Double, Double) -> TheoSize",annotate:"(String, TheoSize, LockupStyle, Integer) -> Array<Annotation>"}),s.LockupLayoutStrategyFactory=c.defineProtocol("LockupLayoutStrategyFactory",{supportsConfiguration:"(LockupConfiguration) -> Boolean",createForConfiguration:"(LockupConfiguration) -> LockupLayoutStrategy"}),s.BaseLockupLayoutStrategy=(r=function(){this.maxLetterLayoutGraphemeCount=100,this.maxLetterLayoutRecommendedGraphemeCount=50},c.defineClass({name:"BaseLockupLayoutStrategy",ctor:r,statics:{createMultipleReturnAnnotations:function(t){return t.includes("\n\n")?[new l.Annotation(l.AnnotationID.MultipleReturns)]:null},_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return p.LegacyCoreAssert.fail("Implement in subclass",void 0,"BaseLockupLayoutStrategy.supportsConfiguration","LockupLayoutStrategy.swift",624),!1},layout:function(t){return p.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.layout","LockupLayoutStrategy.swift",629),new s.LayoutResults([],new f.TheoSize(0,0),d.Matrix2D.Identity,new s.TypographicBoundingRatios(0,1,0,1,1,!1),0)},reflow:function(t,e,o,a){return null},calculateTracking:function(t,e){return p.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.calculateTracking","LockupLayoutStrategy.swift",658),0},calculateLeading:function(t,e){return p.LegacyCoreAssert.fail("implement in subclass",void 0,"BaseLockupLayoutStrategy.calculateLeading","LockupLayoutStrategy.swift",665),0},adjustSizeForLeading:function(t,e,o,a){var i=a-o;return new f.TheoSize(0,c.toDouble(e.numberOfLines-1)*(t.width/e.avgRowAspect)*(.75*i))},adjustSizeForTracking:function(t,e,o,a){var i,n=0,r=a-o;if(0!=r){for(var s=-1,l=0,u=0,p=0,g=0,d=t,y=c.iter(e.items);!y.done;y.next()){var m=y.value;m.rowIndex!=s?(p>g&&(g=p,n=l),u=m.placement.tx,l=0):l+=r*m.pointSize;var R=h.GraphemeUtils.countGraphemes((i=m.text)||null!=i?i:""),S=R>0?R-1:0;l+=r*m.pointSize*c.toDouble(S),p=m.placement.tx+m.size.width-u,m.rangeInLockup.start>0&&" "==d.substr(m.rangeInLockup.start-1,1)&&u!=m.placement.tx&&(a<0?l-=r*m.pointSize:l+=r*m.pointSize),s=m.rowIndex}p>g&&(g=p,n=l)}return new f.TheoSize(n,0)},getPrecomputedRows:function(t,e){var o=[];if(0==t.length||0==e.length)return o;for(var a=new g.LockupRowInfo,i=0,n=0,r=c.iter(t);!r.done;r.next()){var s=r.value;s.isNewLine||(n>=e[i]&&(o.push(a),a=new g.LockupRowInfo,i+=1,n=0),a.addWord(s),n+=1)}return o.push(a),o},supportsReturns:function(){return!0},supportsMultipleReturns:function(){return!1},annotate:function(t,e,o,a){return this.supportsReturns()&&!this.supportsMultipleReturns()?r.createMultipleReturnAnnotations(t):null},getLockupSize:function(t,e,o){var a=t,i=e;return isNaN(a)&&(u.CoreAssertDebugOnly.fail("BaseLockupLayoutStrategy - width not a number for postscriptname "+o,void 0,"BaseLockupLayoutStrategy.getLockupSize","LockupLayoutStrategy.swift",804),a=20),isNaN(i)&&(u.CoreAssertDebugOnly.fail("BaseLockupLayoutStrategy - height not a number for postscriptname "+o,void 0,"BaseLockupLayoutStrategy.getLockupSize","LockupLayoutStrategy.swift",808),i=20),new f.TheoSize(a,i)},getLockupPlacement:function(t,e,o){var a=t,i=e;return isNaN(a)&&(u.CoreAssertDebugOnly.fail("BaseLockupLayoutStrategy - x not a number for postscriptname "+o,void 0,"BaseLockupLayoutStrategy.getLockupPlacement","LockupLayoutStrategy.swift",817),a=0),isNaN(i)&&(u.CoreAssertDebugOnly.fail("BaseLockupLayoutStrategy - y not a number for postscriptname "+o,void 0,"BaseLockupLayoutStrategy.getLockupPlacement","LockupLayoutStrategy.swift",821),i=0),d.Matrix2D.translationXY(a,i)}}}),r)},d3iY:function(t,e,o){var a,i,n=e,r=o("oAGj"),s=o("EGPT"),c=o("ascj"),l=o("Zc5V"),u=o("53P9"),h=o("iCxV"),p=o("cEEQ"),g=o("9kak"),d=o("c+uM"),f=o("KdeS"),y=o("tGKA"),m=o("8t9B"),R=o("3UhB"),S=o("uUew"),L=o("1NAc");n.LetterGridLayoutStrategy=(a=function(){this.trackingScalar=3,this.spacingScalar=3,p.BaseLockupLayoutStrategy.call(this)},r.defineClass({name:"LetterGridLayoutStrategy",ctor:a,superName:"BaseLockupLayoutStrategy",statics:{_implements:function(t){return"LockupLayoutStrategy"==t}},props:{supportsConfiguration:function(t){return d.LockupStyle.isLetterGrid(t.style.layout)},layout:function(t){var e=[],o=0,a=0,i=0,n=this.getWireframeLayout(t),s=n.typographicBoundingRatios,l=r.clone(n.rows);if(0==!l.length){var u,h,g,d,f=n.horizontalPaddingRatio,S=n.verticalPaddingRatio,v=this.getCombinedAspectRatio(l,f,S),w=t.style,k=n.font;null!=(d=t.preferredFontSize)?(h=(u=d)*s.heightRatio,g=(a=(o=n.constraintWidth)/v)/r.toDouble(l.length)):(v<n.constraintAspectRatio?(a=n.constraintHeight,o=n.constraintHeight*v):(o=n.constraintWidth,a=n.constraintWidth/v),u=(h=(g=a/r.toDouble(l.length))/(1+S))/s.heightRatio);var A=S*h,C=f*h;n.charFontAdjustRatio>1&&(u/=n.charFontAdjustRatio);for(var x=u*k.capRatio,T=u*s.textVerticalOffsetRatio-x,I=r.opt(r.opt(w.characterStyles[m.TypeLockupController.HIGHLIGHT_STYLE],(function(t){return t.font})),(function(t){return t.fontData}))||k,B=u*n.charFontAdjustRatio,D=R.TypeLockupUtils.getCharFontYAdjust(w,u,B),z=A/2+T,M=r.iter(r.toSequence(l));!M.done;M.next()){var b=M.value,F=b.offset,W=b.element;if(0==!W.words.length)for(var H=r.first(W.words).aspectRatio*h,E=H+C,O=C/2+W.colOffsetLeft*E,_=r.iter(W.words);!_.done;_.next()){var G=_.value,P=G.characterStyle,U=P==m.TypeLockupController.HIGHLIGHT_STYLE,N=U?I:k,V=U?B:u,j=G.relativeMargins.multiply(h),Y=j.width,X=O+Y,Z=z+(U?D:0),J=p.LockupItem.init_bc20(c.ColorRole.FieldPrimary,P,new L.TheoSize(H-2*Y,x),y.Matrix2D.translationXY(X,Z),G.text,N,V,u,s,F,G.rangeInLockup,j);e.push(J),O+=E}z+=g}i=this.getWidestRowAndAspectRatio(l,f,S).aspectRatio}return new p.LayoutResults(e,new L.TheoSize(o,a),y.Matrix2D.Identity,s,i,this.getAnnotations(n.renderableItemCount,e.length))},getCharacterStyle:function(t,e,o){for(var a=r.iter(t);!a.done;a.next()){var i=a.value;if(e>=i.start&&e<i.end)return m.TypeLockupController.HIGHLIGHT_STYLE}return""},getWireframeLayout:function(t,e){var o;void 0===e&&(e=null);for(var a=t.text.toUpperCase(),i=t.style,s=i.alignment,c=t.containerSize,d=(e||c).width,y=(e||c).height,v=d/y,w=i.spacing*this.spacingScalar,k=i.tracking*this.trackingScalar,A=i.font.fontData,C=p.getTypographicBoundingRatiosOfString(a,A,!1),x=0,T=0,I=0,B=0,D=[],z=(o=t.preferredFontSize)||null!=o?o:32,M=r.opt(r.opt(i.characterStyles[m.TypeLockupController.HIGHLIGHT_STYLE],(function(t){return t.font})),(function(t){return t.fontData}))||A,b=R.TypeLockupUtils.getCharFontAdjust(i,C.hasUppercase,!1),F=z*b,W=[],H=r.clone(u.GraphemeUtils.splitGraphemes(a)),E=r.iter(r.toSequence(H));!E.done;E.next()){var O=E.value,_=O.offset,G=O.element,P=R.TypeLockupUtils.isWhiteSpace(G);if(P||(I+=1),T<this.maxLetterLayoutGraphemeCount){if(P){if("\n"==G){var U=B;B=_-x,D.push(B-U)}x+=1}else T+=1;var N=this.getCharacterStyle(t.characterStyleRanges,_,_+1)==m.TypeLockupController.HIGHLIGHT_STYLE,V=N?M:A,j=N?F:z,Y=h.Host.textModelUtils.measureBoundsForLayout(G,V,j,0);W.push(Y.width)}}D.push(T-B);var X,Z=Math.max(z,F)*C.heightRatio,J=r.max(W)/Z,q=(J+k)/(1+w);X=null!=t.preferredFontSize?r.toInt(Math.floor(d/(r.max(W)+k*Z))):l.GridArrangementUtils.getArrangement(v,q,T,D).numCols;for(var K=new g.LockupRowInfo,Q=[],$=r.iter(r.toSequence(H));!$.done;$.next()){var tt=$.value;if(_=tt.offset,G=tt.element,R.TypeLockupUtils.isWhiteSpace(G))"\n"==G&&(this.commitRow(Q,K,X,s),K=new g.LockupRowInfo);else{var et=(J-W[_]/Z)/2,ot=new f.LockupWordInfo(G,J,0,this.getCharacterStyle(t.characterStyleRanges,_,_+1),1,!1,!0,new S.TextRange(_,_+1),new L.TheoSize(et,0));if(K.words.length==X&&(this.commitRow(Q,K,X,s),K=new g.LockupRowInfo),K.addWord(ot),0==(T-=1))break}}return this.commitRow(Q,K,X,s),n.WireframeLayout.init_d3ad(A,C,b,d,y,v,k,w,Q,X,I)},commitRow:function(t,e,o,a){var i=r.toDouble(o-e.words.length);a==d.LockupAlignment.Right?e.colOffsetLeft=i:a==d.LockupAlignment.Center&&(e.colOffsetLeft=i/2,e.colOffsetRight=i/2),t.push(e)},calculateTracking:function(t,e){var o=this.getWireframeLayout(t,e),a=r.clone(o.rows);if(0==a.length)return t.style.tracking;var i=this.getCombinedAspectRatio(a,0,o.verticalPaddingRatio),n=o.constraintHeight*i,s=t.containerSize.width;if(n<s){var c=r.toDouble(a.length);return(s-n)/r.toDouble(o.numCols)/(o.constraintHeight/c/(1+o.verticalPaddingRatio))/this.trackingScalar}return-n},calculateLeading:function(t,e){var o=this.getWireframeLayout(t,e),a=r.clone(o.rows);if(0==a.length)return t.style.spacing;var i=this.getCombinedAspectRatio(a,o.horizontalPaddingRatio,0),n=o.constraintWidth/i,s=t.containerSize.height;if(n<s){var c=r.toDouble(a.length),l=n/c;return(s/c-l)/l/this.spacingScalar}return-n},adjustSizeForLeading:function(t,e,o,a){if(0==!e.items.length){var i=a-o,n=r.first(e.items);return new L.TheoSize(0,r.toDouble(e.numberOfLines)*n.rowPointSize*n.typographicBoundingRatios.heightRatio*i*this.spacingScalar)}return L.TheoSize.Zero},adjustSizeForTracking:function(t,e,o,a){var i=this.getNumColsInLayout(e);if(i>0){var n=a-o,s=r.first(e.items);return new L.TheoSize(s.rowPointSize*s.typographicBoundingRatios.heightRatio*n*this.trackingScalar*r.toDouble(i),0)}return L.TheoSize.Zero},getNumColsInLayout:function(t){for(var e=0,o=0,a=-1,i=r.iter(t.items);!i.done;i.next()){var n=i.value;a!=n.rowIndex?(a=n.rowIndex,o=1):o+=1,e=Math.max(e,o)}return e},calculateRowAspectRatio:function(t,e,o,a){var i=r.toDouble(t.words.length),n=i+r.toDouble(a),s=t.aspectRatio*n/i;return(s+=n*e)/(1+o)},getWidestRowAndAspectRatio:function(t,e,o){for(var a,i=0,n=r.iter(t);!n.done;n.next()){var s=n.value,c=this.calculateRowAspectRatio(s,e,o,r.toInt(s.colOffsetLeft+s.colOffsetRight));c>i&&(a=s,i=c)}return{row:a,aspectRatio:i}},getCombinedAspectRatio:function(t,e,o){return this.getWidestRowAndAspectRatio(t,e,o).aspectRatio/r.toDouble(t.length)},supportsMultipleReturns:function(){return!0},annotate:function(t,e,o,a){var i=u.GraphemeUtils.splitGraphemes(t).filter((function(t){return!R.TypeLockupUtils.isWhiteSpace(t)}),this),n=r.clone(this.getAnnotations(i.length,a)),c=r.clone(p.BaseLockupLayoutStrategy.prototype.annotate.call(this,t,e,o,a));return s.AnnotationState.concat(n,c)},getAnnotations:function(t,e){return e<t?[new s.Annotation(s.AnnotationID.TextTruncated,s.AnnotationPriority.High)]:e>this.maxLetterLayoutRecommendedGraphemeCount?[new s.Annotation(s.AnnotationID.TooMuchGridText)]:null}}}),a),n.WireframeLayout=(i=function(){},r.defineClass({name:"WireframeLayout",ctor:i,props:{init_d3ad:function(t,e,o,a,i,n,s,c,l,u,h){this.font=t,this.typographicBoundingRatios=e,this.charFontAdjustRatio=o,this.constraintWidth=a,this.constraintHeight=i,this.constraintAspectRatio=n,this.horizontalPaddingRatio=s,this.verticalPaddingRatio=c,this.rows=r.clone(l),this.numCols=u,this.renderableItemCount=h},init_implicit:function(t,e,o,a,i,n,s,c,l,u,h){this.font=t,this.typographicBoundingRatios=e,this.charFontAdjustRatio=o,this.constraintWidth=a,this.constraintHeight=i,this.constraintAspectRatio=n,this.horizontalPaddingRatio=s,this.verticalPaddingRatio=c,this.rows=r.clone(l),this.numCols=u,this.renderableItemCount=h}}}),i)},fGVU:function(t,e,o){var a,i=e,n=o("oAGj"),r=o("NkBu"),s=o("RkYL"),c=o("sW6f"),l=o("zjod");i.VideoController=(a=function(t,e,o){r.ImageController.call(this,t,e,o)},n.defineClass({name:"VideoController",ctor:a,superName:"ImageController",statics:{KIND:{get:function(){return"video"}}},props:{replaceable:{get:function(){return!0}},duplicatable:{get:function(){return!1}},canMultiSelect:{get:function(){return!1}},contentNode:{get:function(){var t=n.opt(n.as(this.forma,l.VideoForma),(function(t){return t.videoContentID}));return null==t?null:n.as(n.opt(n.opt(this.forma,(function(t){return t.page.document})),(function(e){return e.content.nodeByID(t)})),c.VideoContentNode)}},videoDuration:{get:function(){return n.opt(this.contentNode,(function(t){return t.duration}))||s.TheoTime.Zero}}}}),a)}}]);
//# sourceMappingURL=vendors_npm_spark_eed0fd33-fedfba89.js.map