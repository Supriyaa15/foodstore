(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[44],{"1bhb":function(t,e,n){var o,r=e,i=n("oAGj"),u=n("c9Jm"),s=n("SVjO"),a=n("iCxV"),c=n("K0Rh"),l=n("9YN4");r.ApplyTemplateTest=(o=function(){this.actionSequence_ApplyTemplate=[],this.testDoc_=null,this.rootForma_=null,u.ActionTestBase.call(this)},i.defineClass({name:"ApplyTemplateTest",ctor:o,superName:"ActionTestBase",props:{populateActionSequence:function(t,e,n){var o=this;return n.firstPage.root,XCTAssertNotNil(a.Host.actionTesting),a.Host.actionTesting.templateForDocument(n).then((function(e){var n;return(n=i.as(e,l.TheoDocument))?t.concat([function(){return s.ApplyTemplateAction.init_fc36(n,o.rootForma_,1,o.rootForma_,[])}]):(XCTFail("Could not get Design Template for ApplyTemplateTest"),[])}))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.rootForma_=i.as(n.firstPage.root,c.RootForma)},validateAfterActionSequence:function(t,e){},validateAfterUndo:function(t,e){},validateAfterRedo:function(t,e){}}}),o)},"2S5s":function(t,e,n){var o,r,i,u,s,a,c,l,p,f,h,T,_,m,A,g,d,k,C,y,S,F,x,L,v,D,w,N,I,q,X,E=e,B=n("oAGj"),P=n("Tq01"),R=n("4mEG"),b=n("c9Jm"),U=n("Aj/e"),G=n("yGNn"),K=n("ascj"),M=n("FNB+"),O=n("pnSN"),V=n("iCxV"),z=n("3lr5"),H=n("c+uM"),W=n("434x"),j=n("35Q0"),J=n("cRpU"),Y=n("enh0"),Q=n("Vm85"),Z=n("VJ9E"),$=n("8t9B"),tt=n("oKlP"),et=n("oKI3"),nt=n("uUew"),ot=n("h8Q5");E.SetTextTest=(o=function t(){this.actionSequence_SetText=[function(){return new R.AddTextContentAction(t.initialText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetTextTest",ctor:o,superName:"ActionTestBase",statics:{initialText_:"Some text",changedText_:"New text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var r=this;return G.CorePromise.resolve(t.concat([function(){return new J.SetTextAction(o.changedText_,r.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var r=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(B.opt(B.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(r,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),o.changedText_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,r=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(r),XCTAssertEqual(B.opt(B.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(r,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),o.changedText_)}}}),o),E.SetTextCollapseTest=(r=function(){this.actionSequence_SetTextCollapse=[],this.testDoc_=null,this.testPage_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetTextCollapseTest",ctor:r,superName:"ActionTestBase",statics:{initialText_:"Initial text",firstChangedText_:"First text",secondChangedText_:"Second text",thirdChangedText_:"Third text"},props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=[];return(n=this.lockupForma_)&&o.push((function(){return new J.SetTextCollapseAction(r.firstChangedText_,n,"FirstScope")})),G.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return new J.SetTextCollapseAction(r.secondChangedText_,o.lockupForma_,"SecondScope")}]).concat([function(){return new J.SetTextCollapseAction(r.thirdChangedText_,o.lockupForma_,"SecondScope")}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertEqual(B.opt(B.opt(this.lockupForma_,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(this.lockupForma_,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),r.thirdChangedText_)},validateAfterUndo:function(t,e){XCTAssertEqual(B.opt(B.as(B.opt(this.lockupForma_,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),r.firstChangedText_)},validateAfterRedo:function(t,e){XCTAssertNotNil(this.lockupForma_),XCTAssertEqual(B.opt(B.opt(this.lockupForma_,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(this.lockupForma_,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),r.thirdChangedText_)}}}),r),E.SetFontTest=(i=function t(){this.actionSequence_SetFont=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetFontTest",ctor:i,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(t){var e=Z.TheoFont.init_9e5c(V.Host.fontProvider.getIncludedFonts(z.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldFont_=B.opt(B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetFontAction(i.getTheoFont(i.testFont_))}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),i.testText_),XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),i.testFont_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.oldFont_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),i.testText_),XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),i.testFont_)}}}),i),E.ReplaceMissingFontsTest=(u=function(){this.actionSequence_ReplacingMissingFonts=[],this.testDoc_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ReplaceMissingFontsTest",ctor:u,superName:"ActionTestBase",props:{canRunActionSequence:function(t,e,n){var o=this;return n.firstPage.root.visitAll(M.FormaTraversal.PreOrder,(function(t){var e;if(null==o.psName_&&(e=B.as(t.controller,$.TypeLockupController))){var r=B.opt(B.opt(e.lockupStyle,(function(t){return t.font})),(function(t){return t.fontData.postScriptName}));null!=r&&r!=V.Host.textModelUtils.defaultFont().postScriptName&&(n.recordMissingFont(r),o.psName_=r,o.lockupForma_=t,o.testDoc_=n)}})),null!=this.psName_},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return new W.NudgeAction(new tt.TheoPoint(10,0),[o.lockupForma_])},function(){return new W.NudgeAction(new tt.TheoPoint(-10,0),[o.lockupForma_])},function(){return new J.ReplaceMissingFontsAction},function(){return new W.NudgeAction(new tt.TheoPoint(10,0),[o.lockupForma_])},function(){return new W.NudgeAction(new tt.TheoPoint(-10,0),[o.lockupForma_])}])},getFontRefCount:function(t){var e=this,n=0;return this.testDoc_.firstPage.root.visitAll(M.FormaTraversal.PreOrder,(function(t){var o,r;if(o=B.as(t.style,H.LockupStyle)){var i=B.opt(o.font,(function(t){return t.fontData.postScriptName}));i==e.psName_&&(n+=1),(i=B.opt(B.opt(o.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE],(function(t){return t.font})),(function(t){return t.fontData.postScriptName})))==e.psName_&&(n+=1)}(r=B.as(t,Y.TextForma))&&r.fontDescriptor.postScriptName==e.psName_&&(n+=1)})),n},validateAfterActionSequence:function(t,e){XCTAssertEqual(this.getFontRefCount(this.psName_),0)},validateAfterUndo:function(t,e){XCTAssertTrue(this.getFontRefCount(this.psName_)>0)},validateAfterRedo:function(t,e){XCTAssertEqual(this.getFontRefCount(this.psName_),0)}}}),u),E.ChangeTextAlignmentTest=(s=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeTextAlignmentTest",ctor:s,superName:"ActionTestBase",statics:{testText_:"Some text to align"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldLayout_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=o.oldLayout_==H.LockupLayout.Standard?H.LockupLayout.FitJustified:H.LockupLayout.Standard,o.oldAlignment_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newLayout_==H.LockupLayout.FitJustified?o.newAlignment_=H.LockupAlignment.UNSET:o.newAlignment_=o.oldAlignment_==H.LockupAlignment.Right?H.LockupAlignment.Left:H.LockupAlignment.Right,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),s.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),s.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)}}}),s),E.AutoTextLayoutFromStandardTest=(a=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new R.AddTextContentAction(t.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,b.ActionTestBase.call(this)},B.defineClass({name:"AutoTextLayoutFromStandardTest",ctor:a,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){o.oldLayout_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=H.LockupLayout.Auto,o.oldAlignment_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newAlignment_=H.LockupAlignment.Triplet;var t=new nt.TextRange(11,17);return B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(e){return e.applyCharStyleDirectly(t,t,$.CharStyleApplyMode.Toggle)})),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),a.layoutText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),a.layoutText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)}}}),a),E.AutoTextLayoutShuffleTest=(c=function t(){this.actionSequence_ChangeTextAlignment=[function(){return new R.AddTextContentAction(t.layoutText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,this.oldTextLook_=null,this.newTextLook_=null,this.lastChildForma_=null,b.ActionTestBase.call(this)},B.defineClass({name:"AutoTextLayoutShuffleTest",ctor:c,superName:"ActionTestBase",statics:{layoutText_:"Now is the winter of our discontent"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldLayout_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=H.LockupLayout.Auto,o.oldAlignment_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newAlignment_=H.LockupAlignment.TripletRotatedMiddle,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){return o.newAlignment_=H.LockupAlignment.DropCapFit,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){return o.newAlignment_=H.LockupAlignment.RotateAndFit,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]).concat([function(){o.newAlignment_=H.LockupAlignment.RotateTopEnd,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)}));var t,e=[new nt.TextRange(0,4),new nt.TextRange(11,18)];if(t=B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController))for(var n=B.iter(e);!n.done;n.next()){var r=n.value;t.applyCharStyleDirectly(r,r,$.CharStyleApplyMode.Apply)}return new J.ChangeTextLayoutAndAlignmentAction(o.newLayout_,o.newAlignment_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),c.layoutText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),c.layoutText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_)}}}),c),E.ChangeTextLineSpacingTest=(l=function t(){this.actionSequence_ChangeTextLineSpacing=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeTextLineSpacingTest",ctor:l,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldSpacing_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newSpacing_=2*o.oldSpacing_,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextLineSpacingAction(o.newSpacing_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),l.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.oldSpacing_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),l.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)}}}),l),E.ChangeTextAttributesTest=(p=function t(){this.actionSequence_ChangeTextAttributes=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldSpacing_=null,this.newSpacing_=null,this.oldLayout_=null,this.newLayout_=null,this.oldAlignment_=null,this.newAlignment_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeTextAttributesTest",ctor:p,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldSpacing_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newSpacing_=2*o.oldSpacing_,o.oldLayout_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),o.newLayout_=o.oldLayout_==H.LockupLayout.Standard?H.LockupLayout.FitJustified:H.LockupLayout.Standard,o.oldAlignment_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.alignment})),o.newLayout_==H.LockupLayout.FitJustified?o.newAlignment_=H.LockupAlignment.UNSET:o.newAlignment_=o.oldAlignment_==H.LockupAlignment.Right?H.LockupAlignment.Left:H.LockupAlignment.Right,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.ChangeTextAttributesAction(o.newLayout_,o.newAlignment_,o.newSpacing_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),p.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.oldSpacing_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.oldLayout_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),p.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.layout})),this.newLayout_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newSpacing_)}}}),p),E.MatchSizeTest=(f=function t(){this.actionSequence_SetSize=[function(){return new R.AddTextContentAction(t.testText_)}],this.actionSequence_MatchSize=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.snapValues_=null,this.oldSize_=null,this.newSize_=null,b.ActionTestBase.call(this)},B.defineClass({name:"MatchSizeTest",ctor:f,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){var t;return(t=B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController))&&(o.snapValues_=B.clone(t.getFontSizeSnapValues()),o.oldSize_=t.getSizeSliderValue()),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.MatchSizeAction("actionSequence_SetSize"==e?o.snapValues_[0]:NaN,o.snapValues_,tt.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),this.newSize_=B.opt(B.as(this.lastActionResult,P.DoubleActionResult),(function(t){return t.value})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_),XCTAssertNotNil(this.newSize_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),f.testText_),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.newSize_,.03)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.oldSize_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),f.testText_),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.getSizeSliderValue()})),this.newSize_,.03)}}}),f),E.SetLineBreakTest=(h=function t(){this.actionSequence_SetLineBreak=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLineBreak_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetLineBreakTest",ctor:h,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldLineBreak_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetLineBreakAction(!o.oldLineBreak_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),h.testText_),XCTAssertNotEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),h.testText_),XCTAssertNotEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.lineBreakAtCharacterStyleSizeChange})),this.oldLineBreak_)}}}),h),E.SetNextSpacingSequenceTest=(T=function t(){this.actionSequence_SetNextSpacingSequence=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetNextSpacingSequenceTest",ctor:T,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetNextSpacingSequenceAction(Q.SpacingSequence.NextLetterTracking)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),T.testText_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),T.testText_)}}}),T),E.SetTrackingTest=(_=function t(){this.actionSequence_SetTracking=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTracking_=null,this.newTracking_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetTrackingTest",ctor:_,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldTracking_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),o.newTracking_=2*o.oldTracking_,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetTrackingAction(o.newTracking_,tt.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),_.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.newTracking_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.oldTracking_)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),_.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.tracking})),this.newTracking_)}}}),_),E.SetLeadingTest=(m=function t(){this.actionSequence_SetLeading=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldLeading_=null,this.newLeading_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetLeadingTest",ctor:m,superName:"ActionTestBase",statics:{testText_:"Some text that should be long enough to have multiple lines"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldLeading_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),o.newLeading_=.5*o.oldLeading_,B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetLeadingAction(o.newLeading_,tt.TheoPoint.ZERO)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),m.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newLeading_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertTrue(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing}))==this.oldLeading_)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),m.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.spacing})),this.newLeading_)}}}),m),E.SetPaddingTest=(A=function t(){this.actionSequence_SetPadding=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldPadding_=null,this.newPadding_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetPaddingTest",ctor:A,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return new U.ChangeBackgroundShapeAction([o.textForma],H.LockupBacking.Box,"square_001",!1)},function(){return o.oldPadding_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),o.newPadding_=Math.min(2*o.oldPadding_,1),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetPaddingAction(o.newPadding_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),A.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.newPadding_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.oldPadding_)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),A.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.padding})),this.newPadding_)}}}),A),E.SetTextLookTest=(g=function t(){this.actionSequence_SetTextLook=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldTextLook_=null,this.newTextLook_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetTextLookTest",ctor:g,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o,r=this;return G.CorePromise.resolve(t.concat([function(){return r.oldTextLook_=B.opt(B.opt(B.as(B.opt(r.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),r.newTextLook_=(o=H.LockupTextLook.toCaseValue(r.oldTextLook_+1))||null!=o?o:H.LockupTextLook.KnockoutAndShadow,B.opt(B.opt(r.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(r.textForma)})),new J.SetTextLookAction(r.newTextLook_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),g.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.newTextLook_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.oldTextLook_)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),g.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.textLook})),this.newTextLook_)}}}),g),E.SetTextEffectsAttributesTest=(d=function t(){this.actionSequence_SetTextEffectsAttributes=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldStrokeWeight_=null,this.oldShadowOffset_=null,this.oldShadowAngle_=null,this.newStrokeWeight_=null,this.newShadowOffset_=null,this.newShadowAngle_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetTextEffectsAttributesTest",ctor:d,superName:"ActionTestBase",statics:{testText_:"Some text"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return o.oldStrokeWeight_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),o.oldShadowOffset_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),o.oldShadowAngle_=B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)})),new J.SetTextLookAction(H.LockupTextLook.ShadowAndOutline)},function(){return o.newStrokeWeight_=Math.min(2*o.oldStrokeWeight_,1),o.newShadowOffset_=Math.min(4*o.oldShadowOffset_,1),o.newShadowAngle_=o.oldShadowAngle_>315?o.oldShadowAngle_-315:o.oldShadowAngle_+45,new J.SetTextEffectsAttributesAction(o.newStrokeWeight_,o.newShadowOffset_,o.newShadowAngle_)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),d.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.newShadowAngle_)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}))),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.oldStrokeWeight_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.oldShadowOffset_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.oldShadowAngle_)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),d.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.strokeWeight})),this.newStrokeWeight_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowOffset})),this.newShadowOffset_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.shadowAngle})),this.newShadowAngle_)}}}),d),E.ApplyTextStyleSuggestionTest=(k=function t(){this.actionSequence_ApplyTextStyleSuggestion=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldFont_=null,this.firstAppliedFont_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ApplyTextStyleSuggestionTest",ctor:k,superName:"ActionTestBase",statics:{testText_:"Some text",testFont_:"Bellfort",getTheoFont:function(t){var e=Z.TheoFont.init_9e5c(V.Host.fontProvider.getIncludedFonts(z.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){o.oldFont_=B.opt(B.opt(B.opt(B.as(B.opt(o.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)}));var t=K.ColorTable.init_25f6([{key:K.ColorRole.FieldPrimary,value:"themeColor0"},{key:K.ColorRole.FieldSecondary,value:"themeColor1"}]),e=H.LockupStyle.init_f3fd(1,1,t,k.getTheoFont(k.testFont_),H.LockupStyle.DEFAULT_SPACING,H.LockupStyle.DEFAULT_TRACKING,H.LockupStyle.DEFAULT_PADDING,H.LockupBacking.BannerVertical,null,135,H.LockupLayout.FitJustified,H.LockupAlignment.UNSET,H.LockupTextLook.Shadow,H.LockupStyle.DEFAULT_SHADOWOFFSET,H.LockupStyle.DEFAULT_STROKEWEIGHT,void 0,void 0,!1);return new J.ApplyTextStyleSuggestionAction(e,o.textForma,new ot.WheelSuggestionEvaluator(o.textForma),!1)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.as(this.lastActionResult,P.LockupStyleActionResult);this.firstAppliedFont_=B.opt(B.opt(B.opt(o,(function(t){return t.style})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName}));var r=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(r===this.textForma),XCTAssertEqual(B.opt(B.opt(r,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(r,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),k.testText_),B.opt(o,(function(t){return null!=t.style}))&&XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(r,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.firstAppliedFont_)},validateAfterUndo:function(t,e){var n=this;XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.oldFont_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),k.testText_),null!=this.firstAppliedFont_&&XCTAssertEqual(B.opt(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.font})),(function(t){return t.fontData.postScriptName})),this.firstAppliedFont_)}}}),k),E.ApplyNextTextEmphasisSuggestionTest=(C=function t(){this.actionSequence_ApplyNextTextEmphasisSuggestion=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ApplyNextTextEmphasisSuggestionTest",ctor:C,superName:"ActionTestBase",statics:{testText_:"Even after the glitter fades the feeling remains",testFont_:"Bellfort",getTheoFont:function(t){var e=Z.TheoFont.init_9e5c(V.Host.fontProvider.getIncludedFonts(z.ANY_DOCUMENT).find((function(e){return e.postScriptName==t})));return XCTAssertEqual(e.fontData.postScriptName,t),e}},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.textForma)}));var t=new ot.WheelSuggestionEvaluator(o.textForma);return t.postTextStylesServiceInterface.resetEmphasisSuggestions(!1),new J.ApplyNextTextEmphasisSuggestionAction(o.textForma,t)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),C.testText_);var r=o.controller;XCTAssertTrue(r.charStyleRanges.length>0)},validateAfterUndo:function(t,e){var n=this;XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)})));var o=this.textForma.controller;XCTAssertTrue(0==o.charStyleRanges.length)},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertNotNil(o),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),C.testText_);var r=o.controller;XCTAssertTrue(r.charStyleRanges.length>0)}}}),C),E.ChangeBackgroundShapeTest=(y=function t(){this.actionSequence_ChangeBackgroundShape=[function(){return new R.AddTextContentAction(t.testText_)}],this.testDoc_=null,this.testPage_=null,this.testFormaID_=null,this.oldBacking_=H.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=H.LockupBacking.None,this.newBackingArtworkID_="",b.ActionTestBase.call(this)},B.defineClass({name:"ChangeBackgroundShapeTest",ctor:y,superName:"ActionTestBase",statics:{testText_:"The quick brown fox"},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},populateActionSequence:function(t,e,n){var o,r,i,u,s=this;return G.CorePromise.resolve(t.concat([function(){return s.oldBacking_=(o=B.opt(B.opt(B.as(B.opt(s.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=o?o:H.LockupBacking.None,s.oldBackingArtworkID_=(r=B.opt(B.opt(B.as(B.opt(s.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=r?r:"",s.oldBacking_=(i=B.opt(B.opt(B.as(B.opt(s.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=i?i:H.LockupBacking.None,s.oldBackingArtworkID_=(u=B.opt(B.opt(B.as(B.opt(s.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=u?u:"",s.newBacking_=H.LockupBacking.SVGBackground,s.newBackingArtworkID_="button",B.opt(B.opt(s.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(s.textForma)})),new U.ChangeBackgroundShapeAction([s.textForma],s.newBacking_,s.newBackingArtworkID_,!1)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),y.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})),this.newBacking_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})),this.newBackingArtworkID_)},validateAfterUndo:function(t,e){var n,o,r=this,i=(n=B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=n?n:H.LockupBacking.None;XCTAssertEqual(i,this.oldBacking_);var u=(o=B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=o?o:"";XCTAssertEqual(i,this.oldBacking_),XCTAssertEqual(u,this.oldBackingArtworkID_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(r.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),y.testText_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})),this.newBacking_),XCTAssertEqual(B.opt(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})),this.newBackingArtworkID_)}}}),y),E.ChangeBackgroundShapeCharStyleTest=(S=function t(){this.actionSequence_ChangeBackgroundShapeCharStyle=[function(){return new R.AddTextContentAction(t.testRangeText_)}],this.testDoc_=null,this.testPage_=null,this.rootForma_=null,this.testFormaID_=null,this.oldBacking_=H.LockupBacking.None,this.oldBackingArtworkID_="",this.newBacking_=H.LockupBacking.None,this.newBackingArtworkID_="",this.originalDocumentHasCharStyleAppliedToText_=!1,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeBackgroundShapeCharStyleTest",ctor:S,superName:"ActionTestBase",statics:{testRangeText_:"The quick brown fox jumps over the lazy dog."},props:{textForma:{get:function(){return B.first(B.opt(B.as(this.getActionResult(0),P.FormaActionResult),(function(t){return t.formae})))}},hasTextWithCharStyle:function(){var t=!1;return B.opt(this.rootForma_,(function(e){return e.visitAll(M.FormaTraversal.PreOrder,(function(e){var n,o;(n=B.as(e,O.GroupForma))&&B.as(n.controller,$.TypeLockupController)&&(o=B.opt(B.opt(B.as(n.controller,$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]})))&&o.description.length>0&&(t=!0)}))})),t},matchingLockupStyles:function(t){var e=0;return B.opt(this.rootForma_,(function(n){return n.visitAll(M.FormaTraversal.PreOrder,(function(n){var o,r;(o=B.as(n,O.GroupForma))&&B.as(o.controller,$.TypeLockupController)&&(r=B.opt(B.opt(B.as(o.controller,$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]})))&&r.description==t.description&&(e+=1)}))})),e},populateActionSequence:function(t,e,n){var o,r,i,u=this;return G.CorePromise.resolve(t.concat([function(){u.oldBacking_=(o=B.opt(B.opt(B.as(B.opt(u.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=o?o:H.LockupBacking.None,u.oldBackingArtworkID_=(r=B.opt(B.opt(B.as(B.opt(u.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=r?r:"",u.newBacking_=H.LockupBacking.SVGBackground,u.newBackingArtworkID_="button",B.opt(B.opt(u.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(u.textForma)}));var t=B.opt(B.opt(B.as(B.opt(u.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==t||u.originalDocumentHasCharStyleAppliedToText_&&u.matchingLockupStyles(t)>1);var e=B.clone(B.opt(B.as(B.opt(u.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.charStyleRanges})));return XCTAssertTrue(!(i=0==e.length)&&null==i||i),new J.EnterCharStyleModeAction(u.textForma)},function(){return new U.ChangeBackgroundShapeAction([u.textForma],u.newBacking_,u.newBackingArtworkID_,!0)},function(){return new J.ExitCharStyleModeAction(u.textForma)}]))},setUpActionSequence:function(t,e,n){this.testDoc_=n,this.testPage_=n.firstPage,this.rootForma_=n.firstPage.root,this.originalDocumentHasCharStyleAppliedToText_=this.hasTextWithCharStyle()},validateAfterActionSequence:function(t,e){var n=this;this.testFormaID_=B.opt(this.textForma,(function(t){return t.formaID})),XCTAssertNotNil(this.testDoc_),XCTAssertNotNil(this.testPage_),XCTAssertNotNil(this.testFormaID_);var o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),S.testRangeText_);var r=B.opt(o,(function(t){return t.controller})),i=B.opt(r.lockupStyle,(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var u=B.clone(r.charStyleRanges);XCTAssertFalse(0==u.length),XCTAssertTrue(u.length<S.testRangeText_.length);var s=r.getCharacterStyle($.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)},validateAfterUndo:function(t,e){var n,o,r,i=this,u=(n=B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backing})))||null!=n?n:H.LockupBacking.None;XCTAssertEqual(u,this.oldBacking_);var s=(o=B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.backingArtworkID})))||null!=o?o:"",a=B.opt(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.lockupStyle})),(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertTrue(null==a||this.originalDocumentHasCharStyleAppliedToText_&&this.matchingLockupStyles(a)>0);var c=B.clone(B.opt(B.as(B.opt(this.textForma,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.charStyleRanges})));XCTAssertTrue(!(r=0==c.length)&&null==r||r),XCTAssertEqual(u,this.oldBacking_),XCTAssertEqual(s,this.oldBackingArtworkID_),XCTAssertNil(B.opt(this.testPage_,(function(t){return t.formaByID(i.testFormaID_)})))},validateAfterRedo:function(t,e){var n=this,o=B.opt(this.testPage_,(function(t){return t.formaByID(n.testFormaID_)}));XCTAssertTrue(o===this.textForma),XCTAssertEqual(B.opt(B.opt(o,(function(t){return t.controller})),(function(t){return t.kind})),$.TypeLockupController.KIND),XCTAssertEqual(B.opt(B.as(B.opt(o,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.text})),S.testRangeText_);var r=B.opt(o,(function(t){return t.controller})),i=B.opt(r.lockupStyle,(function(t){return t.characterStyles[$.TypeLockupController.HIGHLIGHT_STYLE]}));XCTAssertNotEqual(i,null);var u=B.clone(r.charStyleRanges);XCTAssertFalse(0==u.length),XCTAssertTrue(u.length<S.testRangeText_.length);var s=r.getCharacterStyle($.TypeLockupController.HIGHLIGHT_STYLE);XCTAssertEqual(s.backing,this.newBacking_),XCTAssertEqual(s.backingArtworkID,this.newBackingArtworkID_)}}}),S),E.SetFontSizeTest=(F=function(){this.actionSequence_SetFontSize=[],b.ActionTestBase.call(this)},B.defineClass({name:"SetFontSizeTest",ctor:F,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=B.first(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),!!(o=this.lockupForma_)&&(this.tlc_=B.as(o.controller,$.TypeLockupController),!0)},prepareDocument:function(t,e){var n,o=[];if(n=this.lockupForma_){var r=Q.TextFacade.getLayoutForForma(n),i=Q.TextFacade.getAlignmentForForma(n),u=H.LockupLayout.Standard,s=i==H.LockupAlignment.Right?H.LockupAlignment.Left:H.LockupAlignment.Right;t.controller.selection.replaceSelection(n),o.push((function(){return new J.ChangeTextLayoutAndAlignmentAction(u,s)})),o.push((function(){return new J.ChangeTextLayoutAndAlignmentAction(r,i)}))}return G.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this;this.initialSize_=this.tlc_.getCurrentFontSize();var r=Q.TextFacade.toUserFontSize(this.initialSize_,this.lockupForma_.page);return this.finalSize_=r<75?100:50,G.CorePromise.resolve([function(){return new J.SetFontSizeAction(o.finalSize_,void 0,[o.lockupForma_])}])},validateAfterActionSequence:function(t,e){var n=Q.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(n,this.finalSize_,.01)},validateAfterUndo:function(t,e){XCTAssertEqual(this.tlc_.getCurrentFontSize(),this.initialSize_)},validateAfterRedo:function(t,e){var n=Q.TextFacade.toUserFontSize(this.tlc_.getCurrentFontSize(),this.lockupForma_.page);XCTAssertEqual(n,this.finalSize_,.01)}}}),F),E.SetRelativeFontScaleTest=(x=function(){this.actionSequence_SetRelativeFontScale=[],this.testDoc_=null,b.ActionTestBase.call(this)},B.defineClass({name:"SetRelativeFontScaleTest",ctor:x,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=B.first(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),!!(o=this.lockupForma_)&&(this.tlc_=B.as(o.controller,$.TypeLockupController),!0)},setUpActionSequence:function(t,e,n){this.testDoc_=n},prepareDocument:function(t,e){var n,o=[];if(n=this.lockupForma_){var r=Q.TextFacade.getLayoutForForma(n),i=Q.TextFacade.getAlignmentForForma(n),u=H.LockupLayout.Standard,s=i==H.LockupAlignment.Right?H.LockupAlignment.Left:H.LockupAlignment.Right;t.controller.selection.replaceSelection(n),o.push((function(){return new J.ChangeTextLayoutAndAlignmentAction(u,s)})),o.push((function(){return new J.ChangeTextLayoutAndAlignmentAction(r,i)}))}return G.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this;return this.initialFontScale_=Q.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma),this.finalFontScale_=.5,G.CorePromise.resolve([function(){return B.opt(B.opt(o.testDoc_,(function(t){return t.controller})),(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.SetRelativeFontScaleAction(o.finalFontScale_)}])},validateAfterActionSequence:function(t,e){var n=Q.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(n,this.finalFontScale_,.01)},validateAfterUndo:function(t,e){var n=Q.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(n,this.initialFontScale_)},validateAfterRedo:function(t,e){var n=Q.TextFacade.getRelativeFontScaleForForma(this.tlc_.forma);XCTAssertEqual(n,this.finalFontScale_,.01)}}}),x),E.ChangeTextLayoutToPathTest=(L=function(){this.actionSequence_ChangeTextLayoutToPath=[],b.ActionTestBase.call(this)},B.defineClass({name:"ChangeTextLayoutToPathTest",ctor:L,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},textLen:{get:function(){return B.opt(this.lockupForma_,(function(t){return t.controller})).text.length}},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),!!(o=this.lockupForma_)&&(this.initialLayout_=Q.TextFacade.getLayoutForForma(o),this.initialAlignment_=Q.TextFacade.getAlignmentForForma(o),!0)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.Path,H.LockupAlignment.UNSET,void 0,et.TextPathID.Circle)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),H.LockupLayout.Path),XCTAssertEqual(Q.TextFacade.getAlignmentForForma(this.lockupForma_),H.LockupAlignment.UNSET)},validateAfterUndo:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_)},validateAfterRedo:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),H.LockupLayout.Path),XCTAssertEqual(Q.TextFacade.getAlignmentForForma(this.lockupForma_),H.LockupAlignment.UNSET)}}}),L),E.EditCurvedTextShortTest=(v=function(){this.actionSequence_EditCurvedTextShort=[],b.ActionTestBase.call(this)},B.defineClass({name:"EditCurvedTextShortTest",ctor:v,superName:"ActionTestBase",statics:{testText_:"A"},props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=this,r=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.Path&&((n=B.as(B.opt(this.lockupForma_,(function(t){return t.style})),H.LockupStyle))&&(j.ShapeLibrary.isBackingShapePathCompatible(et.TextPathID.Circle,n.backing,n.backingArtworkID)||r.push((function(){return new U.ChangeBackgroundShapeAction([o.lockupForma_],H.LockupBacking.None,"",!1)}))),r.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.Path,H.LockupAlignment.UNSET,void 0,et.TextPathID.Circle)}))),G.CorePromise.resolve(r)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.SetTextAction(v.testText_,o.lockupForma_)}]))}}}),v),E.EditCurvedTextLongTest=(D=function(){this.actionSequence_EditCurvedTextLong=[],b.ActionTestBase.call(this)},B.defineClass({name:"EditCurvedTextLongTest",ctor:D,superName:"ActionTestBase",statics:{testText_:"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness."},props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=this,r=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.Path&&((n=B.as(B.opt(this.lockupForma_,(function(t){return t.style})),H.LockupStyle))&&(j.ShapeLibrary.isBackingShapePathCompatible(et.TextPathID.Circle,n.backing,n.backingArtworkID)||r.push((function(){return new U.ChangeBackgroundShapeAction([o.lockupForma_],H.LockupBacking.None,"",!1)}))),r.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.Path,H.LockupAlignment.UNSET,void 0,et.TextPathID.Circle)}))),G.CorePromise.resolve(r)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve(t.concat([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.SetTextAction(D.testText_,o.lockupForma_)}]))}}}),D),E.ChangeCurvedTextTrackingTest=(w=function(){this.actionSequence_ChangeCurvedTextTracking=[],this.initialTracking_=0,this.finalTracking_=0,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeCurvedTextTrackingTest",ctor:w,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=this,r=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.Path&&((n=B.as(B.opt(this.lockupForma_,(function(t){return t.style})),H.LockupStyle))&&(j.ShapeLibrary.isBackingShapePathCompatible(et.TextPathID.Circle,n.backing,n.backingArtworkID)||r.push((function(){return new U.ChangeBackgroundShapeAction([o.lockupForma_],H.LockupBacking.None,"",!1)}))),r.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.Path,H.LockupAlignment.UNSET,void 0,et.TextPathID.Circle)}))),G.CorePromise.resolve(r)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialTracking_=Q.TextFacade.getTrackingForForma(o.lockupForma_),o.finalTracking_=2*o.initialTracking_+.35,new J.SetTrackingAction(o.finalTracking_,new tt.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),w),E.ChangeTextLayoutToLetterGridTest=(N=function(){this.actionSequence_ChangeTextLayoutToLetterGrid=[],b.ActionTestBase.call(this)},B.defineClass({name:"ChangeTextLayoutToLetterGridTest",ctor:N,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},textLen:{get:function(){return B.opt(this.lockupForma_,(function(t){return t.controller})).text.length}},canRunActionSequence:function(t,e,n){var o;return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),!!(o=this.lockupForma_)&&(this.initialLayout_=Q.TextFacade.getLayoutForForma(o),this.initialAlignment_=Q.TextFacade.getAlignmentForForma(o),!0)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.LetterGrid,H.LockupAlignment.SKIP)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),H.LockupLayout.LetterGrid),XCTAssertEqual(Q.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterUndo:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),this.initialLayout_),XCTAssertEqual(Q.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)},validateAfterRedo:function(t,e){XCTAssertEqual(Q.TextFacade.getLayoutForForma(this.lockupForma_),H.LockupLayout.LetterGrid),XCTAssertEqual(Q.TextFacade.getAlignmentForForma(this.lockupForma_),this.initialAlignment_)}}}),N),E.ChangeLetterGridShapeTest=(I=function(){this.actionSequence_ChangeLetterGridShape=[],this.initialBacking_=null,this.initialArtworkId_=null,this.finalBacking_=null,this.finalArtworkId_=null,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeLetterGridShapeTest",ctor:I,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n=this,o=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.Path&&o.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(n.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.LetterGrid,H.LockupAlignment.SKIP)})),G.CorePromise.resolve(o)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialBacking_=o.lockupForma_.style.backing,o.initialArtworkId_=o.lockupForma_.style.backingArtworkID,o.finalBacking_=H.LockupBacking.SVGBackground,o.finalArtworkId_="circle_001"==o.initialArtworkId_?"square_001":"circle_001",new U.ChangeBackgroundShapeAction([o.lockupForma_],o.finalBacking_,o.finalArtworkId_,!1)}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)},validateAfterUndo:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.initialBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.initialArtworkId_)},validateAfterRedo:function(t,e){XCTAssertEqual(this.lockupForma_.style.backing,this.finalBacking_),XCTAssertEqual(this.lockupForma_.style.backingArtworkID,this.finalArtworkId_)}}}),I),E.ChangeLetterGridTrackingTest=(q=function(){this.actionSequence_ChangeLetterGridTracking=[],this.initialTracking_=0,this.finalTracking_=0,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeLetterGridTrackingTest",ctor:q,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=this,r=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.LetterGrid&&((n=B.as(B.opt(this.lockupForma_,(function(t){return t.style})),H.LockupStyle))&&(j.ShapeLibrary.isBackingShapeLetterGridCompatible(n.backing,n.backingArtworkID)||r.push((function(){return new U.ChangeBackgroundShapeAction([o.lockupForma_],H.LockupBacking.None,"",!1)}))),r.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.LetterGrid,H.LockupAlignment.SKIP)}))),G.CorePromise.resolve(r)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialTracking_=Q.TextFacade.getTrackingForForma(o.lockupForma_),o.finalTracking_=2*o.initialTracking_+.35,new J.SetTrackingAction(o.finalTracking_,new tt.TheoPoint(.5,.5))}])},validateAfterActionSequence:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)},validateAfterUndo:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.initialTracking_)},validateAfterRedo:function(t,e){XCTAssertEqual(Q.TextFacade.getTrackingForForma(this.lockupForma_),this.finalTracking_)}}}),q),E.ChangeLetterGridSpacingTest=(X=function(){this.actionSequence_ChangeLetterGridSpacing=[],this.initialLineSpacing_=0,this.finalLineSpacing_=0,b.ActionTestBase.call(this)},B.defineClass({name:"ChangeLetterGridSpacingTest",ctor:X,superName:"ActionTestBase",props:{tearDown:function(){this.lockupForma_=null,b.ActionTestBase.prototype.tearDown.call(this)},canRunActionSequence:function(t,e,n){return this.lockupForma_=this.findLargestForma(this.allSelectableFormae(n,(function(t){return B.opt(t.controller,(function(t){return t.kind==$.TypeLockupController.KIND}))}))),null!=this.lockupForma_},prepareDocument:function(t,e){var n,o=this,r=[];return Q.TextFacade.getLayoutForForma(this.lockupForma_)!=H.LockupLayout.LetterGrid&&((n=B.as(B.opt(this.lockupForma_,(function(t){return t.style})),H.LockupStyle))&&(j.ShapeLibrary.isBackingShapeLetterGridCompatible(n.backing,n.backingArtworkID)||r.push((function(){return new U.ChangeBackgroundShapeAction([o.lockupForma_],H.LockupBacking.None,"",!1)}))),r.push((function(){return B.opt(t.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),new J.ChangeTextLayoutAndAlignmentAction(H.LockupLayout.LetterGrid,H.LockupAlignment.SKIP)}))),G.CorePromise.resolve(r)},populateActionSequence:function(t,e,n){var o=this;return G.CorePromise.resolve([function(){return B.opt(n.controller,(function(t){return t.selection.replaceSelection(o.lockupForma_)})),o.initialLineSpacing_=Q.TextFacade.getLineSpacingForForma(o.lockupForma_),o.finalLineSpacing_=2*o.initialLineSpacing_+.35,new J.SetLeadingAction(o.finalLineSpacing_,new tt.TheoPoint(.5,.5))}])},hasMultipleLines:function(){var t;return((t=B.opt(B.as(B.opt(this.lockupForma_,(function(t){return t.controller})),$.TypeLockupController),(function(t){return t.numLines()})))||null!=t?t:1)>1},validateAfterActionSequence:function(t,e){this.hasMultipleLines()&&XCTAssertEqual(Q.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)},validateAfterUndo:function(t,e){XCTAssertEqual(Q.TextFacade.getLineSpacingForForma(this.lockupForma_),this.initialLineSpacing_)},validateAfterRedo:function(t,e){this.hasMultipleLines()&&XCTAssertEqual(Q.TextFacade.getLineSpacingForForma(this.lockupForma_),this.finalLineSpacing_)}}}),X)},KyAS:function(t,e,n){var o,r,i=e,u=n("oAGj"),s=n("c9Jm"),a=n("9tXS");i.EnableWatermarkTest=(o=function(){this.actionSequence_TurnOnWatermark=[function(){return new a.SetWatermarkAction(!0)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},u.defineClass({name:"EnableWatermarkTest",ctor:o,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){this.testDoc_=n,this.wasEnabled_=n.watermarkEnabled},validateAfterActionSequence:function(t,e){XCTAssertNotNil(this.testDoc_),XCTAssertTrue(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled)}}}),o),i.DisableWatermarkTest=(r=function(){this.actionSequence_TurnOffWatermark=[function(){return new a.SetWatermarkAction(!1)}],this.testDoc_=null,this.wasEnabled_=!1,s.ActionTestBase.call(this)},u.defineClass({name:"DisableWatermarkTest",ctor:r,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){this.testDoc_=n,this.wasEnabled_=n.watermarkEnabled},validateAfterActionSequence:function(t,e){XCTAssertNotNil(this.testDoc_),XCTAssertFalse(this.testDoc_.watermarkEnabled)},validateAfterUndo:function(t,e){XCTAssertTrue(this.testDoc_.watermarkEnabled==this.wasEnabled_)},validateAfterRedo:function(t,e){XCTAssertFalse(this.testDoc_.watermarkEnabled)}}}),r)},"W5+J":function(t,e,n){var o,r=e,i=n("oAGj"),u=n("c9Jm"),s=n("yGNn"),a=n("FNB+"),c=n("9Lk3"),l=n("fdtz"),p=n("nELi");r.ScaleTest=(o=function(){this.actionSequence_Scale=[],this.formaeToScale_=[],this.formaeToTest_=[],this.initialTransforms_=[],u.ActionTestBase.call(this)},i.defineClass({name:"ScaleTest",ctor:o,superName:"ActionTestBase",statics:{scale_:2},props:{populateActionSequence:function(t,e,n){var r,u=this;this.formaeToScale_=i.clone(this.allSelectableFormae(n,(function(t){return!(t.controller instanceof c.GridController)&&!(!(r=i.opt(t.controller,(function(t){return t.scalable})))&&null==r)&&r}))),XCTAssertFalse(0==this.formaeToScale_.length);for(var f=i.iter(this.formaeToScale_);!f.done;f.next()){var h=f.value,T=i.clone(h.filterByKind(l.ImageForma.KIND,a.FormaTraversal.JustChildren));T.length>0&&!T[0].controller.floating?this.formaeToTest_=this.formaeToTest_.concat(T):this.formaeToTest_.push(h)}return this.initialTransforms_=this.formaeToTest_.map((function(t){return t.totalPlacement}),this),s.CorePromise.resolve([function(){return new p.ScaleAction(o.scale_,u.formaeToScale_,!1)}])},validateAfterActionSequence:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var r=n.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(o.scale_,o.scale_).extractedScale.scale)}},validateAfterUndo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToTest_[o].totalPlacement.extractedScale.scale,this.initialTransforms_[o].extractedScale.scale)}},validateAfterRedo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var r=n.value;XCTAssertEqual(this.formaeToTest_[r].totalPlacement.extractedScale.scale,this.initialTransforms_[r].scaleXY(o.scale_,o.scale_).extractedScale.scale)}},tearDown:function(){this.formaeToScale_=[],this.formaeToTest_=[],u.ActionTestBase.prototype.tearDown.call(this)}}}),o)},jE7t:function(t,e,n){var o,r=e,i=n("oAGj"),u=n("c9Jm"),s=n("o+xL");r.RotateTest=(o=function(){this.actionSequence_Rotate=[function(){return new s.RotateAction(Math.PI/2,null,null,!1)}],this.formaeToRotate_=[],this.formaeToTest_=[],this.initialTransforms_=[],u.ActionTestBase.call(this)},i.defineClass({name:"RotateTest",ctor:o,superName:"ActionTestBase",props:{setUpActionSequence:function(t,e,n){var o;this.formaeToRotate_=i.clone(this.allSelectableFormae(n,(function(t){return!(!(o=i.opt(t.controller,(function(t){return t.rotateable})))&&null==o)&&o}))),this.initialTransforms_=this.formaeToTest_.map((function(t){return t.placement}),this),n.controller.selection.replaceSelectionWithFormae(this.formaeToRotate_)},validateAfterActionSequence:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var o=n.value,r=this.initialTransforms_[o].rotate(0,1);XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotSine,r.transformValues.rotSine,.001),XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotCosine,r.transformValues.rotCosine,.001)}},validateAfterUndo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var o=n.value;XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotSine,this.initialTransforms_[o].transformValues.rotSine),XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotCosine,this.initialTransforms_[o].transformValues.rotCosine)}},validateAfterRedo:function(t,e){for(var n=i.iter(i.range(0,this.formaeToTest_.length,!1));!n.done;n.next()){var o=n.value,r=this.initialTransforms_[o].rotate(0,1);XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotSine,r.transformValues.rotSine,.001),XCTAssertEqual(this.formaeToTest_[o].placement.transformValues.rotCosine,r.transformValues.rotCosine,.001)}},tearDown:function(){this.formaeToRotate_=[],this.formaeToTest_=[],u.ActionTestBase.prototype.tearDown.call(this)}}}),o)},oAGj:function(t,e,n){var o,r,i,u;try{u=n("C42b")}catch(t){console.log("Could not find CoreRandom. Will fall back to Math.Random for xplr.shuffleInPlace")}function s(t){var e=t.sprintf,n={info:function(t){console.log("CORE INFO: "+t)},warning:function(t){console.log("CORE WARNING: "+t)},error:function(t,e){console.log("CORE ERROR: "+t,e)}};function o(t){return t?function(e,n){return t(e,n)?-1:1}:function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t<e?-1:1}}Array.prototype.includes||(Array.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.includes||(String.prototype.includes=function(t){return this.indexOf(t)>=0}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),o=n.length>>>0,r=arguments[1],i=0;i<o;i++)if(e=n[i],t.call(r,e,i,n))return e});var r=function(t){this.range=t,this.count=Math.ceil((t.end-t.begin)/t.increment),t.closed&&(t.end-t.begin)%t.increment==0&&(this.count+=1),this.setIndex(0)};r.prototype.next=function(){this.setIndex(this.index+1)},r.prototype.setIndex=function(t){this.index=t,this.done=this.index>=this.count;var e=this.range.isReversed?this.count-1-this.index:this.index;this.value=this.range.begin+e*this.range.increment};var i=function(t,e,n,o,r){this.begin=t,this.end=e,this.closed=n,this.increment=o||1,this.isReversed=!0===r};i.prototype.asArray=function(){for(var t=[],e=new r(this);!e.done;)t.push(e.value),e.next();return t},i.prototype.applyToArray=function(t){return 1!==this.increment||this.isReversed?this.asArray().filter((function(e){return e>=0&&e<t.length})).map((function(e){return t[e]})):t.slice(this.begin,this.end+(this.closed?1:0))},i.prototype.reversed=function(){return new i(this.begin,this.end,this.closed,this.increment,!this.isReversed)};var s=function(t){this._array=t,this._index=0,this._count=t.length,this.done=0===t.length,this.value=!this.done&&t[0]};s.prototype.next=function(){this._index++,this.done=this._index>=this._count,this.value=!this.done&&this._array[this._index]};var a=function(t,e){if(this._array=[],e)for(var n in t)this._array.push({key:parseInt(n),value:t[n]});else for(var n in t)this._array.push({key:n,value:t[n]});this._index=0,this.done=0===this._array.length,this.key=!this.done&&this._array[0].key,this.value=!this.done&&this._array[0].value};a.prototype.next=function(){this._index++,this.done=this._index>=this._array.length,this.key=!this.done&&this._array[this._index].key,this.value=!this.done&&this._array[this._index].value};class c{constructor(t,e){for(var n in this._name=t,this._def=e,this._rdef={},e){var o=e[n];this[n]=o,this._rdef[o]=n}}toCaseValue(t){return void 0!==this._rdef[t]?t:null}isCaseValue(t){return void 0!==this._rdef[t]}}function l(t){var e=t.length,n=[];n.length=e;for(var o=e;o--;)n[o]={offset:o,element:t[o]};return n}var p="undefined"!=typeof performance?performance.now.bind(performance):Date.now.bind(Date);return{classes:{},protocols:{},enums:{},classDependencies:{},cloneReporter:null,M_PI:Math.PI,M_E:Math.E,opt:function(t,e){return null!=t?e(t):null},defineClass:function(t){var e=this;return this.requireClass(t.name,t.superName,(function(o){function r(t,e,n,o){for(var r in t){var i={enumerable:!0},u=t[r];"object"==typeof u&&u&&(u.get||u.set)?(u.get&&(n[r]=i.get=u.get),u.set&&(o[r]=i.set=u.set)):(i.value=u,i.writable=!0),e[r]=i}return e}var i={_getters:{value:{},enumerable:!0},_setters:{value:{},enumerable:!0},_staticGetters:{value:{},enumerable:!0},_staticSetters:{value:{},enumerable:!0}};r(t.statics,i,i._staticGetters.value,i._staticSetters.value);var u=r(t.props,{},i._getters.value,i._setters.value);t.superName||(u.setValue={value:function(t,e){this[e]=t},enumerable:!0}),function(t,e,o){for(var r in t){"function"==typeof t[r]&&"init_"==r.substr(0,5)&&(e[r]={enumerable:!0,value:function(t,e){return function(){var o=new t;return o[e]?o[e].apply(o,arguments):n.error("uh oh, no matching init function ("+e+")"),o}}(o,r)})}}(t.props,i,t.ctor),Object.defineProperties(t.ctor,i),t.ctor.prototype=Object.create(o?o.prototype:Object.prototype,u),t.ctor.prototype.constructor=t.ctor,o&&(e.inheritGetterSetters(t.ctor,o),e.inheritStatics(t.ctor,o)),e.registerClass(t.name,t.ctor)})),t.ctor},inheritGetterSetters:function(t,e){var n={};if(e._getters)for(var o in t._getters||(t._getters={}),t._setters||(t._setters={}),e._getters){var r=e._getters[o],i=e._setters&&e._setters[o];(r&&!t._getters[o]||i&&!t._setters[o])&&(n[o]={enumerable:!0},r&&(n[o].get=t._getters[o]=t._getters[o]||r),i&&(n[o].set=t._setters[o]=t._setters[o]||i))}Object.defineProperties(t.prototype,n)},inheritStatics:function(t,e){var o=t._inherited={};for(var r in e)if(!t.hasOwnProperty(r))try{if(e._inherited&&e._inherited[r])o[r]=e._inherited[r];else if(e._staticGetters&&e._staticGetters[r]){if(o[r]={enumerable:!0},e._staticGetters&&e._staticGetters[r]){var i=e._staticGetters[r];o[r].get=function(){return i()}}if(e._staticSetters&&e._staticSetters[r]){var u=e._staticSetters[r];o[r].set=function(t){u(t)}}}else"function"==typeof e[r]?o[r]={enumerable:!0,value:e[r]}:o[r]={enumerable:!0,get:function(){return e[r]},set:function(t){e[r]=t}}}catch(t){n.error("inheritStatics",t)}Object.defineProperties(t,o)},defineProtocol:function(t,e){return this.protocols[t]=e,e._isProtocol=t,e},defineEnum:function(t,e){var n=new c(t,e);return this.enums[t]=n,n},defctor:function(t){},super_init:function(t,e,n){e.call(t);for(var o=[],r=3;r<arguments.length;r++)o.push(arguments[r]);n.apply(t,o)},is:function(t,e){var o=typeof e;if("string"===o)switch(e){case"Array":return Array.isArray(t);case"Dictionary":return"object"==typeof t;case"Double":case"Int":return"number"==typeof t;case"String":return"string"==typeof t;case"Bool":return"boolean"==typeof t;case"Function":return"function"==typeof t;case"Any":return void 0!==t;case"Object":return"object"==typeof t;case"AnyObject":return null!=t;default:return n.error("why checking type "+e),!1}if(Array.isArray(e)){if("Array"===e[0])return t&&Array.isArray(t)&&(0==t.length||this.is(t[0],e[1]));if("Dictionary"===e[0]&&t&&"object"==typeof t){for(var r in t)return this.is(r,e[1])&&this.is(t[r],e[2]);return!0}return!1}return"object"===o&&e._isProtocol?t&&t.constructor&&t.constructor._implements&&t.constructor._implements(e._isProtocol):e instanceof c?e.isCaseValue(t):t instanceof e},as:function(t,e){return this.is(t,e)?t:null},nilc:function(t,e){return void 0!==t&&null!=t?t:"function"==typeof e?e():e},requireClass:function(t,e,n){if(e)if(this.classes[e])n(this.classes[e]);else{var o=this.classDependencies[e];o?o.push(n):this.classDependencies[e]=[n]}else n(null)},registerClass:function(t,e){this.classes[t]=e;var n=this.classDependencies[t];if(n)for(;n.length>0;)n.shift()(e)},assert:function(t){},iter:function(t,e){return t instanceof i?new r(t):Array.isArray(t)?new s(t):new a(t,e)},stride:function(t,e,n){return new i(t,e,!1,n,!1)},each:function(t,e){if("object"==typeof t)for(var n in t)e(n,t[n])},count:function(t){if(Array.isArray(t))return t.length;if("object"==typeof t){var e=0;for(var n in t)e++;return e}return-1},dict:function(t){for(var e={},n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e},toDouble:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=parseFloat(t);return isNaN(e)?null:e}return 0},toString:function(t){if(arguments.length>1&&"string"==typeof t)try{return e.apply(e,arguments)}catch(t){n.error("string format error "+t)}return t+""},toStringFromCharCodes:function(t,e){if(e===t.length)return String.fromCharCode(...t);var n=t.slice(0,e);return String.fromCharCode(...n)},toInt:function(t){if("number"==typeof t)return t<0?-Math.floor(-t):Math.floor(t);if("string"==typeof t){var e=parseInt(t);return isNaN(e)?null:e}return 0},modulo:function(t,e){return t-Math.floor(t/e)*e},toUInt32:function(t){return this.modulo(this.toInt(t),Math.pow(2,32))},toUInt16:function(t){return this.modulo(this.toInt(t),Math.pow(2,16))},isInfinite:function(t){return!isNaN(t)&&!isFinite(t)},randu:function(t){return Math.floor(Math.random()*t)},keys:function(t,e){var n=Object.keys(t||{});if("numeric"===e)for(var o=n.length;o--;)n[o]=parseFloat(n[o]);return n},values:function(t){return Object.values(t||{})},eachValue:function(t,e){for(var n in t)e(t[n])},indexForKey:function(t,e){var n=0;for(var o in t){if(o===e)return n;n++}return null},removeKey:function(t,e){var n=t[e];return delete t[e],void 0===n?null:n},gvar:function(t,e,n){var o,r={};r[e]={enumerable:!0,get:function(){return void 0===o&&(o=n()),o},set:function(t){o=t}},Object.defineProperties(t,r)},chars:function(t){var e=t.length,n=[];n.length=e;for(var o=0;o<e;o++)n[o]=t[o];return n},utf16s:function(t){var e=t.length,n=[];n.length=e;for(var o=0;o<e;o++)n[o]=t.charCodeAt(o);return n},range:function(t,e,n){return new i(t,e,n)},rand:function(){return 2147483647*Math.random()},isEmpty:function(t){return"string"!=typeof t||0===t.length},eq:function(t,e,n){return null==e||null==n?e==n:t(e,n)},clone:function(t,e){var n,o,r=this.cloneReporter;return r&&(r.before(t,e),n=p()),null==t?o=null:Array.isArray(t)?(o=t.slice()).isValueType=t.isValueType:"function"==typeof t.clone?o=t.clone():"object"==typeof t&&(o=Object.assign({},t)),r&&r.after(t,e,p()-n),o},repeat:function(t,e){var n,o=[];for(n=0;n<e;n++)Array.isArray(t)&&t.isValueType?o.push(this.clone(t)):Array.isArray(t)&&0==t.length?o.push([]):o.push(t);return o.isValueType=!0,o},toArray:function(t){if(Array.isArray(t)){var e=t.concat();return e.isValueType=!0,e}if(t instanceof i)return t.asArray();var n=[t];return n.isValueType=!0,n},indexOf:function(t,e){var n=t.indexOf(e);return n<0?null:n},containsEq:function(t,e,n){return null!=this.indexOfEq(t,e,n)},indexOfEq:function(t,e,n){for(var o=0;o<t.length;o++)if(n(t[o],e))return o;return null},toSequence:l,toCharSequence:l,enumerate:function(t){var e={};return t.forEach((function(t,n){e[n]=t})),e},append:function(t,e){e.forEach((function(e){t.push(e)}))},remove:function(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)},removeAll:function(t){for(prop in t)delete t[prop]},sort:function(t,e){return t.concat().sort(o(e))},sortInPlace:function(t,e){return t.sort(o(e))},first:function(t){return t.length>0?t[0]:null},last:function(t){return t.length>0?t[t.length-1]:null},min:function(t){var e=Math.min.apply(null,t);return isFinite(e)?e:null},max:function(t){var e=Math.max.apply(null,t);return isFinite(e)?e:null},slicerange:function(t,e){return e.applyToArray(t)},dropFirst:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(e)},dropLast:function(t,e){return void 0===e&&(e=1),e>=t.length?[]:t.slice(0,t.length-e)},rangeOfString:function(t,e){var n=t.indexOf(e);return n<0?null:new i(n,n+e.length,!1)},shuffleInPlace:function(t){for(var e,n,o=0;o<t.length-1;o+=1)e=u?u.CoreRandom.nextIntUniform(t.length-o)+o:Math.floor(Math.random()*(t.length-o))+o,n=t[o],t[o]=t[e],t[e]=n;return t},elementsEqual:function(t,e){if(null===t)throw new Error("Source array cannot be null.");return null!==e&&t.length===e.length&&t.every((t,n)=>t===e[n])},shuffle:function(t){return this.shuffleInPlace(t.concat())},reverse:function(t){return t.concat().reverse()},joinArrays:function(t,e){return 0===t.length?[]:t.reduce((function(t,n){return t?t.concat(e).concat(n):n}))},setLog:function(t){n=t},info:function(t){n.info(t)},warning:function(t){n.warn(t)},error:function(t,e){n.error(t,e)},replaceAll:function(t,e,n){return t.split(e).join(n)},bind:function(t,e){return t[e].bind(t)},zip:function(t,e){var n,o=[],r=Math.min(t.length,e.length);for(n=0;n<r;n++)o.push([t[n],e[n]]);return o}}}e.nodeName,r=[n("l77X")],void 0===(i="function"==typeof(o=s)?o.apply(e,r):o)||(t.exports=i)},sRQj:function(t,e,n){var o,r,i,u,s,a=e,c=n("oAGj"),l=n("iCxV");a.MockAuthoringContextManager=(o=function(t){this._mockDefaultBrandID=null,this.mockAuthoringContexts=c.clone(t)},c.defineClass({name:"MockAuthoringContextManager",ctor:o,statics:{_implements:function(t){return"IAuthoringContextManager"==t}},props:{authoringContexts:{get:function(){return this.mockAuthoringContexts}},authoringContext:function(t){var e=c.clone(this.mockAuthoringContexts.filter((function(e){return e.id==t}),this));return 0==e.length?null:e[0]},getOwnedAuthoringContextIDs:function(){return this.mockAuthoringContexts.filter((function(t){return t.ownedByCurrentUser}),this).map((function(t){return t.id}),this)},createAuthoringContext:function(t,e){return e&&0!=this.mockAuthoringContexts.length?null:a.MockAuthoringContext.init_44fd(t,"id-"+t,[],[],[])},mockDefaultBrandID:{get:function(){return this._mockDefaultBrandID},set:function(t){this._mockDefaultBrandID=t}},getDefaultBrandIdFromServer:function(){return this.mockDefaultBrandID}}}),o),a.MockAuthoringContext=(r=function(){this._id="",this._name="",this._urn="",this._isDefault=!1,this._activated=!1,this._isMinimal=!1,this._isValidVersion=!0},c.defineClass({name:"MockAuthoringContext",ctor:r,statics:{_implements:function(t){return"IAuthoringContext"==t}},props:{init_d41d:function(){this._activated=!1,this._colors=[],this._fonts=[],this._logos=[],this._ownedByCurrentUser=!0},init_44fd:function(t,e,n,o,r,i){void 0===i&&(i=!0),this._name=t,this._id=e,this._colors=c.clone(n),this._fonts=c.clone(o),this._logos=c.clone(r),this._ownedByCurrentUser=i,this._activated=r.length>0&&n.length>0&&o.length>0,this._urn="fake urn:name:"+this._name+":id:"+this._id},id:{get:function(){return this._id}},contextID:{get:function(){return this._id}},name:{get:function(){return this._name},set:function(t){this._name=t}},urn:{get:function(){return this._urn}},activated:{get:function(){return this._activated},set:function(t){this._activated=t}},isDefault:{get:function(){return this._isDefault},set:function(t){this._isDefault=t}},isMinimal:{get:function(){return this._isMinimal}},isValidVersion:{get:function(){return this._isValidVersion}},ownedByCurrentUser:{get:function(){return this._ownedByCurrentUser},set:function(t){this._ownedByCurrentUser=t}},colors:{get:function(){return this._colors}},fonts:{get:function(){return this._fonts}},logos:{get:function(){return this._logos},set:function(t){this._logos=c.clone(t)}},isBrandkitComplete:function(){return 1!=l.Host.brandkitManager.shouldForceIncompleteBrand&&this.colors.length>0&&this.fonts.length>0&&this.logos.length>0}}}),r),a.MockAuthoringContextColor=(i=function(t,e,n,o,r,i){this._id="",this._r=0,this._g=0,this._b=0,this._a=0,this._id=t,this._roles=c.clone(e),this._r=n,this._g=o,this._b=r,this._a=i},c.defineClass({name:"MockAuthoringContextColor",ctor:i,statics:{_implements:function(t){return"IAuthoringContextColor"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},red:{get:function(){return this._r}},green:{get:function(){return this._g}},blue:{get:function(){return this._b}},alpha:{get:function(){return this._a}}}}),i),a.MockAuthoringContextFont=(u=function(t,e,n){this._id="UNKNOWN",this._roles=[],this._source="",this._id=t,this._roles.push(e),this._desc=n,this._source="mock-font"},c.defineClass({name:"MockAuthoringContextFont",ctor:u,statics:{_implements:function(t){return"IAuthoringContextFont"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},sourceType:{get:function(){return this._source},set:function(t){this._source=t}},descriptor:{get:function(){return this._desc}}}}),u),a.MockAuthoringContextLogo=(s=function(t,e,n,o,r){this._id="",this._url="",this._roles=[],this._width=0,this._height=0,this._id=t,this._url=e,this._roles.push(n),this._width=o,this._height=r},c.defineClass({name:"MockAuthoringContextLogo",ctor:s,statics:{_implements:function(t){return"IAuthoringContextLogo"==t}},props:{id:{get:function(){return this._id}},acRoles:{get:function(){return this._roles}},acName:{get:function(){return"Mock logo"}},url:{get:function(){return this._url}},pixelWidth:{get:function(){return this._width}},pixelHeight:{get:function(){return this._height}},mimeType:{get:function(){return"image/png"}}}}),s)}}]);
//# sourceMappingURL=vendors_npm_spark_c7496c44-6af1c598.js.map