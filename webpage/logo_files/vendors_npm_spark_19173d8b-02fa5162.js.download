(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[12],{"35Q0":function(e,t,n){var i,o,a,r,s=t,c=n("oAGj"),l=n("cZuM"),u=n("gXiO"),h=n("iCxV"),d=n("IUM5"),p=n("c+uM"),g=n("oKI3");s.TAG_SHAPE_ID="shape-id",s.ShapeCategory=c.defineEnum("ShapeCategory",{None:0,Circle:1,Square:2,Social:3,Cutout:4,Banner:5,Decorative:6,Other:7,Avoid:8}),s.TagGroup=c.defineEnum("TagGroup",{none:0,banner:1,circle:2,square:3,other:4,decorative:5,unused:6}),s.TheoShape=(i=function(){},c.defineClass({name:"TheoShape",ctor:i,props:{init_f4eb:function(e,t,n,i,o,a,r,s,l,u,h,d,p,g,m){void 0===g&&(g=!1),void 0===m&&(m=!1),this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.alignmentEdges=a,this.formality=l,this.drama=u,this.maxScale=h,this.minAspect=d,this.maxAspect=p,this.category=r,this.tags=c.clone(s),this.clockwise=g,this.premium=m},init_implicit:function(e,t,n,i,o,a,r,s,l,u,h,d,p,g,m){this.id=e,this.name=t,this.deprecated=n,this.filled=i,this.centered=o,this.formality=a,this.drama=r,this.alignmentEdges=s,this.category=l,this.tags=c.clone(u),this.clockwise=h,this.premium=d,this.maxScale=p,this.maxAspect=g,this.minAspect=m}}}),i),s.ShapeLibraryDataStructures=(o=function(){this.nonSvgBackingShapes=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)],this.svgBackingShapes=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.seperatorShapes=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)],this.DisplayOrderForCategories=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial],this.DisplayOrderForShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]},this.DisplayOrderForSmallSetCharStyleShapesByCategory={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]},this.DisplayOrderForLetterGridShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]},this.DisplayOrderForSymmetricPathsShapesByCategory={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAsymmetricPathsShapesByCategory={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]},this.DisplayOrderForAutoLayoutShapesByCategory={BASIC:["square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:[]},this.NonSuggestableBackingShapes=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"],this.LockupBackingShapeIDs=[],this.BrowsableBackingShapes=[],this.FilledBackingShapes=[],this.shapeDictionary={},this.nonSvgBackingShapeIDs=[]},c.defineClass({name:"ShapeLibraryDataStructures",ctor:o,props:{init_d41d:function(){this.FilledBackingShapes.push(s.ShapeLibrary.Square),this.FilledBackingShapes.push(s.ShapeLibrary.Circle);for(var e=c.iter(this.svgBackingShapes);!e.done;e.next()){var t=e.value;this.LockupBackingShapeIDs.push(t.id),this.shapeDictionary[t.id]=t,t.deprecated||(this.BrowsableBackingShapes.push(t.id),t.filled&&this.FilledBackingShapes.push(t.id))}for(var n=c.iter(this.nonSvgBackingShapes);!n.done;n.next())t=n.value,this.shapeDictionary[t.id]=t,this.nonSvgBackingShapeIDs.push(t.id);this.ShapeIDToCategory={};for(var i=c.iter(this.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,a=c.iter(this.DisplayOrderForShapesByCategory[o]);!a.done;a.next()){var r=a.value;this.ShapeIDToCategory[r]=o}},init_implicit:function(e,t,n,i,o,a,r,u,h,d,p,g,m,f,A,S,C,T){void 0===e&&(e=[s.TheoShape.init_f4eb("none","None",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,1,1,0,100),s.TheoShape.init_f4eb("row","Row",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.none],5,2,1,0,100),s.TheoShape.init_f4eb("bannerHorizontal","Horizontal Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,1,100),s.TheoShape.init_f4eb("bannerVertical","Vertical Banner",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.unused],5,2,1,0,1),s.TheoShape.init_f4eb("knockout","Text Knockout",!1,!0,!1,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.unused],5,2,1,0,100)]),void 0===t&&(t=[s.TheoShape.init_f4eb("circle","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,1,.5,.5,2),s.TheoShape.init_f4eb("circle1","Circle1",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],5,6,.5,.5,2),s.TheoShape.init_f4eb("circle2","Circle2",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,6,.5,.5,2),s.TheoShape.init_f4eb("circle3","Circle3",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],8,6,.5,.5,2),s.TheoShape.init_f4eb("circle4","Circle4",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,6,.5,.5,2),s.TheoShape.init_f4eb("circle5","Circle5",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],2,8,.5,.5,2),s.TheoShape.init_f4eb("circle6","Circle6",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],7,8,.5,.5,2),s.TheoShape.init_f4eb("circle8","Circle8",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.unused],1,10,.5,.5,2),s.TheoShape.init_f4eb("rect1","Rect1",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect2","Rect2",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3-9sliced","Rect3-9",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect3","Rect3",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect4","Rect4",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect5","Rect5",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("rect6","Rect6",!0,!1,!1,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,5,.5,0,100),s.TheoShape.init_f4eb("ornamental_003","Circle",!0,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],6,7,.5,0,100),s.TheoShape.init_f4eb("shape_001","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("shape_004","Tag",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_005","Gift",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_006","Calendar",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,2,.5,0,100),s.TheoShape.init_f4eb("shape_007","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_008","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_009","Circle",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],3,3,.5,0,100),s.TheoShape.init_f4eb("shape_011","Shield",!0,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],5,3,.5,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("circle_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],7,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.decorative],8,6,.6,.5,2,!0),s.TheoShape.init_f4eb("circle_005","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,6,.6,.5,2),s.TheoShape.init_f4eb("circle_006","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],2,8,.6,.5,2),s.TheoShape.init_f4eb("circle_007","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],7,8,.6,.5,2),s.TheoShape.init_f4eb("circle_008","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],1,10,.6,.5,2),s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("square_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.decorative],7,5,.7,0,100,!0),s.TheoShape.init_f4eb("square_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square,s.TagGroup.other],4,4,.7,0,100),s.TheoShape.init_f4eb("square_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.other,s.TagGroup.banner],4,8,.7,0,100),s.TheoShape.init_f4eb("buttonoutline","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("button","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Other,[s.TagGroup.other],5,5,.7,0,100),s.TheoShape.init_f4eb("diamond_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.other],5,8,.6,.25,4),s.TheoShape.init_f4eb("diamond_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,9,.6,.25,4),s.TheoShape.init_f4eb("ribbon_h_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,5,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_003","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100),s.TheoShape.init_f4eb("ribbon_h_004","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,4,.8,3,100,!0),s.TheoShape.init_f4eb("ribbon_h_005","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Banner,[s.TagGroup.banner],5,6,.8,3,100),s.TheoShape.init_f4eb("ornamental_001","Circle",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.Decorative,[s.TagGroup.decorative],3,4,.7,0,100),s.TheoShape.init_f4eb("ornamental_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Decorative,[s.TagGroup.decorative],8,8,.7,0,100,!0),s.TheoShape.init_f4eb("shape_002","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.7,0,100,!0),s.TheoShape.init_f4eb("shape_003","VerticalBanner",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.5,0,1),s.TheoShape.init_f4eb("shape_010","Hexagon",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.square],9,6,.7,0,100),s.TheoShape.init_f4eb("shape_013","Speech Bubble",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Avoid,[s.TagGroup.decorative],5,3,.4,.5,2,!0),s.TheoShape.init_f4eb("divider_001","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,5,.8,0,100),s.TheoShape.init_f4eb("divider_002","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],1,2,.5,0,100),s.TheoShape.init_f4eb("divider_003","Circle",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.Cutout,[s.TagGroup.other],5,1,.8,0,100),s.TheoShape.init_f4eb("Social_Facebook","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Instagram","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Pinterest","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Twitter","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_GPlus","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Linkedin","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Periscope","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Snapchat","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Tumblr","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("Social_Youtube","Circle",!1,!1,!1,l.AlignmentEdges.LeftAndTopAndBottom,s.ShapeCategory.Social,[s.TagGroup.unused],5,5,.5,99,100),s.TheoShape.init_f4eb("inline_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_002","Inline",!1,!1,!0,l.AlignmentEdges.TopAndBottom,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("inline_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("inline_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_001","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_002","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_003","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_004","Inline",!1,!1,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,void 0,!0),s.TheoShape.init_f4eb("pacific_005","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===n&&(n=[s.TheoShape.init_f4eb("square_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Square,[s.TagGroup.square],5,1,.7,0,100),s.TheoShape.init_f4eb("circle_001","Circle",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.Circle,[s.TagGroup.circle],5,1,.6,.5,2),s.TheoShape.init_f4eb("pacific_006","Inline",!1,!0,!0,l.AlignmentEdges.All,s.ShapeCategory.None,[s.TagGroup.unused],1,5,.5,0,100,!0,!0)]),void 0===i&&(i=[s.ShapeLibrary.CategoryBasic,s.ShapeLibrary.CategoryBanner,s.ShapeLibrary.CategoryDecorative,s.ShapeLibrary.CategorySocial]),void 0===o&&(o={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===a&&(a={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_002","square_003","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005"],SOCIAL:[]}),void 0===r&&(r={BASIC:["square_002","square_004","buttonoutline","button","square_005","divider_001","divider_002","pacific_006"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005"],DECORATIVE:["square_003","inline_001","inline_003","inline_005","inline_006","pacific_001","pacific_002","ornamental_002","diamond_001","diamond_002","square_001","circle_008"],SOCIAL:[]}),void 0===u&&(u={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:[],DECORATIVE:["circle_004","circle_005","pacific_006"],SOCIAL:[]}),void 0===h&&(h={BASIC:["circle_001","circle_002","circle_003","shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["circle_004","circle_005","circle_006","circle_007","circle_008","ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===d&&(d={BASIC:["shape_010","diamond_001","diamond_002","square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope"]}),void 0===p&&(p={BASIC:["square_001","square_002","square_004","square_005","divider_001","divider_002"],BANNER:["ribbon_h_001","ribbon_h_002","ribbon_h_003","ribbon_h_004","ribbon_h_005","shape_003"],DECORATIVE:["ornamental_001","ornamental_002","square_003","shape_002","shape_013","inline_001","inline_002","inline_003","inline_004","inline_005","inline_006","pacific_001","pacific_002","pacific_003","pacific_004","pacific_005","pacific_006"],SOCIAL:[]}),void 0===g&&(g=["Social_Facebook","Social_Instagram","Social_Pinterest","Social_Twitter","Social_Youtube","Social_Snapchat","Social_Linkedin","Social_Tumblr","Social_GPlus","Social_Periscope","shape_002","shape_003","shape_013","ornamental_001","knockout"]),void 0===f&&(f=[]),void 0===A&&(A=[]),void 0===S&&(S=[]),void 0===C&&(C={}),void 0===T&&(T=[]),this.nonSvgBackingShapes=c.clone(e),this.svgBackingShapes=c.clone(t),this.seperatorShapes=c.clone(n),this.DisplayOrderForCategories=c.clone(i),this.DisplayOrderForShapesByCategory=c.clone(o),this.DisplayOrderForCharStyleShapesByCategory=c.clone(a),this.DisplayOrderForSmallSetCharStyleShapesByCategory=c.clone(r),this.DisplayOrderForLetterGridShapesByCategory=c.clone(u),this.DisplayOrderForSymmetricPathsShapesByCategory=c.clone(h),this.DisplayOrderForAsymmetricPathsShapesByCategory=c.clone(d),this.DisplayOrderForAutoLayoutShapesByCategory=c.clone(p),this.NonSuggestableBackingShapes=c.clone(g),this.ShapeIDToCategory=c.clone(m),this.LockupBackingShapeIDs=c.clone(f),this.BrowsableBackingShapes=c.clone(A),this.FilledBackingShapes=c.clone(S),this.shapeDictionary=c.clone(C),this.nonSvgBackingShapeIDs=c.clone(T)},clone:function(){return o.init_implicit(this.nonSvgBackingShapes,this.svgBackingShapes,this.seperatorShapes,this.DisplayOrderForCategories,this.DisplayOrderForShapesByCategory,this.DisplayOrderForCharStyleShapesByCategory,this.DisplayOrderForSmallSetCharStyleShapesByCategory,this.DisplayOrderForLetterGridShapesByCategory,this.DisplayOrderForSymmetricPathsShapesByCategory,this.DisplayOrderForAsymmetricPathsShapesByCategory,this.DisplayOrderForAutoLayoutShapesByCategory,this.NonSuggestableBackingShapes,this.ShapeIDToCategory,this.LockupBackingShapeIDs,this.BrowsableBackingShapes,this.FilledBackingShapes,this.shapeDictionary,this.nonSvgBackingShapeIDs)}}}),o),s.ShapeLibrary=(a=function(){u.CoreObject.call(this)},r={},c.defineClass({name:"ShapeLibrary",ctor:a,superName:"CoreObject",statics:{CategoryBasic:"BASIC",CategoryBanner:"BANNER",CategoryDecorative:"DECORATIVE",CategorySocial:"SOCIAL",CategoryExclusive:"EXCLUSIVE",CategoryFullCanvas:"FULL_CANVAS",Square:"square",Circle:"circle",shapeLibraryDataStructures:{get:function(){return void 0===r.shapeLibraryDataStructures&&(r.shapeLibraryDataStructures=s.ShapeLibraryDataStructures.init_d41d()),r.shapeLibraryDataStructures}},LockupBackingShapeIDs:{get:function(){return void 0===r.LockupBackingShapeIDs&&(r.LockupBackingShapeIDs=a.shapeLibraryDataStructures.LockupBackingShapeIDs),r.LockupBackingShapeIDs},set:function(e){r.LockupBackingShapeIDs=e}},NonSvgBackingShapeIDs:{get:function(){return void 0===r.NonSvgBackingShapeIDs&&(r.NonSvgBackingShapeIDs=a.shapeLibraryDataStructures.nonSvgBackingShapeIDs),r.NonSvgBackingShapeIDs},set:function(e){r.NonSvgBackingShapeIDs=e}},BrowsableBackingShapes:{get:function(){return void 0===r.BrowsableBackingShapes&&(r.BrowsableBackingShapes=a.shapeLibraryDataStructures.BrowsableBackingShapes),r.BrowsableBackingShapes},set:function(e){r.BrowsableBackingShapes=e}},FilledBackingShapes:{get:function(){return void 0===r.FilledBackingShapes&&(r.FilledBackingShapes=a.shapeLibraryDataStructures.FilledBackingShapes),r.FilledBackingShapes},set:function(e){r.FilledBackingShapes=e}},shapeDictionary:{get:function(){return void 0===r.shapeDictionary&&(r.shapeDictionary=a.shapeLibraryDataStructures.shapeDictionary),r.shapeDictionary},set:function(e){r.shapeDictionary=e}},NonSuggestableBackingShapes:{get:function(){return void 0===r.NonSuggestableBackingShapes&&(r.NonSuggestableBackingShapes=a.shapeLibraryDataStructures.NonSuggestableBackingShapes),r.NonSuggestableBackingShapes},set:function(e){r.NonSuggestableBackingShapes=e}},SeperatorShapes:{get:function(){return void 0===r.SeperatorShapes&&(r.SeperatorShapes=a.shapeLibraryDataStructures.seperatorShapes),r.SeperatorShapes},set:function(e){r.SeperatorShapes=e}},getShapeDataForArtworkId:function(e){var t="none";return null!=e&&(t=e),a.shapeDictionary[t]},applyToShapeForma:function(e,t){var n,i;null!=(n=c.opt(h.Host.resourceUtils,(function(e){return e.urlForResource(d.CATEGORY_ID_SHAPE,t)})))&&(i=h.Host.pathUtils.artworkFromURL(n,!1))&&(e.canonicalArtwork=i.artwork,e.sliceBox=i.sliceBox,e.contentRegion=i.contentRegion,e.shapeLibraryID=t)},categoryForShapeID:function(e){return a.shapeLibraryDataStructures.ShapeIDToCategory[e]},displayOrderForCategories:function(){return a.shapeLibraryDataStructures.DisplayOrderForCategories},displayOrderForCompatibleShapeIDs:function(e,t,n,i,o){return p.LockupStyle.isLetterGrid(t)?a.displayOrderForLetterGridShapeIDs(e,i,o):p.LockupStyle.isPath(t)?a.displayOrderForPathShapeIDs(e,n,i,o):p.LockupStyle.isAutoLayout(t)?a.displayOrderForAutoLayoutShapeIDs(e,i,o):i?a.displayOrderForCharStyleShapeIDs(e,o):a.displayOrderForShapeIDs(e)},getCategorySlice:function(e,t){return e[t]||[]},displayOrderForShapeIDs:function(e){return a.getCategorySlice(a.shapeLibraryDataStructures.DisplayOrderForShapesByCategory,e)},displayOrderForCharStyleShapeIDs:function(e,t){var n=c.clone(t?a.shapeLibraryDataStructures.DisplayOrderForSmallSetCharStyleShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForCharStyleShapesByCategory);return a.getCategorySlice(n,e)},displayOrderForLetterGridShapeIDs:function(e,t,n){return a.getCategorySlice(a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory,e)},displayOrderForPathShapeIDs:function(e,t,n,i){if(n)return[];var o=c.clone(g.TextPathLibrary.isPathSymmetric(t)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.getCategorySlice(o,e)},displayOrderForAutoLayoutShapeIDs:function(e,t,n){return a.getCategorySlice(a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory,e)},isBackingShapeStyleCompatible:function(e,t,n){return p.LockupStyle.isLetterGrid(e.layout)?a.isBackingShapeLetterGridCompatible(t,n):p.LockupStyle.isPath(e.layout)?a.isBackingShapePathCompatible(e.pathID,t,n):!p.LockupStyle.isAutoLayout(e.layout)||a.isBackingShapeAutoLayoutCompatible(t,n)},isSVGIncluded:function(e,t){var n;if(null!=(n=e))for(var i=c.iter(a.shapeLibraryDataStructures.DisplayOrderForCategories);!i.done;i.next())for(var o=i.value,r=c.clone(t[o]),s=c.iter(r);!s.done;s.next())if(s.value==n)return!0;return!1},isBackingShapeLetterGridCompatible:function(e,t){return e!=p.LockupBacking.SVGBackground?e==p.LockupBacking.None:a.isSVGIncluded(t,a.shapeLibraryDataStructures.DisplayOrderForLetterGridShapesByCategory)},isBackingShapePathCompatible:function(e,t,n){if(t==p.LockupBacking.Rows)return!1;if(t!=p.LockupBacking.SVGBackground)return!0;var i=c.clone(g.TextPathLibrary.isPathSymmetric(e)?a.shapeLibraryDataStructures.DisplayOrderForSymmetricPathsShapesByCategory:a.shapeLibraryDataStructures.DisplayOrderForAsymmetricPathsShapesByCategory);return a.isSVGIncluded(n,i)},isBackingShapeAutoLayoutCompatible:function(e,t){return e!=p.LockupBacking.Rows&&(e!=p.LockupBacking.SVGBackground?e==p.LockupBacking.None:a.isSVGIncluded(t,a.shapeLibraryDataStructures.DisplayOrderForAutoLayoutShapesByCategory))}}}),a)},"434x":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("yGNn"),c=n("wNKJ"),l=n("fAXt"),u=n("Kkml");o.NudgeAction=(i=function e(t,n){this.delta=t,this.formaeToNudge=a.clone(n),r.Action.call(this,e.TYPE)},a.defineClass({name:"NudgeAction",ctor:i,superName:"Action",statics:{TYPE:"NudgeAction"},props:{getUserAction:function(e){var t=a.clone(e.selection.IDs);return u.UserActions.NudgeItem(t.join(","))},execute:function(e){var t=a.clone(this.formaeToNudge||e.selection.asFormaArray());l.TransformFacade.nudgeFormaeInPageSpace(t,this.delta);for(var n=a.iter(t);!n.done;n.next()){var i=n.value;c.DragFacade.rescueFormaToPageBounds(i,50,0)}return s.CorePromise.resolve(null)}}}),i)},"4mEG":function(e,t,n){var i,o,a,r,s,c,l,u,h=t,d=n("oAGj"),p=n("Tq01"),g=n("Dz6V"),m=n("kYI4"),f=n("CWW7"),A=n("yGNn"),S=n("FNB+"),C=n("iCxV"),T=n("q5zr"),v=n("fNpk"),y=n("oTAR"),_=n("lJxM"),E=n("T6jX"),P=n("Kkml"),b=n("LGJg"),F=n("sW6f"),I=n("mxdD"),D=n("QTen");h.AddContentAction=(i=function e(t,n,i,o,a){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=f.AddFormaParams.DEFAULTS),void 0===a&&(a=!0),this.content=t,this.pairedContent=n,this.preservePlacement=i,this.addParams=o,this.allowSelection=a,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddContentAction",ctor:i,superName:"Action",statics:{TYPE:"AddContentAction"},props:{getUserAction:function(e){return this.content instanceof T.ImageContentNode?P.UserActions.AddImage():this.content instanceof F.VideoContentNode?P.UserActions.AddVideo():this.content instanceof b.VectorContentNode?P.UserActions.AddIcon():this.content instanceof _.TextContentNode?P.UserActions.AddText():(d.opt(C.Host.logging,(function(e){return e.warning("Could not determine user action for content")})),P.UserActions.AddImage())},execute:function(e){var t=this;return f.CreationFacade.addContent(e.document.firstPage,this.content,this.pairedContent,this.preservePlacement,this.addParams).then((function(n){var i=d.as(n,S.Forma);return null!=i?(t.allowSelection&&(t.newSelection=[i]),i.isImage()&&E.TheoDocumentUtils.updateConstrainedImageInfo(e.document),A.CorePromise.resolve(new p.FormaActionResult([i]))):(v.LegacyCoreAssert.fail("expected a forma result from CreationFacade.addContent",void 0,"AddContentAction.execute","AddContentAction.swift",75),A.CorePromise.resolve(null))}))},updateSelection:function(e){return C.Host.platform.isWeb||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),i),h.AddIconContentAction=(o=function e(t,n,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=!0),this.url=t,this.metadata=n,this.replacing=i,this.undoable=o,this.allowSelection=a,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddIconContentAction",ctor:o,superName:"Action",statics:{TYPE:"AddIconContentAction"},props:{getUserAction:function(e){var t=null!=this.replacing?P.UserActions.ReplaceIcon():P.UserActions.AddIcon();return 0==this.undoable&&(t.undoable=!1),t},execute:function(e){var t=this,n=y.SVGParserUtils.createShapeFromSVGURL(e.document,this.url,this.metadata),i=d.as(n,S.Forma);return null!=i?y.SVGParserUtils.addShapeToDocument(e.document,n,this.replacing).then((function(e){return t.allowSelection&&(t.newSelection=[i]),A.CorePromise.resolve(new p.FormaActionResult([i]))})):(v.LegacyCoreAssert.fail("expected a forma result from SVGParserUtils.CreateShapeFromSVGURL",void 0,"AddIconContentAction.execute","AddContentAction.swift",140),A.CorePromise.resolve(null))},updateSelection:function(e){return C.Host.platform.isWeb&&null==this.replacing||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),o),h.ActionUndoability=d.defineEnum("ActionUndoability",{useDefault:0,forceUndoable:1,forceNonUndoable:2}),h.AddImageContentAction=(a=function e(t,n,i,o,a,r,s,c,l,u,d,m,f){void 0===d&&(d=h.ActionUndoability.useDefault),void 0===m&&(m=null),void 0===f&&(f=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.width=o,this.height=a,this.hasAlpha=r,this.mediaMetadata=s,this.localIdentifier=c,this.tags=l,this.addParams=u,this.undoable=d,this.contentID=m,this.allowSelection=f,p.Action.call(this,e.TYPE,new p.ActionExecutionOptions(g.ActionFeedbackWaitingType.Loading,g.ActionFeedbackMessageType.Error))},d.defineClass({name:"AddImageContentAction",ctor:a,superName:"Action",statics:{TYPE:"AddImageContentAction"},props:{getUserAction:function(e){var t=null!=this.addParams.formaToReplace?P.UserActions.ReplaceImage():P.UserActions.AddImage();return this.undoable!=h.ActionUndoability.useDefault&&(t.undoable=this.undoable==h.ActionUndoability.forceUndoable),t},execute:function(e){var t,n=this;if(t=d.as(d.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,n.contentID)})),T.ImageContentNode)){var i;if(t.url=this.sourceURL,t.mimeType=this.mimeType,t.pixelWidth=this.width,t.pixelHeight=this.height,t.mediaMetadata=this.mediaMetadata,t.localIdentifier=this.localIdentifier,this.hasAlpha&&(t.hasAlpha=!0),i=this.tags)for(var o=d.iter(i);!o.done;o.next()){var a,r,s=o.key,c=o.value;null!=(a=d.as(s,"String"))&&null!=(r=d.as(c,"String"))&&t.setTag(a,r)}return t.createImageFeatures(),d.opt(t.image,(function(e){return e.hasAlpha()})),f.CreationFacade.addContent(e.document.firstPage,t,null,!1,this.addParams).then((function(t){var i=d.as(t,S.Forma);return null!=i?(E.TheoDocumentUtils.updateConstrainedImageInfo(e.document),n.allowSelection&&(n.newSelection=[i]),A.CorePromise.resolve(new p.FormaActionResult([i]))):(v.LegacyCoreAssert.fail("expected a forma result from CreationFacade.addContent",void 0,"AddImageContentAction.execute","AddContentAction.swift",263),A.CorePromise.resolve(null))}))}return A.CorePromise.resolve(null)},updateSelection:function(e){return C.Host.platform.isWeb&&null==this.addParams.formaToReplace||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),a),h.VideoPosterParams=(r=function(e,t,n,i){this.url=e,this.mimeType=t,this.width=n,this.height=i},d.defineClass({name:"VideoPosterParams",ctor:r,superName:"CoreObject"}),r),h.AddVideoContentAction=(s=function e(t,n,i,o,a,r,s,c,l,u,h,g,m,f,A){void 0===A&&(A=!0),this.page=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=a,this.duration=r,this.times=d.clone(s),this.posterParams=c,this.isLivePhoto=l,this.mediaMetadata=u,this.localIdentifier=h,this.originalDuration=g,this.offsetInOriginal=m,this.addParams=f,this.allowSelection=A,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddVideoContentAction",ctor:s,superName:"Action",statics:{TYPE:"AddVideoContentAction"},props:{getUserAction:function(e){return P.UserActions.AddVideo()},execute:function(e){var t,n,i,o,a=this;return(t=I.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,this.times,this.isLivePhoto))?((i=this.posterParams)&&(o=n=d.as(d.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,null)})),T.ImageContentNode))&&(o.url=i.url,o.mimeType=i.mimeType,o.pixelWidth=i.width,o.pixelHeight=i.height),f.CreationFacade.addContent(this.page,t,n,!1,this.addParams).then((function(e){var t=d.as(e,S.Forma);return null!=t?(a.allowSelection&&(a.newSelection=[t]),A.CorePromise.resolve(new p.FormaActionResult([t]))):(v.LegacyCoreAssert.fail("expected a forma result from CreationFacade.addContent",void 0,"AddVideoContentAction.execute","AddContentAction.swift",404),A.CorePromise.resolve(null))}))):A.CorePromise.resolve(null)},updateSelection:function(e){return C.Host.platform.isWeb||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection},cloneWithPosterParams:function(e){return new s(this.page,this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.times,e,this.isLivePhoto,this.mediaMetadata,this.localIdentifier,this.originalDuration,this.offsetInOriginal,this.addParams)}}}),s),h.ReplaceVideoFormaContentAction=(c=function e(t,n,i,o,a,r,s,c,l,u,h,g,m,f,A,S){void 0===S&&(S=!0),this.forma=t,this.sourceURL=n,this.mimeType=i,this.trackWidth=o,this.trackHeight=a,this.duration=r,this.startTime=s,this.trimDuration=c,this.offsetInOriginal=l,this.originalDuration=u,this.times=d.clone(h),this.posterParams=g,this.isLivePhoto=m,this.mediaMetadata=f,this.localIdentifier=A,this.allowSelection=S,p.Action.call(this,e.TYPE)},d.defineClass({name:"ReplaceVideoFormaContentAction",ctor:c,superName:"Action",statics:{TYPE:"ReplaceVideoFormaContentAction"},props:{getUserAction:function(e){return P.UserActions.ReplaceVideoContent()},execute:function(e){var t,n,i,o;return(t=I.VideoFacade.addVideoContent(d.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,this.times,this.isLivePhoto))?(f.CreationFacade.removeContentNodeFromDocument(this.forma.videoContentNode,e.document),this.forma.videoContentNode=t,f.CreationFacade.addContentNodeToDocument(t,e.document),(n=this.posterParams)&&(i=d.as(d.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,null)})),T.ImageContentNode))&&(i.url=n.url,i.mimeType=n.mimeType,i.pixelWidth=n.width,i.pixelHeight=n.height,f.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,e.document),this.forma.contentNode=i,f.CreationFacade.addContentNodeToDocument(i,e.document)),(o=d.as(this.forma.style,D.VideoStyle))&&(o.startTime=this.startTime,o.duration=this.trimDuration),this.allowSelection&&(this.newSelection=[this.forma]),A.CorePromise.resolve(new p.FormaActionResult([this.forma]))):A.CorePromise.resolve(null)},updateSelection:function(e){return C.Host.platform.isWeb||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),c),h.AddLogoContentAction=(l=function e(t,n,i,o,a,r){void 0===a&&(a=null),void 0===r&&(r=!0),this.theoLogo=n,this.page=t,this.replacing=i,this.localIdentifier=o,this.componentID=a,this.allowSelection=r,p.Action.call(this,e.TYPE)},d.defineClass({name:"AddLogoContentAction",ctor:l,superName:"Action",statics:{TYPE:"AddLogoContentAction"},props:{getUserAction:function(e){return P.UserActions.AddLogo()},execute:function(e){var t=this,n=m.BrandingFacade.makeLogoContentNode(this.theoLogo,this.page.document);n.createImageFeatures(),n.localIdentifier=this.localIdentifier,null!=this.componentID&&(n.componentID=this.componentID);var i=new f.AddFormaParams(p.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,this.replacing,f.FloatingImageStrategy.Always);return f.CreationFacade.addContent(e.document.firstPage,n,null,!1,i).then((function(e){var n=d.as(e,S.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),A.CorePromise.resolve(new p.FormaActionResult([n]))):(v.LegacyCoreAssert.fail("expected a forma result from CreationFacade.addContent",void 0,"AddLogoContentAction.execute","AddContentAction.swift",638),A.CorePromise.resolve(null))}))},updateSelection:function(e){return C.Host.platform.isWeb&&null==this.replacing||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),l),h.AddTextContentAction=(u=function e(t,n,i){void 0===n&&(n=f.AddFormaParams.DEFAULTS),void 0===i&&(i=!0),this.text=t,this.addParams=n,this.allowSelection=i,p.Action.call(this,e.TYPE,new p.ActionExecutionOptions(g.ActionFeedbackWaitingType.None,g.ActionFeedbackMessageType.Error))},d.defineClass({name:"AddTextContentAction",ctor:u,superName:"Action",statics:{TYPE:"AddTextContentAction"},props:{getUserAction:function(e){return this.addParams.behavior==p.ControllerSettingsBehaviorEnum.SetControllerSettings?P.UserActions.AddTextUI():P.UserActions.AddText()},execute:function(e){var t=this;return d.opt(e.document,(function(e){return e.firstPage.colorLibraryController.regenerateThemeKeyCache()})),f.CreationFacade.addText(e.document.firstPage,this.text,!0,this.addParams).then((function(e){var n=d.as(e,S.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),A.CorePromise.resolve(new p.FormaActionResult([n]))):(v.LegacyCoreAssert.fail("expected a forma result from CreationFacade.addText",void 0,"AddTextContentAction.execute","AddContentAction.swift",708),A.CorePromise.resolve(null))}))},updateSelection:function(e){return C.Host.platform.isWeb&&!this.allowSelection||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),u)},"70fJ":function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("Tq01"),c=n("SpAV"),l=n("gpZI"),u=n("yGNn"),h=n("ascj"),d=n("R0Y+"),p=n("fNpk"),g=n("Kkml");a.ApplyColorAction=(i=function e(t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=0),this.formaeToColor=r.clone(t),this.colors=r.clone(n),this.inCharStyleMode=i,this.shuffleIndex=o,this.suggestedSelection=[],this.shouldUpdateSelection=!1,s.Action.call(this,e.TYPE)},r.defineClass({name:"ApplyColorAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formaeToColor)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),g.UserActions.ChangeColor(t.join(","))},execute:function(e){var t,n=r.clone(this.formaeToColor||e.selection.asFormaArray());p.LegacyCoreAssert.isTrue(n.length>0,"empty Forma array",void 0,"ApplyColorAction.execute","ColorActions.swift",55),(t=this.colors)?this.suggestedSelection=r.clone(l.ColorFacade.applyColorsToFormae(n,t,this.inCharStyleMode,this.shuffleIndex)):this.suggestedSelection=r.clone(l.ColorFacade.applyNoneColorToFormae(n,h.ColorRole.FieldPrimary)),this.shouldUpdateSelection=!1;for(var i=r.iter(n);!i.done;i.next()){var o=i.value;this.shouldUpdateSelection=this.shouldUpdateSelection||e.selection.isSelected(o)}return u.CorePromise.resolve(new s.FormaActionResult(this.suggestedSelection))},updateSelection:function(e){return!this.inCharStyleMode&&this.shouldUpdateSelection&&(e.selection.IDs=this.suggestedSelection.map((function(e){return e.formaID}),this)),this.suggestedSelection}}}),i),a.ApplyColorWithRoleAction=(o=function e(t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=0),this.formaeToColor=r.clone(t),this.theoColorsWithRole=r.clone(n),this.inCharStyleMode=i,this.shuffleOffset=o,s.Action.call(this,e.TYPE)},r.defineClass({name:"ApplyColorWithRoleAction",ctor:o,superName:"Action",statics:{TYPE:"ApplyColorWithRoleAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formaeToColor)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),g.UserActions.ChangeColor(t.join(","))},execute:function(e){var t=r.clone(this.formaeToColor||e.selection.asFormaArray());c.CoreAssert.isTrue(t.length>0,"empty Forma array",void 0,"ApplyColorWithRoleAction.execute","ColorActions.swift",129);var n=r.clone(this.shuffleColors(this.theoColorsWithRole,this.shuffleOffset)),i=r.clone(l.ColorFacade.applyColorsWithRoleToFormae(t,n,this.inCharStyleMode));return this.inCharStyleMode||(e.selection.IDs=i.map((function(e){return e.formaID}),this)),u.CorePromise.resolve(new s.FormaActionResult(i))},shuffleColors:function(e,t){var n=[],i=e.length,o=t%i;if(i<=1||0==o)return e;for(var a=r.iter(r.range(0,i,!1));!a.done;a.next()){var s=a.value,c=(s-o)%i;c<0&&(c+=i),n.push(new d.TheoColorWithRole(e[s].role,e[c].color))}return n}}}),o)},"9tXS":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("yGNn"),c=n("Kkml"),l=n("7EVG");o.SetWatermarkAction=(i=function e(t){this.watermark=t,r.Action.call(this,e.TYPE)},a.defineClass({name:"SetWatermarkAction",ctor:i,superName:"Action",statics:{TYPE:"SetWatermarkAction"},props:{getUserAction:function(e){return c.UserActions.SetWatermark()},execute:function(e){return l.WatermarkFacade.setWatermark(this.watermark,e.document),s.CorePromise.resolve(null)}}}),i)},"Aj/e":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("yGNn"),c=n("P83h"),l=n("c+uM"),u=n("35Q0"),h=n("8t9B"),d=n("Kkml");o.ChangeBackgroundShapeAction=(i=function e(t,n,i,o){this.formae=a.clone(t),this.backing=n,this.artworkID=i,this.charStyleMode=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"ChangeBackgroundShapeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeBackgroundShapeAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formae)?n.map((function(e){return e.formaID}),this):a.clone(e.selection.IDs),this.charStyleMode&&(t=t.map((function(e){return e+":secondary"}),this)),d.UserActions.ChangeBackgroundShape(t.join(","))},execute:function(e){for(var t=a.clone(this.formae||e.selection.asFormaArray()),n=a.iter(t);!n.done;n.next()){var i,o=n.value;if(i=a.as(o.controller,h.TypeLockupController)){var d,p=new c.FormaStyleChangedEvent(o),g=this.backing,m=this.artworkID;(d=i.lockupStyle)&&((l.LockupStyle.isLetterGrid(d.layout)&&!u.ShapeLibrary.isBackingShapeLetterGridCompatible(this.backing,this.artworkID)||l.LockupStyle.isPath(d.layout)&&!u.ShapeLibrary.isBackingShapePathCompatible(d.pathID,this.backing,this.artworkID)||l.LockupStyle.isAutoLayout(d.layout)&&!u.ShapeLibrary.isBackingShapeAutoLayoutCompatible(this.backing,this.artworkID))&&(g=l.LockupBacking.SVGBackground),g==l.LockupBacking.SVGBackground&&null==m&&(m="square_001")),o.beginUpdate(p),this.charStyleMode&&(e.selection.inCharStyleMode=!0),i.styleController.applyBacking(g,m),o.endUpdate(p)}}return s.CorePromise.resolve(new r.ActionResult)}}}),i)},H1Z2:function(e,t,n){var i,o,a,r,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("yGNn"),d=n("wNKJ"),p=n("Pil/"),g=n("9Lk3"),m=n("tGKA"),f=n("fAXt"),A=n("8t9B"),S=n("oKlP"),C=n("Kkml");c.DragAction=(i=function e(t,n){this.event=t,this.swapTargetForma=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"DragAction",ctor:i,superName:"Action",statics:{TYPE:"DragAction"},props:{getUserAction:function(e){return null!=this.swapTargetForma?C.UserActions.SwapCells():C.UserActions.MoveItem()},execute:function(e){var t,n;if(t=l.as(this.event,p.FormaDragEvent)){if(null==this.swapTargetForma){var i=l.clone(d.DragFacade.processFormaDrag(t));return h.CorePromise.resolve(new u.DragActionResult(i))}}else if(n=l.as(this.event,p.EndFormaDragEvent)){var o,a;if(d.DragFacade.processEndFormaDrag(n),(o=this.getDraggedFormaForEvent(n))&&(a=this.swapTargetForma)){var r,s=l.clone(l.opt(e.document,(function(e){return e.firstPage.root.filterByControllerKind(g.GridController.KIND)})));r=l.opt(s,(function(e){return null!=e.length&&s.length>0}))?l.as(s[0].controller,g.GridController):null,l.opt(r,(function(e){return e.swapGridChildren(a,o)}))}}return h.CorePromise.resolve(null)},getDraggedFormaForEvent:function(e){var t,n;return 0==!e.dragDelegate.draggedFormae.length&&(n=l.first(e.dragDelegate.draggedFormae),((t=l.opt(n,(function(e){return e.isImage()})))||null!=t)&&t&&(n=l.opt(n,(function(e){return e.parent})))),n}}}),i),c.MoveHandleAction=(o=function e(t,n,i,o){this.forma=t,this.delta=n,this.origin=i,this.scale=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"MoveHandleAction",ctor:o,superName:"Action",statics:{TYPE:"MoveHandleAction"},props:{getUserAction:function(e){return C.UserActions.MoveItem()},execute:function(e){var t=this;f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],m.Matrix2D.translation(new S.TheoPoint(this.delta.x,this.delta.y)),this.origin);var n=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(null,8/t.scale,!1)}));return h.CorePromise.resolve(new u.PlacementActionResult(n))}}}),o),c.ResizeHandleAction=(a=function e(t,n,i,o,a){void 0===a&&(a=!1),this.forma=t,this.spotPt=n,this.anchorSpot=i,this.newBounds=o,this.inSpacingMode=a,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResizeHandleAction",ctor:a,superName:"Action",statics:{TYPE:"ResizeHandleAction"},props:{getUserAction:function(e){return C.UserActions.ResizeItem()},execute:function(e){var t=this;return this.inSpacingMode&&1==this.spotPt.x&&.5==this.spotPt.y&&this.forma.controller instanceof A.TypeLockupController?this.forma.controller.recalculateTracking(this.newBounds.size):this.inSpacingMode&&.5==this.spotPt.x&&1==this.spotPt.y&&this.forma.controller instanceof A.TypeLockupController?this.forma.controller.recalculateLeading(this.newBounds.size):l.opt(this.forma.controller,(function(e){return e.onEvent(new p.FormaResizeEvent(t.forma,t.newBounds.size,t.anchorSpot))})),h.CorePromise.resolve(null)}}}),a),c.RotateHandleAction=(r=function e(t,n,i,o,a){void 0===a&&(a=!0),this.forma=t,this.deltaRadians=n,this.origin=i,this.initialPlacement=o,this.doSnapping=a,u.Action.call(this,e.TYPE)},l.defineClass({name:"RotateHandleAction",ctor:r,superName:"Action",statics:{TYPE:"RotateHandleAction"},props:{getUserAction:function(e){return C.UserActions.RotateItem()},execute:function(e){if(f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],m.Matrix2D.rotation(Math.cos(this.deltaRadians),Math.sin(this.deltaRadians)),this.origin,this.initialPlacement),this.doSnapping){var t=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(new S.TheoPoint(.5,.5),20,!1)}));return h.CorePromise.resolve(new u.PlacementActionResult(t))}return h.CorePromise.resolve(new u.PlacementActionResult(null))}}}),r),c.CharRangeHandleAction=(s=function e(t,n,i,o,a){this.forma=t,this.newPoint=n,this.lastPoint=a,this.beginForma=i,this.leftHandle=o,u.Action.call(this,e.TYPE)},l.defineClass({name:"CharRangeHandleAction",ctor:s,superName:"Action",statics:{TYPE:"CharRangeHandleAction"},props:{getUserAction:function(e){return C.UserActions.ModifyStyleRanges()},execute:function(e){var t;return(t=l.as(this.forma.controller,A.TypeLockupController))&&t.updateTouches(this.newPoint,this.beginForma,this.leftHandle,this.lastPoint),h.CorePromise.resolve(new u.FormaActionResult([this.forma]))}}}),s)},"KgU+":function(e,t,n){var i,o,a,r,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("cYKp"),d=n("yGNn"),p=n("Kkml");c.ApplyAnimationStyleAction=(i=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ApplyAnimationStyleAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyAnimationStyleAction"},props:{getUserAction:function(e){return p.UserActions.ApplyAnimationStyle()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),d.CorePromise.resolve(null)}}}),i),c.ApplyAnimationStyleForPlaybackAction=(o=function(e,t){c.ApplyAnimationStyleAction.call(this,e,t)},l.defineClass({name:"ApplyAnimationStyleForPlaybackAction",ctor:o,superName:"ApplyAnimationStyleAction",props:{getUserAction:function(e){return p.UserActions.ApplyAnimationStyleForPlayback()},execute:function(e){return h.AnimationFacade.applyAnimationStyle(this.style,this.page),d.CorePromise.resolve(null)}}}),o),c.ResetAnimation=(a=function e(t,n){this.resetFormaTree=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResetAnimation",ctor:a,superName:"Action",statics:{TYPE:"ResetAnimation"},props:{getUserAction:function(e){return p.UserActions.ResetAnimation()},execute:function(e){return l.opt(this.page.root.animation,(function(e){return e.invalidate()})),d.CorePromise.resolve(null)}}}),a),c.ShuffleAnimationStyleAction=(r=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ShuffleAnimationStyleAction",ctor:r,superName:"Action",statics:{TYPE:"ShuffleAnimationStyleAction"},props:{getUserAction:function(e){return p.UserActions.ShuffleAnimationStyle()},execute:function(e){var t=h.AnimationFacade.shuffleAnimationStyle(this.style,this.page);return this.page.animationLibrary.setRootAnimationStyle(t,this.page.root),d.CorePromise.resolve(new u.AnimationStyleActionResult(t))}}}),r),c.ApplyAndPrepareAnimationAction=(s=function(e,t){this.style=e,this.page=t,u.Action.call(this,c.ApplyAnimationStyleAction.TYPE)},l.defineClass({name:"ApplyAndPrepareAnimationAction",ctor:s,superName:"Action",statics:{TYPE:"ApplyAndPrepareAnimationAction"},props:{getUserAction:function(e){return p.UserActions.ApplyAndPrepareAnimationAction()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),this.page.animationLibrary.modifyModelForAnimation(l.opt(this.page.root.animation,(function(e){return e.animationStyle})),this.page.root),this.page.animationController.saveStaticState(),d.CorePromise.resolve(null)}}}),s)},SVjO:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("0wFF"),c=n("Dz6V"),l=n("yGNn"),u=n("LP+A"),h=n("iCxV"),d=n("uxH+"),p=n("LqGn"),g=n("9YN4"),m=n("Kkml");o.ApplyTemplateAction=(i=function(){this.disableFallback=!1,this.layoutOption=u.RetargetLayoutOption.UNSET,this.filterFormae=[]},a.defineClass({name:"ApplyTemplateAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyTemplateAction",createDesignTemplateAction:function(e,t,n,o,a,r){return void 0===r&&(r=!1),i.init_fc36(e,t,n,o,a,r)},createDesignTemplateActionFromPromise:function(e,t,n,o,a,r,s){return void 0===r&&(r=!1),i.init_a128(e,t,n,o,a,r,s)}},props:{init_b652:function(e,t,n){this.designSuggestion=e,this.rootForma=t,this.originalRootForma=null,this.templateDocumentPromise=null,this.tapIndex=n,r.Action.call(this,i.TYPE)},init_a128:function(e,t,n,o,s,l,h){void 0===l&&(l=!1),void 0===h&&(h=u.RetargetLayoutOption.UNSET),this.templateDocumentPromise=e,this.tapIndex=n,this.rootForma=t,this.originalRootForma=o,this.designSuggestion=null,this.disableFallback=l,this.layoutOption=h,this.filterFormae=a.clone(s);var d=new r.ActionExecutionOptions(c.ActionFeedbackWaitingType.Loading,c.ActionFeedbackMessageType.None);r.Action.call(this,i.TYPE,d)},init_fc36:function(e,t,n,i,o,a,r){void 0===a&&(a=!1),void 0===r&&(r=u.RetargetLayoutOption.UNSET),this.init_a128(l.CorePromise.resolve(e),t,n,i,o,a,r)},getUserAction:function(e){return m.UserActions.ApplyTemplate()},execute:function(e){var t,n,i,o,c=this,m=l.CorePromise.resolve([]);null==this.designSuggestion&&(a.opt(a.as(this.rootForma.controller,d.RootController),(function(e){return e.createGridControllerIfNone()})),(i=this.originalRootForma)&&(a.opt(a.as(i.controller,d.RootController),(function(e){return e.createGridControllerIfNone()})),(o=this.templateDocumentPromise)&&(m=o.then((function(e){var t;return(t=a.as(e,g.TheoDocument))?u.DesignSuggestionFacade.createSuggestionsFromTemplate(t,c.rootForma,i,c.filterFormae,10,c.layoutOption):[]})))));var f=new r.SuggestionsActionResult([]);return m.then((function(e){var i,o;if((i=a.as(e,["Array",p.RetargetSuggestion]))&&(i.length,i.length>0&&null==c.designSuggestion)){var l=c.tapIndex%i.length;l>=0&&(c.designSuggestion=i[l])}if(o=c.designSuggestion){o.disableFallback=c.disableFallback;var d=(t=c.tapIndex)||null!=t?t:0,g=!1;return g=c.layoutOption!=u.RetargetLayoutOption.UNSET&&d>0||(o.layoutUpdate?d>1:d>0),o.applyWithPromise(g).then((function(t){var i;return a.opt(h.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsEventDesignFilterSelected,{contextualData1:"status:"+(o.layoutUpdate?"on":"off"),contextualData2:"shuffle:"+((n=c.tapIndex)||null!=n?n:0),contextualData3:"designFilterID:"+o.modelDoc.uuid})})),(i=a.as(e,["Array",p.RetargetSuggestion]))?new r.SuggestionsActionResult(i):f}))}return f}))}}}),i)},Tq01:function(e,t,n){var i,o,a,r,s,c,l,u,h,d,p,g,m,f=t,A=n("oAGj"),S=n("Dz6V"),C=n("gXiO"),T=n("yGNn"),v=n("fNpk"),y=n("Kkml");f.ActionExecutionOptions=(i=function(e,t){this.showWaitingFeedback=e,this.showMessageFeedback=t},o={},A.defineClass({name:"ActionExecutionOptions",ctor:i,superName:"CoreObject",statics:{DEFAULT:{get:function(){return void 0===o.DEFAULT&&(o.DEFAULT=new i(S.ActionFeedbackWaitingType.None,S.ActionFeedbackMessageType.None)),o.DEFAULT}}},props:{enableActionFeedback:{get:function(){return this.showWaitingFeedback!=S.ActionFeedbackWaitingType.None||this.showMessageFeedback!=S.ActionFeedbackMessageType.None}}}}),i),f.Action=(a=function(e,t){void 0===t&&(t=f.ActionExecutionOptions.DEFAULT),this.type=e,this.executionOptions=t,C.CoreObject.call(this)},A.defineClass({name:"Action",ctor:a,superName:"CoreObject",props:{canDo:function(e){return!0},getUserAction:function(e){return v.LegacyCoreAssert.fail("Action does not implement getUserAction",{type:this.type},"Action.getUserAction","Actions.swift",63),y.UserActions.AddText()},execute:function(e){return T.CorePromise.reject("no default impl")},updateSelection:function(e){return null}}}),a),f.ActionResult=function(){var e=function(){C.CoreObject.call(this)},t={};return A.defineClass({name:"ActionResult",ctor:e,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===t.NONE&&(t.NONE=new e),t.NONE}},fromPromiseAny:function(t){var n;return null==t?e.NONE:(n=A.as(t,e))?n:(v.LegacyCoreAssert.fail("default action impl returned a promise for something other than an ActionResult",void 0,"ActionResult.fromPromiseAny","Actions.swift",101),e.NONE)}}}),e}(),f.FormaActionResult=(r=function(e){this.formae=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"FormaActionResult",ctor:r,superName:"ActionResult"}),r),f.DoubleActionResult=(s=function(e){this.value=e,f.ActionResult.call(this)},A.defineClass({name:"DoubleActionResult",ctor:s,superName:"ActionResult"}),s),f.TextRangeActionResult=(c=function(e){this.range=e,f.ActionResult.call(this)},A.defineClass({name:"TextRangeActionResult",ctor:c,superName:"ActionResult"}),c),f.LockupStyleActionResult=(l=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"LockupStyleActionResult",ctor:l,superName:"ActionResult"}),l),f.TextEmphasisActionResult=(u=function(e){this.textFormae=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"TextEmphasisActionResult",ctor:u,superName:"ActionResult"}),u),f.AnimationStyleActionResult=(h=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"AnimationStyleActionResult",ctor:h,superName:"ActionResult"}),h),f.ImageStyleActionResult=(d=function(e){this.style=e,f.ActionResult.call(this)},A.defineClass({name:"ImageStyleActionResult",ctor:d,superName:"ActionResult"}),d),f.SuggestionsActionResult=(p=function(e){this.suggestions=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"SuggestionsActionResult",ctor:p,superName:"ActionResult"}),p),f.DragActionResult=(g=function(e){this.snapLines=A.clone(e),f.ActionResult.call(this)},A.defineClass({name:"DragActionResult",ctor:g,superName:"ActionResult"}),g),f.PlacementActionResult=(m=function(e){this.snapResult=e,f.ActionResult.call(this)},A.defineClass({name:"PlacementActionResult",ctor:m,superName:"ActionResult"}),m),f.ControllerSettingsBehaviorEnum=A.defineEnum("ControllerSettingsBehaviorEnum",{IgnoreControllerSettings:0,SetControllerSettings:1})},bqbo:function(e,t,n){var i,o,a,r,s,c,l,u,h,d,p,g,m,f,A,S,C,T,v=t,y=n("oAGj"),_=n("Tq01"),E=n("0wFF"),P=n("Dz6V"),b=n("aO0D"),F=n("CWW7"),I=n("yGNn"),D=n("iCxV"),U=n("U010"),w=n("q5zr"),L=n("fdtz"),N=n("lmwz"),R=n("uWOl"),k=n("T6jX"),x=n("Kkml");v.ReplaceImagesWithColorsAction=(i=function e(t,n,i){void 0===i&&(i=!0),this.formae=y.clone(t),this.colors=y.clone(n),this.selectReplacements=i,_.Action.call(this,e.TYPE)},y.defineClass({name:"ReplaceImagesWithColorsAction",ctor:i,superName:"Action",statics:{TYPE:"ReplaceImagesWithColorsAction"},props:{getUserAction:function(e){return x.UserActions.ReplaceImageWithShape()},execute:function(e){var t=y.clone(this.formae||e.selection.asFormaArray()),n=y.clone(N.ImageFacade.replaceImagesWithColors(t,this.colors));return k.TheoDocumentUtils.updateConstrainedImageInfo(e.document),0==n.length?I.CorePromise.reject("did not get any Forma back from ImageFacade.replaceImageWithColors"):(this.newSelection=y.clone(n),I.CorePromise.resolve(new _.FormaActionResult(n)))},updateSelection:function(e){return null!=this.newSelection&&this.selectReplacements&&e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),i),v.SetImageFilterAction=(o=function e(t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=null),void 0===o&&(o=null),this.style=t,this.applyFilterToAllBackgroundImages=n,this.shadowsColor=i,this.highlightsColor=o,_.Action.call(this,e.TYPE)},y.defineClass({name:"SetImageFilterAction",ctor:o,superName:"Action",statics:{TYPE:"SetImageFilterAction"},props:{getUserAction:function(e){return x.UserActions.ApplyFilter()},execute:function(e){var t,n;return this.style.name==R.ImageStyle.NAME_NEWDUOTONE&&((t=this.shadowsColor)&&(this.style.colors.fieldShadows=t),(n=this.highlightsColor)&&(this.style.colors.fieldHighlights=n)),N.ImageFacade.applyImageFilter(e,this.style,this.applyFilterToAllBackgroundImages),I.CorePromise.resolve(null)}}}),o),v.ShuffleImageFilterAction=(a=function e(t,n,i){void 0===i&&(i=!1),this.style=t,this.page=n,this.applyFilterToAllBackgroundImages=i,_.Action.call(this,e.TYPE)},y.defineClass({name:"ShuffleImageFilterAction",ctor:a,superName:"Action",statics:{TYPE:"ShuffleImageFilterAction"},props:{getUserAction:function(e){return x.UserActions.ShuffleFilter()},execute:function(e){var t=this.page.imageFilterLibrary.getNextImageStyleOfSameType(this.style,!0);return null!=t&&N.ImageFacade.applyImageFilter(e,t,this.applyFilterToAllBackgroundImages),I.CorePromise.resolve(new _.ImageStyleActionResult(t))}}}),a),v.SetImageCutoutAction=(r=function e(t,n,i,o,a){void 0===i&&(i=U.ImageCutoutModelLibrary.CURRENT_MODEL),void 0===o&&(o=U.ImageCutoutModelLibrary.DEFAULT_MASK_SIZE),void 0===a&&(a=U.ImageCutoutModelLibrary.DEFAULT_TIMEOUT),this.formaToMask=t,this.cutout=n,this.model=i,this.maskSize=o,this.timeout=a,_.Action.call(this,e.TYPE,new _.ActionExecutionOptions(P.ActionFeedbackWaitingType.Loading,P.ActionFeedbackMessageType.Error))},y.defineClass({name:"SetImageCutoutAction",ctor:r,superName:"Action",statics:{TYPE:"SetImageCutoutAction"},props:{getUserAction:function(e){return x.UserActions.SetImageCutout()},execute:function(e){var t,n=this;return(t=N.ImageFacade.getFrameFormaForForma(this.formaToMask))?this.cutout.mode==U.CutoutMode.Off?(y.opt(D.Host.logging,(function(e){return e.logToAnalytics(E.AnalyticsConstants.kAnalyticsDataEditImageRestoreBackgroundApplied,{})})),N.ImageFacade.removeCutoutMaskFromImage(t)):N.ImageFacade.createAndLoadCutoutMaskForImage(t,this.model,this.maskSize,this.timeout,this.cutout.mode).then((function(e){var i;return(i=y.as(e,L.ImageForma))&&N.ImageFacade.finalizeCutoutAfterMaskLoad(t,i,n.cutout.mode),null})):I.CorePromise.reject("Failed to apply cutout to forma")}}}),r),v.EnterRefineCutoutModeAction=(s=function e(t){this.forma=t,_.Action.call(this,e.TYPE)},y.defineClass({name:"EnterRefineCutoutModeAction",ctor:s,superName:"Action",statics:{TYPE:"EnterRefineCutoutModeAction"},props:{getUserAction:function(e){return x.UserActions.EnterRefineCutoutMode()},execute:function(e){var t;if(t=N.ImageFacade.getFrameFormaForForma(this.forma)){var n=t.page.refineCutoutController.enterRefineCutoutMode(t);return I.CorePromise.fromCoreError(n)}return I.CorePromise.reject("Not an image or frame")}}}),s),v.ExitRefineCutoutModeAction=(c=function e(t,n){this.forma=t,this.commit=n,_.Action.call(this,e.TYPE,new _.ActionExecutionOptions(P.ActionFeedbackWaitingType.Loading,P.ActionFeedbackMessageType.Error))},y.defineClass({name:"ExitRefineCutoutModeAction",ctor:c,superName:"Action",statics:{TYPE:"ExitRefineCutoutModeAction"},props:{getUserAction:function(e){return x.UserActions.ExitRefineCutoutMode()},execute:function(e){var t;return(t=N.ImageFacade.getFrameFormaForForma(this.forma))?t.page.refineCutoutController.exitRefineCutoutMode(t,this.commit):I.CorePromise.reject("Not an image or frame")}}}),c),v.UpdateCutoutMaskMode=y.defineEnum("UpdateCutoutMaskMode",{RefineCutout:0,ResetToOriginal:1,Invert:2,AutoCutout:3}),v.UpdateCutoutMaskAction=(l=function e(t,n,i,o,a,r){var s;void 0===n&&(n=v.UpdateCutoutMaskMode.RefineCutout),void 0===o&&(o=null),void 0===a&&(a=null),void 0===r&&(r=null),this.forma=t,this.maskUpdateMode=n,this.url=i,this.componentID=o,this.cutoutMode=(s=a)||null!=s?s:U.CutoutMode.BackgroundRemoval,this.maskMetadata=r,_.Action.call(this,e.TYPE)},y.defineClass({name:"UpdateCutoutMaskAction",ctor:l,superName:"Action",statics:{TYPE:"UpdateCutoutMaskAction"},props:{getUserAction:function(e){switch(this.maskUpdateMode){case 3:return x.UserActions.SetImageCutout();case 2:return x.UserActions.InvertCutoutMask();case 1:return x.UserActions.RemoveCutoutMaskCompletely();case 0:return x.UserActions.UpdateCutoutMask()}},execute:function(e){var t,n,i;return(t=N.ImageFacade.getCutoutMaskFormaForForma(this.forma))&&(n=t.contentNode)?(N.ImageFacade.setCutoutModeForForma(this.forma,this.cutoutMode),(i=this.maskMetadata)?n.setTag(w.ImageContentNode.IMAGE_MASK_METADATA_TAG,i.encode()):n.removeTag(w.ImageContentNode.IMAGE_MASK_METADATA_TAG),n.url=this.url,n.componentID=this.componentID,I.CorePromise.resolve(null)):I.CorePromise.reject("Mask or content node missing")}}}),l),v.ToggleRefineCutoutFullImageAction=(u=function e(t){this.forma=t,_.Action.call(this,e.TYPE)},y.defineClass({name:"ToggleRefineCutoutFullImageAction",ctor:u,superName:"Action",statics:{TYPE:"ToggleRefineCutoutFullImageAction"},props:{getUserAction:function(e){return x.UserActions.ToggleRefineCutoutFullImage()},execute:function(e){var t;if(t=N.ImageFacade.getFrameFormaForForma(this.forma)){var n=t.page.refineCutoutController.toggleUnmaskedImage(t);return I.CorePromise.fromCoreError(n)}return I.CorePromise.reject("Not an image or frame")}}}),u),v.ChangeImageAdjustmentsAction=(h=function(){},y.defineClass({name:"ChangeImageAdjustmentsAction",ctor:h,superName:"Action",statics:{TYPE:"ChangeImageAdjustmentsAction",ActionWithDictionary:function(e,t){return void 0===t&&(t=null),h.init_f8e4(e,t)},ActionWithKeyValue:function(e,t,n){return void 0===n&&(n=null),h.init_dd66(e,t,n)}},props:{init_dd66:function(e,t,n){void 0===n&&(n=null),this.adjustments=y.dict([e,t]),this.formaeToAdjust=y.clone(n),_.Action.call(this,h.TYPE)},init_f8e4:function(e,t){void 0===t&&(t=null),this.adjustments=y.clone(e),this.formaeToAdjust=y.clone(t),_.Action.call(this,h.TYPE)},getUserAction:function(e){return x.UserActions.ChangeImageAdjustments()},execute:function(e){var t=this;return y.clone(this.formaeToAdjust||e.selection.asFormaArray()).forEach((function(e){if(e.isImage()){var n,i=N.ImageFacade.getImageFormaForForma(e);if(n=y.opt(i,(function(e){return e.style}))){for(var o=y.iter(t.adjustments);!o.done;o.next()){var a=o.key,r=o.value;n.adjustments=y.opt(n.adjustments,(function(e){return e.copyWithNewValue(r,a)}))}y.opt(i,(function(e){return e.applyStyle(n)}))}}})),I.CorePromise.resolve(null)}}}),h),v.ApplyShapeMaskToImageAction=(d=function e(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),this.forma=t,this.shapeId=n,this.usingFrameBounds=i,_.Action.call(this,e.TYPE)},y.defineClass({name:"ApplyShapeMaskToImageAction",ctor:d,superName:"Action",statics:{TYPE:"ApplyShapeMaskToImageAction"},props:{getUserAction:function(e){return x.UserActions.ApplyShapeMaskToImage()},execute:function(e){var t,n,i;return null!=(t=this.shapeId)?(n=b.CropAssetLibrary.getCropShapeFromID(t))&&(i=N.ImageFacade.getFrameFormaForForma(this.forma))?N.ImageFacade.applyMaskToForma(i,n,this.usingFrameBounds).thenReturn(null):I.CorePromise.reject("Failed to apply shape mask to forma"):(N.ImageFacade.removeMaskForForma(this.forma),I.CorePromise.resolve(null))}}}),d),v.ApplyRasterMaskToImageAction=(p=function e(t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!0),void 0===o&&(o=null),this.forma=t,this.rasterMaskId=n,this.removeClipMask=i,this.usingFrameBounds=o,_.Action.call(this,e.TYPE)},y.defineClass({name:"ApplyRasterMaskToImageAction",ctor:p,superName:"Action",statics:{TYPE:"ApplyRasterMaskToImageAction"},props:{getUserAction:function(e){return x.UserActions.ApplyRasterMaskToImage()},execute:function(e){var t,n,i,o,a;return null!=(t=this.rasterMaskId)?(n=b.CropAssetLibrary.getRasterMaskFromID(t))&&(i=N.ImageFacade.getFrameFormaForForma(this.forma))?N.ImageFacade.applyMaskToForma(i,n,this.usingFrameBounds).thenReturn(null):I.CorePromise.reject("Failed to apply raster mask to forma"):(this.removeClipMask&&N.ImageFacade.removeMaskForForma(this.forma),(o=N.ImageFacade.getCutoutMaskFormaForForma(this.forma))&&(a=o.contentNode)&&(N.ImageFacade.removeCutoutForForma(this.forma),F.CreationFacade.removeContentNodeFromDocument(a,e.document)),I.CorePromise.resolve(null))}}}),p),v.SetImageAsFloatingAction=(g=function e(){_.Action.call(this,e.TYPE)},y.defineClass({name:"SetImageAsFloatingAction",ctor:g,superName:"Action",statics:{TYPE:"SetImageAsFloatingAction"},props:{getUserAction:function(e){return x.UserActions.SetImageAsFloating()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&N.ImageFacade.setFloatingImage(t),I.CorePromise.resolve(null)}}}),g),v.SetImageAsBackgroundAction=(m=function e(){_.Action.call(this,e.TYPE)},y.defineClass({name:"SetImageAsBackgroundAction",ctor:m,superName:"Action",statics:{TYPE:"SetImageAsBackgroundAction"},props:{getUserAction:function(e){return x.UserActions.SetImageAsBackground()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&N.ImageFacade.setBackgroundImage(t),I.CorePromise.resolve(null)}}}),m),v.AddHiddenImageToGridAction=(f=function e(t){this.formae=y.clone(t),_.Action.call(this,e.TYPE)},y.defineClass({name:"AddHiddenImageToGridAction",ctor:f,superName:"Action",statics:{TYPE:"AddHiddenImageToGridAction"},props:{getUserAction:function(e){return x.UserActions.AddHiddenImageToGrid()},execute:function(e){for(var t=y.iter(this.formae);!t.done;t.next()){var n;(n=t.value.parent)&&N.ImageFacade.addHiddenImageToGrid(n)}return I.CorePromise.resolve(null)}}}),f),v.EnterCropModeAction=(A=function e(t){this.forma=t,_.Action.call(this,e.TYPE)},y.defineClass({name:"EnterCropModeAction",ctor:A,superName:"Action",statics:{TYPE:"EnterCropModeAction"},props:{getUserAction:function(e){return x.UserActions.EnterCropMode()},execute:function(e){var t;return(t=N.ImageFacade.getImageFormaForForma(this.forma))&&N.ImageFacade.enterCropMode(t),I.CorePromise.resolve(null)}}}),A),v.ExitCropModeAction=(S=function e(){_.Action.call(this,e.TYPE)},y.defineClass({name:"ExitCropModeAction",ctor:S,superName:"Action",statics:{TYPE:"ExitCropModeAction"},props:{getUserAction:function(e){return x.UserActions.ExitCropMode()},execute:function(e){var t;return(t=y.opt(e.document,(function(e){return e.firstPage.root})))&&N.ImageFacade.exitCropMode(t),I.CorePromise.resolve(null)}}}),S),v.SetImageCropToFreeformAction=(C=function e(t){this.forma=t,_.Action.call(this,e.TYPE)},y.defineClass({name:"SetImageCropToFreeformAction",ctor:C,superName:"Action",statics:{TYPE:"SetImageCropToFreeformAction"},props:{getUserAction:function(e){return x.UserActions.SetImageCropToFreeform()},execute:function(e){return N.ImageFacade.removeMaskForForma(this.forma),N.ImageFacade.setImageCropToFreeform(this.forma),I.CorePromise.resolve(null)}}}),C),v.CropImageToRatioAction=(T=function e(t,n,i){void 0===n&&(n=0),void 0===i&&(i=null),this.forma=t,this.ratio=n,this.usingFrameBounds=i,_.Action.call(this,e.TYPE)},y.defineClass({name:"CropImageToRatioAction",ctor:T,superName:"Action",statics:{TYPE:"CropImageToRatioAction"},props:{getUserAction:function(e){return x.UserActions.CropImageToRatio()},execute:function(e){return N.ImageFacade.cropImageToRatio(this.forma,this.ratio,this.usingFrameBounds),I.CorePromise.resolve(null)}}}),T)},cEBg:function(e,t,n){var i,o,a,r=t,s=n("oAGj"),c=n("Tq01"),l=n("yGNn"),u=n("FNB+"),h=n("P83h"),d=n("iCxV"),p=n("K9Oa"),g=n("JFv5"),m=n("5XIA"),f=n("uxH+"),A=n("Kkml");r.ChangePageSizeAction=(i=function e(t,n){this.page=t,this.designSize=n,c.Action.call(this,e.TYPE)},s.defineClass({name:"ChangePageSizeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangePageSizeAction"},props:{getUserAction:function(e){return A.UserActions.ChangePageSize()},execute:function(e){var t;if(t=s.as(this.page.root.controller,f.RootController)){var n=new m.PageResizeScore(this.page.root),i=this.page.database.beginTransaction("try_resize",null);p.PageFacade.setPageDesignSize(this.page,this.designSize),n.evaluateDocument();var o=g.ResizeLayoutType.Fit;if(t.preferredResizeType!=o&&n.reject()){if(i.rollback(),d.Host.platform.isAndroid){var a=new h.FormaHierarchyChangedEvent(this.page.root);a.duration=.2,this.page.root.beginUpdate(a),this.page.root.endUpdate(a)}i=this.page.database.beginTransaction("try_resize2",null);var r=t.preferredResizeType;t.preferredResizeType=o,p.PageFacade.setPageDesignSize(this.page,this.designSize),t.preferredResizeType=r,i.end()}else i.end()}return l.CorePromise.resolve(null)}}}),i),r.RecordOriginalPageSizeAction=(o=function e(t){this.page=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"RecordOriginalPageSizeAction",ctor:o,superName:"Action",statics:{TYPE:"RecordOriginalPageSizeAction"},props:{getUserAction:function(e){return A.UserActions.RecordOriginalPageSize()},execute:function(e){return this.page.originalSizeID=this.page.sizeID,l.CorePromise.resolve(null)}}}),o),r.RecordCreateFromRemixAction=(a=function e(t){this.page=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"RecordCreateFromRemixAction",ctor:a,superName:"Action",statics:{TYPE:"RecordCreateFromRemixAction"},props:{getUserAction:function(e){return A.UserActions.RecordCreateFromRemix()},execute:function(e){for(var t=s.iter(this.page.root.visitAsArray(u.FormaTraversal.PreOrder));!t.done;t.next())t.value.setTag(u.Forma.TAG_CREATED_FROM_REMIX,"true");return l.CorePromise.resolve(null)}}}),a)},cRpU:function(e,t,n){var i,o,a,r,s,c,l,u,h,d,p,g,m,f,A,S,C,T,v,y,_,E,P,b,F=t,I=n("oAGj"),D=n("Tq01"),U=n("yGNn"),w=n("6Rk9"),L=n("iCxV"),N=n("c+uM"),R=n("Vm85"),k=n("8t9B"),x=n("oKlP"),M=n("oKI3"),G=n("Kkml");F.SetTextAction=(i=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=R.ReplaceTextStrategy.Auto),this.text=t,this.forma=n,this.charStyleRanges=I.clone(i),this.strategy=o,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextAction",ctor:i,superName:"Action",statics:{TYPE:"SetText"},props:{getUserAction:function(e){return G.UserActions.SetText(this.forma.formaID)},execute:function(e){return R.TextFacade.replaceTextForLockup(this.forma,this.text,this.charStyleRanges,this.strategy),U.CorePromise.resolve(null)}}}),i),F.SetTextCollapseAction=(o=function e(t,n,i,o,a,r){void 0===o&&(o=null),void 0===a&&(a=!1),void 0===r&&(r=R.ReplaceTextStrategy.Auto),this.text=t,this.forma=n,this.charStyleRanges=I.clone(o),this.strategy=r,this.scope=i,this.useLastPin=a,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextCollapseAction",ctor:o,superName:"Action",statics:{TYPE:"SetTextCollapse",lastPin:null},props:{getUserAction:function(e){return G.UserActions.SetTextCollapse(this.scope)},execute:function(e){var t=this.useLastPin?o.lastPin:null;return o.lastPin=R.TextFacade.replaceTextForLockup(this.forma,this.text,this.charStyleRanges,this.strategy,t,this.fitInPage),U.CorePromise.resolve(null)},fitInPage:function(e,t,n){var i=w.GeometryFacade.NEEDS_FITTING_MAX_INITIAL_RATIO,o=i;w.GeometryFacade.fitInPage(e,t,n,void 0,i,o)}}}),o),F.SetFontAction=(a=function e(t,n){void 0===n&&(n=!1),this.font=t,this.charStyleMode=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetFontAction",ctor:a,superName:"Action",statics:{TYPE:"SetFont"},props:{getUserAction:function(e){return G.UserActions.SetFont(e.selection.IDs.join(","))},execute:function(e){var t=I.clone(e.selection.asFormaArray());return R.TextFacade.setFont(this.font,t,this.charStyleMode),1==t.length&&I.opt(I.as(t[0].controller,k.TypeLockupController),(function(e){return e.snapSizeToBounds()})),U.CorePromise.resolve(null)}}}),a),F.ReplaceMissingFontsAction=(r=function e(){D.Action.call(this,e.TYPE)},I.defineClass({name:"ReplaceMissingFontsAction",ctor:r,superName:"Action",statics:{TYPE:"ReplaceMissingFonts"},props:{getUserAction:function(e){return G.UserActions.ReplaceMissingFonts()},execute:function(e){var t;return(t=e.document)?(R.TextFacade.replaceMissingFonts(t),U.CorePromise.resolve(null)):U.CorePromise.reject("Missing doc")}}}),r),F.ChangeTextLayoutAndAlignmentAction=(s=function e(t,n,i,o,a,r){void 0===i&&(i=!1),void 0===o&&(o=M.TextPathID.UNSET),void 0===a&&(a=null),void 0===r&&(r=N.VerticalLockupAlignment.UNSET),N.LockupStyle.isPath(t)?(o==M.TextPathID.Custom&&null==a||o!=M.TextPathID.Custom&&null!=a)&&I.opt(L.Host.logging,(function(e){return e.warning("pathID/customPath mismatch")})):o==M.TextPathID.UNSET&&null==a||I.opt(L.Host.logging,(function(e){return e.warning("Why are we providing a path or path id with a non-path layout?")})),this.layout=t,this.alignment=n,this.pathID=o,this.customPath=a,this.charStyleMode=i,this.verticalAlignment=r,D.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextLayoutAndAlignmentAction",ctor:s,superName:"Action",statics:{TYPE:"ChangeTextLayoutAndAlignment"},props:{getUserAction:function(e){return G.UserActions.ChangeTextAlignment(e.selection.IDs.join(","))},execute:function(e){var t=I.clone(e.selection.asFormaArray());return R.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,t,this.charStyleMode,this.pathID,this.customPath,this.verticalAlignment),t.forEach((function(e){return I.opt(I.as(e.controller,k.TypeLockupController),(function(e){return e.snapSizeToBounds()}))})),U.CorePromise.resolve(null)}}}),s),F.ChangeTextLineSpacingAction=(c=function e(t,n){void 0===n&&(n=!1),this.lineSpacing=t,this.charStyleMode=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextLineSpacingAction",ctor:c,superName:"Action",statics:{TYPE:"ChangeTextLineSpacing"},props:{getUserAction:function(e){return G.UserActions.ChangeLineSpacing()},execute:function(e){return R.TextFacade.setLineSpacing(this.lineSpacing,e.selection.asFormaArray(),this.charStyleMode),U.CorePromise.resolve(null)}}}),c),F.ChangeTextAttributesAction=(l=function e(t,n,i,o,a,r){void 0===o&&(o=!1),void 0===a&&(a=M.TextPathID.UNSET),void 0===r&&(r=null),this.layout=t,this.alignment=n,this.lineSpacing=i,this.charStyleMode=o,this.pathID=a,this.customPath=r,D.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextAttributesAction",ctor:l,superName:"Action",statics:{TYPE:"ChangeTextAttributes"},props:{getUserAction:function(e){return G.UserActions.ChangeTextAttributes()},execute:function(e){return this.layout==N.LockupLayout.SKIP&&this.alignment==N.LockupAlignment.SKIP||R.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,e.selection.asFormaArray(),this.charStyleMode,this.pathID,this.customPath),isNaN(this.lineSpacing)||R.TextFacade.setLineSpacing(this.lineSpacing,e.selection.asFormaArray(),this.charStyleMode),U.CorePromise.resolve(null)}}}),l),F.SetFontSizeAction=(u=function e(t,n,i){void 0===n&&(n=new x.TheoPoint(.5,.5)),void 0===i&&(i=null),this.size=t,this.pin=n,this.formae=I.clone(i),D.Action.call(this,e.TYPE)},I.defineClass({name:"SetFontSizeAction",ctor:u,superName:"Action",statics:{TYPE:"SetFontSize"},props:{getUserAction:function(e){return G.UserActions.SetFontSize()},execute:function(e){return R.TextFacade.setFontSize(this.size,this.formae||e.selection.asFormaArray(),this.pin),U.CorePromise.resolve(null)}}}),u),F.MatchSizeAction=(h=function e(t,n,i){this.size=t,this.snapSizes=I.clone(n),this.pin=i,D.Action.call(this,e.TYPE)},I.defineClass({name:"MatchSizeAction",ctor:h,superName:"Action",statics:{TYPE:"MatchSize"},props:{getUserAction:function(e){return isNaN(this.size)?G.UserActions.MatchSize():G.UserActions.ResizeItem()},execute:function(e){var t;return t=isNaN(this.size)?R.TextFacade.matchNextSize(this.snapSizes,this.pin,e.selection.asFormaArray()):R.TextFacade.matchNearestSize(this.size,this.snapSizes,this.pin,e.selection.asFormaArray()),U.CorePromise.resolve(new D.DoubleActionResult(t))}}}),h),F.SetLineBreakAction=(d=function e(t,n){void 0===n&&(n=!1),this.lineBreak=t,this.charStyleMode=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetLineBreakAction",ctor:d,superName:"Action",statics:{TYPE:"SetLineBreak"},props:{getUserAction:function(e){return G.UserActions.ToggleLineBreak()},execute:function(e){return R.TextFacade.setLineBreak(this.lineBreak,e.selection.asFormaArray(),this.charStyleMode),U.CorePromise.resolve(null)}}}),d),F.SetNextSpacingSequenceAction=(p=function e(t){this.sequence=t,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetNextSpacingSequenceAction",ctor:p,superName:"Action",statics:{TYPE:"SetNextSpacingSequence"},props:{getUserAction:function(e){return G.UserActions.SetNextSpacingSequence()},execute:function(e){return R.TextFacade.setNextSpacingSequence(this.sequence,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),p),F.SetTrackingAction=(g=function e(t,n){this.tracking=t,this.pin=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetTrackingAction",ctor:g,superName:"Action",statics:{TYPE:"SetTracking"},props:{getUserAction:function(e){return G.UserActions.SetTracking()},execute:function(e){return R.TextFacade.setTracking(this.tracking,this.pin,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),g),F.SetLeadingAction=(m=function e(t,n){this.leading=t,this.pin=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetLeadingAction",ctor:m,superName:"Action",statics:{TYPE:"SetLeading"},props:{getUserAction:function(e){return G.UserActions.SetLeading()},execute:function(e){return R.TextFacade.setLeading(this.leading,this.pin,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),m),F.SetRelativeFontScaleAction=(f=function e(t){this.relativeFontScale=t,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetRelativeFontScaleAction",ctor:f,superName:"Action",statics:{TYPE:"SetRelativeFontScale"},props:{getUserAction:function(e){return G.UserActions.SetRelativeFontScale()},execute:function(e){return R.TextFacade.setRelativeFontScale(this.relativeFontScale,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),f),F.SetPaddingAction=(A=function e(t){this.padding=t,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetPaddingAction",ctor:A,superName:"Action",statics:{TYPE:"SetPadding"},props:{getUserAction:function(e){return G.UserActions.SetPadding()},execute:function(e){return R.TextFacade.setPadding(this.padding,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),A),F.SetTextLookAction=(S=function e(t,n){void 0===n&&(n=!0),this.look=t,this.heuristicAttributes=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextLookAction",ctor:S,superName:"Action",statics:{TYPE:"SetTextLook"},props:{getUserAction:function(e){return G.UserActions.SetTextLook(e.selection.IDs.join(","))},execute:function(e){return R.TextFacade.setTextLook(this.look,e.selection.asFormaArray(),this.heuristicAttributes),U.CorePromise.resolve(null)}}}),S),F.SetTextEffectsAttributesAction=(C=function e(t,n,i){this.outlineStrokeWeight=t,this.shadowOffset=n,this.shadowAngle=i,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextEffectsAttributesAction",ctor:C,superName:"Action",statics:{TYPE:"SetTextEffectsAttributes"},props:{getUserAction:function(e){return G.UserActions.SetTextEffectsAttributes()},execute:function(e){return R.TextFacade.setTextEffectsAttributes(this.outlineStrokeWeight,this.shadowOffset,this.shadowAngle,e.selection.asFormaArray()),U.CorePromise.resolve(null)}}}),C),F.SetHighlightMethodAction=(T=function e(t,n){void 0===n&&(n=!1),this.method=t,this.charStyleMode=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"SetHighlightMethodAction",ctor:T,superName:"Action",statics:{TYPE:"SetHighlightMethod"},props:{getUserAction:function(e){return G.UserActions.SetHighlightMethod(e.selection.IDs.join(","))},execute:function(e){return R.TextFacade.setHightlightMethod(this.method,e.selection.asFormaArray(),this.charStyleMode),U.CorePromise.resolve(null)}}}),T),F.EnterCharStyleModeAction=(v=function e(t){this.forma=t,D.Action.call(this,e.TYPE)},I.defineClass({name:"EnterCharStyleModeAction",ctor:v,superName:"Action",statics:{TYPE:"EnterCharStyleMode"},props:{getUserAction:function(e){var t,n=!1;return(t=I.as(this.forma.controller,k.TypeLockupController))&&(n=0==t.charStyleRanges.length),G.UserActions.EnterCharStyleMode(n)},execute:function(e){return e.selection.inCharStyleMode=!0,R.TextFacade.setCharStyleMode(this.forma,!0),U.CorePromise.resolve(null)}}}),v),F.ExitCharStyleModeAction=(y=function e(t){this.forma=t,D.Action.call(this,e.TYPE)},I.defineClass({name:"ExitCharStyleModeAction",ctor:y,superName:"Action",statics:{TYPE:"ExitCharStyleMode"},props:{getUserAction:function(e){return G.UserActions.ExitCharStyleMode()},execute:function(e){return e.selection.inCharStyleMode=!1,R.TextFacade.setCharStyleMode(this.forma,!1),U.CorePromise.resolve(null)}}}),y),F.ApplyCharStyleAction=(_=function e(t,n,i,o){this.textForma=t,this.characterStyle=n,this.applyMode=i,this.startRange=o,D.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyCharStyleAction",ctor:_,superName:"Action",statics:{TYPE:"ApplyCharStyle"},props:{getUserAction:function(e){return G.UserActions.ApplyCharStyle()},execute:function(e){var t=R.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!0);return U.CorePromise.resolve(new D.TextRangeActionResult(t))}}}),_),F.ApplyCharStyleWithoutUIAction=(E=function(e,t,n,i){this.textForma=e,this.characterStyle=t,this.applyMode=n,this.startRange=i,D.Action.call(this,F.ApplyCharStyleAction.TYPE)},I.defineClass({name:"ApplyCharStyleWithoutUIAction",ctor:E,superName:"Action",statics:{TYPE:"ApplyCharStyleWithoutUI"},props:{getUserAction:function(e){return G.UserActions.ApplyCharStyleWithoutUI()},execute:function(e){var t=R.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!1);return U.CorePromise.resolve(new D.TextRangeActionResult(t))}}}),E),F.ApplyTextStyleSuggestionAction=(P=function e(t,n,i,o){this.style=t,this.forma=n,this.wheelEvaluator=i,this.useEnhancedWheel=o,D.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyTextStyleSuggestionAction",ctor:P,superName:"Action",statics:{TYPE:"ApplyTextStyleSuggestion"},props:{getUserAction:function(e){return G.UserActions.ApplyTextStyleSuggestion(this.forma.formaID)},execute:function(e){var t;(n=I.as(this.forma.controller,k.TypeLockupController))&&null!=n.styleController.getSessionContainerSize()&&null!=n.styleController.getSessionContainerCenter()&&(n.size=n.styleController.getSessionContainerSize(),(t=n.styleController.getSessionContainerCenter())&&this.forma.moveCenterToPoint(t));var n,i=R.TextFacade.applyTextStyleSuggestion(this.style,this.forma,this.wheelEvaluator,this.useEnhancedWheel);return(n=I.as(this.forma.controller,k.TypeLockupController))&&n.snapSizeToBounds(),U.CorePromise.resolve(new D.LockupStyleActionResult(i))}}}),P),F.ApplyNextTextEmphasisSuggestionAction=(b=function e(t,n){this.forma=t,this.wheelEvaluator=n,D.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyNextTextEmphasisSuggestionAction",ctor:b,superName:"Action",statics:{TYPE:"ApplyTextEmphasisSuggestion"},props:{getUserAction:function(e){return G.UserActions.ApplyTextEmphasisSuggestion(this.forma.formaID)},execute:function(e){var t=I.clone(R.TextFacade.applyNextTextEmphasisSuggestion(this.forma,this.wheelEvaluator));return U.CorePromise.resolve(new D.TextEmphasisActionResult(t))}}}),b)},hJqd:function(e,t,n){var i,o,a,r,s=t,c=n("oAGj"),l=n("Tq01"),u=n("kYI4"),h=n("Kkml");s.BrandifyAction=(i=function e(t,n,i,o){void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.authoringContext=t,this.applyFonts=n,this.applyColors=o,this.addLogo=i,l.Action.call(this,e.TYPE)},c.defineClass({name:"BrandifyAction",ctor:i,superName:"Action",statics:{TYPE:"BrandifyAction"},props:{getUserAction:function(e){return h.UserActions.BrandDocument()},execute:function(e){return u.BrandingFacade.brandifyDocument(e.document,this.authoringContext,this.applyFonts,this.addLogo,this.applyColors)}}}),i),s.ChangeBrandingAction=(o=function e(t,n,i){this.fromDocAuthoringContextID=n,this.fromActiveAuthoringContextID=i,this.toAuthoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeBrandingAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeBrandingAction"},props:{getUserAction:function(e){return h.UserActions.ChangeBranding(this.fromDocAuthoringContextID,this.fromActiveAuthoringContextID,c.opt(this.toAuthoringContext,(function(e){return e.id})))},execute:function(e){return u.BrandingFacade.changeBranding(e.document,this.toAuthoringContext)}}}),o),s.AddBrandingAction=(a=function e(t){this.authoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"AddBrandingAction",ctor:a,superName:"Action",statics:{TYPE:"AddBrandingAction"},props:{getUserAction:function(e){return h.UserActions.AddBranding()},execute:function(e){return u.BrandingFacade.addBranding(e.document,this.authoringContext)}}}),a),s.RemoveBrandingAction=(r=function e(t){void 0===t&&(t=!0),this.undoable=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"RemoveBrandingAction",ctor:r,superName:"Action",statics:{TYPE:"RemoveBrandingAction"},props:{getUserAction:function(e){return h.UserActions.RemoveBranding()},execute:function(e){return u.BrandingFacade.removeBranding(e.document)}}}),r)},i5Hy:function(e,t,n){var i,o,a,r,s,c,l,u,h,d,p=t,g=n("oAGj"),m=n("gXiO"),f=n("yGNn"),A=n("SmK9"),S=n("iCxV"),C=n("8vXU"),T=n("C4JV"),v=n("rxGp"),y=n("fNpk"),_=n("6azk"),E=n("90dd"),P=n("ZoS2"),b=n("rrhp");p.SaveResult=(i=function(){m.CoreObject.call(this)},o={},g.defineClass({name:"SaveResult",ctor:i,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===o.NONE&&(o.NONE=new i),o.NONE}},COMPLETE:{get:function(){return void 0===o.COMPLETE&&(o.COMPLETE=new p.SaveComplete),o.COMPLETE}},CANCELED:{get:function(){return void 0===o.CANCELED&&(o.CANCELED=new p.SaveCanceled),o.CANCELED}},fromPromiseAny:function(e){var t;return null==e?(y.LegacyCoreAssert.fail("Save promise should resolve with a SaveResult, not nil",void 0,"SaveResult.fromPromiseAny","SaveManager.swift",23),i.NONE):(t=g.as(e,i))?t:(y.LegacyCoreAssert.fail("Save promise should resolve with a SaveResult",{actualResult:e},"SaveResult.fromPromiseAny","SaveManager.swift",28),i.NONE)}}}),i),p.SaveComplete=(a=function(){p.SaveResult.call(this)},g.defineClass({name:"SaveComplete",ctor:a,superName:"SaveResult",props:{toString:function(){return"SaveComplete"}}}),a),p.SaveCanceled=(r=function(){p.SaveResult.call(this)},g.defineClass({name:"SaveCanceled",ctor:r,superName:"SaveResult",props:{toString:function(){return"SaveCanceled"}}}),r),p.SaveErrorMissingState=(s=function(){p.SaveResult.call(this)},g.defineClass({name:"SaveErrorMissingState",ctor:s,superName:"SaveResult",props:{toString:function(){return"SaveErrorMissingState"}}}),s),p.SaveErrorSaveFailed=(c=function(e){this.errorObject=e},g.defineClass({name:"SaveErrorSaveFailed",ctor:c,superName:"SaveResult",props:{toString:function(){return"SaveErrorSaveFailed: "+this.errorObject}}}),c),p.SaveErrorValidationFailed=(l=function(e){this.error=e},g.defineClass({name:"SaveErrorValidationFailed",ctor:l,superName:"SaveResult",props:{toString:function(){return"SaveErrorValidationFailed: "+this.error.error}}}),l),p.SaveErrorExceptionDuringSave=(u=function(e){this.exception=e},g.defineClass({name:"SaveErrorExceptionDuringSave",ctor:u,superName:"SaveResult",props:{toString:function(){return"SaveErrorExceptionDuringSave: "+this.exception}}}),u),p.SaveMessage=(h=function e(t,n,i,o){void 0===o&&(o=null),this.message=n,this.stateID=i,this.reason=o,E.TheoMessage.call(this,e.TYPE,t)},g.defineClass({name:"SaveMessage",ctor:h,superName:"TheoMessage",statics:{TYPE:"SaveMessage",SAVE_SCHEDULED:"save-scheduled",SAVE_COMPLETED:"save-completed",SAVE_SUCCESSFUL:"save-successful",SAVE_CANCELED:"save-canceled",SAVE_FAILED:"save-failed"}}),h),p.SaveManager=(d=function(){this.saveQueue_="com.adobe.theo.core.save",this.saveTimer_=null,this.saveDelaySeconds_=4,this.saveImmediateDelay_=0,this.savePromise_=null,this.suspendCount_=0,this.undoSubscription=null,this.saveLock_=S.Host.async.newLock(),P.TheoPublishingObject.call(this)},g.defineClass({name:"SaveManager",ctor:d,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{subscribeWithCallback:function(e,t){var n=P.TheoPublishingObject.prototype.subscribeWithCallback.call(this,e,t);return null!=this.savePromise_&&e(new p.SaveMessage(this,p.SaveMessage.SAVE_SCHEDULED,this.pendingSaveState_)),n},subscribe:function(e,t){var n=P.TheoPublishingObject.prototype.subscribe.call(this,e,t);return null!=this.savePromise_&&e.onMessage(new p.SaveMessage(this,p.SaveMessage.SAVE_SCHEDULED,this.pendingSaveState_)),n},enable:function(e){var t,n=this;S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"enable SaveManager for "+g.toString(g.opt(g.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+g.toString(e),C.LogLevelEnum.INFO_LEVEL),this.lastSaveState_=e,(t=g.opt(this.owner,(function(e){return e.undoRedoMgr})))&&null==this.undoSubscription&&(this.undoSubscription=t.subscribeWithCallback((function(e){var t;(t=g.as(e,b.UndoRedoMessage))&&t.changeType==b.UndoRedoMessage.UNDO_REDO_STATE_CLEAN&&n.requestSave().fail((function(e){return y.LegacyCoreAssert.fail("Save failed",{status:g.toString(e)},"SaveManager.enable","SaveManager.swift",197)}))}),b.UndoRedoMessage.TYPE))},disable:function(){S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"disable SaveManager for "+g.toString(g.opt(g.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid}))),C.LogLevelEnum.INFO_LEVEL),g.opt(this.undoSubscription,(function(e){return e.unsubscribe()})),this.undoSubscription=null,this.cancelPendingSave()},markInitialState:function(){var e,t;(e=g.opt(this.owner,(function(e){return e.document})))&&null!=(t=g.opt(e.database.immutableState,(function(e){return e.guid})))&&(this.lastSaveState_=t)},suspend:function(){var e=this;this.ensureDeferredPromise(),this.saveLock_.runInLock((function(){0==e.suspendCount_&&(g.opt(e.saveTimer_,(function(e){return e.cancel()})),e.saveTimer_=null),e.suspendCount_+=1}))},resume:function(){var e=this;this.saveLock_.runInLock((function(){var t;e.suspendCount_>0&&(e.suspendCount_-=1),0==e.suspendCount_&&((t=g.opt(e.owner,(function(e){return e.undoRedoMgr})))&&t.currentlyExecutingAction()||e.requestSave())}))},cancelPendingSave:function(){var e;(e=this.saveTimer_)&&(e.cancel(),S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"cancelPendingSave for "+g.toString(g.opt(g.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+g.toString(this.pendingSaveState_),C.LogLevelEnum.INFO_LEVEL)),this.saveTimer_=null,g.opt(this.savePromise_,(function(e){return e.resolve(p.SaveResult.CANCELED)})),this.savePromise_=null},flushPendingSave:function(){var e;0==this.suspendCount_&&(e=this.savePromise_)&&(this.savePromise_=null,this.validateAndSave(e))},branchForState:function(e){return e==this.lastSaveState_?this.lastSavedBranch_:null},requestSave:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n,i,o=this;if((n=g.opt(this.owner,(function(e){return e.document})))&&null!=(i=g.opt(n.database.immutableState,(function(e){return e.guid})))){S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"requestSave for "+n.uuid+" at "+i,C.LogLevelEnum.INFO_LEVEL);var a,r=!1,s=this.ensureDeferredPromise();if(n.documentInited&&((a=this.saveTimer_)&&(a.cancel(),this.saveTimer_=null),this.saveLock_.runInLock((function(){t?(o.pendingSaveState_=i,r=0==o.suspendCount_):o.runningSaveState_==i?o.pendingSaveState_=null:null==o.runningSaveState_&&o.lastSaveState_==i?(o.pendingSaveState_=null,0==o.suspendCount_&&o.savePromise_.resolve(p.SaveResult.COMPLETE)):(o.pendingSaveState_=i,r=0==o.suspendCount_)}))),r){S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"doScheduleSave for "+n.uuid+" at "+this.pendingSaveState_,C.LogLevelEnum.INFO_LEVEL);var c=e?this.saveImmediateDelay_:this.saveDelaySeconds_;this.saveTimer_=S.Host.async.startTimer(c,(function(){return o.flushPendingSave()}))}return s}return f.CorePromise.reject(new p.SaveErrorMissingState)},pendingSave:{get:function(){return g.opt(this.savePromise_,(function(e){return e.promise}))}},runningSaveStateID:{get:function(){return this.runningSaveState_}},ensureDeferredPromise:function(){var e=this,t=null;return this.saveLock_.runInLock((function(){(null==e.savePromise_||e.savePromise_.promise.finalized)&&(e.savePromise_=f.CorePromise.deferred(),e.publish(new p.SaveMessage(e,p.SaveMessage.SAVE_SCHEDULED,e.pendingSaveState_)),e.savePromise_.promise.finished((function(t,n){p.SaveResult.fromPromiseAny(t)==p.SaveResult.CANCELED?e.publish(new p.SaveMessage(e,p.SaveMessage.SAVE_COMPLETED,e.lastSaveState_,p.SaveMessage.SAVE_CANCELED)):e.publish(new p.SaveMessage(e,p.SaveMessage.SAVE_COMPLETED,e.lastSaveState_,n?p.SaveMessage.SAVE_SUCCESSFUL:p.SaveMessage.SAVE_FAILED))}))),t=e.savePromise_.promise})),t},validateAndSave:function(e){var t=this;this.saveTimer_=null,y.LegacyCoreAssert.isTrue(null!=this.owner,"Save manager has no owner. Document closed without calling willCloseDocument?",void 0,"SaveManager.validateAndSave","SaveManager.swift",369),null!=this.pendingSaveState_?(S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"validateAndSave for "+g.toString(g.opt(g.opt(this.owner,(function(e){return e.document})),(function(e){return e.uuid})))+" at "+this.pendingSaveState_,C.LogLevelEnum.INFO_LEVEL),S.Host.async.postOnWorkerThread(this.saveQueue_,(function(){var n=!1;if(t.saveLock_.runInLock((function(){n=null!=t.runningSaveState_})),n)t.savePromise_=e,t.requestSave(!0);else{t.saveLock_.runInLock((function(){y.LegacyCoreAssert.isTrue(null==t.runningSaveState_,"Save shouldn't be running. Worker queue shouldn't be concurrent.",void 0,"SaveManager.validateAndSave","SaveManager.swift",385),t.runningSaveState_=t.pendingSaveState_,t.pendingSaveState_=null}));var i,o=t.validate();(i=g.as(o,A.DBValidationError))?t.saveLock_.runInLock((function(){t.runningSaveState_=null,e.reject(new p.SaveErrorValidationFailed(i))})):S.Host.exception.executeWithExceptionHandler((function(){return t.save().finished((function(n,i){i?t.saveLock_.runInLock((function(){t.runningSaveState_=null,e.resolve(p.SaveResult.COMPLETE),null!=t.savePromise_&&t.savePromise_!==e&&null==t.pendingSaveState_&&(t.savePromise_.resolve(p.SaveResult.COMPLETE),t.savePromise_=null)})):t.saveLock_.runInLock((function(){return e.reject(new p.SaveErrorSaveFailed(n))}))}))}),(function(n){g.opt(t.saveLock_,(function(e){return e.runInLock((function(){t.runningSaveState_=null}))})),e.reject(new p.SaveErrorExceptionDuringSave(n))}))}}))):e.resolve(p.SaveResult.COMPLETE)},validate:function(){var e,t,n;return(e=g.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)&&(n=e.database.getState(t))?n.validate():new A.DBValidationError},save:function(){var e,t,n=this;if((e=g.opt(this.owner,(function(e){return e.document})))&&null!=(t=this.runningSaveState_)){var i=new _.MiniDocumentBranch(e.uuid),o=new T.JSONDocumentEncoder(i);return e.encodeStateByID(t,o),o.finish(),this.saveLock_.runInLock((function(){n.lastSavedBranch_=i,n.lastSaveState_=n.runningSaveState_})),S.Host.logging.logForCategory(v.LogCategories.kSaveMgr,"requestSaveDocumentAt for "+e.uuid+" at "+t,C.LogLevelEnum.INFO_LEVEL),e.requestSaveDocumentAt(t)}return f.CorePromise.reject(p.SaveResult.CANCELED)}}}),d)},j89o:function(e,t,n){var i,o,a,r,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("yGNn"),d=n("T8w7"),p=n("Kkml");c.SetOpacityAction=(i=function e(t,n){void 0===n&&(n=null),this.opacity=t,this.formae=l.clone(n),u.Action.call(this,e.TYPE)},l.defineClass({name:"SetOpacityAction",ctor:i,superName:"Action",statics:{TYPE:"SetOpacityAction"},props:{getUserAction:function(e){return p.UserActions.ChangeOpacity()},execute:function(e){return d.OpacityFacade.applyOpacity(this.opacity,this.formae||e.selection.asFormaArray()),h.CorePromise.resolve(null)}}}),i),c.SetTextOpacityAction=(o=function e(t,n){void 0===n&&(n=null),this.opacity=t,this.formae=l.clone(n),u.Action.call(this,e.TYPE)},l.defineClass({name:"SetTextOpacityAction",ctor:o,superName:"Action",statics:{TYPE:"SetTextOpacityAction"},props:{getUserAction:function(e){return p.UserActions.ChangeOpacity()},execute:function(e){return d.OpacityFacade.applyTextOpacity(this.opacity,this.formae||e.selection.asFormaArray()),h.CorePromise.resolve(null)}}}),o),c.SetShapeOpacityAction=(a=function e(t,n){void 0===n&&(n=null),this.opacity=t,this.formae=l.clone(n),u.Action.call(this,e.TYPE)},l.defineClass({name:"SetShapeOpacityAction",ctor:a,superName:"Action",statics:{TYPE:"SetShapeOpacityAction"},props:{getUserAction:function(e){return p.UserActions.ChangeOpacity()},execute:function(e){return d.OpacityFacade.applyShapeOpacity(this.opacity,this.formae||e.selection.asFormaArray()),h.CorePromise.resolve(null)}}}),a),c.SetBackgroundOpacityAction=(r=function e(t,n){this.opacity=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetBackgroundOpacityAction",ctor:r,superName:"Action",statics:{TYPE:"SetBackgroundOpacityAction"},props:{getUserAction:function(e){return p.UserActions.SetBackgroundOpacity()},execute:function(e){return d.OpacityFacade.applyBackgroundOpacity(this.opacity,this.page),h.CorePromise.resolve(null)}}}),r),c.SetBlendModeAction=(s=function e(t,n){void 0===n&&(n=null),this.blendMode=t,this.formae=l.clone(n),u.Action.call(this,e.TYPE)},l.defineClass({name:"SetBlendModeAction",ctor:s,superName:"Action",statics:{TYPE:"SetBlendModeAction"},props:{getUserAction:function(e){return p.UserActions.ChangeBlendMode()},execute:function(e){return d.OpacityFacade.applyBlendMode(this.blendMode,this.formae||e.selection.asFormaArray()),h.CorePromise.resolve(null)}}}),s)},jo4Y:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("Kkml");o.DeleteAction=(i=function e(t,n){void 0===t&&(t=null),void 0===n&&(n=!0),this.formaeToDelete=a.clone(t),this.undoable=n,r.Action.call(this,e.TYPE)},a.defineClass({name:"DeleteAction",ctor:i,superName:"Action",statics:{TYPE:"DeleteAction"},props:{canDo:function(e){return null!=this.formaeToDelete||e.selection.selectedCount>0},getUserAction:function(e){return l.UserActions.DeleteItem(this.undoable)},execute:function(e){var t=this;return new c.CorePromise((function(n,i){return s.CreationFacade.deleteFormae(t.formaeToDelete||e.selection.asFormaArray(),(function(){return n(null)}))}))}}}),i)},lbYW:function(e,t,n){var i,o,a,r=t,s=n("oAGj"),c=n("Tq01"),l=n("O8XL"),u=n("yGNn"),h=n("Kkml");r.AlignFormaeAction=(i=function e(t){this.alignType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"AlignFormaeAction",ctor:i,superName:"Action",statics:{TYPE:"AlignFormaeAction"},props:{getUserAction:function(e){return h.UserActions.AlignFormae()},execute:function(e){return l.AlignmentFacade.alignFormae(this.alignType,e.selection.asFormaArray()),u.CorePromise.resolve(null)}}}),i),r.DistributeFormaeAction=(o=function e(t){this.distType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"DistributeFormaeAction",ctor:o,superName:"Action",statics:{TYPE:"DistributeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.distributeFormae(this.distType,e.selection.asFormaArray()),u.CorePromise.resolve(null)}}}),o),r.ArrangeFormaeAction=(a=function e(t){this.horizontal=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ArrangeFormaeAction",ctor:a,superName:"Action",statics:{TYPE:"ArrangeFormaeAction"},props:{getUserAction:function(e){return h.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.arrangeFormae(this.horizontal,e.selection.asFormaArray()),u.CorePromise.resolve(null)}}}),a)},"n/CE":function(e,t,n){var i,o,a,r=t,s=n("oAGj"),c=n("quOg"),l=n("FNB+"),u=n("cmoc"),h=n("9Lk3"),d=n("6Rk9"),p=n("iCxV"),g=n("fNpk"),m=n("uxH+"),f=n("K0Rh"),A=n("90dd"),S=n("ZoS2");r.SelectionStateChangedMessage=(i=function e(t){A.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateChangedMessage",ctor:i,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateChangedMessage"}}}}),i),r.SelectionMode=s.defineEnum("SelectionMode",{Normal:0,Spacing:1,Crop:2,RefineCutout:3}),r.SelectionStateModeChangedMessage=(o=function e(t){A.TheoMessage.call(this,e.TYPE,t)},s.defineClass({name:"SelectionStateModeChangedMessage",ctor:o,superName:"TheoMessage",statics:{TYPE:{get:function(){return"SelectionStateModeChangedMessage"}}}}),o),r.SelectionState=(a=function(){this.selected_=[],this.selectionMode_=r.SelectionMode.Normal,this.inCharStyleMode=!1,S.TheoPublishingObject.call(this)},s.defineClass({name:"SelectionState",ctor:a,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{inSpacingMode:{get:function(){return this.selectionMode_==r.SelectionMode.Spacing},set:function(e){this.selectionMode_=e?r.SelectionMode.Spacing:r.SelectionMode.Normal,s.opt(this.owner,(function(e){return e.updateHandles()}))}},inCropMode:{get:function(){return this.selectionMode_==r.SelectionMode.Crop},set:function(e){var t=e?r.SelectionMode.Crop:r.SelectionMode.Normal;t!=this.selectionMode_&&(this.selectionMode_=t,this.publishSelectionModeChange(),s.opt(this.owner,(function(e){return e.updateHandles()})))}},inRefineCutoutMode:{get:function(){return this.selectionMode_==r.SelectionMode.RefineCutout},set:function(e){var t=e?r.SelectionMode.RefineCutout:r.SelectionMode.Normal;t!=this.selectionMode_&&(this.selectionMode_=t,this.publishSelectionModeChange(),s.opt(this.owner,(function(e){return e.updateHandles()})))}},publishSelectionChange:function(){this.publish(new r.SelectionStateChangedMessage(this))},publishSelectionModeChange:function(){this.publish(new r.SelectionStateModeChangedMessage(this))},selectedCount:{get:function(){return this.selected_.length}},selectedCountInDocument:{get:function(){return this.asFormaArray().length}},IDs:{get:function(){return this.selected_},set:function(e){var t=this;this.clearSelection(!1),e.forEach((function(e){var n;(n=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)})))&&t.selectForma(n,!1)})),this.publishSelectionChange()}},asFormaArray:function(){var e=[];return this.forEachSelected((function(t){s.containsEq(e,t,l._equality_Forma_Forma)||e.push(t)})),e},forEachSelected:function(e){var t=this;this.selected_.forEach((function(n){var i;(i=s.opt(s.opt(t.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(n)})))&&e(i)}))},formaAt:function(e){var t=this;if(e<0||e>=this.selected_.length)return g.LegacyCoreAssert.fail("Invalid index for SelectionState.formaAt",void 0,"SelectionState.formaAt","SelectionState.swift",177),null;var n=s.opt(s.opt(this.owner,(function(e){return e.document})),(function(n){return n.firstPage.root.formaByID(t.selected_[e])}));return null==n&&s.opt(p.Host.logging,(function(e){return e.warning("SelectionState.formaAt(index) is nil even though index is in range")})),n},isFormaSelectable:function(e){var t;if(((t=s.opt(e.controller,(function(e){return e.userGroupChild})))||null!=t)&&t)for(var n=s.iter(this.asFormaArray());!n.done;n.next()){var i,o,a=n.value;if((i=s.opt(a.controller,(function(e){return e.userGroupRoot})))&&(o=s.opt(e.controller,(function(e){return e.userGroupRoot})))&&i==o)return!1}return!this.isSelected(e)&&this.owner.allowSelectionChanges},selectForma:function(e,t){void 0===t&&(t=!0),this.selectFormae([e],t)},selectFormae:function(e,t){void 0===t&&(t=!0);for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isFormaSelectable(i)&&(s.opt(i.parent,(function(e){return e.kind==u.FrameForma.KIND&&(i.isImage()||i.isVideo())}))?this.selected_.push(i.parent.formaID):this.selected_.push(i.formaID))}t&&this.publishSelectionChange()},replaceSelection:function(e){this.replaceSelectionWithFormae([e])},replaceSelectionWithFormae:function(e){this.clearSelectionArray(),this.selectFormae(e)},deselectForma:function(e,t){void 0===t&&(t=!0),this.deselectFormae([e],t)},deselectFormae:function(e,t){if(void 0===t&&(t=!0),this.owner.allowSelectionChanges){for(var n=s.iter(e);!n.done;n.next()){var i=n.value;this.isSelected(i)&&(s.remove(this.selected_,i.formaID),s.opt(i.parent,(function(e){return e.kind==u.FrameForma.KIND}))&&this.isSelected(i.parent)&&s.remove(this.selected_,i.parent.formaID))}t&&this.publishSelectionChange()}},isSelected:function(e){return this.selected_.includes(e.formaID)},isGroupSelected:function(e){var t,n;return(n=s.opt(e.controller,(function(e){return e.userGroupRoot})))?this.selected_.includes(n.formaID):!(!(t=s.opt(e.controller,(function(e){return e.userGroup})))&&null==t||!t)&&this.selected_.includes(e.formaID)},clearSelectionArray:function(){var e=this;if(this.removeStaleSelections(),this.owner.allowSelectionChanges){var t=[];this.forEachSelected((function(n){e.owner.interactionMode==c.InteractionMode.AutomaticGrid&&null!=n.controller&&n.controller.kind==h.GridController.KIND||t.push(n.formaID)}));for(var n=s.iter(t);!n.done;n.next()){var i=n.value;s.remove(this.selected_,i)}}},clearSelection:function(e){void 0===e&&(e=!0),this.owner.allowSelectionChanges&&this.selectedCount>0&&(this.clearSelectionArray(),e&&this.publishSelectionChange())},clearSelectionNoUpdate:function(){this.owner.allowSelectionChanges&&this.clearSelectionArray()},removeStaleSelections:function(e){void 0===e&&(e=!0);var t=this,n=[];this.selected_.forEach((function(e){null==s.opt(s.opt(t.owner,(function(e){return e.document})),(function(t){return t.firstPage.root.formaByID(e)}))&&n.push(e)}));for(var i=s.iter(n);!i.done;i.next()){var o=i.value;s.remove(this.selected_,o)}e&&n.length>0&&this.owner.allowSelectionChanges&&this.publishSelectionChange()},getSelectionDescription:function(){var e,t,n=this.selectedCountInDocument>0?"k_Selection_Multiple":"",i=[];return this.forEachSelected((function(n){var o="";if(((e=s.opt(n.controller,(function(e){return e.userGroup})))||null!=e)&&e)o="k_Selection_Group";else if(n.isText()||n.isTypeLockup())o="k_Selection_Text";else if(n.isSticker())o="k_Selection_GIF";else if(n.isVideo())o="k_Selection_Video";else if(n.isLogo())o="k_Selection_Logo";else if(n.isShape()&&!n.isGridCell())o="k_Selection_Icon";else if(n.isShape()&&n.isGridCell())o="k_Selection_Background";else if(n.isBackgroundImage()||n.isImage())o="k_Selection_Image";else if(n.kind==f.RootForma.KIND){var a;(a=s.opt(s.as(n.controller,m.RootController),(function(e){return e.getGridController()})))&&((t=s.opt(a.gridStyle,(function(e){return e.gridCells.length})))||null!=t?t:0)>0&&(o="k_Selection_Border"),""==o&&(o="k_Selection_Background")}i.includes(o)||i.push(o)})),1==i.length&&(n=i[0]),n},getSelectionBounds:function(){var e=s.clone(this.asFormaArray());return d.GeometryFacade.getFormaeBounds(e)}}}),a)},nELi:function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("wNKJ"),h=n("FNB+"),d=n("6ZWm"),p=n("X0GW"),g=n("iCxV"),m=n("fdtz"),f=n("fAXt"),A=n("Kkml");a.ScaleAction=(i=function e(t,n,i){void 0===i&&(i=!0),this.scale=t,this.formaeToScale=r.clone(n),this.groupScale=i,s.Action.call(this,e.TYPE)},r.defineClass({name:"ScaleAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"ScaleAction"}}},props:{getUserAction:function(e){return A.UserActions.ScaleItem()},execute:function(e){var t,n,i,o,a=(null!=this.formaeToScale?r.clone(this.formaeToScale):e.selection.asFormaArray().map((function(e){var t=r.clone(e.filterByKind(m.ImageForma.KIND,h.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=r.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this),s=null;a.length>1&&this.groupScale&&(i=p.GroupFacade.createGroupFromFormae(a))&&(a.splice(0),a.push(i),s=i);for(var A=r.iter(a);!A.done;A.next()){var S,C=A.value;f.TransformFacade.scaleForma(C,this.scale),u.DragFacade.rescueFormaToPageBounds(C),(S=(n=r.as(C.controller,d.FrameController))||null!=n?n:r.as(r.opt(C.parent,(function(e){return e.controller})),d.FrameController))&&(S.updateParentGroup(),S.fitChildrenToFrame()),C.isImage()?r.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataImageResized,{})})):C.isShape()?r.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataShapeResized,{})})):C.isText()&&r.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataTextResized,{})}))}return(o=s)&&p.GroupFacade.cleanupGroup(o),l.CorePromise.resolve(null)}}}),i),a.RescueAction=(o=function(){},r.defineClass({name:"RescueAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"RescueAction"}}},props:{init_d41d:function(){s.Action.call(this,o.TYPE)},init_e169:function(e){this.formaeToRescue=r.clone(e),s.Action.call(this,o.TYPE)},getUserAction:function(e){return A.UserActions.RescueItem()},execute:function(e){var t;return(null!=this.formaeToRescue?r.clone(this.formaeToRescue):e.selection.asFormaArray().map((function(e){var t=r.clone(e.filterByKind(m.ImageForma.KIND,h.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=r.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this).forEach((function(e){var t;r.as(e,m.ImageForma)&&(t=r.as(r.opt(e.parent,(function(e){return e.controller})),d.FrameController))?(t.updateParentGroup(),t.fitChildrenToFrame()):u.DragFacade.rescueFormaToPageBounds(e)})),l.CorePromise.resolve(null)}}}),o)},"o+xL":function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("6ZWm"),u=n("pnSN"),h=n("X0GW"),d=n("iCxV"),p=n("lmwz"),g=n("Kkml");o.RotateAction=(i=function e(t,n,i,o){void 0===o&&(o=!0),this.angle=t,this.initialImagePlacement=n,this.formaeToRotate=a.clone(i),this.groupRotation=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"RotateAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"RotateAction"}}},props:{getUserAction:function(e){return g.UserActions.RotateItem()},execute:function(e){var t,n=null;null!=this.formaeToRotate?n=a.clone(this.formaeToRotate):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)})));var i=a.clone(n).filter((function(e){return a.opt(e.controller,(function(e){return 1==e.rotateable}))}),this);if(0==i.length)return c.CorePromise.resolve(null);var o,r,g=null;i.length>1&&this.groupRotation&&(o=h.GroupFacade.createGroupFromFormae(i))&&(i.splice(0),i.push(o),g=o);for(var m=a.iter(i);!m.done;m.next()){var f,A,S=m.value;if((f=p.ImageFacade.getImageFormaForForma(S))&&(A=this.initialImagePlacement)){var C=A.transformValues,T=f.placement.transformValues,v=T.xscale>0?1:-1,y=T.yscale>0?1:-1;f.placement=f.placement.scaleTo(C.xscale*v,C.yscale*y)}var _,E=this.angle;S.controller.rotate(E),(_=(t=a.as(S.controller,l.FrameController))||null!=t?t:a.as(a.opt(S.parent,(function(e){return e.controller})),l.FrameController))&&(_.updateParentGroup(),_.fitChildrenToFrame()),S.isImage()?a.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataImageRotated,{})})):S.isShape()?a.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataShapeRotated,{})})):S.isText()?a.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextRotated,{})})):S.kind==u.GroupForma.KIND&&a.opt(d.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataMultiRotated,{})}))}return(r=g)&&h.GroupFacade.cleanupGroup(r),c.CorePromise.resolve(null)}}}),i)},oKI3:function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("fNpk"),c=n("c+uM"),l=n("BgH2"),u=n("oKlP");a.TextPathID=r.defineEnum("TextPathID",{UNSET:-1,Custom:0,Circle:1,SemiCircleUp:2,SemiCircleDown:3,ArcUp:4,ArcDown:5,Wave:6,Rect:7,Line:8}),a.TextPathLibrary=(i=function(){},o={},r.defineClass({name:"TextPathLibrary",ctor:i,statics:{getPathForLockupStyle:function(e){var t=e.layout;s.LegacyCoreAssert.isTrue(c.LockupStyle.isPath(t),"Why are we asking for a path for a non path layout?",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",42);var n=e.pathID;return s.LegacyCoreAssert.isFalse(n==a.TextPathID.UNSET,"Why are we asking for a path when pathID is not set?",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",45),n==a.TextPathID.Custom?(s.LegacyCoreAssert.isTrue(null!=e.customPath,"No custom path",void 0,"TextPathLibrary.getPathForLockupStyle","TextPathLibrary.swift",47),e.customPath):i.getPathByID(n)},getPathByID:function(e){var t;return(t=i.paths[e])?t.clone():(s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.getPathByID","TextPathLibrary.swift",59),i.circlePath)},isPathSymmetric:function(e){switch(e){case 1:case 6:case 7:case 8:return!0;case 2:case 3:case 4:case 5:case 0:return!1;case-1:return s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",83),!1;default:return s.LegacyCoreAssert.fail("Unsupported path id",{id:e},"TextPathLibrary.isPathSymmetric","TextPathLibrary.swift",86),!1}},c:.551915024494,quad0:{get:function(){return void 0===o.quad0&&(o.quad0=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,-i.c),new u.TheoPoint(1-i.c,-1),new u.TheoPoint(1,-1))),o.quad0}},quad1:{get:function(){return void 0===o.quad1&&(o.quad1=new l.TextPathSegment(new u.TheoPoint(1,-1),new u.TheoPoint(1+i.c,-1),new u.TheoPoint(2,-i.c),new u.TheoPoint(2,0))),o.quad1}},quad2:{get:function(){return void 0===o.quad2&&(o.quad2=new l.TextPathSegment(new u.TheoPoint(2,0),new u.TheoPoint(2,i.c),new u.TheoPoint(1+i.c,1),new u.TheoPoint(1,1))),o.quad2}},quad3:{get:function(){return void 0===o.quad3&&(o.quad3=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1-i.c,1),new u.TheoPoint(0,i.c),new u.TheoPoint(0,0))),o.quad3}},quad2Prime:{get:function(){return void 0===o.quad2Prime&&(o.quad2Prime=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(0,i.c),new u.TheoPoint(1-i.c,1),new u.TheoPoint(1,1))),o.quad2Prime}},quad3Prime:{get:function(){return void 0===o.quad3Prime&&(o.quad3Prime=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(1+i.c,1),new u.TheoPoint(2,i.c),new u.TheoPoint(2,0))),o.quad3Prime}},upArc:{get:function(){return void 0===o.upArc&&(o.upArc=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-1),new u.TheoPoint(4,-1),new u.TheoPoint(6,0))),o.upArc}},downArc:{get:function(){return void 0===o.downArc&&(o.downArc=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,1),new u.TheoPoint(4,1),new u.TheoPoint(6,0))),o.downArc}},wave:{get:function(){return void 0===o.wave&&(o.wave=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(2,-2),new u.TheoPoint(4,2),new u.TheoPoint(6,0))),o.wave}},lineTop:{get:function(){return void 0===o.lineTop&&(o.lineTop=new l.TextPathSegment(new u.TheoPoint(0,0),new u.TheoPoint(.3,0),new u.TheoPoint(.7,0),new u.TheoPoint(1,0))),o.lineTop}},lineRight:{get:function(){return void 0===o.lineRight&&(o.lineRight=new l.TextPathSegment(new u.TheoPoint(1,0),new u.TheoPoint(1,.3),new u.TheoPoint(1,.7),new u.TheoPoint(1,1))),o.lineRight}},lineBottom:{get:function(){return void 0===o.lineBottom&&(o.lineBottom=new l.TextPathSegment(new u.TheoPoint(1,1),new u.TheoPoint(.7,1),new u.TheoPoint(.3,1),new u.TheoPoint(0,1))),o.lineBottom}},lineLeft:{get:function(){return void 0===o.lineLeft&&(o.lineLeft=new l.TextPathSegment(new u.TheoPoint(0,1),new u.TheoPoint(0,.7),new u.TheoPoint(0,.3),new u.TheoPoint(0,0))),o.lineLeft}},circlePath:{get:function(){return void 0===o.circlePath&&(o.circlePath=new l.TextPath([i.quad0,i.quad1,i.quad2,i.quad3])),o.circlePath}},semicirclePath:{get:function(){return void 0===o.semicirclePath&&(o.semicirclePath=new l.TextPath([i.quad0,i.quad1])),o.semicirclePath}},semicircleDownPath:{get:function(){return void 0===o.semicircleDownPath&&(o.semicircleDownPath=new l.TextPath([i.quad2Prime,i.quad3Prime])),o.semicircleDownPath}},upArcPath:{get:function(){return void 0===o.upArcPath&&(o.upArcPath=new l.TextPath([i.upArc],2.5)),o.upArcPath}},downArcPath:{get:function(){return void 0===o.downArcPath&&(o.downArcPath=new l.TextPath([i.downArc],2.5)),o.downArcPath}},wavePath:{get:function(){return void 0===o.wavePath&&(o.wavePath=new l.TextPath([i.wave])),o.wavePath}},rectPath:{get:function(){return void 0===o.rectPath&&(o.rectPath=new l.TextPath([i.lineTop,i.lineRight,i.lineBottom,i.lineLeft],1/0)),o.rectPath}},linePath:{get:function(){return void 0===o.linePath&&(o.linePath=new l.TextPath([i.lineTop])),o.linePath}},paths:{get:function(){return void 0===o.paths&&(o.paths={1:i.circlePath,2:i.semicirclePath,3:i.semicircleDownPath,4:i.upArcPath,5:i.downArcPath,6:i.wavePath,7:i.rectPath,8:i.linePath}),o.paths}}}}),i)},p8vO:function(e,t,n){var i,o,a,r,s=t,c=n("oAGj"),l=n("Tq01"),u=n("4mEG"),h=n("CWW7"),d=n("yGNn"),p=n("iCxV"),g=n("mBzD"),m=n("q5zr"),f=n("fNpk"),A=n("VkKB"),S=n("RkYL"),C=n("Yspk"),T=n("Kkml"),v=n("mxdD"),y=n("QTen");s.ChangeVideoVolumeAction=(i=function e(t){void 0===t&&(t=y.VideoStyle.volumeOff),this.volumeLevel=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeVideoVolumeAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeVideoVolumeAction"},props:{getUserAction:function(e){return T.UserActions.ChangeVideoVolume()},execute:function(e){return v.VideoFacade.changeVideoVolume(e.selection.asFormaArray(),this.volumeLevel),d.CorePromise.resolve(null)}}}),i),s.UpdateVideoStyleTrimAction=(o=function e(t,n,i,o,a,r){var s;void 0===r&&(r=null),this.forma=t,this.newTrim=n,this.padding=i,this.isLocalVideo=o,this.posterParams=a,l.Action.call(this,(s=r)||null!=s?s:e.TYPE)},c.defineClass({name:"UpdateVideoStyleTrimAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"UpdateVideoStyleTrimAction"}}},props:{getUserAction:function(e){return T.UserActions.TrimVideo()},executeIfAble:function(e){var t,n;if((t=c.as(this.forma.style,y.VideoStyle))&&(n=this.forma.videoContentNode)){if(!this.isLocalVideo)return t.startTime=this.newTrim.start,t.endTime=this.newTrim.end,this.updatePoster(e),d.CorePromise.resolve(new l.FormaActionResult([this.forma]));var i=C.TheoTimeRange.makeFromDuration(n.originalDuration),o=C.TheoTimeRange.makeFromStartAndDuration(n.offsetInOriginal||S.TheoTime.Zero,n.duration),a=this.newTrim.padBy(this.padding.seconds,i);if(f.LegacyCoreAssert.isTrue(i.contains(o),"trimmed range not in original range",void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",70),f.LegacyCoreAssert.isTrue(i.contains(this.newTrim),"new trim not in original range",void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",71),n.wasTrimmed&&o.contains(a))return t.startTime=this.newTrim.start.subtract(o.start),t.endTime=this.newTrim.end.subtract(o.start),this.updatePoster(e),d.CorePromise.resolve(new l.FormaActionResult([this.forma]))}return null},updatePoster:function(e){var t,n,i;(t=this.posterParams)&&(n=e.document)&&(i=c.as(n.content.createNode(m.ImageContentNode.KIND,null),m.ImageContentNode))&&(i.url=t.url,i.mimeType=t.mimeType,i.pixelWidth=t.width,i.pixelHeight=t.height,h.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,n),this.forma.contentNode=i,h.CreationFacade.addContentNodeToDocument(i,n))},execute:function(e){return this.executeIfAble(e)||d.CorePromise.reject("Cannot trim video - trim window outside of content")}}}),o),s.VideoInfoUpdate=(a=function(e,t){this.pre=e,this.post=t},c.defineClass({name:"VideoInfoUpdate",ctor:a}),a),s.TrimVideoAction=(r=function e(t,n,i,o,a,r,c,l,u){this.videoURL=i,this.videoID=n,this.outputURL=a,this.mimeType=o,this.progress=r,s.UpdateVideoStyleTrimAction.call(this,t,c,l,!0,u,e.TYPE),f.LegacyCoreAssert.isTrue(null==n&&null!=i||null!=n&&null==i,"only one of video id and URL should be provided",void 0,"TrimVideoAction.init","VideoActions.swift",162)},c.defineClass({name:"TrimVideoAction",ctor:r,superName:"UpdateVideoStyleTrimAction",statics:{TYPE:{get:function(){return"TrimVideoAction"}}},props:{execute:function(e){var t,n=this;if(T=s.UpdateVideoStyleTrimAction.prototype.executeIfAble.call(this,e))return T;if(t=this.forma.videoContentNode){var i,o=C.TheoTimeRange.makeFromDuration(t.originalDuration),a=C.TheoTimeRange.makeFromStartAndDuration(t.offsetInOriginal||S.TheoTime.Zero,t.duration),r=this.newTrim.padBy(this.padding.seconds,o);if(f.LegacyCoreAssert.isTrue(o.contains(a),"trimmed range not in original range",void 0,"TrimVideoAction.execute","VideoActions.swift",179),f.LegacyCoreAssert.isTrue(o.contains(this.newTrim),"new trim not in original range",void 0,"TrimVideoAction.execute","VideoActions.swift",180),i=p.Host.videoUtils){var l,h,m,T=null,v=this.outputURL,y=this.progress;if(null!=(l=this.videoURL)?T=i.getAttributesForVideoAtUrl(l).then((function(e){return i.trimVideoAtUrl(l,v,r,y).then((function(t){return new s.VideoInfoUpdate(c.as(e,g.VideoInfo),c.as(t,g.VideoInfo))}))})):null!=(h=this.videoID)&&(T=i.getAttributesForVideoWithId(h).then((function(e){return i.trimVideoWithId(h,v,r,y).then((function(t){return new s.VideoInfoUpdate(c.as(e,g.VideoInfo),c.as(t,g.VideoInfo))}))}))),m=T)return m.then((function(i){var o,l,h;if((o=c.as(i,s.VideoInfoUpdate))&&(l=o.pre)&&(h=o.post)){var p=r.start,g=l.duration,m=new u.ReplaceVideoFormaContentAction(n.forma,n.outputURL,n.mimeType,h.width,h.height,h.duration,p,a.duration,p,g,[],n.posterParams,!1,t.mediaMetadata||A.MediaMetadata.init_5f01(),t.localIdentifier);return e.designController.actions.doAction(m)}return d.CorePromise.reject("Unexpected trim results")}))}}return d.CorePromise.reject("An error occurred while trimming")}}}),r)},pjjd:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("FNB+"),u=n("lmwz"),h=n("Kkml");o.DuplicateAction=(i=function e(t,n,i,o){void 0===o&&(o=!1),this.formaeToDuplicate=a.clone(t),this.offsetDuplicates=n,this.selectDuplicates=i,this.isDragShortcut=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"DuplicateAction",ctor:i,superName:"Action",statics:{TYPE:"DuplicateAction",canAddImages:function(e){if(0==e.length)return!1;for(var t=0,n=a.iter(e);!n.done;n.next())n.value.isImage()&&(t+=1);return u.ImageFacade.canAddImages(e[0].root,t)},useSelection:function(){return new i(null,!0,!0,!1)}},props:{getUserAction:function(e){return h.UserActions.DuplicateItems(this.formaeToDuplicate||e.selection.asFormaArray())},execute:function(e){var t=this;return s.CreationFacade.duplicateItems(this.formaeToDuplicate||e.selection.asFormaArray(),this.offsetDuplicates,!1,this.isDragShortcut).then((function(e){var n;return(n=a.as(e,["Array",l.Forma]))?(t.selectDuplicates&&(t.newSelection=a.clone(n)),new r.FormaActionResult(n)):c.CorePromise.reject("did not get an array of Forma back from CreationFacade.duplicateItems")}))},updateSelection:function(e){return null!=this.newSelection&&this.selectDuplicates&&e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),i)},raY1:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("CWW7"),c=n("Kkml");o.AddFormaAction=(i=function e(t,n,i){this.page=t,this.forma=n,this.params=i,r.Action.call(this,e.TYPE)},a.defineClass({name:"AddFormaAction",ctor:i,superName:"Action",statics:{TYPE:"AddFormaAction"},props:{getUserAction:function(e){return c.UserActions.AddImage()},execute:function(e){return s.CreationFacade.addForma(this.page,this.forma,this.params)}}}),i)},rrhp:function(e,t,n){var i,o,a,r,s,c=t,l=n("oAGj"),u=n("0wFF"),h=n("yGNn"),d=n("P83h"),p=n("ZhwN"),g=n("iCxV"),m=n("8vXU"),f=n("rxGp"),A=n("fNpk"),S=n("90dd"),C=n("ZoS2"),T=n("Kkml");c.IDocumentStateManager=l.defineProtocol("IDocumentStateManager",{resetStates:"() -> Void",getRootState:"() -> IDocumentState",beginNewState:"(String) -> Void",endNewState:"() -> IDocumentState",setCurrentState:"(IDocumentState) -> Void",getNewStateNestingDepth:"() -> Integer"}),c.IDocumentState=l.defineProtocol("IDocumentState",{}),c.PatchStatus=(i=function(e){this.depth=0,this.newStateBegun=e},l.defineClass({name:"PatchStatus",ctor:i}),i),c.TimelineState=(o=function(e,t){this.actionDepth=0,this.patch=null,this.beginSelectedFormaIDs=[],this.endSelectedFormaIDs=[],this.beganInCharStyleMode=!1,this.endedInCharStyleMode=!1,this.compoundingActionWrapperEvent=null,this.branchName=null,this.action=e,this.state=t},l.defineClass({name:"TimelineState",ctor:o,props:{description:{get:function(){var e;return(e=this.branchName)||null!=e?e:l.opt(this.action,(function(e){return e.description}))}}}}),o),c.Timeline=(a=function(e,t){this.states=[],this.current=-1,void 0===e&&(e=null),void 0===t&&(t=null),this.gesture=e,this.name=t},l.defineClass({name:"Timeline",ctor:a,statics:{gesture:function(e){return new a(e,null)},branch:function(e){return new a(null,e)}},props:{currentState:{get:function(){return this.current<0||this.current>this.states.length?null:this.states[this.current]}}}}),a),c.UndoRedoChangeDirection=l.defineEnum("UndoRedoChangeDirection",{Undo:"undo",Redo:"redo"}),c.UndoRedoMessage=(r=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.changeType=n,this.changeAction=i,this.changeDirection=o,S.TheoMessage.call(this,e.TYPE,t)},l.defineClass({name:"UndoRedoMessage",ctor:r,superName:"TheoMessage",statics:{TYPE:"UndoRedoMessage",UNDO_REDO_CHANGE:"state-changed",UNDO_REDO_GESTURE_BEGIN:"gesture-begin",UNDO_REDO_GESTURE_END:"gesture-end",UNDO_REDO_STATE_CLEAN:"state-clean"}}),r),c.UndoRedoSelectionPolicyEnum=l.defineEnum("UndoRedoSelectionPolicyEnum",{RestoreSelection:"restore",PreserveSelection:"preserve"}),c.UndoRedoManager=(s=function(e){this.applyingUpdatedPatchesDepth=0,this.waitingCallbacks=[],this.timeline=new c.Timeline,this.timelineStack=[],this.patches=[],this.gestureUA=null,this.lock=g.Host.async.newLock(),this.safeUndoRedoListeners={},this._lastUndoRedoListenerID=0,this._selectionPolicy=e,C.TheoPublishingObject.call(this)},l.defineClass({name:"UndoRedoManager",ctor:s,superName:"TheoPublishingObject",statics:{_implements:function(e){return"TheoMessagePublisher"==e}},props:{setup:function(){var e;(e=l.opt(this.owner,(function(e){return e.document})))&&(this.stateMgr=l.opt(g.Host.factories,(function(t){return t.constructDocumentStateManager(e)}))),this.reset()},shouldCollapseActions:function(e,t){return null!=e&&null!=t&&e.description==t.description&&e.scope==t.scope},updateSelection:function(e,t,n){var i;if(this._selectionPolicy==c.UndoRedoSelectionPolicyEnum.PreserveSelection)l.opt(this.owner,(function(e){return e.selection.removeStaleSelections(!1)}));else{var o=[],a=!1;if("cancel-branch"==e?(o=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),a=!(!(i=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==i)&&i):"set-index"==e&&t>n?(o=l.clone(this.timeline.states[t].beginSelectedFormaIDs),a=this.timeline.states[t].beganInCharStyleMode):(o=l.clone(this.timeline.currentState.endSelectedFormaIDs),a=this.timeline.currentState.endedInCharStyleMode),"set-index"==e){a=!1;for(var r=[],s=l.iter(o);!s.done;s.next()){var u,h=s.value;(u=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.root.formaByID(h)})))&&(u.isText()||r.push(h))}o=l.clone(r)}"user-action"!=e&&(l.opt(this.owner,(function(e){return e.selection.inCharStyleMode=a})),l.opt(this.owner,(function(e){return e.selection.IDs=l.clone(o)})))}},reset:function(){l.opt(this.stateMgr,(function(e){return e.resetStates()})),this.timeline=new c.Timeline,this.timeline.states.push(new c.TimelineState(null,l.opt(this.stateMgr,(function(e){return e.getRootState()})))),this.timeline.current=0,l.opt(this.owner,(function(e){return e.saveMgr.markInitialState()})),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)},debugDescribeCurrentState:function(){var e,t,n=this.timelineStack.length>0?"[branch depth "+l.toString(this.timelineStack.length)+"] ":"";return n+="Index "+l.toString(this.timeline.current),(e=this.timeline.currentState)?(t=e.action)?n+=" ("+t.description+")":n+=" (Initial state)":n+=" (Invalid state)",n},beginBranch:function(){this.beginNamedBranch(null)},beginNamedBranch:function(e){g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"Starting new branch @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),A.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not branch in the middle of a running gesture",void 0,"UndoRedoManager.beginNamedBranch","UndoRedoManager.swift",317),this.timelineStack.push(this.timeline);var t=c.Timeline.branch(e);t.states.push(this.timeline.currentState),t.current=0,this.timeline=t},endBranch:function(e){var t=this;if(this.timelineStack.length>0){g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,(e?"Committing":"Canceling")+" branch @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL);var n=this.timelineStack.pop();if(e){var i=this.timeline.currentState,o=this.timeline.name;if(this.timeline=n,i===this.timeline.currentState);else{if(this.timeline.current<this.timeline.states.length-1){var a=this.timeline.current+1,r=this.timeline.states.length-a;this.timeline.states.splice(a,r)}l.opt(i,(function(e){return e.branchName=o})),this.timeline.states.push(i),this.timeline.current=this.timeline.states.length-1}this.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE)}else this.timeline=n,l.opt(this.stateMgr,(function(e){return e.setCurrentState(t.timeline.currentState.state)})),this.applyPatches((function(){t.updateSelection("cancel-branch",-1,-1),t.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE)}));0==this.timelineStack.length&&this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}else A.LegacyCoreAssert.fail("endBranch: branch stack underflow",{currentState:this.debugDescribeCurrentState()},"UndoRedoManager.endBranch","UndoRedoManager.swift",377)},beginGesture:function(e){var t=l.clone(null!=this.timeline.gesture?this.timeline.gesture.split(","):["unidentified","none"]);if(A.LegacyCoreAssert.isTrue(null==this.gestureScope,"Beginning gesture scope when gesture already running",{gestureType:t[0],id:t[1]},"UndoRedoManager.beginGesture","UndoRedoManager.swift",400),null!=this.gestureScope&&this.endGesture(!1),null==this.gestureScope){g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"Starting new gesture branch @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_GESTURE_BEGIN),this.timelineStack.push(this.timeline);var n=c.Timeline.gesture(e+", "+p.GUIDUtils.makeGUID());n.states.push(this.timeline.currentState),n.current=0,this.timeline=n,this.gestureUA=null}},endGesture:function(e){var t,n=this;A.LegacyCoreAssert.isTrue(null!=this.gestureScope,"Ending gesture scope when no gesture running",void 0,"UndoRedoManager.endGesture","UndoRedoManager.swift",419),null!=this.gestureScope&&(g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"Ending gesture branch @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),null!=this.gestureUA?(t=this.timeline.currentState)&&this.endActionState(t,(function(){n.endBranch(e),n.publishEvent(c.UndoRedoMessage.UNDO_REDO_GESTURE_END),n.gestureUA=null})):(this.endBranch(e),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_GESTURE_END)))},gestureScope:{get:function(){return this.timeline.gesture}},gestureActionDesc:{get:function(){return l.opt(this.gestureUA,(function(e){return e.description}))}},beginUserActionAsync:function(e){var t=this;return new h.CorePromise((function(n,i){return t.beginUserAction(e,(function(){return n(null)}))}))},endUserActionAsync:function(){var e=this;return new h.CorePromise((function(t,n){return e.endUserAction((function(){return t(null)}))}))},beginUserAction:function(e,t){var n,i=this;g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"beginUserAction @ ("+e.description+")",m.LogLevelEnum.INFO_LEVEL);var o=this.timeline.currentState;if(o.actionDepth>0)A.LegacyCoreAssert.fail("Nested user action detected",{new:e.description,current:o.action.description},"UndoRedoManager.beginUserAction","UndoRedoManager.swift",485),o.actionDepth+=1,t();else{this.timeline.states.length>this.timeline.current+1&&this.timeline.states.splice(this.timeline.current+1,this.timeline.states.length-this.timeline.current-1);var a=this.shouldCollapseActions(o.action,e),r=e.collapseSequential==T.CollapseBehavior.ALWAYS||e.collapseSequential==T.CollapseBehavior.GESTURE_DEPENDENT&&null!=this.gestureScope;if(null!=this.gestureScope&&null!=this.gestureUA&&a&&r)o.actionDepth=1,t();else{var s=new c.TimelineState(e,null);function u(n,o){null!=i.gestureScope&&null==i.gestureUA&&(i.gestureUA=e),i.timeline.states.push(n),i.timeline.current=i.timeline.states.length-1,o?i.applyPatches((function(){n.actionDepth=1,l.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t()})):(n.actionDepth=1,l.opt(i.stateMgr,(function(t){return t.beginNewState(e.description)})),t())}if(s.beginSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),s.beganInCharStyleMode=!(!(n=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n,!(null!=this.gestureScope&&this.timeline.current>=1)||r&&a)if((!e.compounding||r)&&a&&this.timeline.current>=1){for(var h=!1,p=this.timeline.current-1;p>0&&this.shouldCollapseActions(this.timeline.states[p].action,e);)p-=1;e.compounding||(s.compoundingActionWrapperEvent=new d.FormaNullChangedEvent(this.owner.document.firstPage.root),l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(s.compoundingActionWrapperEvent)})),l.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[p].state)})),h=!0),r&&this.timeline.states.splice(p+1,1),u(s,h)}else u(s,!1);else s.compoundingActionWrapperEvent=new d.FormaNullChangedEvent(this.owner.document.firstPage.root),l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.firstPage.beginUpdate(s.compoundingActionWrapperEvent)})),this.endActionState(this.timeline.currentState,(function(){l.opt(i.stateMgr,(function(e){return e.setCurrentState(i.timeline.states[0].state)})),u(s,!0)}));this.notifySafeUndoRedoListeners()}}},endActionState:function(e,t){var n,i=this;null!=e.compoundingActionWrapperEvent&&(l.opt(l.opt(this.owner,(function(e){return e.document})),(function(t){return t.firstPage.endUpdate(e.compoundingActionWrapperEvent)})),e.compoundingActionWrapperEvent=null),e.actionDepth=0,e.endSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]),e.endedInCharStyleMode=!(!(n=l.opt(this.owner,(function(e){return e.selection.inCharStyleMode})))&&null==n)&&n,this.applyPatches((function(){for(;i.waitingCallbacks.length>0&&0==i.timeline.currentState.actionDepth;)i.waitingCallbacks.shift()();i.updateSelection("user-action",-1,-1),i.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),i.gestureUA=null,t(),0==i.timelineStack.length&&0==i.timeline.currentState.actionDepth&&i.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))},endUserAction:function(e){var t;(t=this.timeline.currentState)?(g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"endUserAction @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),A.LegacyCoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",623),A.LegacyCoreAssert.isTrue(null!=t.action,"invalid current state for ending a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",624),0==t.actionDepth?A.LegacyCoreAssert.fail("User action stack underflow",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",627):t.actionDepth>1||null!=this.gestureScope&&null!=this.gestureUA?(t.actionDepth-=1,e()):this.endActionState(t,e)):A.LegacyCoreAssert.fail("invalid current state for ending a user action",void 0,"UndoRedoManager.endUserAction","UndoRedoManager.swift",646)},cancelUserAction:function(e){var t,n=this;if(t=this.timeline.currentState)if(g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"cancelUserAction @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),A.LegacyCoreAssert.isTrue(this.timeline.current>0,"first timeline entry should always be initial state, not a user action",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",658),0==t.actionDepth)A.LegacyCoreAssert.fail("User action stack underflow",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",661);else{if(t.actionDepth>1)return A.LegacyCoreAssert.fail("Can not cancel a user action with a depth greater than 1",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",663),this.endUserAction(e);t.actionDepth=0,t.endSelectedFormaIDs=l.clone(l.opt(this.owner,(function(e){return e.selection.IDs}))||[]);var i=this.getCurrentTimelineIndex(),o=i-1;t.state=l.opt(this.stateMgr,(function(e){return e.endNewState()})),this.notifySafeUndoRedoListeners(),this.setCurrentTimelineIndex(o,(function(){for(n.removeTimelineStateAtIndex(i),n.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE);n.waitingCallbacks.length>0&&0==n.timeline.currentState.actionDepth;)n.waitingCallbacks.shift()();n.gestureUA=null,e(),0==n.timelineStack.length&&0==n.timeline.currentState.actionDepth&&n.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN)}))}else A.LegacyCoreAssert.fail("invalid current state for ending a user action",void 0,"UndoRedoManager.cancelUserAction","UndoRedoManager.swift",694)},getActionDepth:function(){var e;return(e=l.opt(this.timeline.currentState,(function(e){return e.actionDepth})))||null!=e?e:0},registerPatch:function(e){this.patches.push(e)},getPatchDepth:function(){var e;return(e=l.opt(l.opt(this.timeline.currentState,(function(e){return e.patch})),(function(e){return e.depth})))||null!=e?e:-1},beginPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?(t.newStateBegun||(l.opt(this.stateMgr,(function(e){return e.beginNewState("patch")})),t.newStateBegun=!0),t.depth+=1):A.LegacyCoreAssert.fail("Invalid beginPatch: not in a patching context.",void 0,"UndoRedoManager.beginPatch","UndoRedoManager.swift",744))},endPatch:function(){var e,t;(e=this.timeline.currentState)&&((t=e.patch)?t.depth>0?t.depth-=1:A.LegacyCoreAssert.fail("Patch stack underflow!",void 0,"UndoRedoManager.endPatch","UndoRedoManager.swift",758):A.LegacyCoreAssert.fail("Invalid beginPatch: not in a patching context.",void 0,"UndoRedoManager.endPatch","UndoRedoManager.swift",761))},invalidatePatches:function(e){var t=this;0==this.getActionDepth()&&null==this.gestureScope?(this.applyingUpdatedPatchesDepth+=1,this.applyPatches((function(){t.publishEvent("state-updated"),t.applyingUpdatedPatchesDepth-=1,0==t.timelineStack.length&&0==t.timeline.currentState.actionDepth&&t.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN),e()}))):e()},undo:function(e){var t,n=this;A.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not undo in the middle of a running gesture",void 0,"UndoRedoManager.undo","UndoRedoManager.swift",798),this.timeline.current<=0?e():(l.opt(g.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataUndo,{contextualData2:"actionDescription:"+((t=n.getUndoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current-1,e,c.UndoRedoChangeDirection.Undo))},redo:function(e){var t,n=this;A.LegacyCoreAssert.isTrue(null==this.gestureScope,"Should not redo in the middle of a running gesture",void 0,"UndoRedoManager.redo","UndoRedoManager.swift",816),this.timeline.current==this.timeline.states.length-1?e():(l.opt(g.Host.logging,(function(e){return e.logToAnalytics(u.AnalyticsConstants.kAnalyticsDataRedo,{contextualData2:"actionDescription:"+((t=n.getRedoDescription())||null!=t?t:"unknown")})})),this.setCurrentTimelineIndex(this.timeline.current+1,e,c.UndoRedoChangeDirection.Redo))},canShowUndoRedoUI:function(e){var t=this;l.opt(this.lock,(function(n){return n.runInLock((function(){var n=t.timeline.states.reduce((function(e,t){return e&&null!=t.state}),!0);e(t.timeline.current>0&&n,t.timeline.current<t.timeline.states.length-1&&n,n)}))}))},addSafeUndoRedoListener:function(e){return this._lastUndoRedoListenerID+=1,this.safeUndoRedoListeners[this._lastUndoRedoListenerID]=e,this._lastUndoRedoListenerID},removeSafeUndoRedoListener:function(e){l.removeKey(this.safeUndoRedoListeners,e)},notifySafeUndoRedoListeners:function(){for(var e=l.iter(l.values(this.safeUndoRedoListeners));!e.done;e.next())(0,e.value)()},getUndoDescription:function(){return this.timeline.current<=0?null:l.opt(this.timeline.currentState,(function(e){return e.description}))},getRedoDescription:function(){return this.timeline.current==this.timeline.states.length-1?null:this.timeline.states[this.timeline.current+1].description},applyPatches:function(e){var t,n=this,i=this.timeline.states[this.timeline.current];A.LegacyCoreAssert.isTrue(null==i.patch,"applying patches before previous patch context is finished!",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",908),A.LegacyCoreAssert.isTrue(0==i.actionDepth,"should not apply patches while user action still mutating",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",909),i.patch=new c.PatchStatus(((t=l.opt(this.stateMgr,(function(e){return e.getNewStateNestingDepth()})))||null!=t?t:0)>0),function e(t,o){t>=n.patches.length?o():(i!==n.timeline.states[n.timeline.current]&&l.opt(g.Host.logging,(function(e){return e.warning("unexpected change of timeline during patching")})),A.LegacyCoreAssert.isTrue(null!=i.patch&&0==i.patch.depth,"unexpected state between patches",void 0,"UndoRedoManager.applyPatches","UndoRedoManager.swift",921),n.patches[t]((function(){return e(t+1,o)})))}(0,(function(){i!==n.timeline.currentState&&l.opt(g.Host.logging,(function(e){return e.warning("unexpected change of timeline during patching")})),i.patch.newStateBegun&&(i.state=l.opt(n.stateMgr,(function(e){return e.endNewState()})),n.notifySafeUndoRedoListeners()),i.patch=null,e()}))},getTimelineLength:function(){return this.timeline.states.length},getCurrentTimelineState:function(){return this.timeline.currentState},getCurrentTimelineIndex:function(){return this.timeline.current},getTimelineStateAtIndex:function(e){return A.LegacyCoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"getTimelineStateAtIndex: index out of range",void 0,"UndoRedoManager.getTimelineStateAtIndex","UndoRedoManager.swift",969),this.timeline.states[e]},publishUndoEvent:function(e){var t;((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t&&(this.publish(new c.UndoRedoMessage(this,c.UndoRedoMessage.UNDO_REDO_CHANGE,e,c.UndoRedoChangeDirection.Undo)),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishRedoEvent:function(e){var t;((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t&&(this.publish(new c.UndoRedoMessage(this,c.UndoRedoMessage.UNDO_REDO_CHANGE,e,c.UndoRedoChangeDirection.Redo)),this.publishEvent(c.UndoRedoMessage.UNDO_REDO_STATE_CLEAN))},publishEvent:function(e){var t;(e!=c.UndoRedoMessage.UNDO_REDO_CHANGE||((t=l.opt(l.opt(this.owner,(function(e){return e.document})),(function(e){return e.documentInited})))||null!=t)&&t)&&this.publish(new c.UndoRedoMessage(this,e))},removeTimelineStateAtIndex:function(e){A.LegacyCoreAssert.isTrue(e>0,"removeStateAtIndex: should not remove the initial state!",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",1003),A.LegacyCoreAssert.isTrue(e!=this.timeline.current,"removeStateAtIndex: should not remove the current state!",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",1004),A.LegacyCoreAssert.isTrue(e>=0&&e<this.timeline.states.length,"removeStateAtIndex: index out of range",void 0,"UndoRedoManager.removeTimelineStateAtIndex","UndoRedoManager.swift",1005),e>0&&e<this.timeline.states.length&&(this.timeline.states.splice(e,1),e<this.timeline.current&&(this.timeline.current-=1),this.publishEvent("timeline-changed"))},setCurrentTimelineIndex:function(e,t,n){void 0===n&&(n=null);var i=this,o=n==c.UndoRedoChangeDirection.Undo,a=n==c.UndoRedoChangeDirection.Redo;if(g.Host.logging.logForCategory(f.LogCategories.kUndoMgr,"setting timeline index to "+l.toString(e)+" @ "+this.debugDescribeCurrentState(),m.LogLevelEnum.INFO_LEVEL),e!=this.timeline.current&&e>=0&&e<this.timeline.states.length){var r=l.opt(this.timeline.currentState,(function(e){return e.action})),s=this.timeline.current;this.timeline.current=e;var u=l.opt(this.timeline.currentState,(function(e){return e.action}));return l.opt(this.stateMgr,(function(e){return e.setCurrentState(i.timeline.currentState.state)})),this.applyPatches((function(){i.updateSelection("set-index",s,e),o?i.publishUndoEvent(r):a?i.publishRedoEvent(u):i.publishEvent(c.UndoRedoMessage.UNDO_REDO_CHANGE),t()}))}t()},whenNoCurrentAction:function(e){0==this.timeline.currentState.actionDepth?e():this.waitingCallbacks.push(e)},currentlyExecutingAction:function(){var e;return null!=this.gestureScope||!!(e=this.timeline.currentState)&&(this.getActionDepth()>0||null!=e.patch)},establishSelectionStates:function(){var e=this;l.opt(this.timeline.currentState,(function(t){return t.endSelectedFormaIDs=l.clone(l.opt(e.owner,(function(e){return e.selection.IDs}))||[])}))}}}),s)},rsKm:function(e,t,n){var i,o,a,r=t,s=n("oAGj"),c=n("Tq01"),l=n("yGNn"),u=n("gBh/"),h=n("c+uM"),d=n("8t9B"),p=n("Kkml");r.ApplyColorThemeAction=(i=function e(t,n,i,o){void 0===i&&(i=null),void 0===o&&(o=!1),this.themeColors=s.clone(t),this.themeID=n,this.doShuffle=o,this.page=i,c.Action.call(this,e.TYPE)},s.defineClass({name:"ApplyColorThemeAction",ctor:i,superName:"Action",statics:{TYPE:"ApplyColorThemeAction"},props:{getUserAction:function(e){return this.doShuffle?p.UserActions.ShuffleColorTheme():p.UserActions.SetColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.applyColorTheme(this.themeColors,this.themeID,t),this.doShuffle&&u.ColorThemeFacade.shuffleColorTheme(t)),l.CorePromise.resolve(new c.ActionResult)}}}),i),r.ShuffleColorThemeAction=(o=function e(t){void 0===t&&(t=null),this.page=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ShuffleColorThemeAction",ctor:o,superName:"Action",statics:{TYPE:"ShuffleColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ShuffleColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&u.ColorThemeFacade.shuffleColorTheme(t),l.CorePromise.resolve(new c.ActionResult)}}}),o),r.ModifyColorThemeAction=(a=function e(t,n,i){void 0===i&&(i=null),this.color=t,this.key=n,this.page=i,c.Action.call(this,e.TYPE)},s.defineClass({name:"ModifyColorThemeAction",ctor:a,superName:"Action",statics:{TYPE:"ModifyColorThemeAction"},props:{getUserAction:function(e){return p.UserActions.ModifyColorTheme()},execute:function(e){var t,n=this;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.modifyColorTheme(this.color,this.key,t),t.root.filterByControllerKind(d.TypeLockupController.KIND).forEach((function(e){var t;if(t=s.opt(s.as(e.style,h.LockupStyle),(function(e){return e.characterStyles.Highlight}))){var i=!1;t.colors.forEachColor((function(t,o,a){o!=n.key||i||(s.opt(e.controller,(function(e){return e.styleChanged()})),i=!0)}))}}))),l.CorePromise.resolve(new c.ActionResult)}}}),a)},sTUO:function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("MYNe"),u=n("Kkml");a.ChangeZOrderAction=(i=function e(t){this.zIndex=t,s.Action.call(this,e.TYPE)},r.defineClass({name:"ChangeZOrderAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeZOrderAction"},props:{getUserAction:function(e){return u.UserActions.ChangeZOrder()},execute:function(e){var t=e.selection.formaAt(0);return l.LayerFacade.setZOrder(this.zIndex,t),c.CorePromise.resolve(null)}}}),i),a.SendForwardBackwardAction=(o=function e(t,n){this.direction=t,this.formae=r.clone(n),s.Action.call(this,e.TYPE)},r.defineClass({name:"SendForwardBackwardAction",ctor:o,superName:"Action",statics:{TYPE:"SendForwardBackwardAction"},props:{getUserAction:function(e){return u.UserActions.SendForwardBackward()},execute:function(e){l.LayerFacade.sortInZOrder(this.formae);var t=r.clone(l.LayerFacade.sortInZOrder(e.selection.asFormaArray()));this.direction!=l.ZOrderEnum.Back&&this.direction!=l.ZOrderEnum.Forward||(this.formae=r.reverse(this.formae));for(var n=r.iter(this.formae);!n.done;n.next()){var i,o=n.value,a=l.LayerFacade.getZOrder(o),s=l.LayerFacade.getMinLayerIndex(o);if(null!=(i=r.opt(o.controller,(function(e){return e.getReorderableLayerCount()}))))switch(this.formae.length<t.length&&(this.direction==l.ZOrderEnum.Front?i-=t.length-this.formae.length:this.direction==l.ZOrderEnum.Back&&(s+=t.length-this.formae.length)),this.direction){case"forward":a<i+s-1&&l.LayerFacade.setZOrder(a+1,o);break;case"backward":a!=s&&l.LayerFacade.setZOrder(a-1,o);break;case"front":a!=i+s-1&&l.LayerFacade.setZOrder(i+s-1,o);break;case"back":a!=s&&l.LayerFacade.setZOrder(s,o)}}return c.CorePromise.resolve(null)}}}),o)},vV1H:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("iCxV"),u=n("Kkml");o.FlipAction=(i=function e(t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.vertical=t,this.formaeToFlip=a.clone(n),r.Action.call(this,e.TYPE)},a.defineClass({name:"FlipAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"FlipAction"}}},props:{getUserAction:function(e){return u.UserActions.FlipItem()},execute:function(e){var t=this,n=null;return null!=this.formaeToFlip?n=a.clone(this.formaeToFlip):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)}))),a.clone(n).filter((function(e){return a.opt(e.controller,(function(e){return 1==e.flippable}))}),this).forEach((function(e){e.controller.flip(t.vertical),e.isShape()?t.vertical?a.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataIconFlippedVertical,{})})):a.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataIconFlippedHorizontal,{})})):e.isText()&&a.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextFlipped,{})}))})),c.CorePromise.resolve(null)}}}),i)},wpCo:function(e,t,n){var i,o=t,a=n("oAGj"),r=n("Tq01"),s=n("0wFF"),c=n("6h7+"),l=n("iCxV"),u=n("Kkml");o.AddBadgeAction=(i=function e(t,n,i,o){void 0===n&&(n=null),void 0===o&&(o=c.BadgeType.Lockup),this.badgeDoc=t,this.formaToReplace=n,this.badgeID=i,this.badgeType=o,r.Action.call(this,e.TYPE)},a.defineClass({name:"AddBadgeAction",ctor:i,superName:"Action",statics:{TYPE:"AddBadgeAction"},props:{getUserAction:function(e){return u.UserActions.AddBadge()},execute:function(e){var t=this,n=e.document;return c.BadgeFacade.addBadge(this.badgeDoc,this.badgeID,n.firstPage,this.formaToReplace).then((function(e){var n;return(n=a.opt(a.as(e,r.FormaActionResult),(function(e){return e.formae})))&&(t.newSelection=a.clone(n)),a.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kDesignIngredientAdded,{contextualData1:"designIngredientId:"+t.badgeID,contextualData2:"designIngredientType:"+t.badgeType})})),e}))},updateSelection:function(e){return l.Host.platform.isWeb||null==this.newSelection||e.selection.replaceSelectionWithFormae(this.newSelection),this.newSelection}}}),i)},x6FH:function(e,t,n){var i,o,a,r,s,c=t,l=n("oAGj"),u=n("Tq01"),h=n("yGNn"),d=n("x35w"),p=n("Kkml");c.CreatePaddedCollageAction=(i=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"CreatePaddedCollageAction",ctor:i,superName:"Action",statics:{TYPE:"CreatePaddedCollageAction"},props:{getUserAction:function(e){return p.UserActions.CreateCollage()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(n=d.GridFacade.createPaddedCollage(t))?h.CorePromise.resolve(new u.FormaActionResult([n])):h.CorePromise.reject("could not get or create page grid"):h.CorePromise.reject("no document or page?")}}}),i),c.SetGridParametersAction=(o=function e(t,n){this.spacing=t,this.margin=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridParametersAction",ctor:o,superName:"Action",statics:{TYPE:"SetGridParametersAction"},props:{getUserAction:function(e){return p.UserActions.SetLayoutMargin()},execute:function(e){var t;if(t=l.opt(e.document,(function(e){return e.firstPage}))){var n;if(d.GridFacade.setPageGridParameters(t,this.spacing,this.margin),this.spacing==this.margin&&(n=d.GridFacade.getPageGrid(t,!1))&&n.spacing!=n.margin){var i=Math.min(n.spacing,n.margin);d.GridFacade.setPageGridParameters(t,i,i)}return h.CorePromise.resolve(null)}return h.CorePromise.reject("no document or page?")}}}),o),c.SwapGridFormaAction=(a=function e(t,n){this.a=t,this.b=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SwapGridFormaAction",ctor:a,superName:"Action",statics:{TYPE:"SwapGridFormaAction"},props:{getUserAction:function(e){return p.UserActions.SwapGridCells()},execute:function(e){return d.GridFacade.isChildSwappable(this.a)&&d.GridFacade.isChildSwappable(this.b)?(d.GridFacade.swapChildren(this.a,this.b),h.CorePromise.resolve(null)):h.CorePromise.reject("grid children not swappable? or no grid controller?")}}}),a),c.SetGridStyleAction=(r=function e(t,n){this.style=t,this.variation=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridStyleAction",ctor:r,superName:"Action",statics:{TYPE:"SetGridStyleAction"},props:{getUserAction:function(e){return p.UserActions.SetGridStyle()},execute:function(e){var t;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(d.GridFacade.applyGridStyle(this.style,this.variation,t),h.CorePromise.resolve(null)):h.CorePromise.reject("no document or page?")}}}),r),c.EnterGridLayoutModeAction=(s=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"EnterGridLayoutModeAction",ctor:s,superName:"Action",statics:{TYPE:"EnterGridLayoutModeAction"},props:{getUserAction:function(e){return p.UserActions.EnterGridLayoutMode()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))&&(n=d.GridFacade.getPageGrid(t,!0))?(n.enterLayoutMode(),h.CorePromise.resolve(null)):h.CorePromise.reject("no page or grid?")}}}),s)},"y/On":function(e,t,n){var i,o,a=t,r=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("FNB+"),h=n("P83h"),d=n("pnSN"),p=n("X0GW"),g=n("iCxV"),m=n("Kkml");a.GroupAction=(i=function e(t,n,i){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===i&&(i=""),this.formaeToGroup=r.clone(t),this.selectGroup=n,this.method=i,s.Action.call(this,e.TYPE)},r.defineClass({name:"GroupAction",ctor:i,superName:"Action",statics:{TYPE:"GroupAction"},props:{getUserAction:function(e){return m.UserActions.GroupItems()},execute:function(e){var t=this;return p.GroupFacade.groupItems(this.formaeToGroup||e.selection.asFormaArray()).then((function(e){var n=r.as(e,u.Forma);if(null!=n){var i;if(t.selectGroup&&(t.newSelection=[n]),i=r.as(n,d.GroupForma)){var o=p.GroupFacade.getGroupDepth(i);r.opt(g.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataGroupPressed,{contextualData1:"count:"+i.childCount,contextualData2:"depth:"+o,contextualData3:"method:"+t.method})}))}return new s.FormaActionResult([n])}return l.CorePromise.reject("did not get a GroupForma back from GroupFacade.groupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectGroup){e.selection.replaceSelectionWithFormae(this.newSelection);for(var t=r.iter(this.newSelection);!t.done;t.next()){var n=t.value,i=new h.FormaGroupEvent(n);n.beginUpdate(i),n.endUpdate(i)}}return this.newSelection}}}),i),a.UngroupAction=(o=function e(t,n,i){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===i&&(i=""),this.formaeToUngroup=r.clone(t),this.selectUngroup=n,this.method=i,s.Action.call(this,e.TYPE)},r.defineClass({name:"UngroupAction",ctor:o,superName:"Action",statics:{TYPE:"UngroupAction"},props:{getUserAction:function(e){return m.UserActions.UngroupItems()},execute:function(e){var t=this,n=r.clone(this.formaeToUngroup||e.selection.asFormaArray());return p.GroupFacade.ungroupItems(n).then((function(e){var i;if(i=r.as(e,["Array",u.Forma])){t.selectUngroup&&(t.newSelection=r.clone(i));var o=c.AnalyticsConstants.kAnalyticsDataGroupUngroupPressed;return n.length>1&&(o=c.AnalyticsConstants.kAnalyticsDataMultiselectUngroupPressed),r.opt(g.Host.logging,(function(e){return e.logToAnalytics(o,{contextualData1:"count:"+i.length,contextualData3:"method:"+t.method})})),new s.FormaActionResult(i)}return l.CorePromise.reject("did not get a set of forma back from GroupFacade.ungroupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectUngroup){e.selection.removeStaleSelections(),e.selection.selectFormae(this.newSelection);for(var t=r.iter(this.newSelection);!t.done;t.next()){var n=t.value,i=new h.FormaUngroupEvent(n);n.beginUpdate(i),n.endUpdate(i)}}return this.newSelection}}}),o)}}]);
//# sourceMappingURL=vendors_npm_spark_19173d8b-02fa5162.js.map