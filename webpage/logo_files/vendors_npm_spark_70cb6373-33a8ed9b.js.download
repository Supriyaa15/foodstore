(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[31],{"/Amf":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDirtyEvent=void 0;const r=i("UzQk"),s=i("lzL7");let n=0;class o{constructor(e){this.type=o.TYPE,this.displayObject=e}}t.RenderDirtyEvent=o,o.TYPE="render-dirty";class a{constructor(e,t,i=new PIXI.Container){this.id="viewid:"+n++,this.isDirtyPlacement=!0,this.isDirtyRender=!0,this.isDirtyFilter=!0,this.isDestroyed=!1,this.renderScale=1,this.filters=[],this.mimicNode=e,this.pixiApp=t.pixiApp,this.asyncRenderer=t,this.log=t.log,this.renderScale=this.asyncRenderer.currentRenderScale,this.opacity=1,this.pixiDisplayObject=i,this.type=Object.getPrototypeOf(this).constructor.TYPE,this.localPlacement=e.compositing.placement,this.globalPlacement=e.ctm,this.opacity=e.compositing.opacity}static areaOfBoundsAtDocumentScale(e,t){const i=s.default.decomposeScale(e.asArray),r=t.maxX-t.minX,n=t.maxY-t.minY;return r*i.x*(n*i.y)}static isBoundsInDocument(e,t,i,r){const s=t.transformRect(e);return s.maxX>=0&&s.maxY>=0&&s.minX<=i&&s.minY<=r}static mapPGMBlendModeToPixi(e){switch(e){case r.PGMBlendModeEnum.Normal:default:return PIXI.BLEND_MODES.NORMAL;case r.PGMBlendModeEnum.Multiply:return PIXI.BLEND_MODES.MULTIPLY;case r.PGMBlendModeEnum.Screen:return PIXI.BLEND_MODES.SCREEN}}get globalScale(){return this.globalPlacement?s.default.decomposeScale(this.globalPlacement.asArray):{x:1,y:1}}get localScale(){return this.localPlacement?s.default.decomposeScale(this.localPlacement.asArray):{x:1,y:1}}get pgmBlendMode(){return this.mimicNode.compositing.blendMode}get hasNonNormalBlendMode(){return this.pgmBlendMode!==r.PGMBlendModeEnum.Normal}get pixiBlendMode(){return a.mapPGMBlendModeToPixi(this.pgmBlendMode)}get meta(){const e=this.mimicNode.ref.child;return{part:e.meta.part||e.entity||"",id:e.meta.id||this.mimicNode.id||""}}get pgmNode(){return this.mimicNode.ref.child}get pgmPart(){const e=this.pgmNode,t=e&&e.meta;return t&&t.part}get isRootOfBlendModeHierarchy(){return this.mimicNode instanceof r.PGMMimicGroupNode&&"frame"===this.pgmPart||this.mimicNode instanceof r.PGMMimicClipNode&&this.mimicNode.children.some(e=>e instanceof r.PGMMimicShapeNode)}destroy(e){if(this.isDestroyed=!0,this.pixiDisplayObject.filters){for(const e of this.pixiDisplayObject.filters)"function"==typeof e.destroy&&e.destroy();this.pixiDisplayObject.filters=null}this.pixiDisplayObject.destroy(),this.filters=[]}insertChild(e,t,i){const r=i.binding;r.parent=this,this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}removeChild(e,t,i){const r=i.binding;r.parent=void 0,this.pixiDisplayObject.removeChild(r.pixiDisplayObject)}reinsertChild(e,t,i){const r=i.binding;this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}changeCompositing(e,t,i){}changePlacement(e,t,i){this.localPlacement=i,this.isDirtyPlacement=!0}changeBlendMode(e,t,i){this.isRootOfBlendModeHierarchy&&(this.isDirtyFilter=!0)}changeOpacity(e,t,i){this.opacity=i,this.isDirtyFilter=!0}changeCTM(e,t,i){this.changeGlobalPlacement(this.globalPlacement,i)}changeProperties(e,t){this.isDirtyRender=!0}changeRenderScale(e,t){this.renderScale=t}changeGlobalPlacement(e,t){this.globalPlacement=t}isVisibleWithinDocument(e){return!0}endConformSummary(e,t,i){this.asyncRenderer.activeRender.fullValidation||this.validate()}validate(){const e=this.isVisibleWithinDocument(this.mimicNode);this.renderScale!==this.asyncRenderer.currentRenderScale&&this.changeRenderScale(this.renderScale,this.asyncRenderer.currentRenderScale);const t=this.mimicNode.ctm;if(this.globalPlacement.equal(t)||this.changeGlobalPlacement(this.globalPlacement,t),!this.pixiDisplayObject.visible&&!e)return;let i=!1;if(this.isDirtyPlacement&&(this.place(),i=!0),this.isDirtyFilter&&(this.filter(),i=!0),this.isDirtyRender&&(this.render(),i=!0),i){const e=new o(this);this.bubble(e.type,e)}this.pixiDisplayObject.visible=e}place(){this.pixiDisplayObject.transform.setFromMatrix(new PIXI.Matrix(...this.localPlacement.asArray)),this.isDirtyPlacement=!1}autoApplyAlphaFilter(){return!0}filter(){const e=this.hasNonNormalBlendMode;let t=!1;if(e&&this.isRootOfBlendModeHierarchy&&(t=!0),(1!==this.opacity||t)&&this.autoApplyAlphaFilter()){const t=new PIXI.filters.AlphaFilter;if(t.resolution=this.pixiApp.renderer.resolution,t.alpha=this.opacity,e){if(this.filters.length>0)for(let e=0;e<this.filters.length;++e)this.filters[e].blendMode=PIXI.BLEND_MODES.NORMAL;t.blendMode=this.pixiBlendMode}this.filters.push(t)}if(this.pixiDisplayObject.filters)for(const e of this.pixiDisplayObject.filters)this.filters.includes(e)||"function"!=typeof e.destroy||e.destroy();this.pixiDisplayObject.filters=this.filters,this.filters=[],this.isDirtyFilter=!1}render(){this.isDirtyRender=!1}bubble(e,t){this.pixiDisplayObject.emit(e,t),this.parent&&this.parent.bubble?this.parent.bubble(e,t):this.pixiApp.stage.emit(e,t)}}t.default=a,a.TYPE="post-display-object"},"0gjg":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static parseHexFromInt(e){var t=e.toString(16);return 1===t.length?"0"+t:t}static rgb2hex(e){return this.parseHexFromInt(Math.round(255*e.red))+this.parseHexFromInt(Math.round(255*e.green))+this.parseHexFromInt(Math.round(255*e.blue))}static rgba2css({red:e,green:t,blue:i,alpha:r=1}){return`rgba(${Math.round(255*e)},${Math.round(255*t)},${Math.round(255*i)},${r})`}static rgb2ValidCSSValues(e){return{red:Math.round(e.red),green:Math.round(e.green),blue:Math.round(e.blue),alpha:e.alpha||1}}static toCSS(e){if(!e)return"#000000";if(void 0!==e.red||void 0!==e.r){var t=void 0!==e.red?e.red:e.r,i=void 0!==e.green?e.green:e.g,s=void 0!==e.blue?e.blue:e.b,n=void 0!==e.alpha?e.alpha:e.a,o=this.rgb2ValidCSSValues({red:t,green:i,blue:s,alpha:n});return"rgba("+o.red+","+o.green+","+o.blue+","+(void 0===n?1:n)+")"}return"string"==typeof e&&6===e.length?"#"+e:"string"==typeof e&&e.match(new RegExp("^#[0-9a-fA-F]{6}$"))?e:"number"==typeof e?"#"+r.parseHexFromInt(e):"#000000"}static solidColor2Rgba(e){return e?{red:Math.floor(255*e.red),green:Math.floor(255*e.green),blue:Math.floor(255*e.blue),alpha:e.alpha}:null}}t.default=r},"1HQJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"213o":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("/Amf"),n=i("hxFN"),o=i("fziT"),a=i("5m7E"),l=i("pMCj"),h=i("JuUW"),c=i("LBjK"),d=i("3HR0"),u=i("d1kN"),p=i("au89"),g=function(e){if(!e)return null;let t=e;if(t&&t.texture)return t;for(var i=0;i<e.children.length;++i)if(t=g(e.children[i]),t&&t.texture)return t;return null};class m extends s.default{constructor(e,t){super(e,t),this.imageIsLoaded=!1,this.pixiDisplayObject.on("image-not-loaded",this.handleSubtreeImageLoading,this),this.pixiDisplayObject.on("image-loaded",this.handleSubtreeImageLoaded,this);const i=e;this._changeSpec(i.spec),this.reuseCachedTextures=!1}cleanCachedTexture(){this.cachedTexture1&&this.cachedTexture1.destroy(!0),this.cachedTexture2&&this.cachedTexture2.destroy(!0),this.cachedTexture1=null,this.cachedTexture2=null}destroy(e){this.cleanCachedTexture(),super.destroy(e)}handleSubtreeImageLoading(){this.imageIsLoaded=!1}handleSubtreeImageLoaded(){this.imageIsLoaded=!0,this.place(),this.filter()}_changeSpec(e){this.isDirtyFilter=!0}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case"spec":this._changeSpec(i.spec)}}),this.isDirtyRender=!0,super.changeProperties(e,t)}changeRenderScale(e,t){this.isDirtyFilter=!0,super.changeRenderScale(e,t)}place(){this.imageIsLoaded&&super.place()}endConformSummary(e,t,i){this.reuseCachedTextures=!i,super.endConformSummary(e,t,i),this.reuseCachedTextures=!1}filter(){this.reuseCachedTextures||this.cleanCachedTexture();const e=this.mimicNode.spec,t=this.pixiApp.renderer.resolution;if(void 0===e)return;const i=Object.getPrototypeOf(e).constructor.TYPE;let s;switch(i){case"PGMDuotoneFilterSpec":s=new o.default(e.intensity,[e.darkColor.red,e.darkColor.green,e.darkColor.blue],[e.lightColor.red,e.lightColor.green,e.lightColor.blue],t);break;case"PGMFillFilterSpec":s=new a.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue,e.filterColor.alpha],t);break;case"PGMScreenFilterSpec":s=new l.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t);break;case"PGMOverlayFilterSpec":s=new h.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t);break;case"PGMColorTransformFilterSpec":s=new n.default([e.rdot.red,e.rdot.green,e.rdot.blue,e.rdot.alpha,e.gdot.red,e.gdot.green,e.gdot.blue,e.gdot.alpha,e.bdot.red,e.bdot.green,e.bdot.blue,e.bdot.alpha,e.adot.red,e.adot.green,e.adot.blue,e.adot.alpha],[e.bias.red,e.bias.green,e.bias.blue,e.bias.alpha],t);break;case"PGMColorAdjustmentFilterSpec":s=new c.default(e,t);break;case"PGMBlurFilterSpec":const m=this.renderScale,f=6*e.scaledBlur*m,x=e.edgeClamp;if(f>0){const e=Math.max(4,Math.min(15,Math.floor(f/2))),i=f/5,r=new p.KawaseBlurFilter(i,e,x);r.padding=x?0:Math.ceil(6*i),i<2.5&&(r.resolution=t),s=r}break;case"PGMMaskFilterSpec":if(r.LegacyCoreAssert.isTrue(2==this.pixiDisplayObject.children.length,"what do we expect PostLuminosityFilter to do with children other than two?"),2===this.pixiDisplayObject.children.length){const i=this.pixiDisplayObject.children[0],r=this.pixiDisplayObject.children[1];if(i&&i.renderable&&r){r.renderable=!0,this.reuseCachedTextures&&this.cachedTexture1||(this.cachedTexture1=this.pixiApp.renderer.generateTexture(r,PIXI.settings.SCALE_MODE,t));const i=g(r);this.cachedTexture1&&i&&(s=new u.default(this.cachedTexture1,i,e.matte.asArray,t)),r.renderable=!1}}break;case"PGMBlendFilterSpec":let y=g(this.pixiDisplayObject);if(y&&y.texture){if(r.LegacyCoreAssert.isTrue(2==this.pixiDisplayObject.children.length,"what do we expect PostAlphablendFilter to do with children other than two?"),2==this.pixiDisplayObject.children.length){const i=this.pixiDisplayObject.children[0],r=this.pixiDisplayObject.children[1];i.renderable&&r.renderable&&(this.reuseCachedTextures&&this.cachedTexture1||(this.cachedTexture1=this.pixiApp.renderer.generateTexture(i,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution),this.cachedTexture2=this.pixiApp.renderer.generateTexture(r,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution)),this.cachedTexture1&&this.cachedTexture2&&(s=new d.default(this.cachedTexture1,this.cachedTexture2,y,e.weights[0],e.weights[1],t)))}}else console.warn("No sprite found -- image not loaded yet?. Disabling blending!");break;default:console.error("apply unknown filter",i)}s&&(s.blendMode=this.pixiBlendMode,this.filters.push(s)),super.filter()}}t.default=m,m.TYPE="filter"},"3HR0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r,s,n=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\n// Params for the first texture.\nuniform float weight0;\nuniform sampler2D uSampler0;\nuniform mat3 filterMatrix0;\n\n// Params for the second texture\nuniform float weight1;\nuniform sampler2D uSampler1;\n\n// Params for the second texture -- provided by Pixi and the name is fixed.\n// Furthermore the uvCoords are built for this one, so no matrix needed.\n// uniform sampler2D texture1;\n// uniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    vec2 texCoord0 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    vec2 texCoord1 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    lowp vec4 c0 = texture2D(uSampler0, texCoord0);\n    lowp vec4 c1 = texture2D(uSampler1, texCoord1);\n    lowp vec4 c2 = weight0 * c0 + weight1 * c1;\n    lowp vec4 c3 = vec4(\n                    c2.r * c2.a * c1.a * c0.a,\n                    c2.g * c2.a * c1.a * c0.a,\n                    c2.b * c2.a * c1.a * c0.a,\n                    c2.a * c1.a * c0.a\n                    );\n    gl_FragColor = c3;\n}\n\n",{weight0:{type:"float",value:r},weight1:{type:"float",value:s},uSampler0:{type:"sampler2d",value:e},uSampler1:{type:"sampler2d",value:t},filterMatrix0:{type:"mat3",value:null}}),this.filterSprite=i,this.resolution=n}apply(e,t,i,r){const s=new PIXI.Matrix;this.uniforms.filterMatrix0=e.calculateSpriteMatrix(s,this.filterSprite),super.apply(e,t,i,r)}}t.default=r},"3hRk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameErrorEvent=t.FrameProductionCanceledEvent=t.FrameProductionCompleteEvent=t.FrameDataEvent=t.FrameEvent=void 0;class r{constructor(e){this.type=e}}t.FrameEvent=r;class s extends r{constructor(e,t,i){super(s.TYPE),this.frameIndex=e,this.time=t,this.image=i}}t.FrameDataEvent=s,s.TYPE="frame";class n extends r{constructor(){super(n.TYPE)}}t.FrameProductionCompleteEvent=n,n.TYPE="complete";class o extends r{constructor(){super(o.TYPE)}}t.FrameProductionCanceledEvent=o,o.TYPE="canceled";class a extends r{constructor(e){super(a.TYPE),this.err=e}}t.FrameErrorEvent=a,a.TYPE="error"},"5m7E":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec4 filterColor;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = vec4(\n                    filterColor.r * textureColor.a,\n                    filterColor.g * textureColor.a,\n                    filterColor.b * textureColor.a,\n                    textureColor.a\n                    );\n\n}\n",{filterColor:{type:"vec4",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},"6xl/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"6ygk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiRenderer=void 0;const r=i("zrCk"),s=i("hhcO"),n=i("z8uW"),o=i("DAf/"),a=i("UzQk");t.PixiRenderer=class{constructor(e,t,i){this.host=e,this.defaultAssetLoader=t||new o.NullAssetLoader,this.log=i||a.LegacyCoreAssert.newLog("PixiRenderer"),this.imageService=new r.PixiImageService(this),this.liveViewService=new s.PixiLiveViewService(this),this.frameProductionService=new n.PixiFrameProductionService(this)}}},"7frk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("CkXF"),s=i("wYSo"),n=i("/Amf");class o extends r.default{constructor(e,t){super(e,t),this.maskContainer=new PIXI.Container,this.maskContentTransform=new PIXI.Container,this.maskingSprite=new PIXI.Sprite,this.maskBacking=new PIXI.Graphics,this.maskTextureBounds=new PIXI.Rectangle(0,0,1,1),this.isInitialized=!1,this.isInRenderQ=!1,this.currentRenderWidth=0,this.currentRenderHeight=0,this.debug("constructor()")}debug(e){}destroy(e){this.maskingSprite.destroy(),this.maskBacking.destroy(),this.maskContainer.destroy(),this.maskContentTransform.destroy(),this.artwork=null,this.mask=null,super.destroy(e)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}changeGlobalPlacement(e,t){this.isDirtyRender=!0,super.changeGlobalPlacement(e,t)}onChangeMaskArtwork(e){this.debug("mask artwork dirty"),this.isDirtyRender=!0}onFirstRenderInit(){this.maskContainer.addChild(this.maskBacking,this.maskContentTransform),this.pixiApp.stage.addChild(this.maskingSprite),this.artwork=this.pixiDisplayObject.children[0],this.mask=this.pixiDisplayObject.children[1],this.maskContentTransform.addChild(this.mask),this.debug("onFirstRenderInit"),this.mask.on(n.RenderDirtyEvent.TYPE,e=>this.onChangeMaskArtwork(e)),this.artwork.mask=this.maskingSprite,this.mask.on("image-loaded",()=>this.updateMaskTexture())}deferredRender(){this.isDestroyed||this.updateMaskTexture(),this.isInRenderQ=!1,this.notifyAsyncRenderEnd()}renderMask(e,t){if(e===this.currentRenderWidth&&t===this.currentRenderHeight)return!0;const i=this.pixiApp.stage.scale.x;return this.currentRenderWidth=e,this.currentRenderHeight=t,this.maskContainer.scale.set(i),this.maskBacking.clear(),this.maskBacking.beginFill(16777215),this.maskBacking.drawRect(0,0,e/i,t/i),this.maskBacking.endFill(),this.maskTextureBounds.width=e,this.maskTextureBounds.height=t,!1}render(){this.debug("render begin"),this.isInitialized||(this.onFirstRenderInit(),this.isInitialized=!0),this.updateMaskTexture(),!this.isInRenderQ&&s.default.instance.hasItemsInQueue()&&(this.notifyAsyncRenderBegin(),this.isInRenderQ=!0,s.default.instance.addLowPriority(this.deferredRender.bind(this))),super.render(),this.debug("render end")}updateMaskTexture(){const e=this.renderMask(this.pixiApp.renderer.width,this.pixiApp.renderer.height),t=new PIXI.Matrix(...this.globalPlacement.asArray);if(this.maskContentTransform.transform.setFromMatrix(t),this.maskingSprite.scale.set(1/this.pixiApp.stage.scale.x),e&&this.maskingSprite.texture){const e=new PIXI.Matrix;this.pixiApp.renderer.render(this.maskContainer,this.maskingSprite.texture,!1,e,!!this.maskContainer.parent)}else this.maskingSprite.texture&&this.maskingSprite.texture.destroy(!0),this.maskingSprite.texture=this.pixiApp.renderer.generateTexture(this.maskContainer,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution,this.maskTextureBounds)}}t.default=o,o.TYPE="luminosity-mask"},"7gWt":function(e,t,i){"use strict";i.r(t),i.d(t,"SpPerformanceObserver",(function(){return X})),i.d(t,"PerformanceTracker",(function(){return W})),i.d(t,"SparkPerformanceTracker",(function(){return Y}));var r=i("kNaX"),s=i.n(r),n=i("5Gr8"),o=i.n(n),a=i("TP7S"),l=i.n(a),h=i("D1y2"),c=i.n(h),d=i("zdiy"),u=i.n(d),p=i("KABF");const g=Object(p.a)();var m=new Proxy({},{has(e,t){const i=g._prjtmrvlsetup;return!!i&&Object.has(i,t)},get(e,t,i){const r=g._prjtmrvlsetup;return r&&r[t]},set:(e,t,i,r)=>!1}),f=i("YLtl");const x={},y=/\s+/;function b(e,t,i,r,s){let n,o=0;const a=s;let l=t;if(i&&"object"==typeof i){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(n=Object.keys(i);o<n.length;o++)l=b(e,l,n[o],i[n[o]],a)}else if(i&&y.test(i))for(n=i.split(y);o<n.length;o++)l=e(l,n[o],r,a);else l=e(l,i,r,a);return l}const T=(e,t,i,r)=>{const s=e;if(i){const e=s[t]||(s[t]=[]),n=r.context,o=r.ctx,a=r.listening;a&&a.count++,e.push({callback:i,context:n,ctx:n||o,listening:a})}return s},v=(e,t,i,r,s)=>{const n=e;if(n._events=b(T,n._events||{},t,i,{context:r,ctx:n,listening:s}),s){(n._listeners||(n._listeners={}))[s.id]=s}return n};x.on=function(e,t,i){return v(this,e,t,i)},x.listenTo=function(e,t,i){const r=e;if(!r)return this;const s=r._listenId||(r._listenId=Object(f.uniqueId)("l")),n=this._listeningTo||(this._listeningTo={});let o=n[s];if(!o){const e=this._listenId||(this._listenId=Object(f.uniqueId)("l"));n[s]={obj:r,objId:s,id:e,listeningTo:n,count:0},o=n[s]}return v(r,t,i,this,o),this};const w=function(e,t,i,r){let s=t;const n=e;if(!n)return;let o,a=0;const l=r.context,h=r.listeners;if(!s&&!i&&!l){const e=Object.keys(h);for(;a<e.length;a++)o=h[e[a]],delete h[o.id],delete o.listeningTo[o.objId];return}const c=s?[s]:Object.keys(n);for(;a<c.length;a++){s=c[a];const e=n[s];if(!e)break;const t=[];for(let r=0;r<e.length;r++){const s=e[r];i&&i!==s.callback&&i!==s.callback._callback||l&&l!==s.context?t.push(s):(o=s.listening,o&&0==--o.count&&(delete h[o.id],delete o.listeningTo[o.objId]))}t.length?n[s]=t:delete n[s]}return Object.keys(n).length?n:void 0};function P(...e){const[t,i,r,s]=e;if(r){const e=t[i]=Object(f.once)((...t)=>{s(i,e),r.apply(this,t)});e._callback=r}return t}x.off=function(e,t,i){return this._events?(this._events=b(w,this._events,e,t,{context:i,listeners:this._listeners}),this):this},x.stopListening=function(e,t,i){const r=this._listeningTo;if(!r)return this;const s=e?[e._listenId]:Object.keys(r);for(let e=0;e<s.length;e++){const n=r[s[e]];if(!n)break;n.obj.off(t,i,this)}return Object(f.isEmpty)(r)&&(this._listeningTo=void 0),this},x.once=function(e,t,i){const r=b(P,{},e,t,(...e)=>this.off(...e));return this.on(r,void 0,i)},x.listenToOnce=function(e,t,i){const r=b(P,{},t,i,(...t)=>this.stopListening(e,...t));return this.listenTo(e,r)};const C=function(e,t){let i,r=-1;const s=e.length,n=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++r<s;)(i=e[r]).callback.call(i.ctx);return;case 1:for(;++r<s;)(i=e[r]).callback.call(i.ctx,n);return;case 2:for(;++r<s;)(i=e[r]).callback.call(i.ctx,n,o);return;case 3:for(;++r<s;)(i=e[r]).callback.call(i.ctx,n,o,a);return;default:for(;++r<s;)(i=e[r]).callback.apply(i.ctx,t)}},E=function(e,t,i,r){if(e){const i=e[t];let s=e.all;i&&s&&(s=s.slice()),i&&C(i,r),s&&C(s,[t].concat(r))}return e};x.trigger=function(...e){const[t]=e;if(!this._events)return this;const i=Math.max(0,e.length-1),r=Array(i);for(let t=0;t<i;t++)r[t]=e[t+1];return b(E,this._events,t,void 0,r),this},x.bind=x.on,x.unbind=x.off;var S=x;let R;const k=/^spark-/;if(!window.eventsSingleton){const e=u()({_context:{showingDialog:!1},areaAndSectionChange(t,i){const r=this._context.area,s=this._context.section;if(t===r)return this.sectionChange(i);this._context.area=t,this._context.section=i,e.trigger("spark-area-change",{area:{old:r,new:t},section:{old:s,new:i}})},sectionChange(t){const i=this._context.section;t!==i&&(this._context.section=t,e.trigger("spark-section-change",{section:{old:i,new:t}}))},getPageArea(){return this._context.area},getPageSection(){return this._context.section},dialogShowing(){return this._context.showingDialog},dialogBeingShown(){return this._context.dialog},showingDialog(){this._context.showingDialog=!0},closedDialog(){this._context.showingDialog=!1},dialogShown(t){this._context.dialog=t||"unnamed-dialog",this.showingDialog(),e.trigger("spark-dialog-shown")},dialogClosed(){e.trigger("spark-dialog-closed"),this._context.dialog=null,this.closedDialog()},clearContext(){this._context={}},showTriggeredEvents:()=>R?R.getFeature("enable-triggered-events-log-in-console"):!(!m.authenticatedFeatures||!m.authenticatedFeatures["enable-triggered-events-log-in-console"])},S);e._originalTrigger=e.trigger,e.trigger=function(e,...t){k.test(e)&&t.unshift(Object.assign({event:e},this._context)),"spark-dialog-shown"===e&&this.showingDialog(),"spark-dialog-closed"===e&&this.closedDialog(),window.marvel&&window.marvel.logger&&window.marvel.logger.isDebugEnabled&&window.marvel.logger.isDebugEnabled()&&this.showTriggeredEvents()&&console.debug("Triggered event "+e,{event:e,context:this._context,args:t&&t.length?t.slice(1):null,trace:(new Error).stack}),this._originalTrigger(e,...t)},e.on("features-loaded",e=>{R=e.featureController}),window.eventsSingleton=e}var _=window.eventsSingleton;function M(e){return"[Throws: "+(e?e.message:"?")+"]"}function A(e,t){if(Object.prototype.hasOwnProperty.call(e,t))try{return e[t]}catch(e){return M(e)}return e[t]}var D=function(e,t){const i={depth:4,...t},r=[];return function e(t){if(null===t||"object"!=typeof t)return t;if(-1!==r.indexOf(t))return"[Circular]";if(r.length>=i.depth)return"[Object]";if(r.push(t),"function"==typeof t.toJSON)try{const i=e(t.toJSON());return r.pop(),i}catch(e){return M(e)}if(Array.isArray(t)){const i=t.map(e);return r.pop(),i}const s=Object.keys(t).reduce((i,r)=>({[r]:e(A(t,r)),...i}),{});return r.pop(),s}(e)},I=function(e,t,i,r){return new(i||(i=Promise))((function(s,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const O=console.log,F=console.warn,L=console.error,N=console.info,B=s.a.v4();let j,U={};const G=new Promise((e,t)=>{_.on("features-loaded",t=>{j=t.featureController,e()})});var z=class{static setGlobalMetadataAttribute(e,t){if("string"!=typeof e)throw new Error("Cannot set metadata with a non-string key name.");if(null===t||"string"!=typeof t&&"number"!=typeof t&&"object"!=typeof t&&void 0!==t)throw new Error("Cannot set metadata in an invalid value.");c()(U,e,t)}static resetGlobalMetadata(){U={}}_hasFlag(e){return j?j.hasFeature(e):!(!m.authenticatedFeatures||!m.authenticatedFeatures[e])}_applyFlags(){this._enableDebug=this._hasFlag(this.flag)}_sendBufferMsgs(){return I(this,void 0,void 0,(function*(){if(this._bufferMsgs.length){const e="["+this._bufferMsgs.join(",")+"]";this._bufferMsgs=[];try{yield fetch("/batchLog",{method:"POST",body:e,headers:{Accept:"*/*","Content-Type":"application/json"}})}catch(e){this.info("Couldn't send logs due to network issue",e)}}}))}_getUploadLevel(e){return this._hasFlag("upload-"+e+"-logs")}constructor(e={}){const t=e;this.flag=t.flag||"enable-debug-log",this.color=t.color||"#666",this.name=t.name||"global","global"!==this.name||window.marvel._isTestEnv||(console.log=(...e)=>this.debug(...e),console.warn=(...e)=>this.warn(...e),console.error=(...e)=>this.error(...e)),this._bufferMsgs=[],this._enableDebug=this._hasFlag(this.flag),this._saveLogInterval||(this._saveLogInterval=setInterval(()=>this._sendBufferMsgs(),1e4)),G.then(()=>this._applyFlags())}sendLogPayload(e){fetch("/log",{method:"POST",body:e,headers:{Accept:"*/*","Content-Type":"application/json"}})}pushLog(e,t,i){let r=t,n=i;if(r?"object"==typeof r&&(r=D(r)):r="unknown-error",this._getUploadLevel(e)){try{if(n=l()(n)?{}:{_meta:n},window.sessionStorage){let e=window.sessionStorage.getItem("_logger_session_key");if(!e){e=s.a.v4();try{window.sessionStorage.setItem("_logger_session_key",e)}catch(e){}}n.sessionkey=e}n.application={environment:m.environment,name:m.cid,version:m.buildVersion},n.url=window.location.origin+window.location.pathname,n=Object.assign(Object.assign({},U),n),n=JSON.stringify(n)}catch(e){try{const t=D(n);t.metaStringifyErr="Serializing meta in pushLog caused error:"+e.message+":using inspect instead",n=JSON.stringify(t)}catch(t){n=JSON.stringify({metaStringifyErr:"Serializing meta in pushLog caused error:"+e.message})}}const t=JSON.stringify({lvl:e,meta:n,msg:r,timestamp:Date.now()/1e3});this._bufferMsgs.push(t)}}group(e,t){if(this._enableDebug){t||this.color;e?(console.group("%c"+e,"background-color: "+this.color+"; color: white; padding: 0.2em;"),this.pushLog("debug",e,{})):console.group()}}groupCollapsed(e,t){if(this._enableDebug){const i=t||this.color;e?console.groupCollapsed("%c"+e,"background-color: "+i+"; color: white; padding: 0.2em;"):console.groupCollapsed()}}groupEnd(){this._enableDebug&&console.groupEnd()}analytics(...e){const t=this._processArgs(e);this.pushLog("analytics",t[0],t[1])}_deconstructErrorObject(e){const t={};Object.getOwnPropertyNames(e).forEach(i=>{t[i]=o()(e[i],this._transformObjectForLogging.bind(this))});return["message","name"].forEach(i=>{void 0!==e[i]&&(t[i]=e[i])}),t}_transformObjectForLogging(e){if(e instanceof Error)return this._deconstructErrorObject(e)}_processArgs(e){let t,i=e[0];if("global"!==this.name&&(i="["+this.name+"] "+i),2===e.length)t=o()(e[1],this._transformObjectForLogging.bind(this));else if(e.length>2){t=[];for(let i=1;i<e.length;i++)t.push(o()(e[i],this._transformObjectForLogging.bind(this)))}return[i,t]}isDebugEnabled(){return this._enableDebug}debug(...e){if(this._enableDebug){const t=this._processArgs(e),i=t[0];let r;if(1===t.length)O.apply(console,["%c"+i,"color: "+this.color+";"]);else{for(this.groupCollapsed(i),r=1;r<t.length;r++)O.apply(console,["%O",t[r]]);this.groupEnd()}this.pushLog("debug",t[0],t[1])}}info(...e){const t=this._processArgs(e);this._hasFlag("enable-info-log-in-console")&&N.apply(console,e),this.pushLog("info",t[0],t[1])}warn(...e){F.apply(console,e);const t=this._processArgs(e);this.pushLog("warn",t[0],t[1])}error(...e){L.apply(console,e);const t=this._processArgs(e);if(window.newrelic&&"function"==typeof window.newrelic.noticeError){let i={};try{if(e[0]&&e[0]instanceof Error)throw e[0];if(e[1]&&e[1]instanceof Error)throw i={message:t[0]},e[1];throw new Error(t[0])}catch(e){window.newrelic.noticeError(e,i)}}this.pushLog("error",t[0],t[1])}_getTraceFlowCategory(e){return this._hasFlag("traceflow-"+e)}traceflow(...e){const t=e[0],i=this._getTraceFlowCategory(t);if(!1===i)return!1;if(void 0===i)return j.setUserFlag("traceflow-"+t,!1),!1;if(e.length>1){const i=[];for(let t=1;t<e.length;t++){const r=e[t];i.push("function"==typeof r?r():r)}this.info("[traceflow: "+t+"] "+i[0],Object.assign({sessionId:B},i.slice(1)))}return!0}};class X{constructor(e,t=new z({name:"PerformanceTracker",color:"DeepPink"})){if(this.observedEntryPrefix=e,this.logger=t,window.PerformanceObserver){const e=this._recordEntryInLogger.bind(this);new window.PerformanceObserver(t=>{t.getEntries().forEach(e)}).observe({entryTypes:["mark","measure"]})}}static load(e){new X(e)}_recordEntryInLogger(e){let{detail:t,duration:i,entryType:r,name:s,startTime:n}=e;if(this.observedEntryPrefix&&!s.startsWith(this.observedEntryPrefix))return;const o={connectionInfo:this._getConnectionInfo(),entryType:r,name:s,startTime:n};t&&(o.detail=t),i&&(o.duration=i),this.logger.info(`performanceObserver:${r}:${s}`,o)}_getConnectionInfo(){const{downlink:e,effectiveType:t,rtt:i,type:r}=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection||{downlink:-1,effectiveType:"unknown",rtt:-1,type:"unknown"};return{downlink:e,effectiveType:t,rtt:i,type:r}}}class W{constructor(e=""){this.entryNamePrefix=e,this._supportsUserTimingLevel3=!1;const t="PerformanceTrackerTestMarker";if(void 0!==window.performance.mark(t,{detail:!0})){const e=window.performance.getEntriesByName(t).pop();e&&e.detail&&!0===e.detail&&(this._supportsUserTimingLevel3=!0)}window.performance.clearMarks(t)}getLastMarksMetadata(e){if(e){const t=window.performance.getEntriesByName(e.toString(),"mark");if(t.length>0){const e=t[t.length-1];if(e.detail)return e.detail}}}getPrefixedEntryName(e){if(e)return`${this.entryNamePrefix}${e}`}mark(e,t){if("object"==typeof t&&t.detail&&"object"!=typeof t.detail)throw new TypeError("Failed to execute 'mark' on 'PerformanceTracker': If a PerformanceMarkOptions.detail object was passed, |detail| must be an object.");e=this.getPrefixedEntryName(e);const i=window.performance.mark(e,t);if(!this.supportsUserTimingLevel3){const i=window.performance.getEntriesByName(e,"mark"),r=i.length&&i[i.length-1];if(r&&(null==t?void 0:t.detail))try{r.detail=t.detail}catch(e){}return r}return i}measure(e,t,i){if("object"==typeof t&&Object.keys(t).length>0){if(i)throw new TypeError("Failed to execute 'measure' on 'PerformanceTracker': If a non-empty PerformanceMeasureOptions object was passed, |end_mark| must not be passed.");if(!t.start&&!t.end)throw new TypeError("Failed to execute 'measure' on 'PerformanceTracker': If a non-empty PerformanceMeasureOptions object was passed, at least one of its 'start' or 'end' properties must be present.");if(t.start&&t.duration&&t.end)throw new TypeError("Failed to execute 'measure' on 'PerformanceTracker': If a non-empty PerformanceMeasureOptions object was passed, it must not have all of its 'start', 'duration', and 'end' properties defined.")}if("object"==typeof t&&t.detail&&"object"!=typeof t.detail)throw new TypeError("Failed to execute 'measure' on 'PerformanceTracker': If a PerformanceMeasureOptions.detail object was passed, |detail| must be an object.");e=this.getPrefixedEntryName(e);const r={};let s=void 0;"object"==typeof t?(t.start&&(r.start=this.getPrefixedEntryName(t.start)),t.end&&(r.end=this.getPrefixedEntryName(t.end)),s=t.detail):"string"==typeof t&&(r.start=this.getPrefixedEntryName(t)),i&&(r.end=this.getPrefixedEntryName(i));const n=this.getLastMarksMetadata(r.start),o=this.getLastMarksMetadata(r.end);let a;if((s||o||n)&&(r.detail=Object.assign(Object.assign(Object.assign({},n),o),s)),this.supportsUserTimingLevel3)a=this.callNativePerformanceMeasure(e,r);else{this.callNativePerformanceMeasure(e,r.start,r.end);const t=window.performance.getEntriesByName(e,"measure");if(t.length>0){a=t[t.length-1];try{a.detail=r.detail}catch(e){}}}return a}measurePromise(e,t,i){return this.mark(e,{detail:i}),t.finally(()=>{this.measure(e+":end",{detail:i,start:e})})}measurePromiseCreator(e,t,i){return this.mark(e,{detail:i}),t().finally(()=>{this.measure(e+":end",{detail:i,start:e})})}callNativePerformanceMeasure(e,t,i){try{return window.performance.measure(e,t,i)}catch(e){return}}get supportsUserTimingLevel3(){return this._supportsUserTimingLevel3}}const Y=new W("spP:")},BTPj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},CkXF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");class s extends r.default{constructor(e,t){super(e,t),this.pendingRenders=0}notifyAsyncRenderBegin(){this.pendingRenders++,this.bubble("async-render-begin")}notifyAsyncRenderEnd(){this.bubble("async-render-end",this.pendingRenders),this.pendingRenders=0}}t.default=s},"DAf/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpPixiLoaderPlugin=t.NullAssetLoader=void 0;t.NullAssetLoader=class{getURLforContentID(e,t,i){throw new Error("You're using a NullAssetLoader, which can't load assets. ")}};t.NoOpPixiLoaderPlugin=class{pre(e,t){t()}use(e,t){t()}}},Ej8W:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderHints=void 0;const r=i("UzQk"),s=i("vr9a"),n=i("IHB5"),o=i("kSzJ"),a=i("sodY"),l=i("s96w"),h=a.default.instance;var c;!function(e){e.AsyncRender="async-render",e.FullQuality="full-quality",e.RenderSetup="render-setup"}(c||(c={}));class d{constructor(e){this.blockCategories=[],this.graph=e.graph,this.time=e.time,this.target=e.target,this.assetLoader=e.assetLoader,this.fullQuality=e.fullQuality,this.fullValidation=e.fullValidation,this.log=e.log,this.completionPromise=new Promise((e,t)=>{this.completeResolve=()=>e()})}blockCompletion(e){this.blockCategories.push(e)}unblockCompletion(e){const t=this.blockCategories.indexOf(e);if(-1===t){const t=`ActiveRender: unblocking category not previously blocked ("${e}").`;throw this.log.error(t),new Error(t)}this.blockCategories.splice(t,1),0===this.blockCategories.length&&window.setTimeout(()=>this.completeResolve(),0)}}class u{constructor(){this.isAnimating=!1}}t.RenderHints=u;class p{constructor(e){var t,i;this.id="instance:"+p.nextInstanceID++,this.hints=new u,this.pendingImageLoadCount=0,this.backlog=0,this.graphVersion=0,this.defaultAssetLoader=e.assetLoader,this.renderQueue=new Promise((e,t)=>{setTimeout(e,50)}),this.pixiApp=e.hostAPI.createPixiApp({width:32,height:32,antialias:!0,transparent:!0,preserveDrawingBuffer:null!==(t=e.preserveDrawingBuffer)&&void 0!==t&&t,resolution:1,sharedTicker:!1,autoStart:!1}),this.pixiApp.stage.on("image-loaded",this.handleImageLoaded,this),this.pixiApp.stage.on("image-loading",this.handleImageLoading,this),this.pixiApp.stage.on("async-render-begin",this.handleAsyncRenderBegin,this),this.pixiApp.stage.on("async-render-end",this.handleAsyncRenderEnd,this),this.pixiApp.stage.on("background-text-rerender-begin",this.handleBackgroundTextRerenderBegin,this),this.pixiApp.stage.on("background-text-rerender-end",this.handleBackgroundTextRerenderEnd,this),this.listener=null!==(i=e.listener)&&void 0!==i?i:e=>{},this.log=e.log,this.mimicEngine=new r.PGMMimicEngine(this,new r.PGMMimicConformerOptions(!0)),this.rootContainer=new PIXI.Container,this.pixiApp.stage.addChild(this.rootContainer),e.addDebugText&&(this.debugText=new PIXI.Text("FPS",{fontFamily:"Arial",fontSize:24,fill:16715792,align:"left"}),this.debugGraphic=new PIXI.Graphics(!0),this.pixiApp.stage.addChild(this.debugGraphic,this.debugText))}getGLRenderer(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer:null}getRootRenderTarget(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer.rootRenderTarget:null}handleAsyncRenderBegin(){var e;null===(e=this.activeRender)||void 0===e||e.blockCompletion(c.AsyncRender)}handleAsyncRenderEnd(){var e;null===(e=this.activeRender)||void 0===e||e.unblockCompletion(c.AsyncRender)}blockFullQuality(){var e;(null===(e=this.activeRender)||void 0===e?void 0:e.fullQuality)&&this.activeRender.blockCompletion(c.FullQuality)}unblockFullQuality(){var e;(null===(e=this.activeRender)||void 0===e?void 0:e.fullQuality)&&this.activeRender.unblockCompletion(c.FullQuality),this.listener(p.EVT_FULL_QUALITY_UPDATE)}handleImageLoaded(){this.unblockFullQuality(),this.pendingImageLoadCount--,0===this.pendingImageLoadCount&&this.listener(p.EVT_LOADING_IMAGES_END)}handleImageLoading(){this.blockFullQuality(),this.pendingImageLoadCount++,1===this.pendingImageLoadCount&&this.listener(p.EVT_LOADING_IMAGES_BEGIN)}handleBackgroundTextRerenderBegin(){this.blockFullQuality()}handleBackgroundTextRerenderEnd(){this.unblockFullQuality()}setDebugText(e){this.debugText&&(this.debugText.text=e)}getDebugGraphic(){return this.debugGraphic}render(e,t,i,r){var n,o,a,h;if(null==e)return Promise.reject(new Error("PixiAsyncRenderer: can't render a null graph"));const u=null!==(n=r.assetLoader)&&void 0!==n?n:this.defaultAssetLoader,g=null!==(o=r.demultiplyAndFlip)&&void 0!==o&&o,m=null===(a=r.fullQuality)||void 0===a||a,f=null!==(h=r.postRenderCallback)&&void 0!==h?h:null;this.backlog++,this.backlog>10&&this.log.warning("backlog is "+this.backlog);let x,y=!1;return this.renderQueue=this.renderQueue.then(()=>{var r,n;this.backlog--,this.listener(p.EVT_START_RENDER);const{width:o,height:a}=t,h=p.scaleToFitOrFill(o,a,e.bounds.aspectRatio,t.transformType==s.TargetTransformTypeEnum.FillCentered).width/e.bounds.width,f=!this.currentRenderSize||this.currentRenderSize.width!==o||this.currentRenderSize.height!==a||this.currentRenderScale!==h;return this.activeRender=new d({graph:e,time:i,target:t,assetLoader:u,fullQuality:m,fullValidation:f,log:this.log}),this.activeRender.blockCompletion(c.RenderSetup),f&&(this.currentRenderScale=h,this.currentRenderSize={width:o,height:a},this.pixiApp.setSize(o,a),this.pixiApp.renderer.resize(o,a),this.pixiApp.stage.scale.set(h)),e!==this.mimicEngine.graph&&this.graphVersion++,g?(this.demultiplyFilter=null!==(r=this.demultiplyFilter)&&void 0!==r?r:new l.default(this.pixiApp.renderer.resolution),this.rootContainer.filters=[this.demultiplyFilter]):this.rootContainer.filters=[],this.debug(`conform begin (graph=${this.graphVersion} time=${i})`),this.mimicEngine.graph=e,this.mimicEngine.time=i,this.mimicEngine.conform(),this.debug("conform end"),f&&(null===(n=this.mimicEngine.document.root)||void 0===n||n.visitPostOrder(e=>(e.binding.validate(),!1))),this.activeRender.unblockCompletion(c.RenderSetup),this.activeRender.completionPromise}).then(()=>{this.pixiApp.renderer&&this.pixiApp.renderer.render(this.pixiApp.stage);const t=this.activeRender&&this.activeRender.target;let i;return t&&t.typeHint===s.TargetRenderTypeHint.ForDebugging&&(i=this.walkPixiHierarchy(this.pixiApp.stage,e,{includeTextures:!1})),null==f?void 0:f(i)}).catch(e=>{y=!0,x=e}).then(()=>{this.activeRender=null,this.listener(p.EVT_END_RENDER)}),this.renderQueue.then(()=>{if(y)throw x})}debug(e){}get canvas(){return this.pixiApp.view}destroy(){h.reset(this.id),this.pixiApp.destroyAll()}static scaleToFitOrFill(e,t,i,r){const s=e/t,n={width:e,height:t};return(r?s>i:s<i)?n.width=Math.round(n.height*i):n.height=Math.round(n.width/i),n}bindDocument(e){return this}bindNode(e){return n.default.viewInstanceForMimicNode(e,this)}createNode(e,t){return null}beginConform(e,t,i){}endConform(e,t,i){}setRoot(e,t){this.rootContainer.removeChildren(),this.rootContainer.addChild(t.binding.pixiDisplayObject)}static blendModeName(e){switch(e){case PIXI.BLEND_MODES.NORMAL:return"normal";case PIXI.BLEND_MODES.MULTIPLY:return"multiply";case PIXI.BLEND_MODES.SCREEN:return"screen";default:return"unknown "+e}}walkPixiHierarchy(e,t,i,r=null,s){const n=e.constructor.name,o=`${n}@${r?s:"root"}`;let a={type:n,uid:r?`${r}:${o}`:o};r||(a.fileIdentifier="Theo PixiRenderer hierarchy",a.renderSize=[this.currentRenderSize.width,this.currentRenderSize.height]),t&&(a.pgm=t.encode());const l=e.$theoBindingInfo;l&&(l.binding&&(a.binding=l.binding),l.part&&(a.part=l.part),l.id&&(a.id=l.id));const h=e.getLocalBounds();h&&(a.bounds=[h.x,h.y,h.width,h.height]);const c=e.localTransform;a.matrix=[c.a,c.b,c.c,c.d,c.tx,c.ty];const d=e.worldTransform,u=e.getBounds();if(a.worldMatrix=[d.a,d.b,d.c,d.d,d.tx,d.ty],a.worldBounds=[u.x,u.y,u.width,u.height],e instanceof PIXI.Sprite&&(a.blendMode=p.blendModeName(e.blendMode)),e.filters&&e.filters.length&&(a.filters=e.filters.reduce((e,t)=>{let i={};return t.uniforms&&(i=Object.entries(t.uniforms).reduce((e,t)=>{let i=t[1];return null!=i?Array.isArray(i)||"number"==typeof i||(i="function"==typeof i.entries?Array.from(i):"Matrix"===i.constructor.name?[i.a,i.b,i.c,i.d,i.tx,i.ty]:i.toString()):i=null,e[t[0]]=i,e},{})),t.blendMode!==PIXI.BLEND_MODES.NORMAL&&(i.blend=p.blendModeName(t.blendMode)),e[t.constructor.name]=i,e},{})),i.includeTextures){const t=this.pixiApp.renderer&&this.pixiApp.renderer.plugins.extract;if(t)try{const i=t.base64(e,"image/png");a.texture=i}catch(e){}}if(e instanceof PIXI.Container&&Array.isArray(e.children)&&e.children.length){const t=e.mask,s=t?e.children.filter(e=>e!==t):e.children;a.children=s.map((e,t)=>this.walkPixiHierarchy(e,null,i,a.uid,t)),t&&(a.mask=this.walkPixiHierarchy(t,null,i,r,"mask"))}return a}}t.default=p,p.nextInstanceID=0,p.EVT_LOADING_IMAGES_BEGIN="loading-images-begin",p.EVT_LOADING_IMAGES_END="loading-images-end",p.EVT_START_RENDER="start-render",p.EVT_END_RENDER="end-render",p.EVT_FULL_QUALITY_UPDATE="full-quality-update"},Escq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphTransportUtils=void 0;const r=i("UzQk");t.GraphTransportUtils=class{static convertAllLocalCompositeToExternalCC(e,t){let i=0,s={};return e.resources.forEach((e,n)=>{const o=n.storage;o instanceof r.StorageSpecLocalComposite?(s[e]=new r.PGMResourceProvider(n.contentType,new r.StorageSpecExternalCC(r.StorageSpecExternalCC.POST_DOCUMENTS_SYNC_GROUP,t,o.componentID,null,o.contentType||n.contentType,null,null)),i++):s[e]=n}),0===i?e:e.withResources(new r.PGMResourceProviderList(s))}}},H02z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiAnimationFrameRenderer=void 0;const r=i("UzQk"),s=i("vr9a"),n=i("xBmG"),o=i("Ej8W"),a=i("uzmb");t.PixiAnimationFrameRenderer=class{constructor(e){this.graph=r.PGMGraph.EMPTY,this.dynamicParams=n.LiveViewDynamicRenderParams.DEFAULT,this.isSetupDirty=!0,this.rerenderNextTick=!1,this.lastRenderedGraph=null,this.lastRenderedTime=-1,this.lastRenderedTarget=null,this.waitingFrame=null,this.currentFrame=null,this.lastNow=0,this.renderer=new o.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!1,addDebugText:e.debugMode,listener:e=>this.handleAsyncRendererEvent(e)}),this.debugMode=e.debugMode||!1,this.targetParams=e.initialParameters||s.TargetRenderParameters.fit(32,32,a.RawEncoding.AsBuffer()),this.listener=e.listener||null,this.ticker=new PIXI.ticker.Ticker,this.ticker.autoStart=!1,this.ticker.add(this.handleAnimationTick,this),this.ticker.stop(),this.debugMode&&(this.fpsTimes=[],this.fpsDisplayTime=0)}startTicker(){this.ticker.started||this.ticker.start()}setupDirty(){this.isSetupDirty=!0,this.startTicker()}doRerenderNextTick(){this.rerenderNextTick=!0,this.startTicker()}handleAsyncRendererEvent(e){e===o.default.EVT_LOADING_IMAGES_BEGIN?this.listener&&this.listener.onLoadingImagesBegin():e===o.default.EVT_LOADING_IMAGES_END?this.listener&&this.listener.onLoadingImagesEnd():e===o.default.EVT_FULL_QUALITY_UPDATE?this.doRerenderNextTick():e===o.default.EVT_END_RENDER&&(this.handleEndRenderEvent(),this.listener&&this.listener.onFrameRender(this.lastRenderedGraph,this.lastRenderedTime))}setTargetParameters(e){this.targetParams=e,this.setupDirty()}render(e,t){this.graph=e,this.dynamicParams=t||n.LiveViewDynamicRenderParams.DEFAULT,this.setupDirty()}get canvas(){return this.renderer.canvas}handleAnimationTick(e){if(!this.renderer.pixiApp.renderer)return;let t=0;const i=Date.now(),r=i-this.lastNow;if(this.lastNow=i,this.isSetupDirty&&(this.graph.duration>0?(this.animationStartTimeMS=Date.now(),t=this.dynamicParams.startTime,this.renderer.hints.isAnimating=!0):(this.renderer.hints.isAnimating=!1,t=0),this.isSetupDirty=!1),this.graph.duration>0){const e=(i-this.animationStartTimeMS)/1e3,r=this.dynamicParams.startTime,s=(this.dynamicParams.endTime>=r?this.dynamicParams.endTime:this.graph.duration)-r;s>0&&(t=e>s?this.dynamicParams.loop?r+e%s:r+s:r+e)}if(this.rerenderNextTick)this.rerenderNextTick=!1;else if(r>0&&this.graph===this.lastRenderedGraph&&t===this.lastRenderedTime&&this.targetParams===this.lastRenderedTarget)return this.graph.duration>0&&this.listener&&this.listener.onAnimationComplete(this.graph),void this.ticker.stop();this.submitFrame({graph:this.graph,target:this.targetParams,time:t}),this.lastRenderedGraph=this.graph,this.lastRenderedTime=t,this.lastRenderedTarget=this.targetParams,this.debugMode&&this.renderFPS()}handleEndRenderEvent(){this.waitingFrame?(this.renderer.render(this.waitingFrame.graph,this.waitingFrame.target,this.waitingFrame.time,{fullQuality:!1}),this.currentFrame=this.waitingFrame,this.waitingFrame=null):this.currentFrame=null}submitFrame(e){this.waitingFrame=e,this.currentFrame||this.handleEndRenderEvent()}renderFPS(){const e=this.fpsTimes||[],t=e.length,i=this.renderer.getDebugGraphic();let r=100,s=30,n=Math.round(PIXI.ticker.shared.FPS);t>100&&(n=Math.round((n+e[t-1]+e[t-2])/3)),t>120&&e.shift(),this.fpsTimes.push(n),this.fpsDisplayTime=(29*this.fpsDisplayTime+n)/30,this.renderer.setDebugText(" FPS "+Math.round(this.fpsDisplayTime)),i.clear(),i.beginFill(16777215),i.drawRect(0,0,344,34),i.beginFill(16711680),i.drawRect(100,0,240,30),i.beginFill(0),i.lineStyle(1,16777215),i.moveTo(r,0);for(var o=e.length-1;o>=2;o--){s=30-(e[o]+e[o-1]+e[o-2])/3/2,i.lineTo(r,s),r+=2}i.lineTo(r,0)}destroy(){this.ticker.remove(this.handleAnimationTick,this),this.renderer.destroy()}}},IHB5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("hUdH"),s=i("7frk"),n=i("eoxN"),o=i("vKWb"),a=i("vDtG"),l=i("kQtw"),h=i("213o"),c=i("UzQk");class d{static viewClassLookupForPgmNode(e){return this.lookup[this.viewTypeForPgmNode(e)]||this.lookup[this.DEFAULT_TYPE]}static viewTypeForPgmNode(e){let t=e.type.replace("pgm-","");if(e instanceof c.PGMFilter&&e){let i="filter-CutoutMask"===e.meta.part;"PGMMaskFilterSpec"!==Object.getPrototypeOf(e.spec).constructor.TYPE||i||(t="luminosity-mask")}return t}static viewInstanceForMimicNode(e,t){return new(this.viewClassLookupForPgmNode(e.ref.child))(e,t)}}t.default=d,d.DEFAULT_TYPE=l.default.TYPE,d.lookup={[r.default.TYPE]:r.default,[s.default.TYPE]:s.default,[n.default.TYPE]:n.default,[o.Text.TYPE]:o.Text,[a.default.TYPE]:a.default,[l.default.TYPE]:l.default,[h.default.TYPE]:h.default}},JuUW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\n    //lowp vec4 inputColor = (textureColor + 0.5) * 0.5;\n    lowp vec4 inputColor = textureColor;\n\n\n    gl_FragColor = vec4(\n                    (inputColor.r < 0.5 ? (2.0 * inputColor.r * filterColor.r) : (1.0 - 2.0 * (1.0 - inputColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n                    (inputColor.g < 0.5 ? (2.0 * inputColor.g * filterColor.g) : (1.0 - 2.0 * (1.0 - inputColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n                    (inputColor.b < 0.5 ? (2.0 * inputColor.b * filterColor.b) : (1.0 - 2.0 * (1.0 - inputColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n                    textureColor.a\n                    );\n}\n",{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},KABF:function(e,t,i){"use strict";(function(e){function r(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==e?e:{}}i.d(t,"a",(function(){return r}))}).call(this,i("yLpj"))},LBjK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("p17C"),n=i("sodY");class o extends PIXI.Filter{constructor(e,t=1){var i=r.MoaAdjustments.computeColorMaps(e),o=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;o[t]=i.colorMap[e]+.5|0,o[t+1]=i.sMap[e]+i.hMap[e]-e+.5|0,o[t+2]=0,o[t+3]=255}for(let e=0;e<4;e++)i.cm.push(0);var a=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;a[t]=i.threeChannelColorMap[0][e],a[t+1]=i.threeChannelColorMap[1][e],a[t+2]=i.threeChannelColorMap[2][e],a[t+3]=255}const l=new PIXI.Container,h=s.default.getRGBADataAsSprite(1,256,o,l),c=s.default.getRGBADataAsSprite(1,256,a,l),d=i.cm;super(null,"\nprecision highp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\nuniform sampler2D u_colorShadowsHighlightsSampler;\nuniform sampler2D u_threeChannelColorMapSampler;\nuniform mat4 u_colorMatrix;\n\nvoid main(void) {\n    vec4 color = texture2D(inputImageTexture, vTextureCoord);\n\n    color.r = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.r)).r;\n    color.g = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.g)).r;\n    color.b = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.b)).r;\n\n    float intensity = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\n\n    float shDiff = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, intensity)).g - intensity;\n\n    color.rgb += shDiff;\n\n    color.rgb = clamp(color.rgb, 0.0, 1.0);\n\n    vec4 colorMatrixRGB = vec4(color.rgb, 1.0);\n\n    colorMatrixRGB = colorMatrixRGB * u_colorMatrix;\n\n    colorMatrixRGB = clamp(colorMatrixRGB, 0.0, 1.0);\n\n    colorMatrixRGB.r = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.r)).r;\n    colorMatrixRGB.g = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.g)).g;\n    colorMatrixRGB.b = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.b)).b;\n\n    gl_FragColor = vec4(\n        colorMatrixRGB.r * color.a,\n        colorMatrixRGB.g * color.a,\n        colorMatrixRGB.b * color.a,\n        color.a\n    );\n}\n",{u_colorShadowsHighlightsSampler:{type:"sampler2D",value:h.texture},u_threeChannelColorMapSampler:{type:"sampler2D",value:c.texture},u_colorMatrix:{type:"mat4",value:new Float32Array(d)}}),this.resolution=t,this.container=l,this.shadowHighlightSprite=h,this.threeChannelSprite=c,n.default.instance.addContainer(l)}destroy(){n.default.instance.releaseContainer(this.container),this.shadowHighlightSprite=null,this.threeChannelSprite=null,this.container=null}}t.default=o},Lkow:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=t.PixiJSApp=void 0,i("kSzJ");const r=i("xGui");t.PixiJSApp=r;const s=i("Ovj2");Object.defineProperty(t,"PixiJSRenderer",{enumerable:!0,get:function(){return s.PixiJSRenderer}})},NG98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk");class s extends PIXI.Filter{constructor(e=r.SolidColor.ZERO,t=r.SolidColor.ZERO,i=r.SolidColor.ZERO,s=1,n=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\n// These must be premultiplied alpha!\nuniform vec4 redColor;\nuniform vec4 greenColor;\nuniform vec4 blueColor;\n\nuniform float alpha;\n\nvoid main()\n{\n\tlowp vec4 tex = texture2D(inputImageTexture, vTextureCoord);\n\t\n\t// The color multiplication is applied as a weighted average\n\t// of the r/g/b channel artwork, to accommodate any AA against\n\t// the background or between channels.\n\tfloat sum = tex.r + tex.g + tex.b;\n\tif (sum > 0.0) {\n\t\tgl_FragColor = (redColor * tex.r / sum\n\t\t\t+ greenColor * tex.g / sum\n\t\t\t+ blueColor * tex.b / sum) * tex.a * alpha;\n\t}\n}\n",{redColor:{type:"vec4",value:new Float32Array(e.asArrayPremultipliedAlpha)},greenColor:{type:"vec4",value:new Float32Array(t.asArrayPremultipliedAlpha)},blueColor:{type:"vec4",value:new Float32Array(i.asArrayPremultipliedAlpha)},alpha:{type:"float",value:s}}),this.resolution=n}set redChannelArtworkColor(e){this.uniforms.redColor=new Float32Array(e.asArrayPremultipliedAlpha)}set greenChannelArtworkColor(e){this.uniforms.greenColor=new Float32Array(e.asArrayPremultipliedAlpha)}set blueChannelArtworkColor(e){this.uniforms.blueColor=new Float32Array(e.asArrayPremultipliedAlpha)}set alpha(e){this.uniforms.alpha=e}}t.default=s},Ovj2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=void 0;const r=i("xGui"),s=i("Xw6L");r.Text.TextTextureInstance=r.TextTexture.getInstance({useImagesForEmojis:!1});class n extends r.PixiRenderer{constructor(e){super(new s.PixiWebHost,e)}}t.PixiJSRenderer=n},RyLA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("0gjg");t.default=class{constructor(e,t){this.ctx=e,this.colorTable=t,this.filled=!1,this.ctx.beginPath()}beginGroup(){}endGroup(){}beginClipGroup(e){}endClipGroup(){}fill(e,t){}stroke(e,t,i){this.ctx.lineWidth=i,t=t||this.colorTable.color(e),this.ctx.strokeStyle=r.default.toCSS(r.default.solidColor2Rgba(t)),this.ctx.stroke()}rectangle(e,t,i,r){this.ctx.rect(e,t,i-e,r-t)}ellipse(e,t,i,r){var s=i-e,n=r-t,o=s/2*.5522848,a=n/2*.5522848,l=e+s/2,h=t+n/2;this.ctx.moveTo(e,h),this.ctx.bezierCurveTo(e,h-a,l-o,t,l,t),this.ctx.bezierCurveTo(l+o,t,i,h-a,i,h),this.ctx.bezierCurveTo(i,h+a,l+o,r,l,r),this.ctx.bezierCurveTo(l-o,r,e,h+a,e,h),this.ctx.closePath()}newPath(e,t,i,r,s){this.ctx.beginPath(),this.fillRule=e,this.endCap=t,this.join=i,this.strokeWt=r,this.miterLimit=s}moveTo(e,t){this.ctx.moveTo(e,t)}lineTo(e,t){this.ctx.lineTo(e,t)}cubicBezier(e,t,i,r,s,n){this.ctx.bezierCurveTo(e,t,i,r,s,n)}quadraticBezier(e,t,i,r){this.ctx.quadraticCurveTo(e,t,i,r)}closePath(){this.ctx.closePath()}done(){}}},W4vr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},Xw6L:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebHost=void 0;const r=i("jsS/");t.PixiWebHost=class{constructor(){}createPixiApp(e){return new r.PixiWebApplication(e)}}},bNrw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTexture=void 0;const r=i("UzQk"),s=i("Em2v"),n=i("0gjg"),o=[1,0,0,1,0,0];function a(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}class l{constructor(e){var t;if(this.width=1,this.height=1,this.tracking=0,this.fontSize=0,this.strokeWidth=0,this.fillColor="rgba(0, 0, 0, 1)",this.strokeColor="rgba(0, 0, 0, 0)",this.text="",this.font="",this.transform=o,this.isPowerOfTwo=!0,this.renderRuns=r.PGMRenderRuns.EMPTY,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=10,this.canvas.height=10,this.context.textAlign="left",this.context.textBaseline="alphabetic",this.useImagesForEmojis=!!e&&(null!==(t=e.useImagesForEmojis)&&void 0!==t&&t),this.useImagesForEmojis){if(!e.emojisManager)throw new Error("emojisManager is required if useImagesForEmojis is true");this.emojisManager=e.emojisManager}}static getInstance(e){return l.instance||(l.instance=new l(e)),l.instance}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setSize(e,t){return this.width=Math.ceil(e),this.height=Math.ceil(t),this}setTransform(e){return this.transform=e,this}setText(e){return this.text=e,this}setTracking(e){return this.tracking=e||0,this}setFontSize(e){return this.fontSize=e,this}setFont(e){return this.font=e,this}setFillColor(e){return this.fillColor=e,this}setStrokeColor(e){return this.strokeColor=e,this}setStrokeWidth(e){return this.strokeWidth=e,this}setRenderRuns(e){return this.renderRuns=e,this}getCanvas(){return this.canvas}disable(){return this.canvas.width=1,this.canvas.height=1,this}destroy(){return this.canvas=null,this.context=null,this}getNextPosition(e,t,i){let r=0,n=e[t];if(t<e.length-1){let o=e[t+1],a=this.context.measureText(o).width;if(s.EmojiUtils.isEmoji(o)&&(a=this.fontSize),i)r-=a,r-=this.tracking*this.fontSize;else{let e,t,i=0;if(s.EmojiUtils.isEmoji(n)||s.EmojiUtils.isEmoji(o)){let e=this.context.measureText(n).width;s.EmojiUtils.isEmoji(n)&&(e=this.fontSize),t=e}else e=n+o,i=this.context.measureText(e).width,t=i-a;r+=t,r+=this.tracking*this.fontSize}}return r}fillTextWithEffects(e,t,i){this.strokeWidth?(this.context.strokeText(e,t,i),this.fillColor?this.context.fillText(e,t,i):(this.context.globalAlpha=1,this.context.globalCompositeOperation="destination-out",this.context.fillText(e,t,i),this.context.globalCompositeOperation="source-over")):this.context.fillText(e,t,i)}drawSegment(e,t,i,r,s,n){let o=s;const a=e.slice(t,i).join("");if(r){const t=e.slice(0,i).join("");o-=this.context.measureText(t).width}else if(0!=t){const i=e.slice(0,t).join(""),r=this.context.measureText(i).width;o+=r;const s=this.context.measureText(a).width;let n=i+a;o+=this.context.measureText(n).width-(r+s)}this.fillTextWithEffects(a,o,n)}solidColorToHex(e){const t=Math.round(255*e.alpha).toString(16),i=1===t.length?"0"+t:t;return"#"+n.default.rgb2hex(e)+i}render(){const e=this.width>1024,t=this.height>1024;this.isPowerOfTwo=!e&&!t,this.canvas.width=e?this.width:a(this.width),this.canvas.height=t?this.height:a(this.height),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform),this.context.font=this.font,this.fillColor&&(this.context.fillStyle=this.fillColor),this.strokeColor&&(this.context.strokeStyle=this.strokeColor),this.strokeWidth&&(this.context.lineWidth=this.strokeWidth,this.strokeWidth/this.fontSize>r.PGMTextStyle.ROUNDED_CORNER_THRESHOLD&&(this.context.lineJoin="round"),this.strokeWidth/this.fontSize>.02?this.context.miterLimit=2:this.strokeWidth>.01&&(this.context.miterLimit=5));let i=0,n=0,o=this.renderRuns.fillColors.runArrays;const l=r.GraphemeUtils.splitGraphemes(this.text),h=s.EmojiUtils.hasEmoji(l),c=0!==this.tracking||this.useImagesForEmojis&&h;if(c||0!==o.length){let e=0,t=0;const a=""==this.text.charAt(0);if(a){i=this.context.measureText(this.text).width+this.fontSize*this.tracking*(l.length-1),c&&(i-=this.context.measureText(l[0]).width),t=i}if(c&&0===o.length){const e=new r.SolidColorRuns;e.apply(r.SolidColor.BLACK,new r.TextRange(0,l.length)),o=e.runArrays}for(var d=0;d<o.length;d++){const r=o[d];if(r.attr.alpha>0){if(this.renderRuns.fillColors.runArrays.length>0&&(this.context.fillStyle=this.solidColorToHex(r.attr),this.context.strokeStyle=this.solidColorToHex(this.renderRuns.strokeColors.runArrays[d].attr)),c){const o=l.slice(r.range.start,Math.min(r.range.end,l.length));if(e!=r.range.start){e>r.range.start&&(i=t,n=0,e=0);for(var u=e;u<r.range.start;u++)i+=this.getNextPosition(l,u,a),e+=1}let h=0;for(;h<o.length;){let t=o[h];if(this.useImagesForEmojis&&s.EmojiUtils.isEmoji(t)){this.emojisManager.getImageForEmoji(t)&&this.context.drawImage(this.emojisManager.getImageForEmoji(t),i,n-this.fontSize,this.fontSize,this.fontSize),i+=this.getNextPosition(l,e,a),e+=1,h+=1}else if(0===this.tracking){let r=h+1,c=t;for(;r<o.length&&!s.EmojiUtils.isEmoji(o[r]);)c+=o[r],r++;this.fillTextWithEffects(c,i,n);for(var p=h;p<r;p++)i+=this.getNextPosition(l,e,a),e+=1;h=r}else this.fillTextWithEffects(t,i,n),i+=this.getNextPosition(l,e,a),e+=1,h+=1}}else{let e=r.range.end;e>l.length&&l.length,this.drawSegment(l,r.range.start,e,a,t,n)}this.context.fillStyle=this.fillColor,this.context.strokeStyle=this.strokeColor}}}else this.fillTextWithEffects(this.text,i,n);return this}}t.TextTexture=l},d1kN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r=1){super(null,"\nprecision lowp float;\n\n// Texture coord provided by vertex shader\nvarying vec2 vTextureCoord;\n\n// Artwork sampler, contents provided by PIXI\nuniform sampler2D uSampler;\n\n// Mask sampler, matrix, and matte color (the color to use on transparent pixels)\nuniform sampler2D maskSampler;\nuniform mat3 maskMatrix;\nuniform vec4 matteColor;\n\n// Standard weights for luminance calculcation.\n// See: https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color\nconst highp vec3 W = vec3(0.2126, 0.7152, 0.0722);\n\nvoid main()\n{\n    lowp vec4 artwork = texture2D(uSampler, vTextureCoord);\n    lowp vec4 mask = texture2D(maskSampler, (maskMatrix * vec3(vTextureCoord, 1.0)).xy);\n\n    lowp vec3 maskWithMatte = mix(matteColor.rgb, mask.rgb, mask.a);\n    float luminance = dot(maskWithMatte, W);\n    gl_FragColor = artwork * luminance;\n}\n\n",{maskSampler:{type:"sampler2d",value:e},maskMatrix:{type:"mat3",value:null},matteColor:{type:"vec4",value:new Float32Array(i)}}),this.maskMatrix=new PIXI.Matrix,this.maskSprite=t,this.resolution=r}apply(e,t,i,r){this.uniforms.maskMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),e.applyFilter(this,t,i,r)}}t.default=r},eoxN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),s=i("xtw7"),n=i("0gjg"),o=i("lzL7"),a=i("UzQk"),l=i("NG98");class h extends r.default{constructor(e,t){super(e,t),this.transform=new PIXI.Transform,this.textureSharpness=1,this.shouldClipRenderToDocumentBounds=!1,this.padding=0,this.cssColor="#000000",this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=null,this.baseTexture=new PIXI.BaseTexture(h.sharedTextureSource.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite);const i=e;this._changeBounds(i.bounds),this._changeColor(i.color),this._changePaths(i.paths)}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,s=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,s)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}changeBlendMode(e,t,i){this.colorizeFilter.blendMode=r.default.mapPGMBlendModeToPixi(i)}_changeBounds(e){}_changeColor(e){this.isDirtyFilter=!0,this.cssColor=n.default.rgba2css(e)}_changePaths(e){this.isDirtyRender=!0,this.padding=e.reduce((e,t)=>("none"===t.pathFillType&&t.pathStrokeWeight>0&&(e=Math.max(e,t.pathStrokeWeight/2)),e),0)}changeGlobalPlacement(e,t){this.isDirtyPlacement=!0,super.changeGlobalPlacement(e,t)}autoApplyAlphaFilter(){return!1}filter(){this.colorizeFilter||(this.colorizeFilter=new l.default),this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.colorizeFilter.redChannelArtworkColor=this.mimicNode.color,this.colorizeFilter.alpha=this.opacity,this.colorizeFilter.blendMode=this.pixiBlendMode,this.filters.push(this.colorizeFilter),super.filter()}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case a.PGMMimicShapeNode.PROP_BOUNDS:this._changeBounds(i.bounds);break;case a.PGMMimicShapeNode.PROP_COLOR:this._changeColor(i.color);break;case a.PGMMimicShapeNode.PROP_PATHS:this._changePaths(i.paths);break;case a.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`shape is ignoring property '${e}' change notice`)}})}validate(){const e=this.mimicNode,t=this.asyncRenderer.activeRender.graph.bounds.area,i=r.default.areaOfBoundsAtDocumentScale(this.globalPlacement,e.bounds),s=e.ctm.asArray,n=o.default.decomposeScale(s),a=e.bounds.width*n.x,l=e.bounds.height*n.y;this.shouldClipRenderToDocumentBounds=t<i,this.shouldClipRenderToDocumentBounds?o.default.equal(this.globalTransform,s)||(this.isDirtyRender=!0):this.globalBoundsWidth===a&&this.globalBoundsHeight===l||(this.isDirtyRender=!0),this.globalBoundsWidth=a,this.globalBoundsHeight=l,this.globalTransform=s,super.validate()}place(){const e=o.default.decompose(this.localPlacement.asArray),t=e.position,i=e.rotation,r=e.scale,s=e.skew;this.shouldClipRenderToDocumentBounds?this.pixiDisplayObject.setTransform(t.x,t.y,r.x,r.y,i,s.x,s.y,0,0):this.pixiDisplayObject.setTransform(t.x,t.y,1,1,i,s.x,s.y,0,0),this.isDirtyPlacement=!1}renderShapeAtOwnBounds(){const e=this.mimicNode.bounds,t=this.renderScale,i=this.globalScale,r=this.localScale,s=e.minX,n=e.minY,o=this.padding,a=i.x,l=i.y,c=r.x,d=r.y,u=t*this.textureSharpness*this.pixiApp.renderer.resolution,p=u*a,g=u*l,m=(s-o)*c,f=(n-o)*d,x=c*(1/p),y=d*(1/g),b=e.width*p+o*p*2,T=e.height*g+o*g*2,v=[p,0,0,g,p*(o-s),g*(o-n)];h.sharedTextureSource.setSize(b,T).setTransform(v),this.sprite.setTransform(m,f,x,y,0,0,0,0,0)}renderShapeClippedToDocumentBounds(){const e=this.renderScale,t=this.asyncRenderer.activeRender.graph.bounds.width,i=this.asyncRenderer.activeRender.graph.bounds.height,r=e*this.textureSharpness*this.pixiApp.renderer.resolution,s=t*r,n=i*r,a=o.default.getScalingTransform(r,r),l=o.default.multiply([],a,this.globalPlacement.asArray),c=o.default.invert([],l);h.sharedTextureSource.setSize(s,n).setTransform(l);const d=o.default.decompose(c),u=d.position,p=d.rotation,g=d.scale,m=d.skew;this.sprite.setTransform(u.x,u.y,g.x,g.y,p,m.x,m.y,0,0)}render(){const e=this.mimicNode,t=this.baseTexture,i=this.texture;h.sharedTextureSource.begin(),this.shouldClipRenderToDocumentBounds?this.renderShapeClippedToDocumentBounds():this.renderShapeAtOwnBounds(),h.sharedTextureSource.setColor("#FF0000").setPaths(e.paths).render().end(),t.realWidth=t.source.width,t.realHeight=t.source.height,t.width=t.realWidth/t.resolution,t.height=t.realHeight/t.resolution,t.isPowerOfTwo=h.sharedTextureSource.isPowerOfTwo,i._updateID++,i._frame.width=t.width,i._frame.height=t.height,this.pixiApp.renderer.textureManager.updateTexture(t),super.render()}destroy(e){this.sprite.destroy(),super.destroy(e)}}t.default=h,h.TYPE="shape",h.sharedTextureSource=new s.default},fziT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float intensity;\nuniform vec3 firstColor;\nuniform vec3 secondColor;\n\nconst mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvec4 duotone(vec4 colorIn) {\n    float luminance = dot(colorIn.rgb, luminanceWeighting);\n    lowp vec4 outputColor = vec4( mix(firstColor.rgb, secondColor.rgb, luminance), colorIn.a);\n    outputColor.r = outputColor.r * colorIn.a;\n    outputColor.g = outputColor.g * colorIn.a;\n    outputColor.b = outputColor.b * colorIn.a;\n    return vec4( mix(colorIn.rgb, outputColor.rgb, intensity), colorIn.a);\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = duotone(textureColor);\n}\n",{intensity:{type:"float",value:e},firstColor:{type:"vec3",value:new Float32Array(t)},secondColor:{type:"vec3",value:new Float32Array(i)}}),this.resolution=r}}t.default=r},hUdH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),s=i("CkXF"),n=i("sodY"),o=i("vr9a");var a;!function(e){e.NEEDS_LOAD="needs_load",e.LOADING="loading",e.LOADED="loaded",e.NEEDS_RELOAD="needs_reload",e.RELOADING="reloading"}(a||(a={}));const l=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096];class h extends s.default{constructor(e,t){super(e,t),this.scale=r.TheoPoint.INVALID,this.imageSprite=null,this.currentUrl=null,this.status=a.NEEDS_LOAD;const i=e;this.currentContentId=i.contentID,this.isBogusContent=!1,this.scale=i.ctm.extractedScale.scale,this.changeBounds(i.bounds),this.changeContent()}destroy(e){this.pendingRenders>0&&this.notifyAsyncRenderEnd(),this.imageSprite&&this.imageSprite.destroy(),this.temporaryDataUrl&&(n.default.instance.releaseTexturesForUrl(this.temporaryDataUrl),this.temporaryDataUrl=null),super.destroy(e)}place(){const e=this.imageSprite&&this.imageSprite.texture;if(e){if(!this.asyncRenderer||!this.asyncRenderer.hints.isAnimating||!this.isTransformAnimation()){const t=e.width,i=e.height,s=this.pixelWidth/t,n=this.pixelHeight/i,o=r.Matrix2D.scalingXY(this.renderScale,this.renderScale).concat(this.globalPlacement);let a=0,l=0,h=s,c=n;if(o.preservesBoxesNoSwap){const e=this.pixelWidth,t=this.pixelHeight,i=o.transformRect(r.TheoRect.fromXYWH(0,0,e,t)),s=i.snapped(),n=s.width/i.width,d=s.height/i.height;h*=n,c*=d;const u=o.inverse.extractedScale.scale;a=(s.minX-i.minX)*u.x,l=(s.minY-i.minY)*u.y}this.imageSprite.scale.x=h,this.imageSprite.scale.y=c,this.imageSprite.position.x=a,this.imageSprite.position.y=l}super.place()}}isTransformAnimation(){return!this.mimicNode.getStaticCTM().equal(this.mimicNode.ctm)}handleTextureLoaded(e){if(this.temporaryDataUrl&&(n.default.instance.releaseTexturesForUrl(this.temporaryDataUrl),this.temporaryDataUrl=null),this.isDestroyed)return;const t=this.status===a.LOADING;this.status=a.LOADED,this.imageSprite?this.imageSprite.texture=e:(this.imageSprite=new PIXI.Sprite(e),this.pixiDisplayObject.addChild(this.imageSprite)),this.place(),this.emitLoaded(t)}emitLoaded(e){this.isDestroyed||(this.bubble("image-loaded"),e&&this.notifyAsyncRenderEnd())}load(e){this.bubble("image-loading"),this.status=e?a.LOADING:a.RELOADING;const t=n.default.instance,i=this.asyncRenderer.activeRender.assetLoader;t.load(this.currentUrl,this.handleTextureLoaded.bind(this),i,this.asyncRenderer.id)}render(){this.status!==a.NEEDS_LOAD&&this.status!==a.LOADING||this.notifyAsyncRenderBegin(),!this.isDirtyRender||this.status!==a.NEEDS_LOAD&&this.status!==a.NEEDS_RELOAD||this.load(this.status===a.NEEDS_LOAD),super.render()}changeBounds(e){this.pixelWidth=e.width||1,this.pixelHeight=e.height||1}changeContent(){this.reloadMedia(!0)}calcOptimalResolution(){if(this.scale.equal(r.TheoPoint.INVALID))return;const e=this.pixelWidth*this.scale.x*this.renderScale,t=this.pixelHeight*this.scale.y*this.renderScale,i=Math.ceil(e),s=Math.ceil(t),n=Math.max(i,s);let o=l[0];for(const e of l){if(e===n){o=e;break}if(e>n){n-o>.1*o&&(o=e);break}o=e}return o>Math.max(this.pixelWidth,this.pixelHeight)&&(o="original"),o}reloadMedia(e){const t=this.mimicNode.contentID;if(this.isBogusContent&&this.currentContentId===t)return;this.currentContentId=t;const i=this.asyncRenderer.activeRender,r={};i.target&&i.target.typeHint===o.TargetRenderTypeHint.ForFinalForm&&(r.explicitDimension=this.calcOptimalResolution()),this.isBogusContent=!i.graph.resources.byContentID(t);const s=i.assetLoader.getURLforContentID(i.graph,t,r);s!==this.currentUrl&&(this.isDirtyRender=!0,this.currentUrl&&this.currentUrl.startsWith("data:")&&(this.temporaryDataUrl=this.currentUrl),this.currentUrl=s,this.imageSprite&&!e?this.status=a.NEEDS_RELOAD:this.status=a.NEEDS_LOAD,this.bubble("image-not-loaded"))}changeRenderScale(e,t){super.changeRenderScale(e,t),Math.abs(t-e)>1e-9&&this.reloadMedia(!0)}changeGlobalPlacement(e,t){if(super.changeGlobalPlacement(e,t),e.equal(t))console.warn("Unnecessary CTM update?? "+t.description);else{const e=t.extractedScale.scale;this.scale.x===e.x&&this.scale.y===e.y||(this.scale=e,this.reloadMedia(!1))}}changeProperties(e,t){const i=e;for(const e of t)switch(e){case r.PGMMimicMediaNode.PROP_BOUNDS:this.changeBounds(i.bounds);break;case r.PGMMimicMediaNode.PROP_CONTENT_ID:break;case r.PGMMimicMediaNode.PROP_CONTENT_RESOURCE:this.changeContent()}this.isDirtyRender=!0,super.changeProperties(e,t)}}t.default=h,h.TYPE="image"},hhcO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiLiveViewService=void 0;const r=i("xBmG"),s=i("vr9a"),n=i("H02z"),o=i("uzmb");class a{constructor(e,t){this.target=e,this.cbfn=t}cancel(){this.target.removeEventListener(this)}}class l{constructor(e,t){this.listeners=[],this.api=e,this.renderer=new n.PixiAnimationFrameRenderer({hostAPI:e.host,assetLoader:t,log:e.log,listener:this})}destroy(){this.renderer.destroy()}getCanvas(){return this.renderer.canvas}addEventListener(e){const t=new a(this,e);return this.listeners.push(t),t}removeEventListener(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}notify(e){this.listeners.forEach(t=>t.cbfn(e))}onFrameRender(e,t){this.notify(new r.LiveViewFrameRenderCompleteEvent(e,t))}onAnimationComplete(e){this.notify(new r.LiveViewAnimationRenderCompleteEvent(e))}onLoadingImagesBegin(){this.notify(new r.LiveViewLoadingImagesBeginEvent)}onLoadingImagesEnd(){this.notify(new r.LiveViewLoadingImagesEndEvent)}setSize(e,t,i){i=i||1,this.renderer.setTargetParameters({transformType:s.TargetTransformTypeEnum.FitCentered,width:e*i,height:t*i,encoding:o.RawEncoding.AsBuffer()})}render(e,t){this.renderer.render(e,t)}}t.PixiLiveViewService=class{constructor(e,t){this.api=e,this.assetLoader=t||e.defaultAssetLoader}createView(e){return new l(this.api,e||this.assetLoader)}}},hxFN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform mat4 colorMatrix;\nuniform vec4 colorBias;\n\nvec4 colorTransform(vec4 colorIn) {\n    return colorMatrix * colorIn + colorBias;\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = colorTransform(textureColor);\n}\n",{colorMatrix:{type:"mat4",value:new Float32Array(e)},colorBias:{type:"vec4",value:new Float32Array(t)}}),this.resolution=i}}t.default=r},"jsS/":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebApplication=void 0;const r=i("xGui");class s extends PIXI.Application{constructor(e){super(e)}setSize(e,t){this.view.width=e,this.view.height=t}render(){return new Promise((e,t)=>{this.renderer.once("postrender",()=>{e()}),this.renderer.render(this.stage)})}renderToImage(){return new Promise((t,i)=>{this.renderer.once("postrender",()=>{const i=this.view.width,s=this.view.height;let n;if(this.renderer instanceof PIXI.WebGLRenderer){const t=this.renderer.gl;n=e.alloc(i*s*4),t.readPixels(0,0,i,s,t.RGBA,t.UNSIGNED_BYTE,n),function(e,t,i){for(var r=0;r<i/2;r++){let n=r*t*4,o=(i-1-r)*t*4;for(var s=4*t;s>0;s--,n++,o++){let t=e[n];e[n]=e[o],e[o]=t}}}(n,i,s)}else{const t=this.renderer.rootContext.getImageData(0,0,i,s).data;n=e.from(t.buffer)}t({encoding:r.RawEncoding.AsBuffer(),data:n,width:i,height:s})}),this.renderer.render(this.stage)})}destroyAll(){this.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}}t.PixiWebApplication=s}).call(this,i("HDXh").Buffer)},kQtw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");class s extends r.default{}t.default=s,s.TYPE="group"},lzL7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static get defaultMatrix(){return[1,0,0,1,0,0]}static equal(e,t){return e&&t?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]:!e==!t}static getScalingTransform(e,t){return[e,0,0,t,0,0]}static scale(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r*h,e[1]=s*h,e[2]=n*c,e[3]=o*c,e[4]=a,e[5]=l,e}static multiply(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1],d=i[2],u=i[3],p=i[4],g=i[5];return e[0]=r*h+n*c,e[1]=s*h+o*c,e[2]=r*d+n*u,e[3]=s*d+o*u,e[4]=r*p+n*g+a,e[5]=s*p+o*g+l,e}static transformPoint(e,t,i){return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}static translate(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*h+n*c+a,e[5]=s*h+o*c+l,e}static invert(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=i*n-r*s;return l?(l=1/l,e[0]=n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e[4]=(s*a-n*o)*l,e[5]=(r*o-i*a)*l,e):null}static decompose(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=-Math.atan2(-r,s),l=Math.atan2(i,t),h=Math.abs(a+l),c=h<1e-5||Math.abs(2*Math.PI-h)<1e-5;return{skew:{x:c?0:a,y:c?0:l},scale:{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+s*s)},position:{x:n,y:o},rotation:c?l:0}}static decomposeScale(e){const t=e[0],i=e[1],r=e[2],s=e[3];return{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+s*s)}}}},p17C:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{}t.default=class{static getRGBADataAsSprite(e,t,i,s){const n=document.createElement("canvas");n.width=e,n.height=t;const o=n.getContext("2d"),a=o.getImageData(0,0,e,t);if(i.length!==a.data.length)throw new r;a.data.set(i),o.putImageData(a,0,0);const l=PIXI.Sprite.from(n);return s.addChild(l),l}}},pMCj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\nconst highp vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n\tlowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\t//float luminance = dot(textureColor.rgb, W);\n\n  gl_FragColor = vec4(\n\t\t(1.0 - ((1.0 - textureColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n\t\ttextureColor.a);\n}\n",{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},s96w:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float uTextureFlipY;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vec2(vTextureCoord.x, uTextureFlipY - vTextureCoord.y));\n\n    if (textureColor.a > 0.0 && textureColor.a < 1.0) {\n        gl_FragColor = vec4(textureColor.rgb / textureColor.a, textureColor.a);\n    } else {\n        gl_FragColor = textureColor;\n    }\n}\n",{uTextureFlipY:{type:"float",value:1}}),this.resolution=e}apply(e,t,i,r){this.uniforms.uTextureFlipY=t.sourceFrame.height/t.texture.height,super.apply(e,t,i,r)}}t.default=r},sodY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.textureCache={},this.containerCache=new Set,this.deferredCallbacks={}}load(e,t,i,r){if(this.textureCache[e]&&this.textureCache[e].references.add(r),this.textureCache[e]&&this.textureCache[e].texture&&this.textureCache[e].texture.frame)return void t(this.textureCache[e].texture);if(this.deferredCallbacks[e])return void this.deferredCallbacks[e].push(t);this.deferredCallbacks[e]=[t];const s=new PIXI.loaders.Loader;i.loaderPlugins&&i.loaderPlugins.forEach(e=>{e.pre&&s.pre(e.pre.bind(e)),e.use&&s.use(e.use.bind(e))}),s.add({url:e,xhrType:"blob"}).load(()=>{const t=s.resources[e].texture;this.textureCache[e]={texture:t,references:new Set([r])},this.deferredCallbacks[e].forEach(e=>{e(t)}),delete this.deferredCallbacks[e],s.reset()})}releaseTexturesForUrl(e){const t=this.textureCache[e];t&&(t.texture&&(t.texture.destroy(!0),t.texture=null),delete this.textureCache[e])}addContainer(e){this.containerCache.add(e)}releaseContainer(e){this.containerCache.delete(e),e.destroy({children:!0,texture:!0,baseTexture:!0})}reset(e){for(const e of this.containerCache)e.destroy({children:!0,texture:!0,baseTexture:!0});this.containerCache=new Set;for(const t in this.textureCache)this.textureCache[t].references.delete(e),0===this.textureCache[t].references.size&&(this.textureCache[t].texture&&this.textureCache[t].texture.destroy(!0),delete this.textureCache[t])}}t.default=r,r.instance=new r},uzmb:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.JPGEncoding=t.PNGEncoding=t.RawEncoding=t.ImageEncoding=t.ImageBinaryEncodingEnum=void 0,function(e){e.Uint8Array="uint8array",e.Buffer="buffer",e.DataURL="data-url"}(r=t.ImageBinaryEncodingEnum||(t.ImageBinaryEncodingEnum={}));class s{constructor(e){this.binaryEncoding=e}}t.ImageEncoding=s;class n extends s{static AsBuffer(){return n.AS_BUFFER}static AsUint8Array(){return n.AS_UINT8ARRAY}}t.RawEncoding=n,n.AS_BUFFER=new n(r.Buffer),n.AS_UINT8ARRAY=new n(r.Uint8Array);class o extends s{static AsBuffer(){return o.AS_BUFFER}static AsUint8Array(){return o.AS_UINT8ARRAY}static AsDataURL(){return o.AS_DATA_URL}}t.PNGEncoding=o,o.AS_BUFFER=new o(r.Buffer),o.AS_UINT8ARRAY=new o(r.Uint8Array),o.AS_DATA_URL=new o(r.DataURL);class a extends s{constructor(e,t){super(e),this.quality=t}static AsBuffer(e){return new a(r.Buffer,e)}static AsUint8Array(e){return new a(r.Uint8Array,e)}static AsDataURL(e){return new a(r.DataURL,e)}}t.JPGEncoding=a},vDtG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),s=i("UzQk"),n=i("xtw7");class o extends r.default{constructor(e,t){super(e,t),this.height=1,this.width=1,this.clipType="rect",this.x=0,this.y=0,this.maskSprite=null,this.maskSpriteTexture=null,this.maskSpriteBaseTexture=null,this.maskGraphics=null,this.maskTransform=new PIXI.Transform;const i=e;this._changePaths(i.paths)}destroy(e){this.teardownMaskGraphics(),this.teardownMaskSprite(),super.destroy(e)}render(){const e=this.mimicNode,t=e.paths,i="rect"===this.clipType,r="ellipse"===this.clipType;let s=!1;if(i){const t=this.asyncRenderer.activeRender.graph.bounds.transform(e.ctm.inverse);s=e.ref.child.clipBounds.contains(t)}if(s)this.teardownMaskGraphics(),this.teardownMaskSprite();else if(r){const e=this.installMaskGraphics();e.clear(),e.beginFill(0),e.drawEllipse(this.x,this.y,this.width,this.height)}else{const i=e.ref.child.clipBounds,r=this.globalScale,s=this.renderScale*this.pixiApp.renderer.resolution,n=s*r.x,a=s*r.y,l=i.width*n,h=i.height*a,c=[n,0,0,a,0,0],d=e=>Math.pow(2,Math.ceil(Math.log(e)/Math.LN2));this.maskSprite&&this.maskSprite.texture&&(d(l)!=this.maskSprite.texture.width||d(h)!==this.maskSprite.texture.height)&&this.teardownMaskSprite(),this.installMaskSprite();const u=this.maskSpriteBaseTexture,p=this.maskSpriteTexture;o.sharedTextureSource.begin().setSize(l,h).setTransform(c).setColor("white").setPaths(t).render().end(),u.realWidth=u.source.width,u.realHeight=u.source.height,u.width=u.realWidth/u.resolution,u.height=u.realHeight/u.resolution,u.isPowerOfTwo=o.sharedTextureSource.isPowerOfTwo,p._updateID++,p._frame.width=u.width,p._frame.height=u.height,this.pixiApp.renderer.textureManager.updateTexture(u),this.maskSprite.setTransform(0,0,1/n,1/a,0,0,0,0,0)}super.render()}_changePaths(e){const t=this.mimicNode.ref.child.clipBounds;let i;i=!e||0===e.length||1===e.length&&"rect"===e[0].type?"rect":1===e.length&&"ellipse"===e[0].type?"ellipse":"arbitrary",this.height=t.height,this.width=t.width,this.clipType=i,this.x=t.minX,this.y=t.minY,this.isDirtyRender=!0}changeGlobalPlacement(e,t){const i=e.transformValues,r=t.transformValues;(Math.abs(i.xscale-r.xscale)>1e-9||Math.abs(i.yscale-r.yscale)>1e-9)&&(this.isDirtyRender=!0),super.changeGlobalPlacement(e,t)}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case s.PGMMimicClipNode.PROP_PATHS:this._changePaths(i.paths);break;case s.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`clip did not observe property change '${e}'`)}})}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}installMaskSprite(){this.teardownMaskGraphics(),this.maskSprite||(this.maskSpriteBaseTexture=new PIXI.BaseTexture(o.sharedTextureSource.getCanvas()),this.maskSpriteBaseTexture.mipmap=!1,this.maskSpriteTexture=new PIXI.Texture(this.maskSpriteBaseTexture),this.maskSprite=new PIXI.Sprite(this.maskSpriteTexture),this.pixiDisplayObject.mask=this.maskSprite,this.pixiDisplayObject.addChild(this.maskSprite))}teardownMaskSprite(){this.maskSprite&&(this.pixiDisplayObject.removeChild(this.maskSprite),this.pixiDisplayObject.mask=null,this.maskSprite.destroy({texture:!0,baseTexture:!0}),this.maskSprite=null)}installMaskGraphics(){return this.teardownMaskSprite(),this.maskGraphics||(this.maskGraphics=new PIXI.Graphics,this.pixiDisplayObject.mask=this.maskGraphics,this.pixiDisplayObject.addChild(this.maskGraphics)),this.maskGraphics}teardownMaskGraphics(){this.maskGraphics&&(this.pixiDisplayObject.removeChild(this.maskGraphics),this.pixiDisplayObject.mask=null,this.maskGraphics.destroy(),this.maskGraphics=null)}}t.default=o,o.TYPE="clip",o.sharedTextureSource=new n.default},vKWb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;const r=i("CkXF"),s=i("UzQk"),n=i("Em2v"),o=i("0gjg"),a=i("wYSo"),l=i("lzL7"),h=i("NG98");var c;!function(e){e[e.VIEWPORT_BOUNDED_TEXTURE=0]="VIEWPORT_BOUNDED_TEXTURE",e[e.NODE_BOUNDED_TEXTURE=1]="NODE_BOUNDED_TEXTURE",e[e.UNUSABLE_TEXTURE=2]="UNUSABLE_TEXTURE",e[e.NO_TEXTURE=3]="NO_TEXTURE"}(c||(c={}));class d extends r.default{constructor(e,t){super(e,t),this.validateCount=0,this.isInRenderQueue=!1,this.textureOffset={x:0,y:0},this.textureFontSize=void 0,this.renderedFontSize=void 0,this.textureSharpness=1,this.textureState=c.NO_TEXTURE,this.pendingTextureState=c.NO_TEXTURE,this.renderedTextureGlobalPlacement=s.Matrix2D.Identity,this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=s.Matrix2D.Identity,this.dirtied={},this.colorStrategy={useColorizeFilter:!1,colorizeFillColor:s.SolidColor.ZERO,colorizeStrokeColor:s.SolidColor.ZERO},this.baseTexture=new PIXI.BaseTexture(d.TEXTURE_SOURCE.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite),this.isDirtyRender=!0,this.textureState=c.UNUSABLE_TEXTURE,this.debug("constructor()")}static set TextTextureInstance(e){if(void 0!==d.TEXTURE_SOURCE)throw new Error("Attempt to set TextTextureInstance after it's already been set.");d.TEXTURE_SOURCE=e}destroy(e){this.sprite.destroy({children:!0,texture:!0,baseTexture:!0}),super.destroy(e)}autoApplyAlphaFilter(){return!this.colorStrategy.useColorizeFilter}filter(){this.colorStrategy.useColorizeFilter&&(this.colorizeFilter||(this.colorizeFilter=new h.default),this.colorizeFilter.redChannelArtworkColor=this.colorStrategy.colorizeFillColor,this.colorizeFilter.greenChannelArtworkColor=this.colorStrategy.colorizeStrokeColor,this.colorizeFilter.alpha=this.opacity,this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.filters.push(this.colorizeFilter)),super.filter()}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,s=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,s)}place(){super.place(),this.updateSpritePlacement()}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}debug(e){}changeProperties(e,t){this.debug(`changeProperties(${t.join(",")})`),t.forEach(e=>{switch(e){case s.PGMMimicTextNode.PROP_BOUNDS:case s.PGMMimicTextNode.PROP_TEXT:case s.PGMMimicTextNode.PROP_STYLE_FONT:case s.PGMMimicTextNode.PROP_STYLE_STROKE_WIDTH:case s.PGMMimicTextNode.PROP_STYLE_TRACKING:this.dirtied.shape=!0;break;case s.PGMMimicTextNode.PROP_RENDERRUNS:this.dirtied.shape=!0,this.dirtied.color=!0;break;case s.PGMMimicNode.PROP_MARKED_BOUNDS:case s.PGMMimicTextNode.PROP_STYLE:break;case s.PGMMimicTextNode.PROP_STYLE_FILL_COLOR:case s.PGMMimicTextNode.PROP_STYLE_STROKE_COLOR:this.dirtied.color=!0;break;default:this.log.warning("Text: notified about unwatched property "+e)}})}validate(){const e=0==this.validateCount++,t=this.mimicNode,i=this.asyncRenderer.activeRender.graph.bounds.area,o=t.ctm,a=l.default.decomposeScale(o.asArray),h=t.bounds.width*a.x,d=t.bounds.height*a.x,u=i<4*r.default.areaOfBoundsAtDocumentScale(o,t.bounds);if(u?this.globalTransform.equal(o)||(this.isDirtyRender=!0):this.globalBoundsWidth===h&&this.globalBoundsHeight===d||(this.isDirtyRender=!0),this.globalBoundsWidth=h,this.globalBoundsHeight=d,this.globalTransform=o,this.pendingTextureState=u?c.VIEWPORT_BOUNDED_TEXTURE:c.NODE_BOUNDED_TEXTURE,e||this.dirtied.shape||this.dirtied.color){const e=t.renderRuns,i=e=>0===e.length||1===e.length&&0===e[0].range.start&&e[0].range.end===t.text.length,r=n.EmojiUtils.isEmoji(t.text),o=this.colorStrategy.useColorizeFilter;this.colorStrategy.useColorizeFilter=!r&&i(e.fillColors.runArrays)&&i(e.strokeColors.runArrays);const a=this.colorStrategy.useColorizeFilter!==o;this.colorStrategy.useColorizeFilter&&(this.colorStrategy.colorizeFillColor=0===e.fillColors.runArrays.length?t.style.fillColor||s.SolidColor.ZERO:e.fillColors.runArrays[0].attr,this.colorStrategy.colorizeStrokeColor=0===e.strokeColors.runArrays.length?t.style.strokeColor||s.SolidColor.ZERO:e.strokeColors.runArrays[0].attr),(this.dirtied.shape||a||!this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyRender=!0,this.textureState=c.UNUSABLE_TEXTURE),(a||this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyFilter=!0),this.dirtied={}}super.validate()}render(){this.debug("render begin"),this.notifyAsyncRenderBegin(),this.textureState===c.NO_TEXTURE||this.textureState===c.UNUSABLE_TEXTURE||this.asyncRenderer.activeRender.fullQuality?this.updateTexture():this.isInRenderQueue||(this.isInRenderQueue=!0,a.default.instance.addNormalPriority(()=>{this.updateTexture(),this.bubble("background-text-rerender",{text:this})})),super.render(),this.debug("render end")}updateTextureWithinDocumentBounds(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.strokeWidth,s=t.font,n=s.weight||"normal",o=s.cssName||s.family,a=s.style||"",h=e.fontSize,c=this.asyncRenderer.activeRender.graph.bounds,u=c.width,p=c.height,g=this.pixiApp.stage.scale.x*this.pixiApp.renderer.resolution,m=u*g,f=p*g,x=l.default.getScalingTransform(g,g),y=[1,0,0,1,i.minX,i.minY+h*s.ascentRatio],b=l.default.multiply([],x,this.globalPlacement.asArray),T=l.default.multiply([],b,y);this.textureFontSize=h,this.textureOffset.x=0,this.textureOffset.y=0,this.renderedTextureGlobalPlacement=this.globalPlacement,d.TEXTURE_SOURCE.setSize(m,f).setTransform(T).setFontSize(h).setFont(`${a} ${n} ${h}px ${o}`).setStrokeWidth(r)}updateTextureWithinNodeBounds(){const e=this.mimicNode,t=e.style,i=t.font,r=i.weight||"normal",s=i.cssName||i.family,n=i.style||"",o=e.fontSize,a=(o<100?1.333:1)*this.pixiApp.renderer.resolution,l=this.renderScale*a,h=o*l,c=t.strokeWidth*l,u=h<16?Math.ceil(h):Math.ceil(2*h)/2,p=t.strokeWidth?Math.max(.1*a,Math.round(c*(u/h)*2)/2):0,g=u/o,m=-e.markedBounds.minX*g,f=e.markedBounds.width*g,x=e.markedBounds.height*g,y=e.markedBounds.maxY*g,b=y-u*i.ascentRatio,T=[1,0,0,1,m,y];this.textureFontSize=u,this.textureOffset.x=-m,this.textureOffset.y=-b,d.TEXTURE_SOURCE.setSize(f,x).setTransform(T).setFontSize(u).setFont(`${n} ${r} ${u}px ${s}`).setStrokeWidth(p)}updateTexture(){if(this.debug("updateTexture begin"),this.isInRenderQueue=!1,this.isDestroyed)return;const e=this.mimicNode,t=e.style,i=e.text;let r,n;this.colorStrategy.useColorizeFilter?(r=t.fillColor?"#FF0000":null,n=t.strokeColor?"#00FF00":null):(r=t.fillColor?"#"+o.default.rgb2hex(t.fillColor):null,n=t.strokeColor?"#"+o.default.rgb2hex(t.strokeColor):null);const a=t.tracking;d.TEXTURE_SOURCE.begin().setText(i).setFillColor(r).setStrokeColor(n).setTracking(a),this.colorStrategy.useColorizeFilter?d.TEXTURE_SOURCE.setRenderRuns(s.PGMRenderRuns.EMPTY):d.TEXTURE_SOURCE.setRenderRuns(e.renderRuns),this.pendingTextureState===c.VIEWPORT_BOUNDED_TEXTURE?this.updateTextureWithinDocumentBounds():this.updateTextureWithinNodeBounds(),d.TEXTURE_SOURCE.render().end(),this.workaroundUpdateTexture(d.TEXTURE_SOURCE.isPowerOfTwo),this.textureState=this.pendingTextureState,this.updateSpritePlacement(),this.notifyAsyncRenderEnd(),this.debug("updateTexture end")}workaroundUpdateTexture(e){const t=this.baseTexture,i=this.texture;t.realWidth=t.source.width,t.realHeight=t.source.height,t.width=t.realWidth/t.resolution,t.height=t.realHeight/t.resolution,t.isPowerOfTwo=e,i._updateID++,i._frame.width=t.width,i._frame.height=t.height,this.pixiApp.renderer.textureManager.updateTexture(t)}updateSpritePlacement(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.font,s=i.height/(r.ascentRatio+r.descentRatio),n=s/this.textureFontSize;if(this.textureState===c.NODE_BOUNDED_TEXTURE){const e=i.minX+this.textureOffset.x*n,t=i.minY+this.textureOffset.y*n;this.sprite.setTransform(e,t,n,n,0,0,0,0,0)}else if(this.textureState===c.VIEWPORT_BOUNDED_TEXTURE){const e=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,t=l.default.getScalingTransform(e,e),i=l.default.multiply([],t,this.renderedTextureGlobalPlacement.asArray),r=l.default.invert([],i),n=s/this.textureFontSize;let o=r;if(1!==n){const e=l.default.getScalingTransform(n,n);o=l.default.multiply([],r,e),o[4]*=n,o[5]*=n}const a=l.default.decompose(o),{position:h,rotation:c,scale:d,skew:u}=a;this.sprite.setTransform(h.x,h.y,d.x,d.y,c,u.x,u.y,0,0)}}}t.Text=d,d.TYPE="text"},vr9a:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TargetRenderParameters=t.TargetRenderTypeHint=t.TargetTransformTypeEnum=void 0,function(e){e.FitCentered="fit-centered",e.FillCentered="fill-centered"}(r=t.TargetTransformTypeEnum||(t.TargetTransformTypeEnum={})),function(e){e.ForScreen="for-screen",e.ForThumbnail="for-thumbnail",e.ForFinalForm="for-final-form",e.ForAnalysis="for-analysis",e.ForDebugging="for-debugging"}(t.TargetRenderTypeHint||(t.TargetRenderTypeHint={}));class s{constructor(e,t,i,r,s){this.transformType=e,this.width=Math.floor(t),this.height=Math.floor(i),this.encoding=r,this.typeHint=s||null}static forGraph(e,t,i){return s.forGraphWithResolution(e,1,t,i)}static forGraphWithResolution(e,t,i,n){return new s(r.FitCentered,e.bounds.width*t,e.bounds.height*t,i,n)}static forGraphAtSize(e,t,i,r){const n=t/Math.max(e.bounds.width,e.bounds.height);return s.forGraphWithResolution(e,n,i,r)}static fit(e,t,i,n){return new s(r.FitCentered,e,t,i,n)}}t.TargetRenderParameters=s},vuLH:function(e,t,i){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(s,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function a(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiQueuedImageRenderer=void 0;const s=i("uzmb"),n=i("Ej8W"),o=i("yFMF");t.PixiQueuedImageRenderer=class{constructor(e){this.log=e.log,this.renderer=new n.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!0,addDebugText:!1}),this.renderer.hints.isAnimating=e.renderingAnimation,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvasContext=this.bufferCanvas.getContext("2d")}getExportCanvas(){const e=this.renderer.getRootRenderTarget(),t=e.resolution,i=e.size.width*t,r=e.size.height*t,s=this.getPixelData(0,0,i,r);this.bufferCanvas.width=i,this.bufferCanvas.height=r;const n=this.bufferCanvasContext.createImageData(i,r);return n.data.set(s),this.bufferCanvasContext.putImageData(n,0,0),Promise.resolve(this.bufferCanvas)}getPixelData(e,t,i,r){const s=this.renderer.getGLRenderer(),n=this.renderer.getRootRenderTarget(),o=new Uint8Array(4*i*r),a=s.gl;return s.bindRenderTarget(n),a.readPixels(e,t,i,r,a.RGBA,a.UNSIGNED_BYTE,o),o}renderImage(t,i,n,a){return r(this,void 0,void 0,(function*(){let l;return yield this.renderer.render(t,i,n,{assetLoader:a,demultiplyAndFlip:!0,postRenderCallback:t=>r(this,void 0,void 0,(function*(){const r=this.renderer.canvas,{width:n,height:a}=i;if(n!==r.width||a!==r.height)throw this.log.error("internal error: canvas size doesn't match the requested size."),new Error("internal error: canvas size doesn't match the requested size.");const h=i.encoding;if(h instanceof s.PNGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/png"),i=o.default.dataURLToEncoding(e,h.binaryEncoding);l={encoding:h,width:n,height:a,data:i,extra:t}}else if(h instanceof s.JPGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/jpeg",h.quality),i=o.default.dataURLToEncoding(e,h.binaryEncoding);l={encoding:h,width:n,height:a,data:i,extra:t}}else{if(!(h instanceof s.RawEncoding))throw new Error("unexpected encoding type");{const i=this.getPixelData(0,0,n,a);if(h.binaryEncoding===s.ImageBinaryEncodingEnum.Buffer)l={encoding:h,width:n,height:a,data:e.from(i.buffer),extra:t};else{if(h.binaryEncoding!==s.ImageBinaryEncodingEnum.Uint8Array)throw new Error("unexpected encoding type");l={encoding:h,width:n,height:a,data:i,extra:t}}}}}))}),l}))}destroy(){this.renderer.destroy()}}}).call(this,i("HDXh").Buffer)},wYSo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.tailQ=[],this.primaryQ=[],this.MAX_WORK_TIME_MS=4,this.MAX_BATCH_SIZE=6,this.isRunning=!1}processTailQ(){this.primaryQ.length>0?this.processQ():this.tailQ.length>0?(this.tailQ.shift()(),setTimeout(this.processTailQ.bind(this),0)):this.isRunning=!1}processQ(){const e=Date.now();let t,i=0,r=this.primaryQ.length;for(;r>0&&(i++,!(i%this.MAX_BATCH_SIZE==0&&Date.now()-e>=this.MAX_WORK_TIME_MS))&&(t=this.primaryQ.shift());)t(),r--;r>0?setTimeout(this.processQ.bind(this),0):this.processTailQ()}run(){this.isRunning||(this.isRunning=!0,setTimeout(this.processQ.bind(this),0))}addNormalPriority(e){this.primaryQ.push(e),this.run()}addHighPriority(e){this.primaryQ.unshift(e),this.run()}addLowPriority(e){this.tailQ.push(e),this.run()}hasItemsInQueue(){return this.primaryQ.length>0}}t.default=r,r.instance=new r},xBmG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveViewLoadingImagesEndEvent=t.LiveViewLoadingImagesBeginEvent=t.LiveViewAnimationRenderCompleteEvent=t.LiveViewFrameRenderCompleteEvent=t.LiveViewEvent=t.LiveViewDynamicRenderParams=void 0;class r{constructor(e){this.startTime=e.startTime||0,this.endTime=e.endTime||-1,this.loop=e.loop||!1}}t.LiveViewDynamicRenderParams=r,r.DEFAULT=new r({});class s{constructor(e){this.type=e}}t.LiveViewEvent=s;class n extends s{constructor(e,t){super(n.TYPE),this.graph=e,this.time=t}}t.LiveViewFrameRenderCompleteEvent=n,n.TYPE="frame-render-complete";class o extends s{constructor(e){super(o.TYPE),this.graph=e}}t.LiveViewAnimationRenderCompleteEvent=o,o.TYPE="animation-render-complete";class a extends s{constructor(){super(a.TYPE)}}t.LiveViewLoadingImagesBeginEvent=a,a.TYPE="loading-images-begin";class l extends s{constructor(){super(l.TYPE)}}t.LiveViewLoadingImagesEndEvent=l,l.TYPE="loading-images-end"},xGui:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiApplication=void 0,s(i("DAf/"),t),s(i("6xl/"),t),s(i("3hRk"),t),s(i("xBmG"),t),s(i("W4vr"),t),s(i("BTPj"),t),s(i("6ygk"),t),s(i("uzmb"),t),s(i("vr9a"),t),s(i("Escq"),t),s(i("bNrw"),t),s(i("vKWb"),t);var n=i("1HQJ");Object.defineProperty(t,"PixiApplication",{enumerable:!0,get:function(){return n.PixiApplication}})},xtw7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("RyLA");function s(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function n(e){return e&&0==(e&e-1)}t.default=class{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=10,this.height=10,this.color="#FFFFFF",this.paths=[],this.isPowerOfTwo=!1,this.renderer=new r.default(this.context,null),this.canvas.style.pointerEvents="none"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setTransform(e){return this.transform=e,this}setSize(e,t){return this.width=e,this.height=t,this}setPath(e){return this.setPaths([e])}setPaths(e){return this.paths=e,this}setColor(e){return this.color=e,this}render(e=!1){const t=e||Math.max(this.width,this.height)<=1024;t?(this.canvas.width=s(Math.round(this.width)),this.canvas.height=s(Math.round(this.height)),this.isPowerOfTwo=t):(this.canvas.width=Math.ceil(this.width),this.canvas.height=Math.ceil(this.height),this.isPowerOfTwo=n(this.canvas.width)&&n(this.canvas.height)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform);for(var i=0,r=this.paths.length;i<r;++i){var o=this.paths[i];this.context.lineWidth=o.pathStrokeWeight,this.context.miterLimit=o.pathMiterLimit,this.context.lineJoin=o.pathJoinType,this.context.lineCap=o.pathEndcapType,o.render(this.renderer),"none"!==o.pathFillType?(this.context.fillStyle=this.color,this.context.strokeStyle=null,this.context.fill(o.pathFillType)):(this.context.strokeStyle=this.color,this.context.fillStyle=null,this.context.stroke())}return this}getCanvas(){return this.canvas}destroy(){return this.canvas=null,this.context=null,this}}},yFMF:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=i("uzmb");class s{static dataURLToEncoding(e,t){switch(t){case r.ImageBinaryEncodingEnum.Buffer:return s.dataURLtoBuffer(e);case r.ImageBinaryEncodingEnum.Uint8Array:return new Uint8Array(s.dataURLtoBuffer(e));case r.ImageBinaryEncodingEnum.DataURL:return e;default:throw new Error("unrecognized encoding "+t)}}static dataURLtoBuffer(t){const i=t.indexOf(";base64,");if(i>=0){const r=t.substr(i+";base64,".length);if(void 0===e)throw new Error("Must polyfill Buffer on web");return e.from(r,"base64")}return null}static dataURLtoBlob(e){const t=e.split(","),i=t[0],r=t[1],s=i.split(":")[1].split(";")[0],n=i.indexOf("base64")>=0?atob(r):unescape(r),o=n.length,a=new Uint8Array(o);for(let e=0;e<o;e++)a[e]=n.charCodeAt(e);return new Blob([a],{type:s})}}t.default=s}).call(this,i("HDXh").Buffer)},z8uW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiFrameProductionService=void 0;const r=i("3hRk"),s=i("vuLH");class n{constructor(e,t,i,r,n){this.api=e,this.assetLoader=i,this.graph=t,this.parameters=r,this.frameRate=n,this.observers={},this.renderer=new s.PixiQueuedImageRenderer({hostAPI:e.host,assetLoader:i,log:e.log,renderingAnimation:!0})}on(e,t){let i=this.observers[e];i?i.push(t):(i=[t],this.observers[e]=i)}publish(e){let t=this.observers[e.type];t&&t.forEach(t=>{try{t(e)}catch(e){console.log("throw during event processing",e)}})}begin(){this.frameIndex=-1,this.doNextFrame()}doNextFrame(){if(this.canceled)this.publish(new r.FrameProductionCanceledEvent);else{this.frameIndex++;let e=this.frameIndex/this.frameRate;e>this.graph.duration?this.publish(new r.FrameProductionCompleteEvent):this.renderer.renderImage(this.graph,this.parameters,e).then(t=>{this.canceled||(this.publish(new r.FrameDataEvent(this.frameIndex,e,t)),this.doNextFrame())}).catch(e=>{this.publish(new r.FrameErrorEvent(e)),this.cancel(),this.publish(new r.FrameProductionCanceledEvent)})}}cancel(){this.canceled=!0}destroy(){this.renderer.destroy()}renderFrame(e,t){return this.renderer.renderImage(this.graph,t,e)}}t.PixiFrameProductionService=class{constructor(e){this.api=e}createProducer(e,t,i,r){return new n(this.api,e,t,i,r)}}},zrCk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiImageQueue=t.PixiImageService=void 0;const r=i("vuLH");t.PixiImageService=class{constructor(e){this.api=e}createQueue(e){return new s(this.api,e)}};class s{constructor(e,t){this.api=e,this.renderer=new r.PixiQueuedImageRenderer({hostAPI:this.api.host,log:this.api.log,assetLoader:t||e.defaultAssetLoader,renderingAnimation:!1})}render(e,t,i,r){return this.renderer.renderImage(e,t,i||0,r)}destroy(){this.renderer.destroy()}}t.PixiImageQueue=s}}]);
//# sourceMappingURL=vendors_npm_spark_70cb6373-33a8ed9b.js.map