(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[103,80,91],{"/Elb":function(e,t,a){var o,n;function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o=[a("Avqh"),a("KFmL"),a("+Ltv"),a("UzQk"),a("1geK"),a("eQmm"),a("btxu"),a("wHG3")],void 0===(n=function(e,t,a,o,n,s,l,c){const d=n.default,p=s.default,u=l.default,g=c.PixiJSApp.TargetRenderParameters,h=c.PixiJSApp.TargetRenderTypeHint,m=c.PixiJSApp.PNGEncoding;return function(n){n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({hidden:!0},n);const s=new e(n);let l;const c={};return s.setCoreWrapper=function(e){l=e},function(){function n(e,t){const a=document.createElement("a");document.body.appendChild(a);const o=window.URL.createObjectURL(e);a.setAttribute("href",o),a.setAttribute("download",t),a.click(),window.URL.revokeObjectURL(o)}function r(e,a,o){return new t({id:e,label:a,onClick:o,parent:s})}function i(e,t,a){return r(e,t,()=>{if(l){let e=null;if("static"===a?e=l.getGraph(!1).encode():"dynamic"===a?e=l.getGraph(!0).encode():"forPublish"===a&&(e=d.getPgmGraphForPublish(l).encode()),e){const t=JSON.stringify(e,null,4),a=document.createElement("textarea");a.value=t,document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a)}}})}if(s.el.className+="post-debug-view",c.header=new e({id:"PostDebugViewHeader",template:"<span>-== DEBUG ==-</span>",parent:s}),c.closeDialogButton=new t({id:"closeDialogButton",label:"X",onClick:function(){s.hide()},parent:c.header}),c.copyPGMGraphStatic=i("copyPGMGraphButtonStatic","Copy PGM Graph (static)","static"),c.copyPGMGraphDynamic=i("copyPGMGraphButtonDynamic","Copy PGM Graph (dynamic)","dynamic"),c.copyPGMGraphForPublish=i("copyPGMGraphButtonForPublish","Copy PGM Graph (for publish)","forPublish"),c.copyPIXIHierarchy=r("copyPIXIHierarchy","Capture PIXI hierarchy",()=>{if(l){const e=l.getGraph(!1);if(e){const t=g.forGraph(e,m.AsDataURL(),h.ForDebugging);return new u(l).renderGraph(e,t).then(e=>{n(new Blob([JSON.stringify(e.extra,null,2)],{type:"application/json"}),"pixi hierarchy.json")})}}}),o.$ClonesMetadata){class e{constructor(){this.reset()}reset(){this.map={},this.stack=[]}getOrCreate(e){return this.map[e]||(this.map[e]={count:0,totalTime:0})}before(e,t){this.stack.push(t)}after(e,t,a){this.stack.pop();const o=this.getOrCreate(t);if(o.count++,o.totalTime+=a,this.stack.length>0){const e=this.stack[this.stack.length-1],t=o.calledFrom||(o.calledFrom={});(t[e]||(t[e]={count:0})).count++;const n=this.getOrCreate(e);n.timeInChildren=(n.timeInChildren||0)+a}}summarize(){return Object.keys(this.map).map(e=>{const t=this.map[e],a={id:e,count:t.count,totalTime:t.totalTime,location:o.$ClonesMetadata[e]};return t.calledFrom&&(a.calledFrom=Object.keys(t.calledFrom).map(e=>({id:e,count:t.calledFrom[e].count})).sort((e,t)=>t.count-e.count)),t.timeInChildren&&(a.timeInChildren=t.timeInChildren),a}).sort((e,t)=>t.totalTime-e.totalTime)}}const t=o.$C.cloneReporter=new e;c.downloadCloneStats=r("downloadCloneStats","Download Clone Stats",()=>{const e=JSON.stringify(t.summarize(),null,2);n(new Blob([e],{type:"application/json"}),"clone-stats.json")}),c.resetCloneStats=r("resetCloneStats","Reset Clone Stats",()=>{t.reset()})}function f(){return Object.keys(a.logChannels).filter(e=>"default"!==e&&!0===a.logChannels[e])}function b(e,t){e&&(e.split(",").map(e=>e.trim()).forEach(e=>{e&&"default"!==e&&("toggle"!==t&&"disable"!==t||!0!==a.logChannels[e]?"toggle"!==t&&"enable"!==t||void 0!==a.logChannels[e]||(a.logChannels[e]=!0):delete a.logChannels[e])}),window.localStorage.setItem("logChannels",f().join(",")))}c.disableAllChannels=new t({id:"disableLoggingChannelsButton",label:"Disable all logging channels...",onClick:function(){const e=f();0===e.length?alert("There aren't any active channels to disable."):confirm(`Disable the ${e.length} currently-active logging channels?`)&&b(e.join(","),"disable")},parent:s}),c.enableLogging=new t({id:"enableLoggingButton",label:"Enable logging channel...",onClick:function(){var e=f(),t=a.channels.filter(t=>e.indexOf(t)<0);b(prompt(`Enter channel name(s) to toggle (comma-delimit more than one).\n\nCurrently on: ${e.join(", ")}\n\nCurrently off: ${t.join(", ")}`),"toggle")},parent:s}),c.toggleWatermark=new t({id:"toggleWatermarkButton",label:"Toggle Watermark",onClick:()=>{const e=l.getWatermarkEnabledForDoc();l.setWatermarkEnabledForDoc(!e)},parent:s}),c.runActionTest=new t({id:"runActionTestButton",label:"Run action test...",onClick:async function(){const e=prompt("Enter action test object.\n(copy/paste anchor portion from any action test URL)",'{"test":"...","sequence":"...","authToken":"..."}');let t=null;try{t=JSON.parse(e)}catch(e){alert("Failed to parse action as JSON.")}if(t)try{const e=Date.now();await async function(e){const t=async function(e,t,a){for(let o=0;o<t.length;o++){const n=await e.doAction(t[o]());a.appendActionResult(n)}},a=e&&e.test&&new o.$Tests[e.test];let n=!1;if(a&&e.sequence&&(n="function"!=typeof a.canRunActionSequence||a.canRunActionSequence(a[e.sequence],e.sequence,l.getDocument())),!n)throw new Error("canRunTest is false for given test / sequence");{const n=o.Host.network;o.Host.network=new p(e.authToken||null),o.CoreRandom.seedRandom(5489);try{const r=await a.prepareDocument(l.getDocument(),e.sequence);r&&await t(l,r,a);const i=await a.populateActionSequence(a[e.sequence],e.sequence,l.getDocument());a.setUpActionSequence(i,e.sequence,l.getDocument()),a.clearResultsBeforeRunning(),await t(l,i,a)}finally{o.Host.network=n,o.CoreRandom.seedRandom(Date.now())}}}(t),alert(`Successfully ran action in ${Date.now()-e}ms.`)}catch(e){alert("Failed to run action test: "+e.message)}},parent:s}),c.selectForma=new t({id:"runActionTestButton",label:"Select forma...",onClick:async function(){const e=prompt("Enter forma.formaID (not forma.id)","");if(e){const t=l.getFormaById(e);t?l.selectForma({forma:t,multiselect:!1,silent:!1}):alert("Could not find forma with formaID: "+e)}},parent:s}),b(window.localStorage.getItem("logChannels"),"enable")}(),s}}.apply(t,o))||(e.exports=n)},"0do5":function(e,t,a){var o,n;o=[a("yHLn"),a("2Fsf"),a("bBG2"),a("eZ+Q")],void 0===(n=function(e,t,a,o){const n=a.default;return function(a){(a=a||{}).tag=e.TheoActionBar.elementName;let r=a.coreWrapper;const i=e.actions,s=new t(a),l=s.update;let c={};function d(e){r.executingActionBarAction=!0;const t=r.getSelectedFormaType();switch(e.originalEvent.detail.action){case i.replace.eventName:s.events.publish("buttonpress-change-photo"),n.publish(`editor:${t}ReplacePressed`,{contextualData1:"method: actionBar"});break;case i.duplicate.eventName:n.publish(`editor:${t}Duplicated`,{contextualData1:"method: actionBar"}),s.events.publish("buttonpress-duplicate");break;case i.delete.eventName:s.events.publish("buttonpress-delete"),n.publish(`editor:${t}Deleted`,{contextualData1:"method: actionBar"});break;case i.moveToTop.eventName:n.publish("actionBar:layerOrderPressed",{contextualData1:"objectType: "+t,contextualData2:"layerOrder: Move to Top"}),r.setLayerForSelectedForma(c.selectedLayerMaxIndex).done();break;case i.moveUp.eventName:n.publish("actionBar:layerOrderPressed",{contextualData1:"objectType: "+t,contextualData2:"layerOrder: Move Up"}),r.setLayerForSelectedForma(c.selectedLayerCurIndex+1).done();break;case i.moveDown.eventName:n.publish("actionBar:layerOrderPressed",{contextualData1:"objectType: "+t,contextualData2:"layerOrder: Move Down"}),r.setLayerForSelectedForma(c.selectedLayerCurIndex-1).done();break;case i.moveToBottom.eventName:n.publish("actionBar:layerOrderPressed",{contextualData1:"objectType: "+t,contextualData2:"layerOrder: Move to Bottom"}),r.setLayerForSelectedForma(0).done();break;case i.group.eventName:n.publish("actionBar:groupPressed",{contextualData1:"objectType: "+t}),s.events.publish("buttonpress-group",{method:"actionBar"});break;case i.ungroup.eventName:n.publish("actionBar:ungroupPressed",{contextualData1:"objectType: "+t}),s.events.publish("buttonpress-ungroup",{method:"actionBar"});break;case i.sourceInfo.eventName:n.publish("actionBar:infoPressed",{contextualData1:"objectType: "+t});var a=r.getSelectedForma(),l=r.getImageFormaAttributionInfo(a),d={license:{type:l.licenseType,owner:l.ownerName,photo_name:l.title,source_name:l.sourceName,source_url:l.sourceURL,image_id:l.assetID}};o.displayAttributionDialog(d,{icon$:$(e.target.shadowRoot.firstElementChild.lastElementChild),calcLocationFromIcon:!0,editorEl$:$("#PostApp")}).then(function(e){"licensed"===e.changeType&&(e.newItemInfo.info.searchText=l.searchTerm,s.events.publish("stock-image-licensed",e))}.bind(this),(function(e){}))}}function p(){s.$el.on("THEO-ACTION-BAR-CLICK-EVENT",d)}function u(){s.$el.off("THEO-ACTION-BAR-CLICK-EVENT",d)}return s.update=function(e){const t=(e=e||{}).state||{};t.selectedItemType&&(s.el.setAttribute("current-layer-order",t.selectedLayerCurIndex),s.el.setAttribute("max-layer-order",t.selectedLayerMaxIndex),s.el.canGroup=!t.isReplaceMode&&t.selectedItemsCanBeGrouped,s.el.canUngroup=!t.isReplaceMode&&t.selectedItemsCanBeUngrouped,s.el.canDuplicate=!t.isReplaceMode&&t.selectedItemsCanBeDuplicated,s.el.canReorder=!t.isReplaceMode&&t.selectedItemsCanReordered,s.el.canEdit=!t.isReplaceMode&&t.selectedItemsCanBeEdited,s.el.canReplace=!t.isReplaceMode&&t.selectedItemsCanBeReplaced,s.el.canDelete=!t.isReplaceMode&&t.selectedItemsCanBeDeleted,s.el.canShowInfo=!t.isReplaceMode&&t.selectedItemsHaveSourceInfo,s.el.selectedNodeId=t.selectedItemId,s.el.objectType=t.selectedItemType),c=t,l(e)},s.updateCoreWrapper=function(e){r=e},s.el.className+=" post-action-bar",s.events.subscribe("shown",p),s.events.subscribe("hidden",u),s}}.apply(t,o))||(e.exports=n)},"6G8C":function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("BG/d"),a("2AzE"),a("a7tb"),a("TdwW")],void 0===(n=function(e,t,a,o,n,r){return function(i){(i=i||{}).sections=[{id:"suggested",label:"i18n.colors.kSuggestedColors",labelHeight:45,maxTileWidth:56,tileMargin:5,verticalPadding:15},{id:"default",label:"i18n.colors.kAllColors",labelHeight:45,maxTileWidth:56,tileMargin:5,verticalPadding:15}],i.scrollToSelected=!1;var s,l,c,d,p,u=new o(i),g=[],h=[],m=[],f=[],b={},v=!1,P=i.elementClassName||"post-colors-list";const S=[{red:255,green:255,blue:255,alpha:0,id:"#NONE_COLOR"}];function w(e,t,o=!1){const n=e.length,i=!t&&!o;let s='<div class="frame"></div><div class="swatches">';for(let t=n-1;t>=0;t--){const a=e[t];s+='<div class="swatch swatch'+(t+1)+"of"+n+'" style="background:'+r.toCSS(a)+';"></div>'}s+="</div>";const l=new a({group:"colors",class:"outline-selection",data:e,selected:!1,reselectable:!1,showNoneOverlay:o,showEditOverlay:i,editLabel:"i18n.panels.textstyles.kChangeColor",onEdit:C,hidden:!0,template:s});return l.events.subscribe("edit-clicked",C),l}function y(){u.handleScroll()}function x(){t.delay((function(){e("#PostEditorContent").on("click",k)}),0)}function C(t){var a=t.tile,o=a.$el;if(a.isSelected()){if(l=a,c={color:r.rgb2hex({r:l.data[0].red,g:l.data[0].green,b:l.data[0].blue}),id:l.data[0].id,roles:l.data[0].acRoles},d={color:c.color,id:c.id,roles:c.acRoles},s.setContainingElement(u.$el),s.setAnchorElement(l.$el),o.is(".color-picker-mode"))return;o.addClass("color-picker-mode"),s.setCurrentColor(d.color),function(){s.show(),u.$el.addClass("color-picker-scrim");var t=e('<div class="scrim"></div>').css({height:u.el.scrollHeight});u.$el.append(t)}()}}function k(t){var a="colorPicker"===t.target.id,o=1===e(t.target).closest(".post-color-eyedropper-target").length,n=1===e(t.target).closest("#colorPicker").length,r=1===e(t.target).closest(".swatch").length;a||n||o||r||s.hide()}function E(){e("#PostEditorContent").off("click",k),e(".color-picker-mode").removeClass("color-picker-mode"),u.$el.removeClass("color-picker-scrim"),u.$el.find(".scrim").remove()}function T(e){var t=l.$el.attr("id");"currentPalette"===t||b[t]||(b[t]=l.data);var a=r.hex2rgb(e.color);v&&u.events.publish("update-color",[{red:a.r,green:a.g,blue:a.b,id:e.id,roles:e.roles}],0),l.$el.find(".swatch").css("background","#"+e.color),d={color:e.color,id:e.id,roles:e.roles},l.data=[{red:a.r,green:a.g,blue:a.b,id:e.id,roles:e.roles}]}function B(e){"begin"===e.type?v=!0:"confirm"!==e.type&&"cancel"!==e.type||(v=!1)}function A(){if(l){var e=l.$el.find(".swatch"),t=r.hex2rgb(c.color);e.css("background","#"+c.color),l.data=[{red:t.r,green:t.g,blue:t.b,id:c.id,roles:c.roles}]}}function I(e){u.events.publish("eyedropper-changed",e)}function M(){e("#PostEditorContent").addClass("eye-dropper-scrim").append('<div class="full-scrim"></div>')}return u.handleEyeDropperClicked=function(t){s.handleEyeDropperClicked(t),e("#PostEditorContent").removeClass("eye-dropper-scrim"),e("#PostEditorContent").find(".full-scrim").remove()},u.handleEyeDropperMoved=function(e,t){s.handleEyeDropperMoved(e,t)},u.setDefaultColors=function(){g=[];for(var e=0;e<n.length;e++)g.push(w([n[e]]));u.setItems(g,"default")},u.setSuggestedColors=function(e){if(h=[],e&&e.length){if(!u.getSectionById("suggested")){var t=1+m.length;u.addSection({id:"suggested",label:"Suggested Colors",labelHeight:45,maxTileWidth:56,tileMargin:5,verticalPadding:15},t)}for(var a=0;a<e.length;a++)h.push(w(e[a]));u.isHidden()||u.setItems(h,"suggested")}else u.removeSection("suggested");u.getSectionByIndex(0).update({labelHeight:46})},u.setCurrentColors=t.throttle((function(a,o){if(o=o||{},a&&a.length){if(!u.getSectionById("current")||!p)p=function(e,t=0){u.getSectionById("current")||u.addSection({id:"current",label:"i18n.colors.kCurrentColors",labelHeight:37,maxTileWidth:56,tileMargin:5,verticalPadding:15},t);var a=w(e);return u.setItems([a],"current"),a}(a,o.includeNoneCategory?1:0),u.update();else{for(var n=p.$el.find(".swatch"),i=0;i<n.length;i++){e(n[i]).css("background-color",r.toCSS(a[i]))}p.data=t.cloneDeep(a)}var s=u.getSelected(),l=s&&"current"===s.section;(o.updateSelection||l)&&p.select({silent:!0})}else{u.removeSection("current"),p=null;const e=u.getItems("none");o.includeNoneCategory&&e&&1===e.length&&e[0].select({silent:!0})}}),400),u.setBrandKitColors=function(e){if(u.removeBrandkitSections(),m=[],e){var t=[],a=e.colors;if(a&&a.length>0){a.forEach((function(e){e.isBKColor=!0,t.push(w([e],!0))}));var o={id:"brandkit-bgcolors",label:e.name,labelHeight:45,maxTileWidth:56,tileMargin:5,verticalPadding:15};m.push(o);const n=u.getSectionById("none")?2:1;u.addSection(o,n),u.setItems(t,o.sectionId)}var n=u.getSectionById("suggested");n&&n.update({labelHeight:45}),u.update()}},u.setNoneSection=function(){const e=w(S,!1,!0),t={id:"none",label:"None",labelHeight:45,maxTileWidth:56,tileMargin:5,verticalPadding:15};u.addSection(t,0),u.setItems([e],t.id)},u.removeNoneSection=function(){u.removeSection("none")},u.removeBrandkitSections=function(){m.forEach((function(e){u.removeSection(e.sectionId)}))},u.selectCurrentColor=function(e){var t=u.getItems("current");t.length&&t[0].select(e)},u.closeColorPicker=function(){s.hide()},u.el.className+=" "+P,u.events.subscribe("shown",y),(s=i.colorPicker)&&(u.events.subscribe("hidden",(function(){!function(){var t,a,o;for(var n in e(".color-picker-mode").removeClass("color-picker-mode"),e(".selected-swatch").removeClass("selected-swatch"),u.deselectSelected(),b)(o=u.getItemWithProperty("id",n))&&(t=o.item.$el.find(".swatch"),a=r.rgb2hex({r:b[n][0].red,g:b[n][0].green,b:b[n][0].blue}),t.css("background","#"+a),o.item.data=b[n]);b={}}(),s.hide(),f.forEach((function(e){e.remove()})),s.hide()})),u.events.subscribe("shown",(function(){!function(){const e={shown:x,hidden:E,colorChangeModal:B,colorChanged:T,colorChangeCanceled:A,"eyedropper-changed":I,"eye-dropper-mode":M};for(const t in e)f.push(s.events.subscribe(t,e[t]))}()}))),u}}.apply(t,o))||(e.exports=n)},"7LIx":function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("2Fsf"),a("xPYN"),a("TdwW"),a("TW0n"),a("bBG2")],void 0===(n=function(e,t,a,o,n,r,i){const s=i.default;return function(i){var l,c,d=new a(i=i||{}),p=d.show,u=d.hide,g={},h=(d.update,!1),m=!1,f=!1,b=0;function v(e){g.cursorRing.$el.css("border","8px solid "+e)}function P(e,t){const a=g.cursorRing.getWidth()/2,o=g.cursorRing.getHeight()/2;g.cursorRing.update({top:t-o-66+"px",left:e-a+"px"})}function S(e){d.events.publish("eyedropper-changed",e)}function w(t){v(c=l._getHex()),e(".post-window").addClass("post-color-eyedropper-mode").on("mousemove",S),P(t.pageX,t.pageY),g.cursorRing.show(),d.events.publish("eye-dropper-mode"),s.publish("eyeDropperSelected"),new r({parent:"PostWindowPanel",class:"post-color-eyedropper-target",onClick:function(t){S(t),e(".post-window").removeClass("post-color-eyedropper-mode"),e(".post-color-eyedropper-target").remove()}})}return d.show=function(){p(),d.events.publish("colorChangeModal",{type:"begin"}),l.showOverlay(),m=!0,s.publish("colorPickerDisplayed")},d.hide=function(){f=!0,u(),m=!1,l.hideOverlay(),f=!1},d.handleEyeDropperClicked=function(t){t?d.setCurrentColor(t):v(c),g.cursorRing.hide(),e(".post-window").off("mousemove",S)},d.handleEyeDropperMoved=function(e,t){e&&v("#"+e),P(t.pageX,t.pageY)},d.setAnchorElement=function(e){l.setAnchor(e)},d.setContainingElement=function(e){l.reference$=e},d.setCurrentColor=function(e){l.color=n.hex2rgb(e),l.setColor(e)},d.setEntitlement=function(e){h=e},d.setRole=function(e){b=e},d.update=function(e){if(e=e||{},l.label=e.label||"",l._options.compact=e.compact||!1,l.suggestedColors=[],l.currentColors=[],e.suggestedColors){const t=[];e.suggestedColors.forEach(e=>{const a="#"+n.rgb2hex({r:"number"==typeof e.red?e.red:e.r,g:"number"==typeof e.green?e.green:e.g,b:"number"==typeof e.blue?e.blue:e.b});t.includes(a)||t.push(a)}),l.suggestedColors=t}e.currentColors&&(l.currentColors=e.currentColors.map(e=>"#"+n.rgb2hex({r:"number"==typeof e.red?e.red:e.r,g:"number"==typeof e.green?e.green:e.g,b:"number"==typeof e.blue?e.blue:e.b}))),void 0!==e.authoringContext&&(l.authoringContext=e.authoringContext),e.currentColors||e.suggestedColors||h?l._options.short=!1:l._options.short=!0},function(){d.$el.addClass("post-color-picker");var n=e('<div class="marvel-color-picker-container"></div>');d.$el.append(n),l=new o,g.cursorRing=new a({class:"ring",parent:"PostApp",height:75,width:75,hidden:!0}),l.setOptions({buttons:!1,anchorVert:!0,basicColors:!0,hideBrandkit:i.hideBrandkit,defaultToMore:!0}),l.onChange=t.throttle((function(e,t,a){if(m&&t){var o,n,r=t.substring(1);a&&(o=a.getRoles(),n=a.getId()),d.events.publish("colorChanged",{color:r,roles:o,id:n,role:b})}}),100),l.onFinish=function(t,a,o){(t=t||f)?m&&d.events.publish("colorChangeModal",{type:"confirm"}):(d.events.publish("colorChangeCanceled"),m&&d.events.publish("colorChangeModal",{type:"cancel"})),m=!1,d.events.publish("brand-color-added"),u(),g.cursorRing.isHidden()||(e(".post-window").removeClass("post-color-eyedropper-mode").off("mousemove",S),e("#PostEditorContent").removeClass("eye-dropper-scrim").find(".full-scrim").remove(),e(".post-color-eyedropper-target").remove(),g.cursorRing.hide())},l.setElement(n),l.onEyedropper=w,l.showOverlay(),d.hide()}(),d}}.apply(t,o))||(e.exports=n)},B52L:function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("2Fsf"),a("TW0n"),a("UNQu"),a("UzQk")],void 0===(n=function(e,t,a,o,n,r){var i;const s=r.TheoPoint,l=r.Matrix2D,c=r.TheoRect;return function(e){(e=e||{}).onDragStart=function(){d.events.publish("select-box-drag-start"),d.$el.addClass("gesture-in-progress")},e.onDragEnd=function(e,t){d.events.publish("select-box-drag-end",{event:e,element:t}),d.$el.removeClass("gesture-in-progress")};var d=new o(e),p=d.hide,u=e.onHide,g=d.isDragging,h=d.update,m=l.Identity,f=e.bounds||c.fromXYWH(0,0,500,500),b="",v=null;function P(e,t){document.activeElement.blur(),d.events.publish("select-box-resize-start",{spot:B(t)}),d.$el.addClass("gesture-in-progress")}function S(e,t){d.events.publish("select-box-resize-end",{spot:B(t)}),d.$el.removeClass("gesture-in-progress")}var w=new a({class:"text-inner-frame",parent:d,template:'<div class="inner-frame-edge"></div>'}),y=new a({class:"click-area",parent:d,template:"<p></p>"}),x=new a({class:"left-line",parent:d,template:"<p></p>"}),C=new a({class:"right-line",parent:d,template:"<p></p>"}),k=new n({class:"sidepip lp",parent:w,width:21,height:21,template:"<p></p>",onDrag:M,onDragStart:P,onDragEnd:S}),E=new n({class:"sidepip rp",parent:w,template:"<p></p>",onDrag:M,onDragStart:P,onDragEnd:S}),T=t.debounce((function(){d.$el.removeClass("temporary-dim")}),1500);function B(e){return k.el===e?{x:0,y:.5}:E.el===e?{x:1,y:.5}:[]}function A(){!function(e,t,a){var o=a.evalXY(0,0),n=i?i.getViewScale():1;t=(t=t.translate(o)).scaleXY(n,n);var c=Math.sqrt(Math.pow(t.a,2)+Math.pow(t.b,2)),d=t.transformPoint(s.ZERO);t=t.translate(d.multiply(-1)).scaleXY(1/c,1/c).translate(d),a=a.scaleXY(c,c,r.TheoPoint.ZERO);const p=(i?i.getViewToDocMatrix().inverse:l.Identity).transformPoint(s.ZERO);t=t.translate(p),e.css({width:a.width+"px",height:a.height+"px","transform-origin":"top left",transform:"matrix("+t.asArray.map((function(e){return t=e,Math.round(1e3*t)/1e3;var t})).join(",")+")"})}(d.$el,m,f)}function I(e){const t=d.parent.$el.offset(),a={x:e.x-t.left,y:e.y-t.top};return i.getViewToDocMatrix().transformPoint(a)}function M(e,t){d.update({isPlacementDirty:!0,spot:B(t),touchPoint:I({x:e.absX,y:e.absY}),publishEvent:"select-box-resize"})}return d.setCoreWrapper=function(e){i=e},d.temporaryDim=function(){d.$el.addClass("temporary-dim"),T()},d.undim=function(){d.$el.removeClass("temporary-dim")},d.update=function(e){(e=e||{}).silent=!!e.silent;var t=!1;if(void 0!==e.forma&&(v=e.forma),void 0!==e.matrix2d){var a=(m=e.matrix2d).asArray.join(",");b!==a&&(b=a,t=!0)}void 0!==e.bounds&&(f=e.bounds,t=!0),void 0!==e.isPlacementDirty&&(t=!0),y.show(),"boolean"==typeof e.showLeftLine&&(e.showLeftLine?(k.show(),x.show()):(k.hide(),x.hide())),"boolean"==typeof e.showRightLine&&(e.showRightLine?(E.show(),C.show()):(E.hide(),C.hide())),h(e),t&&(A(),!1===e.silent&&e.publishEvent&&d.events.publish(e.publishEvent,{mousePosition:e.mousePosition,spot:e.spot,touchPoint:e.touchPoint,startForma:v}))},d.forceDragHighlighting=function(){d.$el.addClass("gesture-in-progress"),d.$el.addClass("isdragging")},d.endDragHighlighting=function(){d.$el.removeClass("isdragging"),d.$el.removeClass("gesture-in-progress")},d.isDragging=function(){return g()||k.isDragging()||E.isDragging()},d.hide=function(){u(),p()},d.update({matrix2d:m,bounds:f}),d.el.className+=" post-text-forma-select-box",d}}.apply(t,o))||(e.exports=n)},CpDs:function(e,t,a){"use strict";a.r(t);var o=a("rjtT"),n=a.n(o),r=a("rCSV"),i=a("3xm6"),s=a.n(i),l=a("AQYj"),c=a.n(l),d=a("bBG2");t.default=class{constructor(){this.marvelBrandSwitcher=c.a,this.events=new r.default,this.hide=this.hide.bind(this),this.show=this.show.bind(this)}hide(){n.a.hide()}show(e,t){"OUTGOING"!==t&&"INCOMING"!==t?this._loadBrandSwitcher(e):(d.default.publish("editor:brandSwitchError",{sparkFormat:"post"}),this._showCollaborationAlert(t))}_loadBrandSwitcher(e){this.marvelBrandSwitcher&&this.marvelBrandSwitcher.show({activeBrand:e,onCancel:this._onCancelBrandSwitcher,onCreateButtonClick:this._onCreateButtonClick,onSelect:t=>this._switchBrand(e,t)})}_switchBrand(e,t){e.getId()!==t.getId()&&(d.default.publish("editor:newBrandApplied",{sparkFormat:"post",contextualData3:t.getTypeForAnalytics()}),this._updateBrand(t))}_updateBrand(e){this.events.publish("switch-brand",{authContext:e})}_onCancelBrandSwitcher(){}_onCreateButtonClick(){window.open(window.location.origin+"/sp/branding/create","_self")}_showCollaborationAlert(e){const t="OUTGOING"===e?s.a.translate("dialogs.brandSwitcherAlert.kContentOwnerText"):s.a.translate("dialogs.brandSwitcherAlert.kContentRecipientText");n.a.showAlert(s.a.translate("dialogs.brandSwitcherAlert.kHeaderText"),t,{okText:s.a.translate("dialogs.brandSwitcherAlert.kButtonLabel")})}}},Enpp:function(e,t,a){var o,n;o=[a("2ifj"),a("bBG2"),a("2Fsf"),a("wHG3"),a("UzQk"),a("UFvF")],void 0===(n=function(e,t,a,o,n,r){return function(i){(i=i||{}).tag=e.LayerStack.elementName;let s=i.coreWrapper;const l=new a(i),c=l.update,d=t.default,p=[],{PixiJSApp:u}=o,{TargetRenderParameters:g,TargetTransformTypeEnum:h,PNGEncoding:m}=u,{PGMExportSettings:f}=n;let b=[],v=!1;function P(e){const t=l.getAllFormaeInLayerOrder()[e.originalEvent.detail.index].controller.getZOrder();l.setLayerForId(e.originalEvent.detail.sourceId,t)}function S(e){if(!l.el.isOpen)return;if(!e.originalEvent.detail.id)return;const t=l.getAllFormaeInLayerOrder().find((function(t){return t.id===e.originalEvent.detail.id}));t&&s.selectForma({forma:t,layerStack:!0})}function w(e){l.el.isOpen&&e.originalEvent.detail.id&&s.onDoubleTap()}function y(){d.publish("editor:layerWidgetOpened")}function x(){d.publish("editor:layerWidgetCancelled")}function C(){d.publish("editor:layerWidgetScrollButtonClick")}function k(){s.suspendSave()}function E(){s.pendingSave()&&s.resumeSave()}return l.update=function(e){const t=l.getAllFormaeInLayerOrder();if(Math.abs(t.length-l.el.items.length)>1&&(l.el.setAttribute("is-loading","true"),window.setTimeout(()=>{l.el.removeAttribute("is-loading")},800)),s.getSelectedForma())for(var a=0;a<t.length;++a){const e=t[a];e&&e.bounds&&l.renderThumbnail(e,!1)}l.el.items.length||l.showPlaceholderLayerCards(t),r.allSettled(p).then(()=>{l.showLayerCardThumbnails(t)}),e&&c(e)},l.forceUpdateThumbnails=function(e=!1){if(v)return;if(v=!0,window.requestAnimationFrame(()=>{v=!1}),e){return void l.getAllFormaeInLayerOrder().forEach(e=>{l.renderThumbnail(e,!0)})}const t=s.getSelectedForma();l.renderThumbnail(t,!0)},l.renderThumbnail=function(e,t){if(!e)return;const a=e.id,o=b.find((function(e){return e.id===a}));if(o&&!t)return;o||b.push({id:a,thumbnail:""});const r=e.controller.getUserPerceivedFrame();let i=r.width/5,l=r.height/5;if(i<50){const e=50/i;i*=e,l*=e}let c=e.getGraph(f.STATIC);var d=n.TheoRect.fromXYWH(0,0,r.width,r.height),u=e.totalPlacement.translateXY(-r.minX,-r.minY);c=c.withBounds(d),c=c.withRoot(new n.PGMSimpleGroup("thumbnail rendering group",n.PGMNodeMetadata.EMPTY,n.PGMAnimationList.EMPTY,[new n.PGMReference(c.root,new n.PGMCompositingParams(u))])),n.OpacityFacade.formaHasNonNormalBlendMode(e)&&(c=n.PGMGraph.decode(c.encode()),c.visitByRef(e=>{e.compositing.blendMode!==n.PGMBlendModeEnum.Normal&&(e.compositing.blendMode=n.PGMBlendModeEnum.Normal)}));const v=e.controller.isTypeLockup?h.FitCentered:h.FillCentered;p.push(s.imageQueue().render(c,new g(v,i,l,m.AsDataURL())).then(e=>{const t=b.find((function(e){return e.id===a}));t&&(t.thumbnail=e.data)}))},l.isBackground=function(e){const t=e.kind===n.FrameForma.KIND&&e.isBackgroundImage();return e.kind===n.ShapeForma.KIND&&"grid-cell"===e.intent||t},l.showLayerCardThumbnails=function(e){var t;const a=s.getSelectedForma(),o=s.isMultiSelect();a&&!o&&(t=a.id);const n=e.map((function(e){const a=b.find((function(t){return e.id===t.id}));let o;if("text"===l.getKind(e)||"icon"===l.getKind(e)){const t=e.style;t&&t.colors&&t.colors.fieldPrimary&&(o=t.colors.fieldPrimary.hex)}return{id:e.id,kind:l.getKind(e),isSelected:t===e.id,thumbnailUrl:a?a.thumbnail:"",backgroundColor:e.backgroundColor,isBackground:l.isBackground(e),color:o||""}}));n.length<3?l.setItems([]):l.setItems(n)},l.showPlaceholderLayerCards=function(e){var t;const a=s.getSelectedForma(),o=s.isMultiSelect();a&&!o&&(t=a.id);const n=e.map((function(e){return{id:e.id,kind:l.getKind(e),isSelected:t===e.id}}));1===n.length?l.setItems([]):l.setItems(n)},l.getKind=function(e){const t=e.kind;return"function"==typeof e.isTypeLockup&&e.isTypeLockup()?"text":"Frame"===t?"photo":"Shape"===t||"shape"===t?"icon":"group"},l.setItems=function(e){l.el.items=e.filter(e=>void 0!==e)},l.updateCoreWrapper=function(e){s=e,b=[],l.el.reset()},l.close=function(){l.el.close()},l.toggleOn=function(){l.el.removeAttribute("is-hidden")},l.toggleOff=function(){l.el.setAttribute("is-hidden","true")},l.enterCropOrRefineCutoutMode=function(){l.el.setAttribute("is-hidden","true")},l.exitCropOrRefineCutoutMode=function(){window.setTimeout(()=>{l.el.removeAttribute("is-hidden")},1200)},l.getAllFormaeInLayerOrder=function(){const e=s.getSelectableFormaeIntersectingRect(n.TheoRect.Huge).sort((function(e,t){return e.controller.getZOrder()<t.controller.getZOrder()?1:e.controller.getZOrder()>t.controller.getZOrder()?-1:0}));return s.backgroundFormas().forEach((function(t){if(!t.isBackgroundImage()){const e=s.getFormaBackgroundColor(t),a=e?"#"+e.rgbColor.hex:"#fff";t.backgroundColor=a}e.push(t)})),e},l.setLayerForId=function(e,t){d.publish("editor:layerReordered",{contextualData2:"method:layerWidget"}),s.setReordering(!0);const a=l.getAllFormaeInLayerOrder(),o=s.getAllSelectedFormas(),n=a.find((function(t){return t.id===e}));var r=n.controller.getZOrder();t<=0||r<=0||(s.selectForma({forma:n}),s.setLayerForForma(n,t),s.deselect({silent:!0}),s.selectFormae(o),s.setReordering(!1))},l.$el.on("reorder",P),l.$el.on("select",S),l.$el.on("edit",w),l.$el.on("open",y),l.$el.on("close",x),l.$el.on("scroll-button-click",C),l.$el.on("sortable-dragstart",k),l.$el.on("sortable-dragend",E),l.$el.on("sortable-drop",E),l}}.apply(t,o))||(e.exports=n)},FpXA:function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("rCSV"),a("bBG2"),a("UZXC"),a("+VG/"),a("2Fsf"),a("M1RA"),a("pjwK"),a("pEL3"),a("WCfb"),a("B52L"),a("vVLA"),a("Dcjk"),a("UzQk"),a("3xm6"),a("ibPQ"),a("5d+0"),a("+Ltv"),a("tWZ4")],void 0===(n=function(e,t,a,o,n,r,i,s,l,c,d,p,u,g,h,m,{KeyboardShortcuts:f},b,v,P){const S=a.default,w=o.default,y=n.default,x=b.ShortcutConstants,C=P.default;return function(a){var o,n,b,P,k,E,T,B={selectionBoxes:[],selectionButtons:{},zoomButtons:{},zoomComboBoxContainer:null,zoomComboBox:null,zoomCoachmark:null},A=0,I=1,M={button:0,menu:0,manual:0,mouse:0,gesture:0,shortcut:0},L=(a=a||{}).poster,D=a.designSurface,F=[],O={},R=new f,N=navigator.platform.indexOf("Mac")>-1,z=!1,_=null;let W=!1;function G(e,t,a){F.push(e.events.subscribe(t,a))}function V(){}function U(e){const t=B.numSkrimRequestsForReason[e]||0;B.numSkrimRequestsForReason[e]=t+1,B.appLoadingSkrim.show()}function j(e){let t=0;if(e!==C.OVERRIDE_ALL){const a=B.numSkrimRequestsForReason[e]||0;B.numSkrimRequestsForReason[e]=Math.max(a-1,0),t=Object.values(B.numSkrimRequestsForReason).reduce((e,t)=>e+t,0)}0===t&&B.appLoadingSkrim.hide()}function H(){L.allImagesLoaded()?(j(C.IMAGE_LOADING),O.events.publish("first-full-render"),W=!1):W=!0}function $(){B.statusOverlay&&B.statusOverlay.hide()}function Z(e){U(C.IMAGE_LOADING);const t=e&&e.statusTitle,a=e&&e.statusMessage;var o,n;t&&a&&(o=t,n=a,B.statusOverlay?B.statusOverlay.update({title:o,message:n}):B.statusOverlay=new y({id:"PostStatusOverlay",parent:L.parent,title:o,message:n}),B.statusOverlay.show())}function K(){$(),j(C.IMAGE_LOADING),W&&(W=!1,O.events.publish("first-full-render"))}function Y(){U(C.BADGE_LOADING)}function q(){j(C.BADGE_LOADING)}function X(e){O.events.publish("handle-drag"),document.activeElement.blur(),o.handleHandleFeedback(e)}function Q(){O.events.publish("handle-double-tap")}function J(e){o.canRotateBox()&&(document.activeElement.blur(),o.handleHandleFeedback(e),R.logShortcut(x.kRotation))}g>=10?(10===g?(b="MSPointerDown",P="MSPointerUp",k="MSPointerMove"):(b="pointerdown",P="pointerup",k="pointermove"),E="wheel"):(b="mousedown touchstart",P="mouseup touchend",k="mousemove touchmove",E="wheel"),O.events=new S;var ee=t.throttle((function(e){o.canNudge()&&(o.handleNudge(e).done(),R.logShortcut(x.kNudge))}),40);function te(){if(o.allowDeletion(o.getAllSelectedFormas())){const e=o.getSelectedFormaType();O.events.publish("buttonpress-delete"),w.publish(`editor:${e}Deleted`,{contextualData1:"method: keyboardShortcut"})}}function ae(){var e=o.getAllSelectedFormas();if(o.canDuplicateFormae(e)){o.duplicateFormae(e).done(),R.logShortcut(x.kDuplication);const t=o.getSelectedFormaType();w.publish(`editor:${t}Duplicated`,{contextualData1:"method: keyboardShortcut"})}}function oe(){var e;o.getGroupFeatures().canGroup&&(e="shortcut",O.events.publish("buttonpress-group",{method:e}),R.logShortcut(x.kGroup))}function ne(){var e;o.getGroupFeatures().canUngroup&&(e="shortcut",O.events.publish("buttonpress-ungroup",{method:e}),R.logShortcut(x.kUngroup))}function re(e){o.canSelectSibling()&&(o.selectSibling(e.shiftKey),R.logShortcut(x.kSelectSibling))}function ie(){o.inSpecialSelectionMode()&&(o.exitSpecialSelectionMode(!0).done(),R.logShortcut(x.kExitSpecialSelectionMode))}function se(e){o.inSpecialSelectionMode()?(o.exitSpecialSelectionMode(!1).done(),R.logShortcut(x.kExitSpecialSelectionMode)):(!1===e.shiftKey&&o.canSelectParent()&&(o.selectParent(),R.logShortcut(x.kSelectParent)),!0===e.shiftKey&&o.canSelectChild()&&(o.selectChild(),R.logShortcut(x.kSelectChild)))}function le(e){O.updateSelectionBoxPosition()}function ce(e){o.handleTextFormaBeginResize(o.getSelectedForma(),e)}function de(e){o.handleTextFormaEndResize(o.getSelectedForma(),e)}function pe(e){o.handleTextFormaResize(o.getSelectedForma(),e).done()}function ue(e){"number"==typeof e.delta&&o.adjustCutoutBrushSize(e.delta)}function ge(){o.toggleRefineCutoutBrushMode("keyboard")}function he(){o.toggleCutoutPreviewVisibility()}function me(e,t){var a=L.$el.offset();return{x:e-a.left,y:t-a.top}}function fe(e){var t=e.lines||[];t.length?B.snapLines.show():B.snapLines.hide(),B.snapLines.update({alignmentLines:t})}function be(e){B.snapLines.update({alignmentLines:e.snapLines||[]}),o.getSelectedForma()===e.data.forma&&e.selectionBox&&(e.data.forma.controller.moveable||(B.selectionBox.update(e.selectionBox),o.inCharStyleMode||B.selectionBox.show()))}function ve(){t.delay((function(){o.getSelectedForma()||B.selectionBox.hide()}),20)}function Pe(t){B.selectionBox.hide(),t.selectionBox&&(B.selectionBox.update(t.selectionBox),B.selectionBox.show(),e(B.selectionBox.el).css("display","inline"))}function Se(e){e.selectionBoxes.length>0||!e.forma&&!e.id?B.selectionBox.hide():B.selectionBox.show();for(let e=0;e<B.selectionBoxes.length;e++)B.selectionBoxes[e].hide();B.selectionBoxes=[];for(let t=0;t<e.selectionBoxes.length;t++){const a=new p({id:"textFormaSelectionBox",parent:L.parent,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){},killClick:!0});G(a,"select-box-resize-start",ce),G(a,"select-box-resize-end",de),G(a,"select-box-resize",pe),a.setCoreWrapper(o),a.update(e.selectionBoxes[t]),a.show(),B.selectionBoxes.push(a)}}function we(e){var t;if(o.getSendForwardBackwardFormae(e.direction).length>0){switch(e.direction){case"back":t=x.kSendToBack;break;case"backward":t=x.kSendBackward;break;case"front":t=x.kSendToFront;break;case"forward":t=x.kSendForward}o.sendForwardBackward(e.direction),R.logShortcut(t)}}function ye(t){var a=e(t.target),r=a.closest("#zoomPopUp").length,i=a.closest("#PostWatermarkButton").length;const s=L.parent.parent.getEventXY(t),l=me(s.x,s.y),c=o.getViewToDocMatrix().transformPoint(l),d=h.TheoRect.fromSize(o.getDocumentSize()).locatePoint(c),p=d.x>=0&&d.x<=1&&d.y>=0&&d.y<=1,u=o.formaAtPointInSelection(c);z=!1,_=null;const g=i||r,m=p||g,f=o.inSpecialSelectionMode(),b=!(t.ctrlKey&&N||f||u)&&(!m||!g&&function(e){const t=e.ctrlKey&&!N||e.metaKey&&N;if(_=null,!t){const t=L.parent.parent.getEventXY(e),n=me(t.x,t.y),r=o.getViewToDocMatrix().transformPoint(n);if(!o.formaAtPoint(r,e=>e&&e.controller&&e.controller.floating)){var a=o.formaAtPoint(r,e=>e&&e.controller&&!e.controller.floating);!a||o.formaIsSelected(a)||!a.isShape()&&a.kind!==h.RootForma.KIND||(_=a)}}return t||null!==_}(t));if(n=o.getCurrentTimelineIndex(),O.events.publish("post-interaction-layer-pointer-down"),b){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),T=l,z=!0,v.disableCustomKeyboardShortcuts=!0;return Re(Ne(T)),!1}m||u||t.ctrlKey&&N||(o.inCropMode()?o.exitCropMode():o.inRefineCutoutMode()||o.deselectAll())}function xe(e){if(z){const t=L.parent.parent.getEventXY(e);Re(Ne(me(t.x,t.y)))}}function Ce(t){var a=o.getCurrentTimelineIndex()>n;if(z){const e=B.marqueeBox.isHidden();if(B.marqueeBox.hide(),z=!1,v.disableCustomKeyboardShortcuts=!1,e&&_)o.events.publish("close-all-panels"),o.selectForma({forma:_});else{const e=L.parent.parent.getEventXY(t),n=me(e.x,e.y),i=o.getViewToDocMatrix().transformPoint(n),s=o.getViewToDocMatrix().transformPoint(T),l=h.TheoRect.fromPoints(s,i),c=h.TheoRect.fromSize(o.getDocumentSize());var r=o.getSelectableFormaeIntersectingRect(l);r.length&&c.intersects(l)?(o.marqueeSelectFormae(r,t.shiftKey),t.shiftKey?R.logShortcut("multiselect"):R.logShortcut("marqueeSelect")):a||(o.deselect({closeAllPanels:!0}),O.hideSelectionBox())}}document.activeElement.blur(),e(t.target).closest("#zoomPopUp").length||O.events.publish("post-interaction-layer-clicked")}function ke(){D&&D.handleAnimationPause()}O.handleTap=function(e){O.events.publish("tap"),B.selectionBox.show()},O.hideSelectionBox=function(){B.selectionBox.hide()},O.showSelectionBox=function(){B.selectionBox.show()},O.getRefineCutoutGestureVisualizationCanvas=function(){return B.selectionBox.getBackgroundCanvas()},O.closeZoomComboBox=function(){B.zoomComboBox.el.onClickAway()},O.updateZoomPopUp=function(){for(var e in B.zoomPopUp.show(),B.zoomPopUp.enable(),B.zoomButtons)if(B.zoomButtons.hasOwnProperty(e)){B.zoomButtons[e].enable()}},O.updateZoomComboBox=function(e){if(o){if(e){var t=[];o.getZoomLevels().forEach((function(e){t.push(100*e)}));const e=m.translate("components.buttons.zoomFit.kComboLabel");t.push(e);const a=m.translate("components.buttons.zoomFill.kComboLabel");t.push(a),B.zoomComboBox.update({zoomLevels:t,minZoom:100*o.getMinZoom(),maxZoom:100*o.getMaxZoom()})}const a=o.getViewScale();B.zoomComboBox.update({currentZoom:100*a,currentZoomIsFit:o.getFit(),currentZoomIsFill:o.getFill()})}};var Ee=t.throttle((function(e,t){if(ke(),void 0!==t)o.zoomToPoint(e,t,!0);else{const t=o.getSelectionBounds();if(t.equal(h.TheoRect.Zero))o.zoomTo(e);else{const a=o.getViewToDocMatrix().inverse.transformRect(t).center;o.zoomToPoint(e,a,!1)}}}),16);function Te(e){const t=o.getViewScale(),a=o.getNextZoomLevel(e);if(t!==a){const e=o.getFitScale(),t=o.getFillScale();a===e?Be():a===t&&0===o.getSelectedCount()?Ae():Ee(a)}}function Be(){ke(),o.fitToView(),O.updateZoomComboBox(!1)}function Ae(){ke(),o.fillToView(),O.updateZoomComboBox(!1)}function Ie(e,t){const a=m.translate("components.buttons.zoomFit.kComboLabel"),o=m.translate("components.buttons.zoomFill.kComboLabel");e.id.length&&e.value===a?Be():e.id.length&&e.value===o?Ae():isNaN(Number(e.value))||Ee(Number(e.value)/100),O.logZoomMethod(t,"change")}function Me(e){const t=m.translate("components.buttons.zoomFit.kComboLabel"),a=m.translate("components.buttons.zoomFill.kComboLabel");if(e.id.length&&e.value===t){B.zoomComboBox.update({pendingZoomIsFit:!0});const e=100*o.getFitScale();B.zoomComboBox.$el.find("input").context.value=Math.round(e),B.zoomComboBox.update({pendingZoomIsFit:!0})}else if(e.id.length&&e.value===a){B.zoomComboBox.update({pendingZoomIsFill:!0});const e=100*o.getFillScale();B.zoomComboBox.$el.find("input").context.value=Math.round(e)}else B.zoomComboBox.update({pendingZoomIsFit:!1,pendingZoomIsFill:!1})}var Le=t.throttle((function(e,t){!0===t?(A+=1)%20==0&&(I+=1,I=Math.min(I,4)):(A=0,I=1);var a=h.TheoPoint.ZERO;switch(e){case"PageUp":case"PageDown":a=new h.TheoPoint(0,L.parent.getHeight()-40),I="PageUp"===e?-1:1;break;case"ArrowLeft":a=new h.TheoPoint(-10,0);break;case"ArrowRight":a=new h.TheoPoint(10,0);break;case"ArrowUp":a=new h.TheoPoint(0,-10);break;case"ArrowDown":a=new h.TheoPoint(0,10)}O.handlePanBy(a.multiply(I))}),16);function De(t){if(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),1!==e(t.target).closest("#zoomPopUp").length&&1!==e(t.target).closest("#PostPlaybackButton").length)if(t.ctrlKey||t.metaKey){var a=o.getViewScale();const e=t.originalEvent.deltaY;e<0?a*=1.09:a/=1.08;const n=L.parent.parent.getEventXY(t),r=me(n.x,n.y);Ee(a,r),O.logZoomMethod("mouse",e<0?"in":"out")}else if(o.canPan()){ke();var n=new h.TheoPoint(t.originalEvent.deltaX,t.originalEvent.deltaY);t.shiftKey&&(n=new h.TheoPoint(n.y,n.x)),o.panBy(n),O.logZoomMethod("mouse","pan")}}function Fe(){O.updateSelectionBoxPosition(),O.updateSelectionBoxes(),O.updateZoomComboBox(!1)}function Oe(){var e=o.getSwapState(),t=e.swapThumbnailForma,a=e.swapThumbnailLocation;t&&a?O.events.publish("update-swap-thumbnail",t,{x:a.x,y:a.y}):O.events.publish("remove-swap-thumbnail")}function Re(e){B.marqueeBox.update({top:e.origin.y+"px",left:e.origin.x+"px",width:e.width+"px",height:e.height+"px"}),B.marqueeBox.isHidden()&&(e.width*e.height>=25||Math.max(e.width,e.height)>20)&&B.marqueeBox.show()}function Ne(e){var t={x:Math.min(T.x,e.x),y:Math.min(T.y,e.y)},a=Math.abs(e.x-T.x),o=Math.abs(e.y-T.y);return h.TheoRect.fromXYWH(t.x,t.y,a,o)}return O.handleZoomToPoint=function(e,t){Ee(e,t)},O.handlePanBy=function(e){ke(),o.panBy(e)},O.handleZoomInShortcut=function(){Te(!0),R.logShortcut(x.kZoomIn),O.logZoomMethod("shortcut","in")},O.handleZoomOutShortcut=function(){Te(!1),R.logShortcut(x.kZoomOut),O.logZoomMethod("shortcut","out")},O.handleZoomFitShortcut=function(){Be(),R.logShortcut(x.kFitToView),O.logZoomMethod("shortcut","change")},O.handleZoomFillShortcut=function(){Ae(),R.logShortcut(x.kFillToView),O.logZoomMethod("shortcut","change")},O.handleZoomActualSizeShortcut=function(){Ee(1),R.logShortcut(x.kActualSize),O.logZoomMethod("shortcut","change")},O.handlePanViewShortcut=function(e,t){Le(e,t),!1===t&&(R.logShortcut(x.kPanView),O.logZoomMethod("shortcut","pan"))},O.logZoomMethod=function(e,t){if(0===M[e]){M[e]+=1;const n=o.getViewScale(),r=h.Host.locale.formatNumber(100*n,0),i=o.getZoomLevels();var a="custom";o.getFit()?a="fit":o.getFill()?a="fill":i.indexOf(n)>=0&&(a="menu"),w.publish("zoomChanged",{contextualData1:"method: "+e,contextualData2:"action: "+t,contextualData3:"zoomValue: "+r,contextualData4:"zoomType: "+a})}o.inRefineCutoutMode()&&o.events.publish("zoom")},O.handleTextTabSelected=function(){if(!o.inCharStyleMode){var e=o.getSelectedBoundingBox(),t=o.getSelectedForma();e&&t.isTypeLockup()&&(e.silent=!0,B.selectionBox.update(e),B.selectionBox.show())}},O.updateSelectionBoxPosition=t.throttle((function(){const e=o.getSelectedBoundingBox();e?(e.silent=!0,B.selectionBox.update(e),B.selectionBox.show()):(B.selectionBox.update(null),B.selectionBox.hide())}),16,{leading:!1}),O.updateSelectionBoxes=t.throttle((function(){for(var e=0;e<B.selectionBoxes.length;e++)B.selectionBoxes[e].update({isPlacementDirty:!0})}),16,{leading:!1}),O.setCoreWrapper=function(e){o=e,B.selectionBox.setCoreWrapper(e),B.snapLines.setCoreWrapper(e),O.updateZoomComboBox(!0)},O.enable=function(){if(o){F.length>0&&function(){L.parent.parent.$el.off(b,ye),L.parent.parent.$el.off(P,Ce),L.parent.parent.$el.off(k,xe),L.parent.parent.$el.off(E,De);for(var e=0;e<F.length;e++)F[e].remove();F=[]}(),function(){L.parent.parent.unbind(),L.parent.parent.$el.on(b,ye),L.parent.parent.$el.on(P,Ce),L.parent.parent.$el.on(k,xe.bind(this)),L.parent.parent.$el.on(E,De.bind(this)),L.parent.parent.bind(),G(o,"forma-selected",Pe),G(o,"forma-updated",be),G(o,"formae-deleted",ve),G(o,"update-snap-lines",fe),G(o,"update-handles",le),G(o,"update-swap-state",Oe),G(o,"update-view-state",Fe),G(o,"text-forma-selected",Se),G(o,"show-app-loading-indicator",U),G(o,"hide-app-loading-indicator",j),G(L,"image-loading-begin",Z),G(L,"image-loading-end",K),G(L,"badge-loading-begin",Y),G(L,"badge-loading-end",q),G(L,"rendered",H),G(B.selectionBox,"handle-drag",X),G(B.selectionBox,"handle-double-tap",Q),G(B.selectionBox,"shown",V),G(B.selectionBox,"select-box-arrow-key-pressed",ee),G(B.selectionBox,"select-box-delete-key-pressed",te),G(B.selectionBox,"select-box-rotation-shortcut-pressed",J),G(B.selectionBox,"change-z-order-shortcut",we),G(B.selectionBox,"duplication-shortcut-pressed",ae),G(B.selectionBox,"select-box-group-key-pressed",oe),G(B.selectionBox,"select-box-ungroup-key-pressed",ne),G(B.selectionBox,"select-box-return-key-pressed",ie),G(B.selectionBox,"select-box-escape-key-pressed",se),G(B.selectionBox,"select-box-tab-key-pressed",re),G(B.selectionBox,"change-brush-size",ue),G(B.selectionBox,"toggle-brush-mode",ge),G(B.selectionBox,"toggle-refine-preview",he)}();var e=o.getSelectedBoundingBox();e&&B.selectionBox.update(e),B.numSkrimRequestsForReason={},U(C.IMAGE_LOADING),this.updateZoomPopUp()}},O.disable=function(){for(var e=0;e<B.selectionBoxes.length;e++)B.selectionBoxes[e].hide();B.selectionBoxes=[],B.selectionBox.hide(),B.zoomPopUp.hide(),j(C.OVERRIDE_ALL),$(),B.marqueeBox.hide(),z=!1},O.handleWindowResize=function(){o.setViewSize(new h.TheoSize(L.parent.getWidth(),L.parent.getHeight()))},O.showLoadingSkrim=function(e){U(e)},O.hideLoadingSkrim=function(e){j(e)},function(){B.numSkrimRequestsForReason={},B.appLoadingSkrim=new i({class:"loading-skrim",parent:"PostApp",hidden:!0,template:'<div class="postspinner postspinner-small"></div>'}),B.snapLines=new u({parent:L.parent,hidden:!0}),B.selectionBox=new d({id:"selectionBox",parent:L.parent,matrix2d:[1,0,0,1,100,100],documentWidth:1e3,documentHeight:1e3,width:200,height:200,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){}}),B.marqueeBox=new i({id:"marqueeBox",class:"post-marquee-box",parent:L.parent,width:0,height:0,hidden:!0}),B.zoomPopUp=new s({id:"zoomPopUp",parent:L.parent.parent,height:48,hidden:!1,iconUnitWidth:38,iconCount:3,minWidth:209});var e=m.translate("components.buttons.zoomOut.kHoverLabel");e='<div class="pop-up-text-label">'+e+'</div>&emsp;<div class= "pop-up-symbol-label">'+R.getShortcutDescription({command:!0},"&ndash;")+"</div>",B.zoomButtons.popUpZoomOutButton=new r({parent:"zoomPopUp",class:"pop-up-icon",id:"PostPopUpZoomOut",hoverLabel:e,height:38,width:38,onClick:function(){Te(!1),O.logZoomMethod("button","out")}});var t=m.translate("components.buttons.zoomIn.kHoverLabel");t='<div class="pop-up-text-label">'+t+'</div>&emsp;<div class= "pop-up-symbol-label">'+R.getShortcutDescription({command:!0},"+")+"</div>",B.zoomButtons.popUpZoomInButton=new r({parent:"zoomPopUp",class:"pop-up-icon-left",id:"PostPopUpZoomIn",hoverLabel:t,height:38,width:38,onClick:function(){Te(!0),O.logZoomMethod("button","in")}}),B.zoomComboBoxContainer=new i({id:"PostZoomComboBoxContainer",parent:"zoomPopUp",top:7,left:94,height:"auto",width:65}),B.zoomComboBox=new l({parent:"PostZoomComboBoxContainer",id:"PostZoomComboBox",height:40,onSelected:Ie,onChanging:Me,formatter:e=>function(e){const t=m.translate("components.buttons.zoomFit.kComboLabel"),a=m.translate("components.buttons.zoomFill.kComboLabel");if(e===t)return t;if(e===a)return a;const o=h.Host.locale.formatNumber(e,0);return m.translate("components.slider.kValueLabel",{sliderValue:o})}(e)});var a=m.translate("components.coachmarks.zoom.kHoverLabel");a='<div class="pop-up-text-label">'+a+"</div>",B.zoomButtons.popUpZoomInfoButton=new r({parent:"zoomPopUp",class:"pop-up-icon-right",id:"PostPopUpZoomInfo",hoverLabel:a,height:38,width:38,onClick:function(){B.zoomButtons.popUpZoomInfoButton.hideHoverLabel(),B.zoomCoachmark||(B.zoomCoachmark=new c({parent:L.parent.parent,id:"zoomCoachmark",message:m.translate("components.coachmarks.zoom.kMessage"),title:m.translate("components.coachmarks.zoom.kTitle"),learnMore:m.translate("components.coachmarks.zoom.kLearnMore"),hidden:!0,showCloseButton:!1,standardPadding:!0,arrowDirection:"down",offsetX:11,offsetY:-152,width:280,height:140,priority:0,anchorElement:B.zoomButtons.popUpZoomInfoButton,onHide:null})),B.zoomCoachmark.isHidden()?(B.zoomCoachmark.show(),w.publish("zoomInfoPressed")):B.zoomCoachmark.hide()}})}(),O.components=B,O}}.apply(t,o))||(e.exports=n)},GSfz:function(e,t){var a={POST_SEEN_NEW_SIZES_V4_0_3:"postSeenNewSizes-v4.0.3",POST_SEEN_NEW_SIZES_NPW_V4_0_3:"postSeenNewSizesNpw-v4.0.3",POST_SEEN_NEW_SIZES_V4_14:"postSeenNewSizes-v4.14",POST_SEEN_NEW_SIZES_NPW_V4_14:"postSeenNewSizesNpw-v4.14",POST_SEEN_NEW_SIZES_V5_4_0:"postSeenNewSizes-v5.4.0",POST_SEEN_NEW_SIZES_NPW_V5_4_0:"postSeenNewSizesNpw-v5.4.0",POST_SEEN_NEW_SIZES_V7_3_0:"postSeenNewSizes-v7.3.0",POST_SEEN_NEW_SIZES_NPW_V7_3_0:"postSeenNewSizesNpw-v7.3.0",POST_BRAND_INDICATOR_COACHMARK_DISMISSED:"postBrandIndicatorCoachmarkDismissed",POST_MAKE_A_TEMPLATE_COACHMARK_DISMISSED:"postMakeATemplateCoachmarkDismissed",POST_BRAND_SHARING_COACHMARK_DISMISSED:"postBrandSharingIndicatorCoachmarkDismissed",POST_WATERMARK_COACHMARK_DISMISSED:"postWatermarkCoachmarkDismissed",POST_WATERMARK_UNLOCKED:"postWatermarkUnlocked",V2_LAYOUT_COACHMARK:"v2-layout-coachmark",V2_MSL_COACHMARK:"v2-msl-coachmark",V2_REPLACE_IMAGE_COACHMARK:"v2-replace-image-coachmark",V2_RESIZE_COACHMARK:"v2-resize-coachmark",V2_SHAPE_COACHMARK:"v2-shape-coachmark",V2_THEME_COACHMARK:"v2-theme-coachmark",POST_SEEN_GROUP_MENU:"postSeenGroupMenu",POST_SEEN_UNGROUP_MENU:"postSeenUngroupMenu"},o={};o[a.POST_SEEN_NEW_SIZES_V4_0_3]=!1,o[a.POST_SEEN_NEW_SIZES_NPW_V4_0_3]=!1,o[a.POST_SEEN_NEW_SIZES_V4_14]=!1,o[a.POST_SEEN_NEW_SIZES_NPW_V4_14]=!1,o[a.POST_SEEN_NEW_SIZES_V5_4_0]=!1,o[a.POST_SEEN_NEW_SIZES_NPW_V5_4_0]=!1,o[a.POST_SEEN_NEW_SIZES_V7_3_0]=!1,o[a.POST_SEEN_NEW_SIZES_NPW_V7_3_0]=!1,o[a.POST_WATERMARK_COACHMARK_DISMISSED]=!1,o[a.POST_WATERMARK_UNLOCKED]=!1,o[a.V2_LAYOUT_COACHMARK]=!1,o[a.V2_MSL_COACHMARK]=!1,o[a.V2_REPLACE_IMAGE_COACHMARK]=!1,o[a.V2_RESIZE_COACHMARK]=!1,o[a.V2_SHAPE_COACHMARK]=!1,o[a.V2_THEME_COACHMARK]=!1,o[a.POST_SEEN_GROUP_MENU]=!1,o[a.POST_SEEN_UNGROUP_MENU]=!1,e.exports={defaultValues:o,keys:a}},GVGo:function(e,t,a){"use strict";let o;a.r(t),a.d(t,"WorkflowType",(function(){return o})),function(e){e.AUTOMATIC="automatic",e.DEFAULT="default",e.BLANK="blank",e.QUICKACTION="quicktask",e.START_FROM_ASSET="start-from-asset"}(o||(o={}))},OI2j:function(e,t,a){var o,n;o=[a("UFvF"),a("YLtl"),a("2Fsf"),a("wHG3"),a("UzQk"),a("yBTN")],void 0===(n=function(e,t,a,o,n,r){const i=r.default,s=n.TheoSize,l=n.TheoPoint,c=n.Matrix2D,{PixiJSRenderer:d,PixiJSApp:p}=o,{PNGEncoding:u,RawEncoding:g,JPGEncoding:h,TargetRenderParameters:m,TargetRenderTypeHint:f,LiveViewLoadingImagesBeginEvent:b,LiveViewLoadingImagesEndEvent:v,LiveViewFrameRenderCompleteEvent:P,LiveViewDynamicRenderParams:S,LiveViewAnimationRenderCompleteEvent:w}=p;class y{constructor(e){this.graph=e,this.image=null,this.promise=null}}return function(e){const r=(e=e||{}).baseObject||new a(e),p=r.update;let x,C,k,E=[],T=null,B=!1,A=0,I=null,M=0,L=[],D=null;function F(){if(!T||!C)return;const e=T.documentSize();let t=e.width,a=e.height;if(r.parent&&r.parent.getHeight){t=r.parent.getWidth(),a=r.parent.getHeight();const e=T.getViewSize();"function"==typeof e.equal&&e.equal(s.Zero)&&(T.setViewSize(new s(t,a)),T.fitToView())}C.setSize(t,a,window.devicePixelRatio)}function O(){I||C.render(T.getFullCanvasGraph(n.PGMExportSettings.STATIC)),r.events.publish("watermark-footprint-changed")}function R(e){N(),x=new d(new i(e)),M=0,B=!1,C=x.liveViewService.createView(),k=x.imageService.createQueue(),D=C.addEventListener(e=>{if(e instanceof b)M++;else if(e instanceof v)M--,0===M&&r.events.publish("image-loading-end");else if(e instanceof P){B||(B=!0,r.events.publish("rendered"));const t=e.time;I&&function(e,t){if(t>0){const a=A/t,o=e/t;return Math.abs(a-1)<.01&&o<.01}return!1}(t,I.duration)&&r.events.publish("playback-new-loop-started"),A=t}else e instanceof w&&r.stopAnimation()}),r.$el[0].appendChild(C.getCanvas())}function N(){D&&(D.cancel(),D=null),C&&($(C.getCanvas()).remove(),C.destroy(),C=null),k&&(k.destroy(),k=null),x=null}r.handleParentResize=function(e){F()},r.disable=function(){r.$el.addClass("disabled"),r.events.publish("disabled")},r.enable=function(){r.$el.removeClass("disabled"),r.events.publish("enabled")},r.isRendered=function(){return B},r.allImagesLoaded=function(){return 0===M};const z=n.PGMWatermarkingUtils.WATERMARK_WIDTH*n.PGMWatermarkingUtils.WATERMARK_SCALE,_=n.PGMWatermarkingUtils.WATERMARK_HEIGHT*n.PGMWatermarkingUtils.WATERMARK_SCALE;return r.getWatermarkFootprint=function(){const e=T?T.getViewScale():1,t=T?T.getViewToDocMatrix().inverse:c.Identity,a=T?T.documentSize():s.Zero,o=t.transformPoint(new l(a.width,a.height)),n=z*e,r=_*e;return{width:n,height:r,left:o.x-n,top:o.y-r}},r.getRendition=function(e){if(!k)return Promise.resolve();const t=T.getGraph(!1);let a,o;if("image/png"===e.outputFormat)a=e.asDataURL?u.AsDataURL():u.AsBuffer();else{if(e.outputFormat&&"image/jpg"!==e.outputFormat&&"image/jpeg"!==e.outputFormat)throw new Error("getRendition: invalid output format "+e.outputFormat);{const t=e.imageQuality||.75;a=e.asDataURL?h.AsDataURL(t):h.AsBuffer(t)}}const n=e.renderType||null;if("number"==typeof e.longestSide)o=m.forGraphAtSize(t,e.longestSide,a,n);else if("number"==typeof e.width&&"number"==typeof e.height)o=m.fit(e.width,e.height,a,n);else if("number"==typeof e.width)o=m.fit(e.width,e.width/t.bounds.aspectRatio,a,n);else{if("number"!=typeof e.height)throw new Error("must specify width, height, or longestSide");o=m.fit(e.height*t.bounds.aspectRatio,e.height,a,n)}return k.render(t,o).then(t=>e.asDataURL?t.data:new Blob([t.data],{type:e.outputFormat||"image/jpeg"}))},r.getRenditionDataUrl=function(e){return r.getRendition(t.extend(e,{asDataURL:!0}))},r.getColorAtPoint=function(e){return function(){const e=T.getGraph(!1),t=L.find(t=>e.isEqualTo(t.graph));if(t)return t.promise;const a=new y(e);L.push(a);const o=m.forGraphAtSize(e,500,g.AsUint8Array(),f.ForAnalysis);return a.promise=k.render(e,o).then(e=>(a.image=e,L=[a],a)),a.promise}().then(t=>function(e,t){const{image:a,graph:o}=e,n=a.data,r=Math.round(a.width*(t.x/o.bounds.width)),i=4*(Math.round(a.height*(t.y/o.bounds.height))*a.width+r);return{r:n[i],g:n[i+1],b:n[i+2],a:n[i+3]/255}}(t,e))},r.getImageColorAtPoint=function(e){return{r:0,g:0,b:0,a:1}},r.update=function(e){p(e),void 0!==(e=e||{}).core&&e.core!==core&&(T=e.core,T?(R(T),F(),E.push(T.events.subscribe("document-in-new-renderable-state",O)),E.push(T.events.subscribe("design-updated",O)),E.push(T.events.subscribe("update-view-state",O)),C.render(T.getFullCanvasGraph(n.PGMExportSettings.STATIC))):(N(),E.forEach((function(e){e.remove()})),E=[]))},r.setWatermark=function(e){this.showWatermark=e},r.playAnimation=function(e){C&&(void 0===e&&(e=!0),I=T.getFullCanvasGraph(n.PGMExportSettings.DYNAMIC),C.render(I,new S({loop:e})))},r.pauseAnimation=function(){C&&I&&C.render(I,new o.LiveViewDynamicRenderParams({startTime:A,endTime:A}))},r.stopAnimation=function(){C&&I&&(I=null,C.render(T.getFullCanvasGraph(n.PGMExportSettings.STATIC)))},r.el.className+=" post-editing-surface",r}}.apply(t,o))||(e.exports=n)},WCfb:function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("2Fsf"),a("UNQu"),a("LbXs"),a("ywYV"),a("+Ltv"),a("UzQk")],void 0===(n=function(e,t,a,o,n,r,i,s){var l,c=e(document.body);const d=s.TheoPoint,p=s.TheoRect,u=s.Matrix2D;var g=navigator.platform.indexOf("Mac")>-1;const h=n.RefineCutoutBrushMode;return function(n){var m,f,b,v=new a(n=n||{}),P=v.hide,S=n.onHide,w=v.update,y="",x=u.Identity,C=n.bounds||p.fromXYWH(0,0,500,500),k=!!n.enablePips,E=!!n.thinOutline,T=!!n.groupOutlineColor,B=!!n.wideOutline,A=!1,I=!1,M=h.NONE,L=!!n.transparentOutline,D=!!n.textFrame,F=!!n.preferLeftSideHandle,O=n.handlePoints||null,R=!!n.rotateable,N=!!n.nudgeable,z=0,_={};function W(e){v.$el.toggleClass("gesture-in-progress",e)}function G(e){const t=v.parent.$el.offset(),a={x:e.x-t.left,y:e.y-t.top};return l.getViewToDocMatrix().transformPoint(a)}function V(){return l?l.getViewScale():1}function U(){return x.transformPoint(C.evalXY(.5,.5))}function j(e){var t=function(){const e=l?l.getViewToDocMatrix().inverse:u.Identity,t=v.parent.$el.offset();return e.transformPoint(U()).add(new d(t.left,t.top))}();return r.radiansBetweenPoints(t,e)-Math.PI/2}function H(e){W(!0),f=void 0,m=e.meta,v.events.publish("handle-drag",{part:e.meta.part,action:"begin",spot:e.meta.spot,location:G(e)})}function $(e){W(!1),f=m,m=void 0,v.events.publish("handle-drag",{part:e.meta.part,action:"end",spot:e.meta.spot,location:G(e)})}function Z(e){v.events.publish("handle-drag",{part:e.meta.part,action:"update",spot:e.meta.spot,location:G({x:e.absX,y:e.absY})})}function K(e,t,a){return new o({meta:{part:e,spot:t},class:a,parent:b,template:"<p></p>",onDrag:Z,onDragStart:H,onDragEnd:$})}var Y=new a({parent:v,class:"highlight-container"});b=new a({class:"inner-frame",id:"PostSelectionFrame",parent:v,template:'<div class="inner-frame-edge"><canvas class="bg-canvas"/></div>'});var q=new a({class:"crop-inner-grid1",parent:b,template:'<div class="inner-frame-edge"></div>'}),X=new a({class:"crop-inner-grid2",parent:b,template:'<div class="inner-frame-edge"></div>'}),Q=[K("corner",{x:0,y:0},"pip tl"),K("corner",{x:1,y:0},"pip tr"),K("corner",{x:0,y:1},"pip bl"),K("corner",{x:1,y:1},"pip br"),K("side",{x:0,y:.5},"sidepip lp"),K("side",{x:1,y:.5},"sidepip rp"),K("side",{x:.5,y:1},"sidepip bp"),K("side",{x:.5,y:0},"sidepip tp")],J=new o({class:"rotatepip rotate",parent:b,template:'<div class="stem"></div><p></p><div class="pip-icon"></div>',onDragStart:function(e){z=j(e.abs),W(!0),v.events.publish("handle-drag",{part:"rotate",action:"begin"})},onDrag:function(e){var t=j(e.abs);v.events.publish("handle-drag",{part:"rotate",action:"update",totalDeltaRadians:t-z,isShortcut:!1})},onDragEnd:function(){W(!1),v.events.publish("handle-drag",{part:"rotate",action:"end"})}}),ee=new o({class:"movepip move",parent:b,template:'<div class="stem"></div><div class="handle"><div class="pip-icon"></div></div>',onDragStart:function(e){W(!0),v.events.publish("handle-drag",{part:"move",location:e,action:"begin"})},onDrag:function(e){v.events.publish("handle-drag",{part:"move",action:"update",location:e,isShortcut:!1})},onDragEnd:function(e){W(!1),v.events.publish("handle-drag",{part:"move",location:e,action:"end"})}});function te(t){if(i.disableCustomKeyboardShortcuts)return;var a=t.shiftKey,o=t.ctrlKey&&!g||t.metaKey&&g,n=a?10:1;if(t.altKey){var r=(a?15:1)*(Math.PI/180)}const s=e(t.target).is("input, textarea"),l=void 0!==t.originalEvent.composedPath().find(t=>e(t).is("input, textarea")),c=s||l;switch(t.which){case 68:o&&(t.preventDefault(),I||A||v.events.publish("duplication-shortcut-pressed"));break;case 9:if(!c)return t.preventDefault(),v.events.publish("select-box-tab-key-pressed",{shiftKey:a}),!1;break;case 13:if(!c)return t.preventDefault(),v.events.publish("select-box-return-key-pressed",{shiftKey:a}),!1;break;case 27:if(!c)return t.preventDefault(),v.events.publish("select-box-escape-key-pressed",{shiftKey:a}),!1;break;case 38:if(!c)return t.preventDefault(),v.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:-n}}),!1;break;case 40:if(!c)return t.preventDefault(),v.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:n}}),!1;break;case 37:if(!c)return t.preventDefault(),t.altKey?(v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"begin"}),v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"update",totalDeltaRadians:-r,isShortcut:!0}),v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"end"}),!1):(v.events.publish("select-box-arrow-key-pressed",{translate:{x:-n,y:0}}),!1);break;case 39:if(!c)return t.preventDefault(),t.altKey?(v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"begin"}),v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"update",totalDeltaRadians:r,isShortcut:!0}),v.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"end"}),!1):(v.events.publish("select-box-arrow-key-pressed",{translate:{x:n,y:0}}),!1);break;case 8:case 46:if(!c&&(t.preventDefault(),!I&&!A))return v.events.publish("select-box-delete-key-pressed"),!1;break;case 66:I&&v.events.publish("toggle-brush-mode");break;case 71:if(o&&(t.preventDefault(),!I&&!A))return a?v.events.publish("select-box-ungroup-key-pressed"):v.events.publish("select-box-group-key-pressed"),!1;break;case 72:I&&v.events.publish("toggle-refine-preview");break;case 219:I?(t.preventDefault(),v.events.publish("change-brush-size",{delta:a?-5:-1})):o&&(t.preventDefault(),t.altKey?v.events.publish("change-z-order-shortcut",{direction:"back"}):v.events.publish("change-z-order-shortcut",{direction:"backward"}));break;case 221:I?(t.preventDefault(),v.events.publish("change-brush-size",{delta:a?5:1})):o&&(t.preventDefault(),t.altKey?v.events.publish("change-z-order-shortcut",{direction:"front"}):v.events.publish("change-z-order-shortcut",{direction:"forward"}))}}function ae(e,t,a){var o=a.evalXY(0,0),n=V();t=(t=t.translate(o)).scaleXY(n,n);var r=Math.sqrt(Math.pow(t.a,2)+Math.pow(t.b,2)),i=t.transformPoint(d.ZERO);t=t.translate(i.multiply(-1)).scaleXY(1/r,1/r).translate(i),a=a.scaleXY(r,r,s.TheoPoint.ZERO);const c=(l?l.getViewToDocMatrix().inverse:u.Identity).transformPoint(d.ZERO);t=t.translate(c),e.css({width:a.width+"px",height:a.height+"px","transform-origin":"top left",transform:"matrix("+t.asArray.map((function(e){return t=e,Math.round(1e3*t)/1e3;var t})).join(",")+")"})}function oe(e){return null!=e&&void 0!==e.find(e=>.5!==e.y)}function ne(){const e=b&&b.$el&&b.$el.find(".bg-canvas");return e&&e.length>0?e[0]:void 0}return v.setCoreWrapper=function(e){l=e},v.getCenterPoint=function(){return U()},v.getRelativeHeight=function(){return viewHeight},v.update=function(e){void 0!==(e=e||{}).inCropMode&&(A=e.inCropMode),void 0!==e.inCutoutMode&&(I=e.inCutoutMode),void 0!==e.cutoutBrushMode&&(M=e.cutoutBrushMode),void 0!==e.thinOutline&&(E=e.thinOutline),void 0!==e.groupOutlineColor&&(T=e.groupOutlineColor),void 0!==e.wideOutline&&(B=e.wideOutline),void 0!==e.textFrame&&(D=e.textFrame),void 0!==e.preferLeftSideHandle&&(F=e.preferLeftSideHandle),void 0!==e.rotateable&&(R=e.rotateable),void 0!==e.nudgeable&&(N=e.nudgeable),void 0!==e.enablePips&&(k=e.enablePips),void 0!==e.handlePoints&&(O=e.handlePoints),void 0!==e.transparentOutline&&(L=e.transparentOutline);var o=!1;if(void 0!==e.matrix2d){var n=(x=e.matrix2d).asArray.join(",");y!==n&&(y=n,o=!0)}if(void 0!==e.bounds&&(C=e.bounds,o=!0),q.show(A),X.show(A),A){const e=l&&l.gestureInProgress()?"grabbing":"grab";q.el.style.cursor=e,X.el.style.cursor=e}else I&&M!==h.NONE?b.el.style.cursor="none":b.el.style.cursor=N?"move":"default";if(b.$el.toggleClass("text-inner-frame",D),b.$el.toggleClass("inner-frame",!D),v.$el.toggleClass("thin-outline",E),v.$el.toggleClass("group-outline-wide",B),v.$el.toggleClass("group-outline-color",T),v.$el.toggleClass("transparent-outline",L),J.show(R),ee.show(!A&&!I&&R),void 0!==e.highlightRects){var r=e.highlightRects||[];t.each(r,(function(e){var t=_[e.formaID];t?t.src=e:((t={frame:new a({class:"multiselect-frame",parent:Y}),src:e}).frame.$el.toggleClass("group-multiselect-color",e.isGroup),_[e.formaID]=t,o=!0)}));var i=[];t.each(_,(function(e){r.find((function(t){return t.formaID===e.src.formaID}))||i.push(e)})),t.each(i,(function(e){e.frame.remove(),delete _[e.src.formaID]}))}!function(){const e=C.size.width*V(),t=C.size.height*V();if(D&&oe(O)&&function(e){return null!=e&&void 0!==e.find(e=>.5===e.y)}(O)){if(t<38)if(m&&"corner"===m.part){const e=m.spot;O=[new d(e.x,e.y),new d(1-e.x,.5)]}else O=F?[new d(0,.5),new d(1,0)]:[new d(1,.5),new d(0,0)]}else if((e<48||t<48)&&oe(O))if(m&&"corner"===m.part){const e=m.spot;O=[new d(e.x,e.y)]}else if(f&&"corner"===f.part){const e=f.spot;O=[new d(e.x,e.y)]}else O=[new d(0,0)]}(),Q.forEach((function(e){k&&O?e.show(null!=O.find((function(t){return t.x==e.meta.spot.x&&t.y==e.meta.spot.y}))):e.show(k),e.el.style.cursor=function(e){var t=0,a={x:e.meta.spot.x,y:e.meta.spot.y};const o="corner"===e.meta.part,n="side"===e.meta.part,r=x.transformValues;r.xscale<0&&r.yscale>0&&(o?a.x=1-a.x:n&&(a.x=1-a.x,a.y=1-a.y)),r.yscale<0&&r.xscale>0&&(o?a.y=1-a.y:n&&(a.x=1-a.x,a.y=1-a.y)),.5===a.x&&0===a.y?t=0:1===a.x&&0===a.y?t=45:1===a.x&&.5===a.y?t=90:1===a.x&&1===a.y?t=135:.5===a.x&&1===a.y?t=180:0===a.x&&1===a.y?t=225:0===a.x&&.5===a.y?t=270:0===a.x&&0===a.y&&(t=315);var i=180*Math.atan2(r.rotSine,r.rotCosine)/Math.PI+360;return i+=t,(i%=360)>=337.5||i<22.5?"ns-resize":i>=22.5&&i<67.5?"nesw-resize":i>=67.5&&i<112.5?"ew-resize":i>=112.5&&i<157.5?"nwse-resize":i>=157.5&&i<202.5?"ns-resize":i>=202.5&&i<247.5?"nesw-resize":i>=247.5&&i<292.5?"ew-resize":i>=292.5&&i<337.5?"nwse-resize":"pointer"}(e),"corner"===e.meta.part?(e.$el.toggleClass("group-outline-color",T),A?e.$el.removeClass("pip").addClass("croppip"):e.$el.removeClass("croppip").addClass("pip")):"side"===e.meta.part&&(A?e.$el.removeClass("sidepip").addClass("sidecroppip"):e.$el.removeClass("sidecroppip").addClass("sidepip"))})),w(e),o&&(v.$el.width("100%"),v.$el.height("100%"),ae(b.$el,x,C),t.each(_,(function(e){ae(e.frame.$el,e.src.placement,e.src.bounds)}))),function(){const e=ne();e&&(e.width=b.$el.width(),e.height=b.$el.height())}()},v.hide=function(){S(),P()},v.getBackgroundCanvas=function(){return ne()},v.update({matrix2d:x,bounds:C}),v.el.className+=" post-forma-select-box",v.events.subscribe("shown",(function(){c.on("keydown",te)})),v.events.subscribe("hidden",(function(){c.off("keydown",te)})),v}}.apply(t,o))||(e.exports=n)},ZXGz:function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("2Fsf"),a("+VG/"),a("eZ+Q"),a("UFvF"),a("PsNr")],void 0===(n=function(e,t,a,o,n,r,i){return function(r){(r=r||{}).onClose=r.onClose||function(){};var s,l=new a(r),c=l.show,d=r.label||"Choose photo",p=r.homeLabel,u=r.standAlonePicker,g=r.sources||["pixabay","unsplash"],h=r.assetType,m=r.image_filter;function f(e,t){e=i.cleanUpFiles(e),l.events.publish("item-selected",{files:e,info:t})}function b(e){l.events.publish("item-selected",{files:e})}function v(){l.events.publish("back")}return l.remove=function(){s.hide()},l.show=function(e){e=e||{},l.$el.appendTo(l.parent.$el),c(),s&&(s.hide(),s.show(e))},l.removeSelection=function(){l.$el.find(".selected").removeClass("selected")},l.home=function(){s&&s.home()},l.setTitle=function(e){s.model.set("label",e)},l.setCloseButtonVisibility=function(e){var t=e?"visible":"hidden";l.$el.find(".close-button").css("visibility",t)},l.showLibraries=function(){s._handleCreativeCloudLibraries({clickLocation:"editorRail"})},function(){l.$el.addClass("post-image-picker");var a=e('<div class="marvel-image-picker-container">hello</div>');l.$el.append(a),(s=new n({dooploSourceTypes:g,assetType:h,image_filter:m,useLightTheme:!0,homeLabel:p,standAlonePicker:u})).setCallbacks(f,b),s.setBeforeUnload&&s.setBeforeUnload((function(){return r.waitForSaveMethod()})),s.setElement(a),s.render(),a.hide(),l.$el.find(".close-button").on("vclick",r.onClose),s.show({context:null,multiSelect:!1}),t.delay((function(){if(l.setTitle(d),r.localOnly&&(l.$el.find(".or-delimiter-wrap").hide(),l.$el.find(".picker-button-wrapper").hide()),r.backButton){l.$el.find(".back-button").css("z-index",1);new o({parent:l,class:"post-back-button",id:"LogoPickerBackButton",width:24,height:24,onClick:v})}a.show()}),1)}(),l}}.apply(t,o))||(e.exports=n)},dIqn:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var o=a("UzQk"),n=a.n(o),r=a("W1Jy"),i=a.n(r),s=a("3xm6"),l=a.n(s),c=a("Bf0U"),d=a("hTYp"),p=a("1BWc"),u=a.n(p),g=a("GSfz"),h=a.n(g),m=a("CR0V"),f=a("dlJo"),b=a("Wqmg"),v=a("MGCh"),P=a.n(v),S=a("8DU0"),w=a("bBG2"),y=a("GVGo");function x(e,t){return Math.floor(Math.random()*(t-e+1))+e}function C(){}function k(e){return void 0===e}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const A=P.a.channel("new-post-workflow"),I=d,M={layout:"rows",panels:[{id:"NewPostTopSpacer",class:"no-pointer-events",size:"auto"},{id:"NewPostTextCapture",size:"20px"},{id:"NewPostBottomSpacer",class:"no-pointer-events",size:"auto"},{id:"NewPostShapeCapture",size:"200px"}]};class L{constructor(e){B(this,"elementClassName","new-post-workflow"),B(this,"newSizes",["LinkedInBlogPost","TwitchBanner"]),B(this,"seenNewSizesUserSetting",h.a.keys.POST_SEEN_NEW_SIZES_NPW_V7_3_0),B(this,"customDesignSize",{width:2560,height:2560}),B(this,"hasSeenNewSizes",!1),B(this,"panel",void 0),B(this,"startFromScratchPanel",void 0),this.panel=new i.a(T(T({},M),e)),this.unbind=this.unbind.bind(this),this.cancel=this.cancel.bind(this),this.initialize()}prompt(e){const t=new Promise((e,t)=>{this.panel.events.subscribe("submit",t=>{e(t)}),this.panel.events.subscribe("cancel",()=>{t()})}),a={resolve:C,reject:C},o={resolve:C,reject:C},n={resolve:C,reject:C},r=new Promise((e,t)=>{n.resolve=e,n.reject=t}),i=new Promise((e,t)=>{a.resolve=e,a.reject=t}),s=new Promise((e,t)=>{o.resolve=e,o.reject=t}),l=e.isMaxStaticNpw,d=this.getValidParamsFromQueryParams(e),p=this.getWorkflowBasedOnParams(d),u=this.resolvePalettePromiseBasedOnWorkflow(p);this.checkNeedStartFromScratchFromParams(d).then(e=>{if(e.needStartFromScratch){const e=this.getStartFromScratchPayload(d,p,a,o),{scratchResetData:t,scratchData:r}=e;n.resolve(d.text),this.showStartFromScratchPanel(t,r)}else{const{promiseData:t}=e;t&&t.aspectId?a.resolve(t.aspectId):a.resolve(this.resolveAspectIdPromiseBasedOnWorkflow(p)),t&&t.images?o.resolve(t.images):o.resolve(this.resolveImagePromiseBasedOnWorkflow(p)),n.resolve(this.resolveTextPromiseBasedOnWorkflow(p))}});const g=Promise.all([r,i]).then(e=>{const[t,a]=e,o=this.getResizeShapeDataById(a),n=o?o.aspectRatio:1;return l?Promise.resolve(c):this.resolveThemePromiseBasedOnTextAndAspect(t,n)});return Promise.all([r,i,s,u,g]).then(e=>{const[t,a,o,n,r]=e,i=this.getResizeShapeDataById(a);this.panel.events.publish("submit",{text:t,shapeData:i,image:o,palette:n,theme:r,defaultBackgroundColor:p.defaultBackgroundColor})}),t.then(()=>{this.panel.hide()}).catch(()=>{A.info("Cancelling NPW")}),t}hide(){this.panel.hide()}checkNeedStartFromScratchFromParams(e){return new Promise(t=>{const a={needStartFromScratch:!1,promiseData:{aspectId:null,images:null}};"default"===e.workflow?this.processParamValues(e).then(e=>{e&&e.aspectId&&e.images?(a.needStartFromScratch=!1,a.promiseData={aspectId:e.aspectId,images:e.images}):a.needStartFromScratch=!0,t(a)}):"blank"===e.workflow||e.workflow===y.WorkflowType.START_FROM_ASSET?(a.needStartFromScratch=e.sizeCategory||e.pickImage||e.searchText,t(a)):t(a)})}getStartFromScratchPayload(e,t,a,o){const n={scratchResetData:{},scratchData:{}};return"default"===e.workflow?(n.scratchResetData={searchText:e.searchText},n.scratchData={aspectIdPromise:a,imagePromise:o,sizePrompt:e.sizePrompt||"i18n.pages.StartFromScratch.kSelectSize",sizeCategory:e.sizeCategory,popularSizeIds:e.popularSizeIds}):"blank"!==e.workflow&&e.workflow!==y.WorkflowType.START_FROM_ASSET||(e.searchText||e.pickImage?(n.scratchData.imagePromise=o,n.scratchResetData.searchText=e.searchText,"beforeSize"===e.pickImage&&e.sizeCategory&&(n.scratchResetData.imageBeforeSize=!0)):o.resolve(this.resolveImagePromiseBasedOnWorkflow(t)),e.sizeCategory?(n.scratchData.aspectIdPromise=a,n.scratchData.sizeCategory=e.sizeCategory,n.scratchData.sizePrompt=e.sizePrompt||"i18n.pages.StartFromScratch.kSelectSize",n.scratchData.popularSizeIds=e.popularSizeIds):a.resolve(this.resolveAspectIdPromiseBasedOnWorkflow(t))),n}initialize(){this.startFromScratchPanel=new u.a({parent:this.panel,newSizes:this.newSizes,newSizesFlag:this.seenNewSizesUserSetting,hidden:!0}),this.startFromScratchPanel&&(this.startFromScratchPanel.events.subscribe("cancel",this.cancel),this.startFromScratchPanel.events.subscribe("custom-size-selected",e=>{e.isValid&&(this.customDesignSize={width:e.width,height:e.height,format:e.format,ppi:e.ppi})})),this.panel.el.className+=" "+this.elementClassName,this.panel.events.subscribe("hidden",this.unbind),S.default.getSetting(this.seenNewSizesUserSetting).then(e=>{this.hasSeenNewSizes=e})}showStartFromScratchPanel(e,t){this.panel.show(),this.startFromScratchPanel&&(this.startFromScratchPanel.reset(e),this.startFromScratchPanel.update(t),this.startFromScratchPanel.show()),window.marvel.events.trigger("hide-interstitial")}getWorkflowBasedOnParams(e={}){const t=e.workflow||y.WorkflowType.DEFAULT,a={};return Object.assign(a,I[t]),e.text&&(a.text=e.text),e.aspectId&&(a.aspectId=e.aspectId),e.palette&&(a.palette=e.palette),e.backgroundColor&&(a.defaultBackgroundColor=e.backgroundColor),e.image&&(a.image=e.image),a}getValidParamsFromQueryParams(e){const t={};if("new"!==e.operation||"blank"!==e.workflow&&e.workflow!==y.WorkflowType.START_FROM_ASSET||(e.routeQuery&&(["aspectId","text","sizeCategory","pickImage"].forEach(t=>{const a=e.routeQuery[t];k(a)&&(e[t]=a)}),e.pickImage&&("beforeSize"===e.pickImage?t.pickImage="beforeSize":t.pickImage="true"===e.pickImage||!0===e.pickImage)),k(e.text)&&(e.text="")),"string"==typeof e.text?t.text=e.text:t.text=l.a.translate("app.kDefaultStartFromScratchText"),e.sizePrompt&&(t.sizePrompt=e.sizePrompt),e.searchText&&(t.searchText=e.searchText),e.popularSizeIds&&(t.popularSizeIds=e.popularSizeIds.split(",")),e.aspectId){const a=e.aspectId.toLowerCase(),o=n.a.DesignSizeLibrary.getListOfResizeShapes().find(e=>e.id.toLowerCase()===a);o&&(t.aspectId=o.id)}if(e.sizeCategory){let a=e.sizeCategory.toLowerCase();"custom"===a||"popular"===a?t.sizeCategory=a:(a=n.a.DesignSizeCategories.getCategories().find(e=>a===e.id.toLowerCase()),a&&(t.sizeCategory=a.id))}if(e.palette){const a=e.palette.split(",");5===a.length&&(t.palette=a)}return e.image&&(t.image=e.image),e.workflow&&I[e.workflow]?t.workflow=e.workflow:t.workflow="default",t}randomQuote(){const e=x(0,m.a.length-1);return m.a[e]}resolveImagePromiseBasedOnWorkflow(e){return e.image?Object(b.a)(e.image).then(e=>Promise.resolve({files:[e]})).catch(()=>Promise.resolve(null)):Promise.resolve(null)}resolveThemePromiseBasedOnTextAndAspect(e,t){return new Promise((a,o)=>{const n=e&&e.split(" ").length;f.a.promiseFetch("/api/post/v1/designthemes",{wordCount:n,aspectRatio:t,imageCount:1}).then(e=>{if(e&&e.items&&e.items.length>0){const t=e.items.length-1,n=x(0,Math.min(t,16)),r=e.items[n].manifestUrl;f.a.promiseFetch(r).then(a).catch(o)}else a(null)})})}resolvePalettePromiseBasedOnWorkflow(e){const t=e.palette||I&&I.default&&I.default.palette;return Promise.resolve(t)}resolveTextPromiseBasedOnWorkflow(e){const t=e.blankText?"":e.text||this.randomQuote();return Promise.resolve(t)}resolveAspectIdPromiseBasedOnWorkflow(e){const t=this.getResizeShapeDataById(e.aspectId)?e.aspectId:I&&I.default&&I.default.aspectId;return Promise.resolve(t)}getResizeShapeDataById(e){const{width:t,height:a,format:o,ppi:r}=this.customDesignSize;return"Custom"===e&&this.customDesignSize?n.a.DesignSizeLibrary.getCustomSize(t,a,o,r):n.a.DesignSizeLibrary.getById(e||"")}processParamValues(e){return new Promise(t=>{const a={};"string"==typeof e.aspectId&&this.getResizeShapeDataById(e.aspectId)?a.aspectId=e.aspectId:a.aspectId="Instagram","string"==typeof e.image?Object(b.a)(e.image).then(e=>{a.images=[{files:[e]}]}).finally(()=>{a.aspectId&&a.images?t(a):t()}):t()})}unbind(){this.panel.$el.removeClass("display-more-shapes")}cancel(){this.panel.events.publish("cancel",{userCanceledNPW:!0}),w.default.publish("projectCancelled")}}},eQmm:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var o=a("UzQk"),n=a("UNXS"),r=a("V11p");class i extends n.HostNetworkImpl{constructor(e){var t,a,o;super(),o=void 0,(a="_authToken")in(t=this)?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,this._authToken=e}request(e){if(e.url.endsWith("/imageAnalysis")){const e={saliency:{boundingBoxRectangles:[]}},t=new r.c(JSON.stringify(e),"application/json; charset=utf-8"),a=null,n=new o.HostNetworkResponse(200,"application/json","utf-8",t,a);return o.CorePromise.resolve(n)}return super.request(e)}getAuthToken(){return this._authToken?o.CorePromise.resolve(this._authToken):super.getAuthToken()}}},nO8B:function(e,t,a){"use strict";a.r(t),a.d(t,"localizeWebComponents",(function(){return i}));var o=a("w9pq"),n=a("3xm6"),r=a.n(n);function i(){Object(o.a)({newBadge:r.a.translate("panels.badges.kNewlabel"),generic:{cancel:r.a.translate("app.generic.cancel"),confirm:r.a.translate("app.generic.confirm"),back:r.a.translate("app.generic.back"),close:r.a.translate("app.generic.close")},assetSubmitter:{formTitle:r.a.translate("app.assetSubmitter.formModal.kFormTitle"),titleFieldLabel:r.a.translate("app.assetSubmitter.formModal.kTitleFieldLabel"),entitlementSectionLabel:r.a.translate("app.assetSubmitter.formModal.kEntitlementSectionLabel"),animatedSectionLabel:r.a.translate("app.assetSubmitter.formModal.kAnimatedSectionLabel"),tasksSectionLabel:r.a.translate("app.assetSubmitter.formModal.kTasksSectionLabel"),tasksSubtitleLabel:r.a.translate("app.assetSubmitter.formModal.kTasksSubtitleLabel"),topicsFieldLabel:r.a.translate("app.assetSubmitter.formModal.kTopicsFieldLabel"),languagesSectionLabel:r.a.translate("app.assetSubmitter.formModal.kLanguagesSectionLabel"),filenameFieldLabel:r.a.translate("app.assetSubmitter.formModal.kFilenameFieldLabel"),foldersFieldLabel:r.a.translate("app.assetSubmitter.formModal.kFoldersFieldLabel"),cancelButtonTitle:r.a.translate("app.assetSubmitter.formModal.kCancelButtonTitle"),backButtonTitle:r.a.translate("app.assetSubmitter.formModal.kBackButtonTitle"),saveAssetButtonTitle:r.a.translate("app.assetSubmitter.formModal.kSaveAssetButtonTitle"),loadingViewPrimaryText:r.a.translate("app.assetSubmitter.formModal.kLoadingViewPrimaryText"),loadingViewSecondaryText:r.a.translate("app.assetSubmitter.formModal.kLoadingViewSecondaryText"),assetPreviewAltText:r.a.translate("app.assetSubmitter.formModal.kAssetPreviewAltText"),xButtonAltText:r.a.translate("app.assetSubmitter.formModal.kXButtonAltText"),nextButtonTitle:r.a.translate("app.assetSubmitter.formModal.kNextButtonTitle"),headerText:r.a.translate("app.assetSubmitter.failure.kHeaderText"),accessDeniedHeaderText:r.a.translate("app.assetSubmitter.failure.kAccessDeniedHeaderText"),filenameText:r.a.translate("app.assetSubmitter.failure.kFilenameText"),overrideText:r.a.translate("app.assetSubmitter.failure.kOverrideText"),accessText:r.a.translate("app.assetSubmitter.failure.kAccessText")},actionBar:{editText:r.a.translate("app.actionBar.editText"),replaceImage:r.a.translate("app.actionBar.replaceImage"),replaceIcon:r.a.translate("app.actionBar.replaceIcon"),replaceLogo:r.a.translate("app.actionBar.replaceLogo"),duplicate:r.a.translate("app.actionBar.duplicate"),layerOrder:r.a.translate("app.actionBar.layerOrder"),delete:r.a.translate("app.actionBar.delete"),sourceInfo:r.a.translate("app.actionBar.sourceInfo"),moveToTop:r.a.translate("app.actionBar.moveToTop"),moveUp:r.a.translate("app.actionBar.moveUp"),moveDown:r.a.translate("app.actionBar.moveDown"),moveToBottom:r.a.translate("app.actionBar.moveToBottom"),group:r.a.translate("app.actionBar.group"),ungroup:r.a.translate("app.actionBar.ungroup")},textPanel:{title:r.a.translate("app.textPanel.title"),effects:r.a.translate("app.imagePanel.effects"),poweredByAdobePhotoshop:r.a.translate("app.imagePanel.poweredByAdobePhotoshop")},multiStyleLockup:{mainTabText:r.a.translate("app.multiStyleLockup.mainTabText"),secondaryTabText:r.a.translate("app.multiStyleLockup.secondaryTabText"),addLabel:r.a.translate("app.multiStyleLockup.addLabel"),deleteLabel:r.a.translate("app.multiStyleLockup.deleteLabel")},textAttributes:{textColorSwatchLabel:r.a.translate("app.textAttributes.textColorSwatchLabel"),effectsColorSwatchLabel:r.a.translate("app.textAttributes.effectsColorSwatchLabel"),fontSizesOptionsLabel:r.a.translate("app.textAttributes.fontSizesOptionsLabel"),showFontSizesOptionsLabel:r.a.translate("app.textAttributes.showFontSizesOptionsLabel"),hideFontSizesOptionsLabel:r.a.translate("app.textAttributes.hideFontSizesOptionsLabel"),helpText:r.a.translate("app.textAttributes.helpText")},textAlignment:{center:r.a.translate("app.textAlignment.center"),left:r.a.translate("app.textAlignment.left"),right:r.a.translate("app.textAlignment.right"),capitalizeAndFit:r.a.translate("app.textAlignment.capitalizeAndFit"),autoLayout:r.a.translate("app.textAlignment.autoLayout"),circle:r.a.translate("app.textAlignment.circle"),semicircle:r.a.translate("app.textAlignment.semicircle"),semicircleInverted:r.a.translate("app.textAlignment.semicircleInverted"),gridLeft:r.a.translate("app.textAlignment.gridLeft"),gridCenter:r.a.translate("app.textAlignment.gridCenter"),gridRight:r.a.translate("app.textAlignment.gridRight"),curvedAlignments:r.a.translate("app.textAlignment.curvedAlignments"),gridAlignments:r.a.translate("app.textAlignment.gridAlignments"),magicAlignments:r.a.translate("app.textAlignment.magicAlignments"),advancedOptions:r.a.translate("app.textAlignment.advancedOptions")},textSpacing:{buttonLabel:r.a.translate("app.textSpacing.buttonLabel"),lineHeightLabel:r.a.translate("app.textSpacing.lineHeightLabel"),letterSpacingLabel:r.a.translate("app.textSpacing.letterSpacingLabel")},shapeEffects:{headerLabel:r.a.translate("app.shapeEffects.headerLabel"),maskLabel:r.a.translate("app.shapeEffects.maskLabel"),shapeColorSwatchLabel:r.a.translate("app.shapeEffects.shapeColorSwatchLabel")},shapesPicker:{buttonLabel:r.a.translate("app.shapesPicker.buttonLabel")},shadowEffects:{headerLabel:r.a.translate("app.shadowEffects.headerLabel"),shadowColorSwatchLabel:r.a.translate("app.shadowEffects.shadowColorSwatchLabel")},outlineEffects:{headerLabel:r.a.translate("app.outlineEffects.headerLabel"),outlineLabel:r.a.translate("app.outlineEffects.outlineLabel"),outlineColorSwatchLabel:r.a.translate("app.outlineEffects.outlineColorSwatchLabel")},textStyleSuggestions:{buttonLabel:r.a.translate("app.textStyleSuggestions.buttonLabel"),usageText:r.a.translate("app.textStyleSuggestions.usageText")},imagePanel:{title:r.a.translate("app.imagePanel.title"),replace:r.a.translate("app.imagePanel.replace"),restoreBackground:r.a.translate("app.imagePanel.restoreBackground"),removeBackground:r.a.translate("app.imagePanel.removeBackground"),betaLabel:r.a.translate("app.imagePanel.betaLabel"),addToBackgroundLayer:r.a.translate("app.imagePanel.addToBackgroundLayer"),moveFreely:r.a.translate("app.imagePanel.moveFreely"),horizontalFlipLabel:r.a.translate("app.imagePanel.horizontalFlipLabel"),verticleFlipLabel:r.a.translate("app.imagePanel.verticleFlipLabel"),cutout:r.a.translate("app.imagePanel.cutout"),effects:r.a.translate("app.imagePanel.effects"),poweredByAdobePhotoshop:r.a.translate("app.imagePanel.poweredByAdobePhotoshop")},cutoutPanel:{title:r.a.translate("app.cutoutPanel.title"),auto:r.a.translate("app.cutoutPanel.auto"),showOriginal:r.a.translate("app.cutoutPanel.showOriginal"),refineHeader:r.a.translate("app.cutoutPanel.refineHeader"),upgradeLink:r.a.translate("app.cutoutPanel.upgradeLink"),add:r.a.translate("app.cutoutPanel.add"),remove:r.a.translate("app.cutoutPanel.remove"),invert:r.a.translate("app.cutoutPanel.invert"),revert:r.a.translate("app.cutoutPanel.revert")},imageEnhancements:{heading:r.a.translate("app.imageEnhancements.heading"),reset:r.a.translate("app.imageEnhancements.reset"),contrast:r.a.translate("app.imageEnhancements.contrast"),brightness:r.a.translate("app.imageEnhancements.brightness"),saturation:r.a.translate("app.imageEnhancements.saturation"),highlight:r.a.translate("app.imageEnhancements.highlight"),shadow:r.a.translate("app.imageEnhancements.shadow"),warmth:r.a.translate("app.imageEnhancements.warmth"),sharpen:r.a.translate("app.imageEnhancements.sharpen")},imageFilters:{heading:r.a.translate("app.imageFilters.heading"),grayscale:r.a.translate("app.imageFilters.grayscale"),darken:r.a.translate("app.imageFilters.darken"),contrast:r.a.translate("app.imageFilters.contrast"),matte:r.a.translate("app.imageFilters.matte"),lighten:r.a.translate("app.imageFilters.lighten"),colorize:r.a.translate("app.imageFilters.colorize"),multiply:r.a.translate("app.imageFilters.multiply"),duotone:r.a.translate("app.imageFilters.duotone")},duoToneMenu:{shadowTooltip:r.a.translate("app.duoToneMenu.shadowTooltip"),highlightTooltip:r.a.translate("app.duoToneMenu.highlightTooltip"),currentLabel:r.a.translate("app.duoToneMenu.currentLabel"),presetsLabel:r.a.translate("app.duoToneMenu.presetsLabel"),swapColors:r.a.translate("app.duoToneMenu.swapColors")},imageColor:{headingBackground:r.a.translate("app.imageColor.headingBackground"),heading:r.a.translate("app.imageColor.heading")},imageBlur:{label:r.a.translate("app.imageBlur.label")},cropPanel:{title:r.a.translate("app.cropPanel.title")},cropSelections:{standard:r.a.translate("app.cropSelections.standard"),ratios:r.a.translate("app.cropSelections.ratios"),shapes:r.a.translate("app.cropSelections.shapes"),freeform:r.a.translate("app.cropSelections.freeform"),original:r.a.translate("app.cropSelections.original"),square:r.a.translate("app.cropSelections.square"),story:r.a.translate("app.cropSelections.story"),widescreen:r.a.translate("app.cropSelections.widescreen"),landscape:r.a.translate("app.cropSelections.landscape"),portrait:r.a.translate("app.cropSelections.portrait")},multiSelectPanel:{title:r.a.translate("app.multiSelectPanel.title"),alignLeftTooltip:r.a.translate("app.multiSelectPanel.alignLeftTooltip"),alignHorizontalCenterTooltip:r.a.translate("app.multiSelectPanel.alignHorizontalCenterTooltip"),alignRightTooltip:r.a.translate("app.multiSelectPanel.alignRightTooltip"),alignTopTooltip:r.a.translate("app.multiSelectPanel.alignTopTooltip"),alignVerticalCenterTooltip:r.a.translate("app.multiSelectPanel.alignVerticalCenterTooltip"),alignBottomTooltip:r.a.translate("app.multiSelectPanel.alignBottomTooltip"),ungroupButtonText:r.a.translate("app.multiSelectPanel.ungroupButtonText"),groupButtonText:r.a.translate("app.multiSelectPanel.groupButtonText")},logoPanel:{title:r.a.translate("app.logoPanel.title"),replaceTitle:r.a.translate("app.logoPanel.replaceTitle"),primary:r.a.translate("app.logoPanel.primary"),more:r.a.translate("app.logoPanel.more"),uploadLogoLine1:r.a.translate("app.logoPanel.uploadLogoLine1"),uploadLogoLine2:r.a.translate("app.logoPanel.uploadLogoLine2"),uploadLogo:r.a.translate("app.logoPanel.uploadLogo"),replaceLogoButtonText:r.a.translate("app.logoPanel.replaceLogoButtonText")},iconPanel:{title:r.a.translate("app.iconPanel.title"),replaceIconButtonText:r.a.translate("app.iconPanel.replaceIconButtonText"),flipVerticalTooltip:r.a.translate("app.iconPanel.flipVerticalTooltip"),flipHorizontalTooltip:r.a.translate("app.iconPanel.flipHorizontalTooltip"),iconColorTooltip:r.a.translate("app.iconPanel.iconColorTooltip")},groupPanel:{title:r.a.translate("app.groupPanel.title"),ungroupButtonText:r.a.translate("app.groupPanel.ungroupButtonText")},cellColorPanel:{title:r.a.translate("app.cellColorPanel.title"),chooseImageButtonText:r.a.translate("app.cellColorPanel.chooseImageButtonText"),backgroundColorTooltip:r.a.translate("app.cellColorPanel.backgroundColorTooltip")},sliderTooltips:{size:r.a.translate("app.sliderTooltips.size"),rotate:r.a.translate("app.sliderTooltips.rotate"),opacity:r.a.translate("app.sliderTooltips.opacity"),imageSize:r.a.translate("app.sliderTooltips.imageSize"),rotateImage:r.a.translate("app.sliderTooltips.rotateImage"),thickness:r.a.translate("app.sliderTooltips.thickness"),angle:r.a.translate("app.sliderTooltips.angle"),distance:r.a.translate("app.sliderTooltips.distance"),shapeSize:r.a.translate("app.sliderTooltips.shapeSize"),brushSize:r.a.translate("app.sliderTooltips.brushSize")},assetRailNav:{templates:r.a.translate("app.assetRailNav.templates"),text:r.a.translate("app.assetRailNav.text"),photos:r.a.translate("app.assetRailNav.photos"),stickers:r.a.translate("app.assetRailNav.stickers"),icons:r.a.translate("app.assetRailNav.icons"),designAssets:r.a.translate("app.assetRailNav.designAssets"),backgrounds:r.a.translate("app.assetRailNav.backgrounds"),logos:r.a.translate("app.assetRailNav.logos"),libraries:r.a.translate("app.assetRailNav.libraries")},designAssets:{results:r.a.translate("app.designAssets.results")},search:{clear:r.a.translate("app.search.clear"),showMore:r.a.translate("app.search.showMore")},assetRailCollection:{seeAll:r.a.translate("app.assetRailCollection.seeAll"),more:r.a.translate("app.assetRailCollection.more")},blendModePicker:{tooltipText:r.a.translate("app.blendModePicker.tooltipText"),optionsLabel:r.a.translate("app.blendModePicker.optionsLabel"),showOptionsLabel:r.a.translate("app.blendModePicker.showOptionsLabel"),hideOptionsLabel:r.a.translate("app.blendMode.picker.hideOptionsLabel"),normal:r.a.translate("app.blendModePicker.normal"),multiply:r.a.translate("app.blendModePicker.multiply"),screen:r.a.translate("app.blendModePicker.screen")},keys:{macCmd:r.a.translate("keyboard.kMacCommandKey"),macCtrl:r.a.translate("keyboard.kMacControlKey"),windowsCtrl:r.a.translate("keyboard.kWinCtrlKey"),macOption:r.a.translate("keyboard.kMacOptionKey"),windowsAlt:r.a.translate("keyboard.kWinAltKey"),shift:r.a.translate("keyboard.kShiftKey")},layerStack:{cantReorder:r.a.translate("app.layerStack.cantReorder"),background:r.a.translate("app.layerStack.background"),grouped:r.a.translate("app.layerStack.group")},helpModal:{videoAltText:r.a.translate("app.helpModal.videoAltText"),anchorAltText:r.a.translate("app.helpModal.anchorAltText")},firstMileTour:{endText:r.a.translate("app.firstMileTour.endText"),addText:r.a.translate("app.firstMileTour.addText"),clickText:r.a.translate("app.firstMileTour.clickText"),editText:r.a.translate("app.firstMileTour.editText"),StopButtonText:r.a.translate("app.firstMileTour.StopButtonText"),ADD:r.a.translate("app.firstMileTour.ADD"),EDIT:r.a.translate("app.firstMileTour.EDIT"),spotlightAddText:r.a.translate("app.firstMileTour.spotlightAddText"),spotlightEditText:r.a.translate("app.firstMileTour.spotlightEditText")},helpMenu:{restartTutorial:r.a.translate("app.helpMenu.restartTutorial"),watchTutorialVideo:r.a.translate("app.helpMenu.watchTutorialVideo"),watchMoreTutorialVideos:r.a.translate("app.helpMenu.watchMoreTutorialVideos"),getSupport:r.a.translate("app.helpMenu.getSupport"),helpMenuLabel:r.a.translate("app.helpMenu.helpMenuLabel"),coachmarkTitle:r.a.translate("app.helpMenu.coachmarkTitle"),coachmarkBody:r.a.translate("app.helpMenu.coachmarkBody"),dialogButton:r.a.translate("app.helpMenu.dialogButton")}})}},uzEs:function(e,t,a){var o,n;o=[a("YLtl"),a("2Fsf"),a("tpS0"),a("fLMX"),a("bBG2"),a("ndZK"),a("YYuT"),a("9KYx"),a("UzQk")],void 0===(n=function(e,t,a,o,n,r,i,s,l){const c=i.default,d=n.default,p=s.default;return function(e){var n,i,s,u=new t(e=e||{}),g=u.show,h=u.hide,m=u.update;function f(){h()}function b(e,t){p.loadNewUploadedFont(t)}function v(e){"tk-synced"===e.source()?function(e){p.registerDownloadedTypekitFontByACFontFace(e).then((function(e){return i.setFontForSelectedLockup(e)})).catch((function(){w(e.friendlyName())})).finally((function(){}))}(e):function(e){c.fontThingToFontInfo(e).then((function(e){return p.loadFont(e).then((function(){return e}))})).then((function(e){var t=c.fontInfoToCoreBrandFont(e);return i.setFontForSelectedLockup(t.descriptor)})).catch((function(){w(e.friendlyName())})).finally((function(){"function"==typeof e.getRoles&&(e.isCustomFont()?d.publish("usedCustomFont"):e.isSparkFont()&&d.publish("usedBrandKitFont"))}))}(e)}function P(){u.events.publish("add-custom-fonts-attempted")}function S(e){const t=e.variationId,a=p.getRegisteredTypekitFontPostScriptName(t);a&&d.publish("typekitFontDeactivated",{contextualData1:a})}function w(e){d.publish("pickedFontIsNotAvailable",{contextualData1:e});const t=new a({headerText:"i18n.dialogs.fontNotAvaliableNotice.kHeaderText",contentText:"i18n.dialogs.fontNotAvaliableNotice.kContentText",buttons:[{class:"pill pill-primary-on-light",label:"i18n.dialogs.fontNotAvaliableNotice.kButtonLabel",onClick:function(){t.hide()}}]});t.show()}function y(){}return u.setCoreWrapper=function(e){i=e},u.show=function(){g(),n.onFinish=f,n.onSelect=v,n.onCancel=y,function(){var e=i.getLockupFontOfSelectedLockup();if(e){var t=e.fontData.source;if(t===l.FontSource.UNKNOWN_SOURCE||t===l.FontSource.USER_UPLOAD||t===l.FontSource.SPARK_PROVIDED)for(var a=s.getAllFonts(),o=0;o<a.length;o++){var c=a[o];if(c.getMetrics().postScriptName===e.fontData.postScriptName)return void n.setValue(c)}var d=r.convertPostFaceToAC(e.fontData);n.setValue(d)}}(),n.showOverlay(),window.marvel.events.on("spark-custom-font-uploaded",b),window.marvel.events.on("typekit-synced-font-deactivated",S),window.marvel.events.on("add-custom-fonts-attempted",P)},u.hide=function(){h(),n.hideOverlay(),window.marvel.events.off("spark-custom-font-uploaded",b),window.marvel.events.off("typekit-synced-font-deactivated",S),window.marvel.events.off("add-custom-fonts-attempted",P)},u.setAnchorElement=function(e){n.setAnchor(e)},u.setContainingElement=function(e){n.reference$=e},u.update=function(e){var t;m(),t=e.authoringContext,s=t,n.setAuthoringContext(t),n.setOption("brandFonts",!!s),n.setOption("hideCustomFonts",!s)},u.$el.addClass("post-font-picker"),(n=new o).configure({mode:"face",brandFonts:!1,hideCustomFonts:!0,behavior:"dropdown",launchContext:"post",$el:u.$el,$anchor:e.anchorEl,offsetY:3,onFinish:f,onSelect:v,onCancel:y,stayOpen:!0,extraFonts:r.fontArrayByFace(p.getSelectableStandardFonts()),suppressSparkfonts:!0,typekitSyncEnabled:!0}),u}}.apply(t,o))||(e.exports=n)},vVLA:function(e,t,a){var o,n;o=[a("xeH2"),a("YLtl"),a("Avqh"),a("UzQk"),a("oWUw")],void 0===(n=function(e,t,a,o,n){var r;const i=o.TheoRect,s=o.Matrix2D;return function(e){(e=e||{}).tag="canvas";var t=new a(e),l=t.el.getContext("2d"),c=t.update,d=[];function p(){l.clearRect(0,0,t.el.width,t.el.height)}return t.setCoreWrapper=function(e){r=e},t.update=function(e){c(e);var a=!1;void 0!==(e=e||{}).alignmentLines&&(d=e.alignmentLines,a=!0),a&&function(){if(!t.isHidden()&&(t.el.width=t.el.clientWidth,t.el.height=t.el.clientHeight,d.length>0)){var e=Math.round(o.AlignmentLine.LINE_WEIGHT/1),a=Math.round(o.AlignmentLine.DASH_WIDTH/1),c=Math.round(o.AlignmentLine.DASH_GAP_WIDTH/1),p=Math.round(5),u=Math.round(24);const t="Safari"==n.name?1.5:1,P="Safari"==n.name?1:.5;for(var g=0,h=null,m=d.length-1;m>=0;m--){var f=d[m].line;const n=r?r.getViewToDocMatrix().inverse:s.Identity;if(f.p1=n.transformPoint(f.p1),f.p2=n.transformPoint(f.p2),f.p1.x=Math.max(Math.round(f.p1.x)-.5,P),f.p1.y=Math.max(Math.round(f.p1.y)-.5,P),f.p2.x=Math.max(Math.round(f.p2.x)-.5,P),f.p2.y=Math.max(Math.round(f.p2.y)-.5,P),l.lineWidth=e,d[m].lineStyle==o.LineStyle.Dashed){l.setLineDash([a,c]);const e=i.fromXYXY(0,0,1e3,1e3).evalXY(.5,.5),t=f.locate(e),n=f.projectedPoint(e),r=a+c,s=o.MathUtils.VectorNorm(n.subtract(f.p1))%r;l.lineDashOffset=t<0?s:r-s}else l.setLineDash([]);var b=d[m].color,v="rgba("+255*b.red+","+255*b.green+","+255*b.blue+","+b.alpha+")";l.strokeStyle=v,d[m].type==o.AlignmentType.Rotation?(l.lineWidth=e*t,f=f.extendRayByFixedLength(u),1==++g&&(h=f)):(f.p1.x==f.p2.x||f.p1.y==f.p1.y?l.lineWidth=e*t:l.lineWidth=e*t*1.5,f=f.extendByFixedLength(u)),l.beginPath(),l.moveTo(f.p1.x,f.p1.y),l.lineTo(f.p2.x,f.p2.y),l.stroke(),2==g&&(g=0,l.setLineDash([]),l.beginPath(),l.fillStyle=v,l.arc(h.p1.x,h.p1.y,p,0,2*Math.acos(-1),!0),l.stroke(),l.fill(),h=null)}}}()},t.el.width=1e3,t.el.height=1e3,t.el.className+=" post-snap-lines",t.events.subscribe("hidden",p),t}}.apply(t,o))||(e.exports=n)},z4rR:function(e,t,a){var o,n;o=[a("YLtl"),a("UFvF"),a("PuTt"),a("rjtT"),a("CpDs"),a("dO52"),a("Lo4C"),a("pEL3"),a("TW0n"),a("3xm6"),a("bBG2"),a("8DU0"),a("GSfz"),a("Na8G")],void 0===(n=function(e,t,a,o,n,r,i,s,l,c,d,p,u,g){const h=d.default,m=n.default,f=p.default;return function(a){(a=a||{}).onClick=V;const n=new l(a),d=n.update,p=n.show,b={},v="ACTIVE",P="FREE",S="FREE_ACTIVE",w="INACTIVE",y="UNBRANDED",x="brand-sharemenu-switch",C="brand-sharemenu-invite";let k,E,T,B=!1,A=!1;const I=u.keys.POST_BRAND_INDICATOR_COACHMARK_DISMISSED,M=u.keys.POST_BRAND_SHARING_COACHMARK_DISMISSED;let L=a.collaborationStatus,D=a.getAllSharedBrands,F=a.isEntitled,O=a.navigateToCreateBrandMethod||function(){return t.resolve()};const R=a.inviteToBrand||function(){return t.resolve()};function N(e){return e===x?V():e===C?F?R(T,"post-editor"):g.showMerchMessagingModal({workflow:"brandInviteFromPostEditor",asset:{}}):void 0}function z(){b.brandSwitcher.hide()}function _(){return E&&E.showBrandInUI||"INCOMING"!==L?F?E&&E.activated?v:w:E&&E.activated?S:P:y}function W(){switch(k){case v:return function(){const t=e.filter(E.colors,"isBaseColor")[0].hex;if("OUTGOING"!==L&&"INCOMING"!==L)return`<div class="post-brand-indicator-section post-active-user-brand-indicator brand-indicator-light" style="border-top: 4px solid ${t};">\n                  <div class="advanced-overlay"></div>\n                  <span class="post-active-brand-indicator-label">${E.name}</span>\n                </div>`;return`<div class="post-brand-indicator-section post-active-user-brand-indicator brand-indicator-light" style="border-top: 4px solid ${t};">\n                <div class="advanced-overlay"></div>\n                <span class="post-active-brand-indicator-label">${E.name}</span>\n              </div>`}();case P:return G();case S:return'<div class="post-brand-indicator-section post-free-user-active-brand-indicator">\n                <div class="basic-overlay"></div>\n                <div id="PostBrandIndicatorPremiumBadge" class="post-brand-indicator-premium-badge post-button post-icon-button">\n                  <i></i>\n                </div>\n                <span data-i18n="app.kBrandIndicatorUnlockBrandLabel" class="post-free-brand-indicator-label"></span>\n              </div>';case w:return'<div class="post-brand-indicator-section post-inactive-user-brand-indicator">\n                <div class="basic-overlay"></div>\n                <div id="PostBrandIndicatorPremiumBadge" class="post-brand-indicator-premium-badge post-button post-icon-button">\n                  <i></i>\n                </div>\n                <span data-i18n="app.kBrandIndicatorDefaultLabel" class="post-inactive-brand-indicator-label"></span>\n              </div>';case y:return'<div class="post-brand-indicator-section post-unbranded-user-brand-indicator">\n                <div class="basic-overlay"></div>\n                <span data-i18n="app.kBrandIndicatorUnbrandedLabel" class="post-unbranded-brand-indicator-label"></span>\n              </div>';default:return G()}}function G(){return'<div class="post-brand-indicator-section post-free-user-brand-indicator">\n                <div class="basic-overlay"></div>\n                <div id="PostBrandIndicatorPremiumBadge" class="post-brand-indicator-premium-badge post-button post-icon-button">\n                  <i></i>\n                </div>\n                <span data-i18n="app.kBrandIndicatorDefaultLabel" class="post-free-brand-indicator-label"></span>\n              </div>'}function V(){switch(k){case v:case S:return U();case P:case w:return j();case y:return o.showAlert(c.translate("dialogs.unbrandedSharedProjectAlert.kHeaderText"),c.translate("dialogs.unbrandedSharedProjectAlert.kContentText"),{okText:c.translate("dialogs.unbrandedSharedProjectAlert.kButtonLabel")}),t.resolve();default:return j()}}function U(){return h.publish("editor:brandSwitchPressed",{sparkFormat:"post"}),t.resolve().then(()=>b.coach&&!B?f.setSetting(I,!0).then(()=>b.coach.hide()):b.brandSharingCoachmark&&!A?f.setSetting(M,!0).then(()=>b.brandSharingCoachmark.hide()):t.resolve()).then(()=>{b.brandSwitcher.show(T,L)})}function j(){return h.publish("editor:addBrandPressed",{sparkFormat:"post"}),O()}function H(){return A?t.resolve():D().then(function(e){if(0!==e.length&&"NONE"===L&&(k===v||k===S))return f.getSetting(M).then(e=>e?(A=!0,t.resolve()):(b.brandSharingCoachmark||(b.brandSharingCoachmark=new s({anchorElement:n,id:"BrandSharingIndicatorCoachmark",message:"i18n.components.coachmarks.brandSharingIndicator.kMessage",title:"i18n.components.coachmarks.brandSharingIndicator.kTitle",right:"364px",parent:n.parent,priority:1,userSettingFlag:M,width:250})),b.brandSharingCoachmark.show()))}.bind(this))}function Z(){if(!n.isHidden()&&($(".post-brand-name-tooltip").remove(),$(".post-brand-switch-icon-tooltip").remove(),k===v)){const e=$(".post-active-brand-indicator-label");e&&e[0]&&e.outerWidth()<e[0].scrollWidth&&(b.brandNameTooltip=new i({class:"post-brand-name-tooltip",hoverEl:e,hoverLabelPosition:"above",left:parseInt(e.css("padding-left"))+e.width()/2,message:E.name,parent:n,width:"auto"}),b.brandNameTooltip.$el.height()>66&&b.brandNameTooltip.update({message:E.name,width:400}),b.brandNameTooltip.update({message:E.name,top:-b.brandNameTooltip.$el.height()}))}}return n.click=function(){return V()},n.update=function(e){return e&&(L=e.collaborationStatus||L,F=e.isEntitled||F,O=e.navigateToCreateBrandMethod||O,D=e.getAllSharedBrands||D),d({template:W()}),Z(),(k===v?f.getSetting(I).then(e=>e?(B=!0,t.resolve()):(b.coach||(b.coach=new s({anchorElement:n,closeButtonType:"icon",hidden:!0,id:"BrandIndicatorCoachmark",message:"i18n.components.coachmarks.brandIndicator.kMessage",offsetX:-15,offsetY:7,parent:n.parent,priority:9,userSettingFlag:I,variant:"alternative",width:250})),b.coach.show())):t.resolve()).then(H)},n.setBrand=function(e,t){return E=e||{},T=t,k=_(),n.update()},n.show=function(e){p(e),Z()},n.$el.addClass("post-brand-indicator"),k=_(),b.brandSwitcher=new m,b.brandMenu=new r({parent:n.parent,id:"PostBrandShareMenu",menutitle:" ",tooltipMessage:c.translate("app.brandShareMenu.kMenuTooltip"),onClick:N,icon:"/theo-web/images/modules/component/icons/more-options.svg",menuitems:[{icon:"/theo-web/images/modules/component/button/icons/switch_dark.svg",menuItemText:c.translate("app.brandShareMenuItems.brandSwitch.kMenuItemText"),tooltipMessage:c.translate("app.brandShareMenuItems.brandSwitch.kMenuItemTooltip"),id:x},{icon:"/marvel-core/images/share/sp-editor-invite.svg",menuItemText:c.translate("app.brandShareMenuItems.brandInvite.kMenuItemText"),tooltipMessage:c.translate("app.brandShareMenuItems.brandInvite.kMenuItemTooltip"),id:C}]}),n.republish(b.brandSwitcher.events,"switch-brand"),n.events.subscribe("brand-switch-complete",z),n}}.apply(t,o))||(e.exports=n)},zTjw:function(e,t,a){var o,n;o=[a("bBG2"),a("chD/"),a("pLKT")],void 0===(n=function(e,t,a){const o=e.default;var n={BrandGeneration:"post:brandGeneration",NewProjectPage:"post:newProject",EditorPage:"post:editor",SharePage:"publish:share"},r=t&&"function"==typeof t.trackEvent;function i(e,a,o){var i=s[e]||{};if(r){var l=(a=a||{}).pageName||i.page||n.EditorPage;o==n.EditorPage&&(a.contextData=["projectId","workflow","contextString","remixableAssetId"]),t.trackEvent(e,a,l)}}var s={newProjectWorkflowLoaded:{page:n.NewProjectPage},projectCancelled:{page:n.NewProjectPage},"sfs:imageDeleted":{page:n.NewProjectPage},"sfs:localDragAndDropImageAdded":{page:n.NewProjectPage},"sfs:localUploadImageAdded":{page:n.NewProjectPage},"sfs:freeImageAdded":{page:n.NewProjectPage},"sfs:freeAndLocalImageAdded":{page:n.NewProjectPage},"sfs:closeButtonClicked":{page:n.NewProjectPage},"sfs:backButtonClicked":{page:n.NewProjectPage},"sfs:canvasSizeSelected":{page:n.NewProjectPage},"sfs:imageSelectionFinished":{page:n.NewProjectPage},"sfs:searchFieldUsed":{page:n.NewProjectPage},"sfs:imagePageShown":{page:n.NewProjectPage},"sfs:sizeCategorySelected":{page:n.NewProjectPage},"sfs:sizePageShown":{page:n.NewProjectPage},projectCreated:{page:n.EditorPage,handler:{processProjectCreatedEvent:function(e,o,n){t.setCurrentProjectId(o.projectId),delete o.projectId,i(e,o,n),a.trackEvent("AddToCart",{content_name:"Project Created"})}}.processProjectCreatedEvent},createdBrandedProject:{page:n.EditorPage},editedTemplate:{page:n.EditorPage},createdTemplateFromTemplate:{page:n.EditorPage},createdProjectFromTemplate:{page:n.EditorPage},paidProjectStartBranded:{page:n.EditorPage},paidProjectStartUnbranded:{page:n.EditorPage},saveDocumentEnd:{page:n.EditorPage},saveDocumentBegin:{page:n.EditorPage},renameDocumentClicked:{page:n.EditorPage},renameDocument:{page:n.EditorPage},renameDocumentCancelled:{page:n.EditorPage},"editor:layoutPressed":{page:n.EditorPage},"editor:designFilterPressed":{page:n.EditorPage},"editor:colorPressed":{page:n.EditorPage},"editor:typePressed":{page:n.EditorPage},"editor:photoAdded":{page:n.EditorPage},"editor:textSelected":{page:n.EditorPage},"editor:textLayoutSelected":{page:n.EditorPage},"editor:backgroundsPressed":{page:n.EditorPage},"editor:designAssetsPressed":{page:n.EditorPage},"editor:iconsPressed":{page:n.EditorPage},"editor:librariesPressed":{page:n.EditorPage},"editor:logosPressed":{page:n.EditorPage},"editor:photosPressed":{page:n.EditorPage},"editor:templatesPressed":{page:n.EditorPage},"editor:textPressed":{page:n.EditorPage},"search:keywordEntered":{page:n.EditorPage},"editor:morePressed":{page:n.EditorPage},"backgroundSidebarDisplayed:image":{page:n.EditorPage},"backgroundSidebarDisplayed:color":{page:n.EditorPage},"backgroundSidebarDisplayed:looks":{page:n.EditorPage},"textSidebarDisplayed:type":{page:n.EditorPage},"textSidebarDisplayed:color":{page:n.EditorPage},"textSidebarDisplayed:shape":{page:n.EditorPage},"textSidebarDisplayed:style":{page:n.EditorPage},"textSidebarDisplayed:effects":{page:n.EditorPage},"editor:iconSelected":{page:n.EditorPage},"editor:iconAdded":{page:n.EditorPage},"editor:icon:opacityValueChanged":{page:n.EditorPage},textMatchSizeButtonPressed:{page:n.EditorPage},"editor:text:letterSpacingValueChanged":{page:n.EditorPage},"editor:text:lineSpacingValueChanged":{page:n.EditorPage},"editor:text:opacityValueChanged":{page:n.EditorPage},"editor:text:shapeEnabled":{page:n.EditorPage},"editor:text:shapeDisabled":{page:n.EditorPage},"editor:text:shapeMaskEnabled":{page:n.EditorPage},"editor:text:shapeMaskDisabled":{page:n.EditorPage},"editor:text:outlineOnlyEnabled":{page:n.EditorPage},"editor:text:outlineThicknessValueChanged":{page:n.EditorPage},paletteSelected:{page:n.EditorPage},"editor:image:filtersApplied":{page:n.EditorPage},"editor:image:filtersShuffled":{page:n.EditorPage},"editor:layerReordered":{page:n.EditorPage},"editor:layerWidgetOpened":{page:n.EditorPage},"editor:layerWidgetCancelled":{page:n.EditorPage},"editor:layerWidgetScrollButtonClick":{page:n.EditorPage},backgroundColorSelected:{page:n.EditorPage},layoutSelected:{page:n.EditorPage},canvasSizeSelected:{page:n.EditorPage},designVariationSelected:{page:n.EditorPage},themeCancelled:{page:n.EditorPage},"editor:text:shapeSelected":{page:n.EditorPage},wheelConfirmed:{page:n.EditorPage},textStylesServiceUsed:{page:n.EditorPage},textEmphasisServiceUsed:{page:n.EditorPage},styleEvaluatorUsed:{page:n.EditorPage},launchedFontPicker:{page:n.EditorPage},compositeFrameRate:{page:n.EditorPage},"editor:logoSelected":{page:n.EditorPage},uploadNewLogoSelected:{page:n.EditorPage},brandKitLogoApplied:{page:n.EditorPage},"editor:logoAdded":{page:n.EditorPage},"editor:logoReplacePressed":{page:n.EditorPage},"editor:brandifyPressed":{page:n.EditorPage},brandifyApplied:{page:n.EditorPage},colorPickerDisplayed:{page:n.EditorPage},colorPickerCancelled:{page:n.EditorPage},colorPickerConfirmed:{page:n.EditorPage},eyeDropperSelected:{page:n.EditorPage},"editor:resizePressed":{page:n.EditorPage},resizeAndGrid:{page:n.EditorPage},resizeOnly:{page:n.EditorPage},gridOnly:{page:n.EditorPage},customSizeSet:{page:n.EditorPage},customSizeCancelled:{page:n.EditorPage},customSizeSetNpw:{page:n.NewProjectPage},customSizeCancelledNpw:{page:n.NewProjectPage},"editor:text:multiStyleSelected":{page:n.EditorPage},downloadButtonPressed:{page:n.EditorPage},"downloadImgButtonPressed:png":{page:n.EditorPage},"downloadImgButtonPressed:jpg":{page:n.EditorPage},downloadPDFButtonPressed:{page:n.EditorPage},downloadMP4_720pButtonPressed:{page:n.EditorPage},downloadMP4_1080pButtonPressed:{page:n.EditorPage},shareButtonPressed:{page:n.EditorPage},solidBackgroundButtonPressed:{page:n.EditorPage},transparentBackgroundButtonPressed:{page:n.EditorPage},backgroundCancelButtonPressed:{page:n.EditorPage},addImageAsBackgroundButtonPressed:{page:n.EditorPage},addImageMoveFreelyButtonPressed:{page:n.EditorPage},"editor:textCustomAdded":{page:n.EditorPage},"editor:textEditCompleted":{page:n.EditorPage},missingFontsWhenOpenCancelButtonPressed:{page:n.EditorPage},missingFontsWhenOpenReplaceButtonPressed:{page:n.EditorPage},typekitFontDeactivated:{page:n.EditorPage},pickedFontIsNotAvailable:{page:n.EditorPage},templateMenuDisplayed:{page:n.EditorPage},"Sharing Action":{page:n.SharePage},shareMetadata:{page:n.EditorPage},exportFontUsage:{page:n.EditorPage},lockupStyleCaptured:{page:n.EditorPage},lockupEmphasisCaptured:{page:n.EditorPage},"editor:watermarkPressed":{page:n.EditorPage},"editor:watermarkRemoved":{page:n.EditorPage},"editor:watermarkRemoveCancelled":{page:n.EditorPage},payToRemoveWatermarkVariantAssignment:{page:n.EditorPage},removeOnceVariantAssignment:{page:n.EditorPage},"editor:text:fontSizePickerPressed":{page:n.EditorPage},"editor:fontSizeTyped":{page:n.EditorPage},"editor:image:cropCancelled":{page:n.EditorPage},"editor:image:pinToBackgroundDisabled":{page:n.EditorPage},"editor:image:pinToBackgroundEnabled":{page:n.EditorPage},"editImage:cropCompleted":{page:n.EditorPage},"editImage:cropShapeSelected":{page:n.EditorPage},"editImage:cropRatioSelected":{page:n.EditorPage},"editImage:cropImageAdjusted":{page:n.EditorPage},"editor:backgroundRemovePressed":{page:n.EditorPage},"editor:image:editCutoutPressed":{page:n.EditorPage},"editor:image:cutoutAutoPressed":{page:n.EditorPage},"editor:image:cutoutShowImageToggled":{page:n.EditorPage},"editor:image:cutoutErasePressed":{page:n.EditorPage},"editor:image:cutoutRestorePressed":{page:n.EditorPage},"editor:image:cutoutBrushSizeAdjusted":{page:n.EditorPage},"editor:image:cutoutInvertPressed":{page:n.EditorPage},"editor:image:cutoutResetPressed":{page:n.EditorPage},"editor:image:cutoutBrushApplied":{page:n.EditorPage},"editor:image:cutoutCompleted":{page:n.EditorPage},"editor:image:cutoutCancelled":{page:n.EditorPage},"imageAdjust:PanelShown":{page:n.EditorPage},"editor:image:enhancementsContrastValueChanged":{page:n.EditorPage},"editor:image:enhancementsBrightnessValueChanged":{page:n.EditorPage},"editor:image:enhancementsSaturationValueChanged":{page:n.EditorPage},"editor:image:enhancementsHighlightValueChanged":{page:n.EditorPage},"editor:image:enhancementsShadowValueChanged":{page:n.EditorPage},"editor:image:enhancementsWarmthValueChanged":{page:n.EditorPage},"editor:image:enhancementsSharpenValueChanged":{page:n.EditorPage},"editor:image:enhancementsReset":{page:n.EditorPage},"editor:image:blurValueChanged":{page:n.EditorPage},webGLAvailable:{page:n.EditorPage},webGLUnavailable:{page:n.EditorPage},postWebGLQuestionnaire:{page:n.EditorPage},"brandkit:add_branded_element":{page:n.EditorPage},"multiselect:clickOccured":{page:n.EditorPage},"core:formaeAligned":{page:n.EditorPage},"core:formaeDistributed":{page:n.EditorPage},"core:formaeArranged":{page:n.EditorPage},"core:formaeDragged":{page:n.EditorPage},usedBrandKitPalette:{page:n.EditorPage},usedBrandKitBGColor:{page:n.EditorPage},usedBrandKitFontColor:{page:n.EditorPage},usedBrandKitFont:{page:n.EditorPage},usedCustomFont:{page:n.EditorPage},undoApplied:{page:n.EditorPage},redoApplied:{page:n.EditorPage},"post:editorStartupEnd":{page:n.EditorPage},"post:imageLoadAttempt":{page:n.EditorPage},"post:saveCCStorageAttempt":{page:n.EditorPage},"post:templateGenerationEnd":{page:n.BrandGeneration},"post:posterInitialRenderEnd":{page:n.EditorPage},"post:fontsLoadEnd":{page:n.EditorPage},"post:designVariationEnd":{page:n.EditorPage},"post:singleTemplateGenerated":{page:n.BrandGeneration},"post:getTemplateGenerationInstructions":{page:n.BrandGeneration},"designIngredient:textEdited":{page:n.EditorPage},"editor:textLockupAdded":{page:n.EditorPage},"editor:assetAdded":{page:n.EditorPage},"project:editorDisplayed":{page:n.EditorPage},"project:exportCompletedDNA":{page:n.EditorPage},"editor:brandSwitchPressed":{page:n.EditorPage},"editor:newBrandApplied":{page:n.EditorPage},"editor:addBrandPressed":{page:n.EditorPage},"editor:brandSwitchError":{page:n.EditorPage},"editor:multiselectSelected":{page:n.EditorPage},"editor:multiselect:verticalAlignmentSelected":{page:n.EditorPage},"editor:multiselect:horizontalAlignmentSelected":{page:n.EditorPage},"editor:groupSelected":{page:n.EditorPage},"editor:group:ungroupPressed":{page:n.EditorPage},"editor:group:opacityValueChanged":{page:n.EditorPage},"editor:image:opacityValueChanged":{page:n.EditorPage},"editor:image:backgroundRotateValueChanged":{page:n.EditorPage},"editor:image:backgroundScaleValueChanged":{page:n.EditorPage},"editor:image:verticalFlipPressed":{page:n.EditorPage},"editor:image:horizontalFlipPressed":{page:n.EditorPage},"actionBar:editPressed":{page:n.EditorPage},"actionBar:duplicatePressed":{page:n.EditorPage},"actionBar:layerOrderPressed":{page:n.EditorPage},"actionBar:deletePressed":{page:n.EditorPage},"actionBar:replacePressed":{page:n.EditorPage},"actionBar:infoPressed":{page:n.EditorPage},"actionBar:groupPressed":{page:n.EditorPage},"actionBar:ungroupPressed":{page:n.EditorPage},"project:spTemplatePressed":{page:n.EditorPage},"project:spTemplateExported":{page:n.EditorPage},"project:contentTermsAdded":{page:n.EditorPage},keyboardShortcut:{page:n.EditorPage},tutorialPlayed:{page:n.EditorPage},tutorialCtaPressed:{page:n.EditorPage}};o.subscribe("LOG_ANALYTIC",(function(e){var t=e.event,a=e.data||{};a.sparkFormat="post";var o=s[t]||{page:n.EditorPage};(o.handler||i)(t,a,o.page)}))}.apply(t,o))||(e.exports=n)}}]);
//# sourceMappingURL=theo-web-view_5bb30e85-d8c8517d.js.map