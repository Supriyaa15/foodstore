(window.webpackJsonp=window.webpackJsonp||[]).push([["brand-kit-controller",3,"brand-kit-chooser-view~m-storage","authoring-context",12],{1050:function(e,t,n){var i;i=function(e){"use strict";var t,n=(t=document.createElement("canvas").getContext("2d"),(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),i=function(e,t,i){i||(i=n);var r=document.createElement("canvas");return r.width=e*i,r.height=t*i,r.style.width=e+"px",r.style.height=t+"px",r.getContext("2d").setTransform(i,0,0,i,0,0),r},r=function(t,n){var i=e("<span>"+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>").css({font:n,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),r=i.width();return i.remove(),r},o=function(e,t,n){var o=n.size||24,a=n.weight||"400",s=n.style||"normal",l=n.lineHeight||1.5,c=n.padding||0,u=n.color||"#35414C",d=s+" "+a+" "+o+"px "+e,h=s+" "+a+" 8px "+e,p=8*l,f=r(t,h),g=i(f,p,0),m=g.getContext("2d");g.height=p,g.width=f,m.font=h,m.fillStyle=u,m.textBaseline="middle",m.fillText(t,0,p/2),m.fillRect(0,0,10,10);for(var v=m.getImageData(0,0,f,p).data,y=0,b=0,w=v.length/2,C=!1,M=0,x=v.length;M<x;)v[M],v[M+1],v[M+2],0!=v[M+3]&&y++,(M+=4)>=w&&!C&&(C=!0,b=y,y=0);var L=b/y,k=o*l+2*c,S=r(t,d)+2*c,T=k/2;return L>1.8&&L<2?T+=.1*o:L>=2&&(T+=.18*o),m=(g=i(S,k)).getContext("2d"),g.height=k,g.width=S,m.font=d,m.fillStyle=u,m.textBaseline="middle",m.fillText(t,c,T),g.whiteSpaceRatio=L,g};return{generateCanvas:o,generateDataURL:function(){var e=o.apply(this,arguments);return e.toDataURL()}}},e.exports=i(n(7))},1051:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(962),n(391),n(820),n(166),n(1052)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l=["headline-font","body-font","body-font-bold","body-font-italic","body-font-bold-italic"];return i.extend({type:"font",valueProp:"font#data",isDefn:function(){return!1},getHrefAsync:function(e,t){return this._ac._hrefForCustomFontAsync(this.getData(),e)},getFileAsBlob:function(e,t){var i=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&i.resolve(this.response)},t.onerror=function(e){i.reject(e)},t.open("GET",e),t.responseType="blob",t.send()}.bind(this)).catch((function(e){i.reject(e)})).done(),i.promise},getRenditionHrefAsync:function(e,t,n){var i="face-rendition";return t?i="family-rendition":n&&(i="rendition"),this._ac._hrefForCustomFontRenditionAsync(this.getData(),i).then(function(t){return e&&t&&(t=t.indexOf("/assets/")>0?t.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+\/(.*)$/,"$1"):t.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/(.*)$/,"$1")),t}.bind(this))},friendlyName:function(e){var t;if(this.isSparkFont()){var n=s.faces[this.lookupKey()];t=n.subgroupName+" "+n.name}else t=this._data.getValue("name")||"Undefined";return e?-1!=t.search(/^clarendon/i)||-1!=t.search(/^raleway/i)||-1!=t.search(/^wanderlust/i)?t.split(" ")[0]:t.split(" ").slice(0,2).join(" "):t},setUniqueBodyFontRole:function(e){this._ac.getCustomFontSubgroup(this.subgroupName()).each((function(t){t.removeRole(e)})),this.addRole(e)},subgroupName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].subgroupName:this.getValueProp("subgroupName")},faceName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].name:this.getValueProp("faceName")},setFontFromDefn:function(e,t,n){n=n||this.getData(),t=t||this.getValue(),"tk-synced"==e._fontData.source?(t.source=e.source(),t.lookupKey=e.lookupKey(),t.subgroupName=e.subgroupName(),t.cssName=e.cssName(),t.weight=e.fontWeight(),t.style=e.fontStyle(),t.tkPreviewId=e.tkPreviewId(),t.tkVariation=e.tkVariation(),t.tkSubgroupKitId=e.tkSubgroupKitId(),n.setValue("name",e.friendlyName())):(t.source=e.source(),t.lookupKey=e.lookupKey())},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},createFont:function(e,t){var n=this._ac.composite.acquireNestedMapSync("all-fonts"),i=this._ac.composite.addChildPath(void 0,void 0,n),r={};return i.setValue("type","application/vnd.adobe.element.custom-font+dcx"),i.setValue("ac#application","spark-web"),i.setValue("ac#roles",t),this.setFontFromDefn(e,r,i),this._data=i,i.setValue("font#data",r),i.setValue(this.valueProp,r),i},createFromElement:function(e,t){var n=e.getValue(this.valueProp).lookupKey,i=new r;i.setFontDataFromSparkFontDefn(t.facesByKey[n]),this._data=this.createFont(i,e.getValue("ac#roles"))},source:function(){return this.getValueProp("source")},isCustomFont:function(){return"user-uploaded"==this.source()},isSparkFont:function(){return"spark-provided"==this.source()},isFauxFont:function(){return"faux-font"==this.source()},isBodyFont:function(){return this.hasAnyRole(["body-font-italic","body-font-bold-italic","is-body-font-italic","is-body-font-bold-italic","body-font","body-font-bold","is-body-font","is-body-font-bold"])},getMetricsAsync:function(){return this.isCustomFont()?n.resolve(this.getMetrics()):this.getMetricsFromRegistry()},getMetrics:function(){return this.getValueProp("metrics")},getMetricsFromRegistry:function(){return a.getFontRegistry().then(function(e){return e.facesByKey[this.lookupKey()].face.metrics}.bind(this))},lookupKey:function(){return this.isCustomFont()&&this._data?"custom-"+this._data.path:this.getValueProp("lookupKey")},uiKey:function(){return"custom-"+this.getId()},tkPreviewId:function(){var e=this.getValueProp("tkPreviewId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitPreviewId}return e},tkVariation:function(){var e=this.getValueProp("tkVariation");!e&&this.isSparkFont()&&(e=s.faces[this.lookupKey()].typekitKey);return e},tkSubgroupKitId:function(){var e=this.getValueProp("tkSubgroupKitId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitSubgroupKitId}return e},cssName:function(){if(this.isSparkFont()){var e=s.faces[this.lookupKey()];return s.subgroups[e.subgroupName].cssName}return this.getValueProp("cssName")||'"'+this.friendlyName()+'"'},cssNameForPreview:function(){var e=this.cssName();return"tk-synced"===this.source()&&(e=this.tkPreviewId()),e},fontStyle:function(){if(this.isSparkFont()){if(!this.getValueProp("fontStyle")){return{n:"normal",i:"italic"}[this.tkVariation().split("")[0]]}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font-italic")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-italic")||this.hasRole("is-body-font-bold-italic"))return"italic";if(this.hasRole("body-font")||this.hasRole("body-font-bold")||this.hasRole("is-body-font")||this.hasRole("is-body-font-bold"))return"normal";var e=this.getMetrics();if(e&&e.style)return e.style}return this.getValueProp("fontStyle","normal")},fontWeight:function(){if(this.isSparkFont()){if(!this.getValueProp("fontWeight")){var e=this.tkVariation().split(""),t=parseInt(e[1]);return t<1&&(t=1),t>9&&(t=9),100*t}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font")||this.hasRole("body-font-italic")||this.hasRole("is-body-font")||this.hasRole("is-body-font-italic"))return 400;if(this.hasRole("body-font-bold")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-bold")||this.hasRole("is-body-font-bold-italic"))return 700;var n=this.getMetrics();if(n&&n.weight)return n.weight}return this.getValueProp("fontWeight","normal")},getCSSFontFaceAsync:function(e,t){var n=this.cssName();return n||(n=this.friendlyName().toLowerCase()),this.getHrefAsync().then(function(i){return(t=t||i)?(e&&(t=t.indexOf("/assets/")>0?t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/[^\/]*\/(.*)$/,"$1"):t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/(.*)$/,"$1")),"@font-face { font-family: "+n+";font-weight:"+this.fontWeight()+";font-style:"+this.fontStyle()+';src: url("'+t+'"); }'):void 0}.bind(this))},loadFont:function(){var e=this.source();return"user-uploaded"==e?o.loadFont(this,this._ac):"spark-provided"==e?o.loadFont(this.lookupKey(),this._ac):n.resolve()},$loadFontCSS:function(e,n,i,r){var o=!1;n=n||18,t.delay((function(){o||e.addClass("font-loading")}),50),this.loadFont().finally(function(){o=!0;var t=a.getFontNormalized(n,this.getMetrics());e.css("font-size",t.size+"px"),i&&e.css("line-height",1.94*n+t.vshift+"px"),r&&e.css("height",1.94*n+t.vshift+"px"),this.$css(e,",adobe-clean,sans-serif"),e.removeClass("font-loading")}.bind(this)).done()},$cssRendition:function(e,t,n,i){r.prototype.$cssRendition.call(this,e,t,n,i)},$css:function(t,n){var i=this.cssName();n=n||"","tk-synced"!==this.source()&&"spark-provided"!==this.source()||(i=i||this.tkPreviewId()),(t=e(t)).css({"font-family":i+n,"font-style":this.fontStyle(),"font-weight":this.fontWeight()})},createOrUpdateFontFiles:function(e){return this._ac.createOrUpdateFontFiles(this.getData(),e)},generateRenditions:function(){return this._ac.generateFontRenditions(this)},getUniqueRole:function(){return this.getUniqueRoles()[0]},getUniqueRoles:function(){var e=this.getRoles();return t.intersection(e,l)},getTOUAName:function(){return this.subgroupName()+" "+this.faceName()},isInstallable:function(){var e=this.getMetrics().fsType,t=this.getTOUAName();try{var n=Number.parseInt(e),i=15&n;if(0===i)return window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+n+"  licenseType=0 so no upload is required"),!0;window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+i+" so font upload is required for "+t)}catch(r){window.marvel.logger.warn("BrandKitWrapper failed verifying font license",r)}return!1}})}.apply(t,i))||(e.exports=r)},1052:function(e){e.exports=JSON.parse('{"subgroups":{"Acumin Pro Semi Condensed":{"subgroupName":"Acumin Pro Semi Condensed","cssName":"acumin-pro-semi-condensed","typekitPreviewId":"zhgz","typekitSubgroupKitId":"oed0yfm","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"}]},"Adobe Caslon Pro":{"subgroupName":"Adobe Caslon Pro","cssName":"adobe-caslon-pro","typekitPreviewId":"hmqz","typekitSubgroupKitId":"qhv3iqj","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"}]},"Azo Sans":{"subgroupName":"Azo Sans","cssName":"azo-sans-web","typekitPreviewId":"lyqy","typekitSubgroupKitId":"ppn2tqp","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"}]},"Bellfort Script":{"subgroupName":"Bellfort Script","cssName":"spark-bellfort-script","typekitPreviewId":false,"typekitSubgroupKitId":"vpr2ezi","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"}]},"Calluna":{"subgroupName":"Calluna","cssName":"calluna","typekitPreviewId":"vybr","typekitSubgroupKitId":"pwy8yyx","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"}]},"Clarendon Text Pro":{"subgroupName":"Clarendon Text Pro","cssName":"clarendon-text-pro","typekitPreviewId":"kctd","typekitSubgroupKitId":"tes3lrh","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"}]},"Courier Std":{"subgroupName":"Courier Std","cssName":"courier-std","typekitPreviewId":"jxcp","typekitSubgroupKitId":"oeu5sen","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"}]},"Didot Headline":{"subgroupName":"Didot Headline","cssName":"spark-didot-headline","typekitPreviewId":false,"typekitSubgroupKitId":"gkw8jcv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"}]},"Futura PT":{"subgroupName":"Futura PT","cssName":"futura-pt","typekitPreviewId":"ftnk","typekitSubgroupKitId":"icc1sfj","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"}]},"Lato":{"subgroupName":"Lato","cssName":"lato","typekitPreviewId":"jxfv","typekitSubgroupKitId":"oea2wtv","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"}]},"Local Brewery":{"subgroupName":"Local Brewery","cssName":"spark-local-brewery","typekitPreviewId":false,"typekitSubgroupKitId":"vfd3hup","paragraphRecommended":false,"faces":[{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"}]},"Local Brewery Four":{"subgroupName":"Local Brewery Four","cssName":"spark-local-brewery-four","typekitPreviewId":false,"typekitSubgroupKitId":"txs8zsv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"}]},"LTC Bodoni 175":{"subgroupName":"LTC Bodoni 175","cssName":"ltc-bodoni-175","typekitPreviewId":"mrnw","typekitSubgroupKitId":"meq2xke","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"}]},"Museo Sans Rounded":{"subgroupName":"Museo Sans Rounded","cssName":"museo-sans-rounded","typekitPreviewId":"dtgx","typekitSubgroupKitId":"iuk5brd","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"}]},"Museo Slab":{"subgroupName":"Museo Slab","cssName":"museo-slab","typekitPreviewId":"llxb","typekitSubgroupKitId":"gom8xuo","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"}]},"Proxima Nova":{"subgroupName":"Proxima Nova","cssName":"proxima-nova","typekitPreviewId":"vcsm","typekitSubgroupKitId":"yfs6lii","paragraphRecommended":true,"faces":[{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"}]},"PT Sans":{"subgroupName":"PT Sans","cssName":"pt-sans","typekitPreviewId":"lllr","typekitSubgroupKitId":"sys1rxz","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"}]},"PT Sans Narrow":{"subgroupName":"PT Sans Narrow","cssName":"pt-sans-narrow","typekitPreviewId":"rmcr","typekitSubgroupKitId":"xfq6xbo","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"}]},"PT Serif":{"subgroupName":"PT Serif","cssName":"pt-serif","typekitPreviewId":"xcqq","typekitSubgroupKitId":"lyd0hdu","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"}]},"Voltage":{"subgroupName":"Voltage","cssName":"spark-voltage","typekitPreviewId":false,"typekitSubgroupKitId":"cjx2klj","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"}]},"Wanderlust Shine":{"subgroupName":"Wanderlust Shine","cssName":"spark-wanderlust-shine","typekitPreviewId":false,"typekitSubgroupKitId":"etu6mud","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"}]},"Raleway":{"subgroupName":"Raleway","cssName":"raleway","typekitPreviewId":"nqdy","typekitSubgroupKitId":"mce7zxv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}]}},"faces":{"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d":{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b":{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c":{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6690b5dceede":{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870":{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4":{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"},"2594dbd0127076637d65ed0afaf7":{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3":{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"},"268bd89c277e6a64707ae71ffbf308d69f4683bcc4":{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf":{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"},"278fd89c347f793d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},"278fd89c347f793d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},"278fd89c347f793d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},"278fd89c347f793d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"},"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77":{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9":{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"},"2781c18228746a30035de040c0e61b8ebf4e96":{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},"2781c18228746a30035de040d0ec109f":{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"},"2087d09f35315075314de804fce651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651bfb6428d":{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"},"229bc085337038400404c908f6ea0996":{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},"229bc085337038400404cc08f3f505":{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"},"288fc09f6c5d7177385d":{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},"288fc09f6c437d772545e51f":{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},"288fc09f6c586c713c40e7":{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},"288fc09f6c53777c34":{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},"288fc09f6c5374713342a424e6e21092b0":{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"},"2881d7912d315a62355ee11febae3e94bf4b":{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"},"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"},"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3":{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7":{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b7c314ba95ea2b3":{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3":{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b3":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3":{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ca2b34c":{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"},"349cdb88287c79301e46f20cbfd71492bd":{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467":{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5b":{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77":{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a6":{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056":{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89":{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa":{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4":{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b7":{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3":{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d":{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044":{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77":{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"},"34ba94a3207f6b3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3207f6b301e48f61ffdf451b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3246371767d7be10ae7ef1d89":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d60f00cfeea1f":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"},"3281d88420767d3d1c40e305e6":{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},"3281d88420767d3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},"3281d88420767d3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"},"338fda9424637465235da43efaea129efe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"},"368fd8953670613d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},"368fd8953670613d184ce51beb":{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}}}')},106:function(e,t,n){var i,r;i=[n(7),n(2),n(6),n(1),n(0),n(23),n(25),n(67),n(207),n(14),n(396),n(61),n(18),n(119)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u,d,h,p){"use strict";var f=h.SparkPerformanceTracker;return n.Model.extend({defaultCfg:{syncGroup:"",scope:"",newDocName:"Untitled",community:"",doctype:"",legacyName:"",displayName:""},registeredName:null,deferredLoading:null,initialize:function(){},typeName:null,getConfig:function(){},getAppTypeID:function(){return this.getSetting("scope")},isaProjectFormat:function(){return!0},getDisplayName:function(e){var t=this.getSetting("displayName");return e?c.getString("product-name")+" "+t:t},isEnabled:function(){var e=this.getSetting("enabledFlagName");return!e||o.hasFeature(e)},supportsCollaboration:function(){return!0},requiresDocumentLocking:function(e){return this.supportsCollaboration()},supportsDownload:function(){return!0},appSupportsEditorSearch:function(){return!1},supportsDirectDownload:function(){return"post"===this.typeName},supportsAsyncPublish:function(){return!1},getSetting:function(e){var t=this.getConfig()[e];return void 0===t&&(t=this.defaultCfg[e]),t},getCPCommunity:function(){return this.getConfig().community},isDocPublished:function(e){return!!this.getCPAlias(e)},generateCPProjectId:function(e){return e.get("id")},setCPProjectId:function(e,t){e.saveChanges(function(e){e.setValue("cp#projectId",t)}.bind(this))},getCPProjectId:function(e){return e.getDCXRoot().getValue("cp#projectId")},getCPAlias:function(e){return e.getDCXRoot().getValue("cp#shortId")},setCPAlias:function(e,t){return e.saveChanges((function(e){e.setValue("cp#shortId",t)}))},getCPAssetId:function(e){return e.getDCXRoot().getValue("cp#assetId")},setCPAssetId:function(e,t){return e.saveChanges((function(e){e.setValue("cp#assetId",t)}))},getDocContentETag:function(e){return console.error("ERROR: Apps must implement getDocContentETag in appImpl"),""},getPublishedContentETag:function(e){return e.getDCXRoot().getValue("cp#publishedEtag")},setPublishedContentETag:function(e,t){return e.saveChanges(function(n){n.setValue("cp#publishedEtag",t||this.getDocContentETag(e))}.bind(this))},usesContentModifiedEtags:function(){return!0},isBrowserSupported:function(){return!0},getUnsupportedBrowserMessage:function(){return""},hasContentBeenUpdatedSincePublish:function(e,t){i.defer();var n=this.getDocContentETag(e);if(n){var r=this.getPublishedContentETag(e);return!r||n!==r}return e.getContentModifiedDate({preferCpContentModified:!0})-new Date(t)>6e4},setProjectName:function(e,t){console.error("ERROR: Apps must implement setProjectName in appImpl")},getProjectName:function(e,t){return this!==e.getMyPrimaryApp()?e.getMyPrimaryApp().getProjectName(e,t):(console.error("ERROR: Apps must implement getProjectName in appImpl"),"")},checkDocCompatibility:function(e,t){return i.resolve()},getLicensableResources:function(e,n){return n=n||{},this.getImageComponentsInfoForDoc(e).then(function(e){return t.isUndefined(n.licensed)?t.filter(e,this.licensingRelevant.bind(this)):n.licensed?t.filter(e,this._isInfoComponentLicensed.bind(this)):t.filter(e,function(e){return this.licensingRelevant(e)&&this._isInfoComponentUnlicensed(e)}.bind(this))}.bind(this))},batchCheckLicenses:function(e){var t=o.hasFeature("user-flag-image-source-stock");return this.getImageComponentsInfoForDoc(e).then(function(e){var n=e.reduce(function(e,n){var i=n.data.licenseType||n.data.license&&n.data.license.type;if(i&&i.match(/^royalty_free/)){if(!t)throw new Error("User blocked from stock");if(i.match(/^royalty_free_(standard|extended)$/)){var r=n.data.assetID||n.data.license.asset_id||n.data.license.image_id;r&&e.push(r)}}return e}.bind(this),[]);return n.length>0?u.batchGetItemsInfo(n,{params:["is_licensed","id"]}):i.resolve([])}.bind(this)).then((function(e){return window.marvel.logger.traceflow("stock-license-check","batchCheckLicenses:"+JSON.stringify(e)),!e.find((function(e){return""===e.is_licensed}))})).catch((function(e){return window.marvel.logger.warn("batchCheckLicenses - caught exception:",{message:e&&e.message,stack:e&&e.stack}),!1}))},getImageMetadataForAnalytics:function(e){l.default&&(l=l.default);var n={google:0,dropbox:0,dooplo:0,facebook:0,stock:0,adobestock:0,creativeCloud:0,lightroom:0,uploaded:0,publicLibrary:0,privateLibrary:0,sharedLibrary:0,cclight:0};return this.getImageComponentsInfoForDoc(e).then(function(e){var r=!1,o=!1,a=[];return t.each(e,function(e){var t,s=e&&e.data&&(e.data.srcName||e.data.source);if(s&&(t=n[s],n[s]=t+1),this.licensingRelevant(e)&&(this._isInfoComponentLicensed(e)?o=!0:r=!0),e&&e.data&&e.data.library_id){var c,u=e.data.library_id;if(0===u.search(/^urn:/)){var d=l.getCachedLibraryById(u);c=d?i.resolve(d):l.fetchLibraryByUrn(u)}else c=i.resolve({isPublic:function(){return!0}});a.push(c)}else a.push(i.resolve(null))}.bind(this)),i.allSettled(a).then(function(e){e.forEach((function(e){if("fulfilled"===e.state){var t=e.value;t&&(t.isPublic()?n.publicLibrary+=1:t.belongsToUser()?n.privateLibrary+=1:t.isSharedWithUser()&&(n.sharedLibrary+=1))}else{var i=e.reason;window.marvel.logger.warn("[AppImpl] Failed to fetch library ",i)}}));var t=[];n.sharedLibrary>0&&t.push("shared"),n.publicLibrary>0&&t.push("public"),n.privateLibrary>0&&t.push("personal");var i=t.length>0?"cclType: ["+t.join(", ")+"]":"";return{contextualData13:"hasLicensedImages:"+o,contextualData14:"hasUnlicensedImages:"+r,contextualData15:"hasGoogleImages:"+!!n.google,contextualData16:"hasDropboxImages:"+!!n.dropbox,contextualData17:"hasDooploImages:"+!!n.dooplo,contextualData18:"hasFacebookImages:"+!!n.facebook,contextualData19:"hasStockImages:"+!(!n.stock&&!n.adobestock),contextualData20:"hasCCImages:"+!!n.creativeCloud,contextualData21:"hasLightroomImages:"+!!n.lightroom,contextualData22:"hasUploadedImages:"+!!n.uploaded,contextualData23:"hasCCLightDesignAssets:"+!!n.cclight,contextualData27:i}}.bind(this))}.bind(this))},getCollabTypeAnalytic:function(e,n,i){var r=[],o=e.getCollaboration(),a="INCOMING"===o||"OUTGOING"===o;return t.isString(n)&&n.match(/cclType:.*shared.*/)&&r.push("sharedLibrary"),t.isString(n)&&n.match(/cclType:.*personal.*/)&&r.push("personalLibrary"),t.isString(n)&&n.match(/cclType:.*public.*/)&&r.push("publicLibrary"),a?(r.push("sharedProject"),i&&r.push("sharedBranding")):i&&r.push("personalBranding"),0===r.length&&r.push("none"),"collabType: ["+r.join(", ")+"]"},licensingRelevant:function(e){return!t.isEmpty(e.data.license)&&"Adobe Stock"===e.data.license.source_name||"Adobe Stock"===e.data.srcName||"stock"===e.data.srcName},_isInfoComponentLicensed:function(e){return!(!e.data||t.isEmpty(e.data.license))&&"royalty_free"!==(t.isObject(e.data.license)?e.data.license.type:e.data.license)},_isInfoComponentUnlicensed:function(e){return!this._isInfoComponentLicensed(e)},getImageComponentsInfoForDoc:function(e){return e.getImageComponents()},lazyLoad:function(e){},load:function(){return this.deferredLoading||(this.deferredLoading=i.defer(),f.measurePromise("LoadingAppImpl:"+this.typeName,this.deferredLoading.promise),this.lazyLoad(this.deferredLoading)),this.deferredLoading.promise},loadForShare:function(e,t){},loadDesignView:function(e,n){this.load().then(function(){var i,r=this.getStorageImpl();n.showPreview?(i=new this.viewCls,e.renderSubView(i,r,n)):r.createDocument(n).then(function(t){i=new this.viewCls,e.renderSubView(i,r,n)}.bind(this),function(i){if(window.marvel.logger.warn("[AppImpl] Failed to create the document, can't init design view: ",i),"NO_COMPOSITE"!==i.code&&"NOT_COMPATIBLE"!==i.code&&"USER_CANCELED"!==i.code)e.errorState(),t.delay(function(){this.loadDesignView(e,n)}.bind(this),5e3);else{var r=c.getString("organizer-error-not-found");i.msg=i.usermsg||r,window.marvel.events.trigger("mrvl-must-reload",i)}}.bind(this))}.bind(this))},cancelEditingSession:function(e){return i.resolve()},userIsActive:function(){this._onUserActive?this._onUserActive():window.marvel.logger.traceflow("baton-timeout","appImpl.userIsActive is a no op. Project is not shared.")},beginLongUserActivity:function(){this._onBeginLongUserActivity?this._onBeginLongUserActivity():window.marvel.logger.traceflow("baton-timeout","applImpl.beginLongUserActivity is a no op. Project is not shared.")},endLongUserActivity:function(e){this._onEndLongUserActivty?this._onEndLongUserActivty(e):window.marvel.logger.traceflow("baton-timeout","appImpl.endLongUserActivity is a no op. Project is not shared.")},wrapLongUserActivity:function(e,t){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity start for "+e),this.beginLongUserActivity(),t.finally(function(){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity end for "+e),this.endLongUserActivity()}.bind(this))},isCollaborationEnabled:function(){return!!this._isCollaborationEnabled},onEditorActive:function(e,n,i){this._isCollaborationEnabled=!0,this._onUserActive=t.throttle(e,1e3,{leading:!0,trailing:!1}),this._onBeginLongUserActivity=n,this._onEndLongUserActivty=i,window.addEventListener("touchstart",this._onUserActive,!0),window.addEventListener("mousedown",this._onUserActive,!0),window.addEventListener("pointerdown",this._onUserActive,!0),window.addEventListener("keydown",this._onUserActive,!0),window.addEventListener("scroll",this._onUserActive,!0),window.addEventListener("resize",this._onUserActive,!0)},offEditorActive:function(e){this._onBeginLongUserActivity=null,this._onEndLongUserActivty=null,window.removeEventListener("touchstart",this._onUserActive,!0),window.removeEventListener("mousedown",this._onUserActive,!0),window.removeEventListener("pointerdown",this._onUserActive,!0),window.removeEventListener("keydown",this._onUserActive,!0),window.removeEventListener("scroll",this._onUserActive,!0),window.removeEventListener("resize",this._onUserActive,!0),this._onUserActive=null},setAppViewImplCls:function(e){this.viewCls=e},setPublishImpl:function(e){this.publishImpl=e},getPublishImpl:function(){return this.publishImpl},setStorageImpl:function(e){this.storageImpl=e,e.getSetting=this.getSetting.bind(this),e.initSyncGroup()},getStorageImpl:function(){return this.storageImpl},resetDocPublishData:function(e,n){var r=e.getMyApp(),o=[r.setCPAlias(e,null),r.setCPAssetId(e,null)];i.allSettled(o).then((function(e){var i=[];t.each(e,(function(e){"fulfilled"!==e.state&&i.push(e.reason)})),0===i.length?n.resolve():n.reject(i)}))},clearDataForDocCreatedByDupe:function(e){e.clearRootDataWithPrefix("cp#")},handleBrowserUnsupported:function(t,n){var r=i.defer(),o=e('<div data-auto="browser-unsupported-message"/>').html(this.getUnsupportedBrowserMessage()),s=navigator.userAgent||"N/A";return a.trackEvent("unsupportedBrowserMsgShown",{contextString:t,userAgent:s,projectType:this.getAppTypeID()},n),d.showAlert("Darn, you need to switch browsers",o,{closeDefer:r,okText:"Ok, got it"}).then(function(){r.resolve()}.bind(this)),r.promise},requestAppCreateNew:function(e,t,n){var r=i.defer();return this.isEnabled()?this.isBrowserSupported()?((n=n||{}).contextString=e,n.projectType=this.getAppTypeID(),window.marvel._isInApp?(a.trackEvent("projectCreationBegin",n,t),marvel.events.trigger("show-interstitial",{typeName:this.typeName,afterShowingDefer:r}),r.promise.then(function(){marvel.navigate("design/"+this.typeName+"/new",{trigger:!0})}.bind(this)).done()):a.trackLink("projectCreationBegin",n,t,function(){window.location.href=c.getLocalizedSparkPath("/sp/design/"+this.typeName+"/new")}.bind(this)),!0):(this.handleBrowserUnsupported(),!1):(alert(this.getDisplayName()+" is coming soon."),!1)},hasLicensedResources:function(e){return this.getImageComponentsInfoForDoc(e).then(function(e){return!!t.find(e,function(e){return this._isInfoComponentLicensed(e)}.bind(this))}.bind(this))},updateLicensedResources:function(e,t){return console.warn("TBD: update images in mrvlDoc."),i.resolve()},appSupportsUpdateLicensedResources:function(e){return!1},unlicenseResources:function(e){return console.warn("TBD: unlicese images in mrvlDoc"),i.resolve()},getAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#ctxid")},getAuthoringContextName:function(e){return e.getDCXRoot().getValue("authctx#ctxname")},setAuthoringContextId:function(e,t,n){return e.belongsToUser()?(window.marvel.logger.traceflow("authCtx","setAuthoringContextId",{docId:e.id,oldAuthCtxId:this.getAuthoringContextId(e),newAuthCtxId:t,skipSave:n}),n?(e.getDCXRoot().setValue("authctx#ctxid",t),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#ctxid",t)}.bind(this))):(marvel.logger.warn("AuthoringContext.setAuthoringContextId error: attempted to set authctx#ctxid for a project that is an incoming collaboration"),i.resolve())},getAuthoringContextUrn:function(e){return e.getDCXRoot().getValue("authctx#ctxurn")},setAuthoringContextUrn:function(e,t){var n=0,r=function(e,t){return e.belongsToUser()?this.getAuthoringContextUrn(e)!==t?(window.marvel.logger.traceflow("authCtx","setAuthoringContextUrn",{docId:e.id,oldAuthCtxUrn:this.getAuthoringContextUrn(e),newAuthCtxUrn:t,retryCount:n}),n>0?e.pull():i.resolve().then(function(){return e.saveChanges(function(e){e.setValue("authctx#ctxurn",t)}.bind(this))}.bind(this))):i.resolve():(marvel.logger.warn("AuthoringContext.setAuthoringContextUrn error: attempted to set authctx#ctxurn for a project that is an incoming collaboration"),i.resolve())}.bind(this);return window.marvel.logger.traceflow("authCtx","setAuthoringContextUrn",{docId:e.id,oldAuthCtxUrn:this.getAuthoringContextUrn(e),newAuthCtxUrn:t}),p(r.bind(this),{maxAttempts:2,shouldRetry:function(e){return!!(e&&e.message&&e.message.includes("UPDATE_CONFLICT"))||(window.marvel.logger.warn("[appImpl:setAuthoringContextUrn] unexpected error, not retrying",e),!1)},counter_cb:function(){n++},loggerFn:window.marvel.logger.warn.bind(window.marvel.logger),logMessagePrefix:"[appImpl:setAuthoringContextUrn]"})(e,t)},getContentSummary:function(e){return i.resolve()},setAuthoringContextUrnFromBrandId:function(e,t){var n=t.getId(),r=this.getAuthoringContextUrn(e);return n&&!r?e.saveChanges(function(e){e.setValue("authctx#ctxurn",t.getURN())}.bind(this)):i.resolve()},isBranded:function(e){var t=!!e.getDCXRoot().getValue("authctx#uses-branded-elements");return i.resolve(t)},getDOMComponent:function(e){var n,i=e.getDCXComposite();return i&&(n=t.find(i.current.allComponents(),(function(e){return e&&"dom"===e.relationship}))),n||console.warn("Post: Failed to retrieve DOM: ",e),n},hasPremiumFontSources:function(e){if("post"===this.typeName){var n=this.getDOMComponent(e);if(n)return e.getComponent(n).then((function(e){var n=JSON.parse(e)["theo#font-sources"];return n&&n.length&&t.includes(n,"typekit-premium")?i.resolve(!0):i.resolve(!1)}));var r=e.getDataFromRoot("theo#font-sources");return i.resolve(r&&r.length&&t.includes(r,"typekit-premium"))}return i.resolve(!1)},hasPremiumDesignAssets:function(e){return this.getImageComponentsInfoForDoc(e).then((function(e){return 0===e.length?i.resolve(!1):i.resolve(e.some((function(e){return"premium"===e.data.type})))})).catch((function(){return i.resolve(!1)}))},hasPremiumIngredients:function(e){return i.spread([this.hasPremiumFontSources(e),this.hasPremiumDesignAssets(e)],(function(e,t){return e||t}))},premiumIsRequired:function(e){return i.all(this.isBranded(e),this.hasPremiumIngredients(e)).spread((function(e,t){return e||t}))},getAuthoringContextThemeId:function(e){return e.getDCXRoot().getValue("authctx#themeid")},setAuthoringContextThemeId:function(e,t,n){return n?(e.getDCXRoot().setValue("authctx#themeid",t),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#themeid",t)}.bind(this))},stripBranding:function(e,t){return(o.hasFeature("enable-multi-brand")?i.resolve():this.setAuthoringContextId(e,null,!0)).then(function(){return this.setAuthoringContextThemeId(e,null,!0).then(function(){return t?(e.getDCXRoot().setValue("authctx#uses-branded-elements",!1),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#uses-branded-elements",!1)}.bind(this))}.bind(this))}.bind(this))},rebrandProject:function(e,t,n){return this.stripBranding(e,n).then(function(){var i=null;return t&&(i=t.getId()),this.setAuthoringContextId(e,i,n)}.bind(this))},beforeCollaboration:function(e){return i.resolve()},hasUploadedFonts:function(e){return this._hasFontSource(e,"user-uploaded")},_hasFontSource:function(e,n){return this.getFontsUsed?this.getFontsUsed(e).then((function(e){return!!t.find(e||[],(function(e){return e&&e.source===n}))})):this.includesUploadedFonts&&"user-uploaded"===n?i.resolve(this.includesUploadedFonts(e)):i.resolve(!1)},getLastPublishedAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#lastPublishedAuthctxid")},setLastPublishedAuthoringContextId:function(e,t){return e.saveChanges(function(e){e.setValue("authctx#lastPublishedAuthctxid",t)}.bind(this))},isaThemeEditor:function(){return this.isaProjectFormat()},getThemeController:function(e){return i.resolve({initTheme:function(e,t){},renderCover:function(e,t){},areAssetsUsed:function(e,t){},updateLinkedAssets:function(e,t){},relinkAsset:function(e,t){},getNumberOfGeneratedThemes:function(){return i.resolve(-1)},getGeneratedThemes:function(){return i.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)},canResolveConflict:function(e,t,n,r){return i.resolve(!1)},resolveAuthoringContextConflict:function(e,t,n,r,o){return i.resolve()}})},getThemeEditorView:function(){return i.resolve((function(){return this.render=function(){},this.setElement=function(){},this}))},getGeneratedThemes:function(e){return i.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)}})}.apply(t,i))||(e.exports=r)},141:function(e,t,n){var i;void 0===(i=function(){return{DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40}}.apply(t,[]))||(e.exports=i)},146:function(e,t,n){var i,r;i=[n(7),n(2),n(6),n(1),n(36),n(25),n(67),n(0),n(5),n(387),n(11),n(400),n(123)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u,d,h){"use strict";var p=new l.default({color:"firebrick",name:"App Storage"});return n.Model.extend({seedNewDoc:function(e){},initialize:function(){this.initPromise=r.storageReady()},initSyncGroup:function(){this.initPromise=r.storageReady()},setSaveThumbOnLoad:function(){this._saveThumbOnLoad=!0},saveThumbOnLoad:function(){var e=this._saveThumbOnLoad;return this._saveThumbOnLoad=!1,e},_startingCreateDoc:function(){},releaseBatonLock:function(){return d.releaseBatonAndCloseSession(this.currentDoc)},_createDoc:function(e){this.currentDoc=null,this._startingCreateDoc(),this.initPromise.then(function(t){this.createDocFromConfig(t,e,this.creationDefer),e.assetId&&(this.rootObjectId=e.assetId)}.bind(this),function(e){this.creationDefer.reject(e)}.bind(this)).catch(function(e){this.creationDefer.reject(e)}.bind(this)).done()},createDocFromConfig:function(e,t,n){t.assetUrn?this._createDocLoad(t,n):this._createDocNewACP(t,n)},_createDocLoad:function(e,t){r.syncEnter();var n=this.getSetting("syncGroup");h.load().then(function(t){return t.ACPSparkController.getCompositeDoc(e.assetUrn).then(function(t){if(!t){var n=new Error("_createDocLoad failed to get composite doc with urn: "+e.assetUrn);throw n.code="NO_COMPOSITE",n}return t.getMyApp().checkDocCompatibility(t,"opening").then(function(){return this.currentDoc=t,i.resolve()}.bind(this))}.bind(this))}.bind(this)).then(function(){o.setCurrentProjectId(e.assetUrn||e.assetId);var i=o.getProductName()||n;o.trackEvent("editor:loadedProject",{contextData:["projectId"]},i+":editor"),r.setSyncMode(r.MODE_EDITOR,this.currentDoc),r.syncLeave(),marvel.events.trigger("loaded-composite-doc",this.currentDoc),a.augmentLoadDoc(this.currentDoc,e),t.resolve(this.currentDoc)}.bind(this)).catch(function(e){this.currentDoc=null,t.reject(e)}.bind(this)).done()},_createDocNew:function(e,t,n){return this._createDocNewACP(t,n)},_createDocNewACP:function(e,t){var n=this.getSetting("syncGroup"),i=r.dcx.newEmptyComposite(this.getSetting("newDocName"),this.getSetting("doctype"));return this.currentDoc=new c({name:i.current.name,id:i.id,syncGroupName:n,compositeObj:i}),r.setSyncMode(r.MODE_EDITOR,this.currentDoc),this._setProjectContexts(this.currentDoc,e),a.augmentLoadDoc(this.currentDoc,e),a.augmentNewDoc(this.currentDoc,e).then(function(){return this.seedNewDoc(this.currentDoc),t.resolve(this.currentDoc),!0}.bind(this))},_setProjectContexts:function(e,n){if(n&&n.hasOwnProperty("projectContext")&&t.isObject(n.projectContext)){var i=e.getDCXRoot();t.each(n.projectContext,function(e,t){i.setValue("projectContext#"+t,e),"useCaseId"===t&&this._saveLastUsedUseCaseSession(e)}.bind(this))}},getProjectContexts:function(e,n){if(!(e=e||this.currentDoc))return{};var i,r=e.getDCXRoot();return n?i=t.reduce(n,(function(e,n){var i=r.getValue("projectContext#"+n);return t.isUndefined(i)||(e[n]=i),e}),{}):(i={},t.each(r._data,(function(e,t){0===t.indexOf("projectContext#")&&(i[t.split("projectContext#")[1]]=e)}))),t.each(i,(function(e,t){if("string"==typeof e&&0===e.indexOf("object:"))try{e=JSON.parse(e.substring(7)),i[t]=e}catch(n){p.warn("could not parse projectContext subobject:"+t,n)}})),i},_saveLaunchConfigSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("launch_config_tmp",JSON.stringify(e))}catch(t){p.error("error while saving launch config",t)}},_getAndClearLaunchConfigFromSession:function(){var e;try{if(!window.sessionStorage)return null;var t=sessionStorage.getItem("launch_config_tmp")||void 0;t&&(e=JSON.parse(t),sessionStorage.removeItem("launch_config_tmp"))}catch(n){p.error("error while getting launch config",n)}return e},_saveLastUsedUseCaseSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("last_used_usecase",JSON.stringify(e))}catch(t){p.error("error while saving launch config",t)}},createDocument:function(e){return this.creationDefer=i.defer(),r.setSyncMode(r.MODE_DISABLED),this.currentDoc?r.waitForQuiet(this.currentDoc).then(function(){this._createDoc(e)}.bind(this)):this._createDoc(e),this.creationDefer.promise},waitForQuiet:function(e){return(e=e||this.currentDoc)?r.waitForQuiet(e):i.resolve()},loadDocument:function(){return this.creationDefer.promise},storageManager:function(){return r},editorUnloadFinished:function(){this.currentDoc=null},getImage:function(t,n,r,o){if(!(o=o||this.currentDoc))return console.error("no doc for getImage",{pathOrComponent:t,query:n,buster:r}),i.reject(new Error("no doc for getImage:"+t));var a,s=o.getDCXComposite();if(!(a="string"==typeof t?s.current.getComponentWithAbsolutePath(t):t))return i.resolve(null);var l=new i.defer;return o.getImageComponentHref(a,n.size).then(function(t){var n=0;!function i(){var r=document.createElement("img"),o=function(e,t,r){n<2?i():a(r,t,"Image not accepting URL")},a=function(e,t,n){var i=n,r=1;"Image not accepting URL"!==n&&(r=e.status),l.reject({message:i,status:r})};r.onload=function(){var e=t.replace(new RegExp("^.*image_assets/[^/]*/"+s.id+"/"),"");l.resolve({path:e,size:{width:r.width,height:r.height},img:this})},r.onerror=function(){e.get(t).success(o).error(a)},n++,r.src=t}()}.bind(this)).catch(function(e){window.marvel.logger.error("app-storage-base caught error loading an image",e),l.reject(e)}.bind(this)).done(),l.promise},getPreviewHrefAsync:function(e){var t=(e=e||this.currentDoc).getMyApp().getPreviewComponent(e);return t?e.getImageComponentHref(t):i.resolve("")}})}.apply(t,i))||(e.exports=r)},207:function(e,t,n){"use strict";n.r(t),n.d(t,"LibrariesController",(function(){return ue}));var i,r,o=n(17),a=n.n(o),s=n(10),l=n.n(s),c=n(8),u=n.n(c),d=n(30),h=n.n(d),p=n(55),f=n.n(p),g=n(66),m=n.n(g),v=n(59),y=n.n(v),b=n(35),w=n.n(b),C=n(1),M=n.n(C),x=n(16),L=n.n(x),k=(n(36),n(0)),S=n.n(k),T=n(47),N=n.n(T),D=n(11),I=n.n(D),A=n(87),E=n.n(A),R=n(134),F=n.n(R),z=n(5),P=n(56),U=new z.default({color:"green",name:"Asimov"}),_={fetch:function(e){return P.default.fetch(e).catch((function(e){throw U.error("SparkFetchUtil",e),e}))},_makeOptions:function(e,t,n){return{LOG_CATEGORY:"[CCLibraries:Asimov]",method:n||"POST",uri:e,headers:{"Content-Type":"application/json","x-request-id":L.a.v4()},body:t}},_makeOptionsJSON:function(e,t,n){return this._makeOptions(e,JSON.stringify(t),n)},parseFile:function(e,t,n,i){var r=e.size,o=0,a=null,s=function(s){null==s.target.error?(o+=s.target.result.byteLength,t(s.target.result),o>=r?i(e):a(o,5242880,e)):n(s.target.error)};(a=function(e,t,n){var i=new FileReader,r=n.slice(e,t+e);i.onload=s,i.readAsArrayBuffer(r)})(o,5242880,e)},uploadFile:function(e,t){var n=M.a.defer(),i=[],r=[],o=this,a=F.a.algo.MD5.create();U.info("Starting File processing for Asimov upload",e);return this.parseFile(e,(function(e){r.push(e);var t=F.a.lib.WordArray.create(e);a.update(t)}),(function(e){U.error("Failure while breaking file into chunks",e)}),(function(e){var s=L.a.v4(),l=a.finalize();a=l.toString(F.a.enc.Base64),U.info("Successfully broke file into chunks and calculated md5 hash",{fileChunksCount:r.length,md5:a}),o.createJob(a,t,s,e.type,e.size).then((function(t){var a=t.id,s=1;U.info("Successfully created new Asimov upload job",{jobId:a}),r.forEach((function(t){i.push(o.uploadFilePartToJobWithRetry(a,t,e.type,s,t.byteLength,5)),s++})),M.a.allSettled(i).then((function(e){e.forEach((function(e){"fulfilled"!==e.state&&n.reject("Exhausted retries for uploading some of the parts")})),U.info("All file part uploads complete. Now finalizing the job",{jobId:a}),o.finalizeJob(a,"POST").then((function(e){"VERIFYING"===e.status?o.pollJobStatus(a,"UPLOAD_COMPLETE",10).then((function(e){n.resolve(e)})).catch((function(e){n.reject("Failed to complete piecing the job together. Final job status response:",e)})):"UPLOAD_COMPLETE"===e.status?n.resolve(e):n.reject("Unexpected job status for jobId="+a,e)})).catch((function(e){n.reject("Failed to finalize the job after uploading all parts",e)}))}))}))})),n.promise},pollJobStatus:function(e,t,n){var i=this;return this.finalizeJob(e,"GET").then((function(r){return r.status===t?Promise.resolve(r):n>0?i.delay(1e3).then((function(){return i.pollJobStatus(e,t,n-1)})):Promise.reject(r)})).catch((function(r){return n>0?i.pollJobStatus(e,t,n-1):Promise.reject(r)}))},finalizeJob:function(e,t){var n=this._makeOptions("https://".concat(S.a.asimov,"/api/v1/uploads/").concat(e,"/finalize"),null,t);return this.fetch(n)},uploadFilePartToJobWithRetry:function(e,t,n,i,r,o){var a=this;return this.uploadFilePartToJob(e,t,i,r).then((function(e){return Promise.resolve(e)})).catch((function(s){return o>0?a.uploadFilePartToJobWithRetry(e,t,n,i,r,o-1):Promise.reject(s)}))},uploadFilePartToJob:function(e,t,n,i){var r=new Blob([t],{type:"application/octet-stream"}),o={partNumber:n,partSize:i},a=new Blob([JSON.stringify(o)],{type:"application/json"}),s=new FormData;s.append("uploadPartRequest",a),s.append("file",r);var l=this._makeOptions("https://".concat(S.a.asimov,"/api/v1/uploads/").concat(e),s,"PUT");return delete l.headers["Content-Type"],this.fetch(l)},delay:function(e){return new Promise((function(t){setTimeout(t,e)}))},createJob:function(e,t,n,i,r){var o=this._makeOptions("https://".concat(S.a.asimov,"/api/v1/uploads"),JSON.stringify({md5:e,composite:t,filename:n,contentType:i,contentLength:r}));return this.fetch(o)},createTemplateFromDocument:function(e,t,n){var i=this._makeOptionsJSON("https://".concat(S.a.asimov,"/api/v2/spark/snapshot"),{source:e,target:t});return n&&(i.headers["x-organization-id"]=n),this.fetch(i)},updateTemplateFromDocument:function(e,t,n,i){var r=this._makeOptionsJSON("https://".concat(S.a.asimov,"/api/v1/spark/snapshot"),{source:e,target:n,thumbnail:t,elementId:i},"PUT");return this.fetch(r)},createDocumentFromTemplate:function(e,t,n,i){var r=this._makeOptionsJSON("https://".concat(S.a.asimov,"/api/v1/spark/project"),{source:e,target:t,elementId:n||void 0});return i&&(r.headers["x-organization-id"]=i),r.expectTextResponse=!0,this.fetch(r)}},O={fetch:function(e){return P.default.fetch(e)},getLibrariesOrgId:function(){var e=I.a.getProfile();if(i&&r&&(e&&e.userId===i))return M.a.resolve(r);return this.fetch({uri:"https://".concat(S.a.rApi,"/index"),apiKey:S.a.key}).then((function(t){var n=t.children;if(!n)throw new Error("Org ID not found - children not found in response");var o=n[0];if(!o)throw new Error("Org ID not found - first child not found in children");var a=o._embedded;if(!a)throw new Error("Org ID not found - _embedded not found in first child");var s=a["http://ns.adobe.com/adobecloud/rel/metadata/repository"];if(!s)throw new Error("Org ID not found - repo metadata not found in _embedded");var l=s["repo:repositoryId"];if(!l)throw new Error("Org ID not found - orgId not found in repo metadata");return i=e?e.userId:void 0,r=l,l}))},getLibrariesEtag:function(){return I.a.getAccessToken().then((function(e){return window.fetch("https://".concat(S.a.ss,"/assets/adobe-libraries"),{method:"HEAD",headers:{"X-Api-Key":S.a.key,Authorization:"Bearer ".concat(e)}}).then((function(e){return e.headers.get("etag")}))}))},getLibraries:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-modified_date",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"collaboration,rendition_grid",a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=M.a.resolve();return a||!t.includes("incoming")&&!t.includes("all")||(s=this.getLibrariesOrgId().then((function(e){return{"x-organization-id":e}}))),s.then((function(a){var s={uri:"https://".concat(S.a.melville,"/api/v1/libraries?owner=").concat(t,"&orderBy=").concat(n,"&selector=").concat(o,"&start=").concat(i,"&limit=").concat(r,"&useCache=false"),method:"GET",headers:a};return e.fetch(s)}))},getLibraryUrl:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e)},getLibrary:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collaboration,rendition_grid",i=(M.a.resolve(),"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e));return n&&(i+="?selector=".concat(n)),this.getLibrariesOrgId().then((function(e){return{"x-organization-id":e}})).then((function(e){var n={uri:i,method:"GET",headers:e};return t.fetch(n)}))},getPublicLibrary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rendition_grid",n="https://".concat(S.a.melville,"/api/v1/public/libraries/").concat(e);t&&(n+="?selector=".concat(t));var i={uri:n,skipAuth:!0,method:"GET"};return this.fetch(i)},getElementsFromLib:function(e,t,n,i,r,o,a){var s=t||"modified_date",l=n||0,c=i||10,u=r||"default",d={},h="https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements?orderBy=").concat(s,"&start=").concat(l,"&limit=").concat(c,"&selector=").concat(u);o&&(h+="&type=".concat(encodeURIComponent(o))),a&&(d["x-organization-id"]=a);var p={uri:h,method:"GET",headers:d};return this.fetch(p).catch((function(e){if(404===e.statusCode)return{total_count:0,elements:[]};throw e}))},getElementsFromPublicLib:function(e,t,n,i,r,o){var a=t||"modified_date",s=n||0,l=i||10,c=r||"default",u="https://".concat(S.a.melville,"/api/v1/public/libraries/").concat(e,"/elements?orderBy=").concat(a,"&start=").concat(s,"&limit=").concat(l,"&selector=").concat(c);o&&(u+="&type=".concat(encodeURIComponent(o)));var d={uri:u,skipAuth:!0,method:"GET"};return this.fetch(d).catch((function(e){if(404===e.statusCode)return{total_count:0,elements:[]};throw e}))},getElementFromPublicLib:function(e,t){var n={uri:"https://".concat(S.a.melville,"/api/v1/public/libraries/").concat(e,"/elements/").concat(t),skipAuth:!0,method:"GET"};return this.fetch(n).catch((function(e){if(404===e.statusCode)return null;throw e}))},createLibrary:function(e,t){var n={uri:"https://".concat(S.a.melville,"/api/v1/libraries").concat(t?"?invocation_mode=async":""),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return this.fetch(n)},fetchAsyncMonitorHref:function(e){return this.fetch({uri:e,resolveRawResponse:!0})},deleteLibrary:function(e,t){var n={};t&&(n["x-organization-id"]=t);var i={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e),method:"DELETE",headers:n};return this.fetch(i)},getRepresentationsForElement:function(e,t,n){var i={};n&&(i["x-organization-id"]=n);var r={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements/").concat(t,"/?selector=representations"),method:"GET",headers:i};return this.fetch(r).then((function(e){return e.representations}))},createElement:function(e,t,n,i,r,o,a){i=i||{device:"browser",deviceId:"browser",app:"spark.adobe.com"};var s={"Content-Type":"application/json"};a&&(s["x-organization-id"]=a);var l={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements"),method:"POST",headers:s,body:JSON.stringify({name:t,type:r,client:i,description:n,representations:o})};return this.fetch(l)},updateElementRepresentation:function(e,t,n,i,r,o,a){r=r||{device:"browser",deviceId:"browser",app:"spark.adobe.com"};var s={"Content-Type":"application/json"};a&&(s["x-organization-id"]=a);var l={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements/").concat(t,"/representations"),method:"PUT",headers:s,body:JSON.stringify({type:i,client:r,representations:o})};return this.fetch(l)},updateLibraryMetadata:function(e,t,n){var i={"Content-Type":"application/json"};n&&(i["x-organization-id"]=n);var r={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/metadata"),method:"PUT",headers:i,body:JSON.stringify(t)};return this.fetch(r)},updateElementMetadata:function(e,t,n){var i={"Content-Type":"application/json"};n&&(i["x-organization-id"]=n);var r={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements/metadata"),method:"PUT",headers:i,body:JSON.stringify({elements:t})};return this.fetch(r)},deleteElement:function(e,t,n){var i={};n&&(i["x-organization-id"]=n);var r={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements/").concat(t),method:"DELETE",headers:i};return this.fetch(r)},createRepresentation:function(e,t,n,i){var r="https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/representations/content"),o={type:n},a={},s=new FormData;s.append("Representation-Data",JSON.stringify(o)),s.append("Representation-Content",t),i&&(a["x-organization-id"]=i);var l={uri:r,method:"POST",body:s,headers:a};return this.fetch(l)},getElementFromLib:function(e,t){var n={uri:"https://".concat(S.a.melville,"/api/v1/libraries/").concat(e,"/elements/").concat(t),method:"GET"};return this.fetch(n)},getBookmarks:function(){var e={uri:"https://".concat(S.a.melville,"/api/v1/libraries/bookmarks"),method:"GET"};return this.fetch(e)},deleteBookmark:function(e){var t={uri:"https://".concat(S.a.melville,"/api/v1/libraries/bookmarks/").concat(e),method:"DELETE"};return this.fetch(t)}},B=n(119),j=n.n(B),G=n(18),H=n(14),K=n.n(H),Y=n(252),W=n(253),V=n(85),q=n.n(V),Q=function(e){return"public"===e.ownership?e.id:e.library_urn},X=6e4,J=1,$=function(){function e(){l()(this,e)}return u()(e,[{key:"reset",value:function(){var e=I.a.getProfile(),t=e?e.userId:"global";try{window.localStorage.removeItem("".concat(t,"librariescache"))}catch(n){window.marvel.logger.warn("[LibrariesController] Unable to clear cache in local storage",{error:n})}this.resetInMemory()}},{key:"resetInMemory",value:function(){this.cache=void 0}},{key:"writeToLocalStorage",value:function(){var e=I.a.getProfile(),t=e?e.userId:"global";try{window.localStorage.setItem("".concat(t,"librariescache"),JSON.stringify(this.cache))}catch(n){window.marvel.logger.warn("[LibrariesController] Unable to write cache to local storage",{error:n});try{window.localStorage.removeItem("".concat(t,"librariescache"))}catch(i){window.marvel.logger.warn("[LibrariesController] Unable to clear cache in local storage",{error:i})}}}},{key:"get",value:function(){if(this.cache)return this.cache;var e;try{var t=I.a.getProfile(),n=t?t.userId:"global",i=window.localStorage.getItem("".concat(n,"librariescache"));void 0===(e=i?JSON.parse(i):{}).version||e.version<J?(this.cache={version:J},this.writeToLocalStorage()):this.cache=e}catch(r){window.marvel.logger.warn("[LibrariesController] Unable to get cache from local storage",{error:r})}return this.cache}},{key:"libraryListHasExpired",value:function(e){if("public"===e.owner)return!0;var t=Date.now(),n=this.getLibraryList(e);return!!n&&(!n.updated||t-n.updated>=X)}},{key:"elementListHasExpired",value:function(e,t){var n=Date.now(),i=this.getElementList(e,t);return!!i&&(!i.updated||n-i.updated>=X)}},{key:"elementListHasExpiredByType",value:function(e,t){var n=Date.now(),i=this.getElementListByType(e,t);return!!i&&(!i.updated||n-i.updated>=X)}},{key:"libraryHasExpired",value:function(e){var t=Date.now(),n=this.getLibrary(e);return!!n&&(!n.updated||t-n.updated>=X)}},{key:"getLibraryList",value:function(e){var t=this.get();if(t&&t.libraryLists&&"public"!==e.owner){var n=w()(t.libraryLists,(function(t){return y()(t.params,e)}));if(n)return n}}},{key:"getLibraryListWithData",value:function(e){var t=this,n=this.getLibraryList(e);if(n&&"public"!==e.owner)return(n=m()(n)).libraries=n.libraries.map((function(e){return t.getLibrary(e)})),n}},{key:"getLibraryListIndex",value:function(e){var t=this.get();return t&&t.libraryLists&&"public"!==e.owner?q()(t.libraryLists,(function(t){return y()(t.params,e)})):-1}},{key:"getLibraryListIndexByOwner",value:function(e){var t=this.get();return t&&t.libraryLists&&"public"!==e?q()(t.libraryLists,(function(t){return t.params&&t.params.owner===e})):-1}},{key:"getLibrary",value:function(e){var t=this.get();if(t&&t.libraries)return t.libraries[e]}},{key:"getElementListSet",value:function(e){var t=this.get();if(t&&t.elementLists)return t.elementLists[e]}},{key:"getElementList",value:function(e,t){var n=this.get();if(n&&n.elementLists){var i=n.elementLists[e];if(i){var r=w()(i,(function(e){return y()(e.params,t)}));if(r)return r}}}},{key:"getElementListByType",value:function(e,t){var n=this.get();if(n&&n.elementLists){var i=n.elementLists[e];if(i){var r=w()(i,(function(e){return e.params.type===t}));if(r)return r}}}},{key:"getElementListWithData",value:function(e,t){var n=this,i=this.getElementList(e,t);if(i)return(i=m()(i)).elements=i.elements.map((function(t){return n.getElement(e,t)})),i}},{key:"getElementListIndex",value:function(e,t){var n=this.get();if(!(t&&e&&n&&n.elementLists))return-1;var i=n.elementLists[e];return i?q()(i,(function(e){return y()(e.params,t)})):void 0}},{key:"getElementListIndexByType",value:function(e,t){var n=this.get();if(!(t&&e&&n&&n.elementLists))return-1;var i=n.elementLists[e];return i?q()(i,(function(e){return e.params&&e.params.type===t})):void 0}},{key:"getElement",value:function(e,t){var n=this.get();if(n&&n.elements)return n.elements["".concat(e,"/").concat(t)]}},{key:"addLibraryList",value:function(e){var t=this.get();e.params&&"public"===e.params.owner||(t.libraryLists=t.libraryLists||[],t.libraryLists.push(e))}},{key:"addElementList",value:function(e,t){var n=this.get();n.elementLists=n.elementLists||{},n.elementLists[e]=n.elementLists[e]||[],n.elementLists[e].push(t)}},{key:"clearLibraryList",value:function(e,t){var n=this.get();if(n&&n.libraryLists&&(!e||"public"!==e.owner)){if(e){var i=this.getLibraryListIndex(e);i>=0&&n.libraryLists.splice(i,1)}else n.libraryLists=[];t||this.writeToLocalStorage(n)}}},{key:"clearLibraryListByOwner",value:function(e,t){var n=this.get();if(n&&n.libraryLists&&"public"!==e){if(e){var i=this.getLibraryListIndexByOwner(e);i>=0&&n.libraryLists.splice(i,1)}else n.libraryLists=[];t||this.writeToLocalStorage(n)}}},{key:"clearLibrary",value:function(e,t){var n=this.get();e&&n&&n.libraries&&(delete n.libraries[e],t||this.writeToLocalStorage(n))}},{key:"clearElementList",value:function(e,t,n){var i=this.get();if(e&&i&&i.elementLists){if(t){var r=this.getElementListIndex(e,t);r>=0&&i.elementLists[e].splice(r,1)}else i.elementLists[e]&&(i.elementLists[e]=[]);n||this.writeToLocalStorage(i)}}},{key:"clearElementListByType",value:function(e,t,n){var i=this.get();if(e&&i&&i.elementLists){if(t){var r=this.getElementListIndexByType(e,t);r>=0&&i.elementLists[e].splice(r,1)}else i.elementLists[e]&&(i.elementLists[e]=[]);n||this.writeToLocalStorage(i)}}},{key:"clearElementsListIfNecessary",value:function(e,t){var n=this;if(e){var i=this.get();e.forEach((function(e){var r=n.getLibrary(Q(e));i&&i.elementLists&&i.elementLists[Q(e)]&&r&&e.version!==r.version&&n.clearElementList(Q(e),void 0,t)}))}}},{key:"clearElement",value:function(e,t,n){var i=this.get();e&&t&&i&&i.libraries&&(delete i.elements["".concat(e,"/").concat(t)],n||this.writeToLocalStorage(i))}},{key:"updateLibraryName",value:function(e,t,n){var i=this.getLibrary(e);i&&(i.name=t,i.updated=Date.now()),n||this.writeToLocalStorage()}},{key:"updatePageOfLibraries",value:function(e,t,n,i,r){var o=this,a=this.getLibraryList(t);"public"!==t.owner&&(a||(a={},this.addLibraryList(a)),a.updated=Date.now(),a.params=t,a.totalCount=e.total_count,a.libraries=a.libraries||[],e.libraries.forEach((function(e,t){o.updateLibrary(e,!0),a.libraries[n+t]=Q(e)})),r||this.writeToLocalStorage())}},{key:"updateLibrary",value:function(e,t){var n=this.get();n.libraries=n.libraries||{},e.updated=Date.now(),n.libraries[Q(e)]=e,t||this.writeToLocalStorage()}},{key:"updateElementName",value:function(e,t,n,i){var r=this.getElement(e,t);r&&(r.updated=Date.now(),r.name=n),i||this.writeToLocalStorage()}},{key:"updatePageOfElements",value:function(e,t,n,i,r,o,a){var s=this,l=this.getElementList(t,n);l||(l={},this.addElementList(t,l)),l.updated=Date.now(),l.params=n,l.totalCount=e.total_count,l.elements=l.elements||[],e.elements.forEach((function(e,n){a||s.updateElement(e,t,!0),l.elements[i+n]=e.id})),o||this.writeToLocalStorage()}},{key:"updateElement",value:function(e,t,n){var i=this.get();i.elements=i.elements||{},e.updated=Date.now(),i.elements["".concat(t,"/").concat(e.id)]=e,n||this.writeToLocalStorage()}}]),e}(),Z={},ee={getAuthController:function(){return Z["marvel-auth-controller"]||(Z["marvel-auth-controller"]=M.a.defer(),Promise.resolve().then(function(e){Z["marvel-auth-controller"].resolve(n(11))}.bind(null,n)).catch(n.oe)),Z["marvel-auth-controller"].promise}},te=function(e){return"public"===e.ownership?e.id:e.library_urn||e.urn},ne=new z.default({color:"green",name:"LibrariesController"}),ie="libraries",re="elements",oe={png:"image/png",jpg:"image/jpg",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg+xml",psd:"application/photoshop",ai:"application/postscript"},ae={png:"application/vnd.adobe.element.image+dcx",jpg:"application/vnd.adobe.element.image+dcx",jpeg:"application/vnd.adobe.element.image+dcx",gif:"application/vnd.adobe.element.image+dcx",svg:"application/vnd.adobe.element.image+dcx",psd:"application/vnd.adobe.element.image+dcx",ai:"application/vnd.adobe.element.image+dcx"},se="https://helpx.adobe.com/creative-cloud/kb/file-storage-quota.html",le="https://helpx.adobe.com/enterprise/admin-guide.html/enterprise/using/cce-storage.ug.html",ce={private:1,incoming:1,public:1},ue=function(){function e(){var t=this;l()(this,e),this.pagingStates={},this.pagingStates[ie]=[],this.pagingStates[re]=[],this.cache=new $,this.acceptedUploadFileTypes={"image/png":!0,"image/jpg":!0,"image/jpeg":!0,"image/gif":!0,"image/svg+xml":!0,"application/octet-stream":["ai"],"application/postscript":["ai"],"image/vnd.adobe.photoshop":["ai"]},this.acceptedUploadFileTypesWithExt=".jpg,.jpeg,.png,.ai,.psd,.svg,.gif,image/gif,image/svg+xml,image/jpeg,image/png",ee.getAuthController().then((function(){window.marvel.events.on("spark-invalidate-libraries-list-cache",t.invalidateLibrariesListCache.bind(t))}))}return u()(e,[{key:"getFileExtension",value:function(e){return e.name.replace(/^.*\.([^.]*)$/,"$1").toLowerCase()}},{key:"writeToLocalStorage",value:function(e,t){var n=I.a.getProfile().userId;try{window.localStorage.setItem("".concat(n).concat(e),t)}catch(i){window.marvel.logger.warn("[LibrariesController] Unable to write ".concat(e," to local storage"),{error:i})}}},{key:"getFromLocalStorage",value:function(e){var t,n=I.a.getProfile().userId;try{t=window.localStorage.getItem("".concat(n).concat(e))}catch(i){window.marvel.logger.warn("[LibrariesController] Unable to get ".concat(e," from local storage"),{error:i})}return t}},{key:"getMaxFileSize",value:function(){return 5242880}},{key:"isFileTypeAllowed",value:function(e){var t=!0,n=this.acceptedUploadFileTypes[e.type];return n&&("object"!==a()(n)||n.includes(this.getFileExtension(e)))||(t=!1),t||(t=this.isPhotoshopFile(e)),t}},{key:"isPhotoshopFile",value:function(e){return e.type.includes("photoshop")||e.type.includes("psd")}},{key:"isSaveableAsTemplate",value:function(e){var t=M.a.defer(),n=e.getMyApp();return e.getImageComponents().then((function(e){e.forEach((function(e){n._isInfoComponentLicensed(e)&&t.resolve(!1)})),t.resolve(!0)})).catch((function(e){ne.error("Failed checking if doc can be saved as template",e),t.reject(e)})),t.promise}},{key:"invalidateLibrariesListCache",value:function(e){var t=e.owner;this.cache.clearLibraryListByOwner(t)}},{key:"resetPagingState",value:function(e){e?this.pagingStates[e]=[]:(this.pagingStates={},this.pagingStates[ie]=[],this.pagingStates[re]=[])}},{key:"reset",value:function(){this.cache.reset(),this.resetPagingState()}},{key:"getPagingState",value:function(e,t){var n=w()(this.pagingStates[e],(function(e){return y()(e.params,t)}));return n||(n={params:m()(t),lastStart:void 0},this.pagingStates[e].push(n)),n}},{key:"getLastStartIndex",value:function(e,t){return this.getPagingState(e,t).lastStart}},{key:"setLastStartIndex",value:function(e,t,n){this.getPagingState(e,t).lastStart=n}},{key:"loadAllLibraries",value:function(e,t,n){var i=this,r=M.a.defer(),o=[],a=!0;return function s(){var l=a?0:void 0;a=!1,i.loadMoreLibraries(e,t,l,n).then((function(e){var t=e.libraries,n=e.allLoaded;o=o.concat(t),n?r.resolve(o):s()})).catch((function(e){r.reject(e)}))}(),r.promise}},{key:"loadLibraries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"private",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-modified_date",n=arguments.length>2?arguments[2]:void 0;return this.loadMoreLibraries(e,t,0,n)}},{key:"loadMoreLibraries",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"private",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-modified_date",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=this.cache;return this.loadListViaCacheIfPossible(i,{getLastStartIndex:function(){return e.getLastStartIndex(ie,{owner:t,orderBy:n})},cacheHasExpired:function(){return o.libraryListHasExpired({owner:t,orderBy:n})},clearCachedList:function(){return o.clearLibraryList({owner:t,orderBy:n})},getCachedList:function(){return o.getLibraryListWithData({owner:t,orderBy:n})},setLastStartIndex:function(i){return e.setLastStartIndex(ie,{owner:t,orderBy:n},i)},getDataItemsFromCachedEntry:function(e){return e.libraries},fetchListFromServer:function(i){var a="LibraryFetchElementsMore";return G.SparkPerformanceTracker.mark(a),O.getLibraries(t,n,i,10,void 0,r).catch((function(e){throw e.statusCode>=500&&o.reset(),G.SparkPerformanceTracker.measure("".concat(a,":failure"),{detail:{error:e},start:a}),e})).then((function(r){var s={librariesReceived:r.libraries?r.libraries.length:void 0,totalCount:r.total_count,owner:t,orderBy:n,start:i};return ne.info("Successfully fetched libraries",s),G.SparkPerformanceTracker.measure("".concat(a,":success"),a),o.clearElementsListIfNecessary(r.libraries,!0),e.setLastStartIndex(ie,{owner:t,orderBy:n},i),o.updatePageOfLibraries(r,{owner:t,orderBy:n},i,10),{totalCount:r.total_count,items:r.libraries}}))},prepReturnList:function(t){return M.a.all(t.reduce((function(t,n){var i=e.sparkLibraryFactory(n);return i?t.push(i):(window.marvel.logger.warn("[Libraries Controller] Invalid value ["+n+"] was found in LibrariesCache - ignoring for now but clearing LibrariesCache"),o.reset()),t}),[])).then((function(e){return{libraries:e}}))}})}},{key:"loadElements",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-modified_date";return this.loadMoreElements(e,t,n,0)}},{key:"loadMoreElements",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-modified_date",r=arguments.length>3?arguments[3]:void 0,o=this.cache;return this.loadListViaCacheIfPossible(r,{getLastStartIndex:function(){return n.getLastStartIndex(re,{type:t,orderBy:i})},cacheHasExpired:function(){return o.elementListHasExpired(te(e),{type:t,orderBy:i})},clearCachedList:function(){return o.clearElementList(te(e),{type:t,orderBy:i})},getCachedList:function(){return o.getElementListWithData(te(e),{type:t,orderBy:i})},setLastStartIndex:function(e){return n.setLastStartIndex(re,{type:t,orderBy:i},e)},getDataItemsFromCachedEntry:function(e){return e.elements},fetchListFromServer:function(r){var a;a=e.publinkMetadata||e.isPublic()?O.getElementsFromPublicLib(e.id,i,r,10,"details,representations",t):O.getElementsFromLib(e.urn,i,r,10,"details,representations",t,e.orgId);var s="LibraryFetchElements";return G.SparkPerformanceTracker.mark(s),a.catch((function(e){throw e.statusCode>=500&&o.reset(),G.SparkPerformanceTracker.measure("".concat(s,":failure"),s),e})).then((function(a){var l={elementsReceived:a.elements?a.elements.length:void 0,totalCount:a.total_count,isPublic:e.isPublic(),isTeam:e.isTeam(),orderBy:i,start:r,type:t};return ne.info("Successfully fetched library elements",l),G.SparkPerformanceTracker.measure("".concat(s,":success"),{detail:{type:t,startIndex:r},start:s}),n.setLastStartIndex(re,{type:t,orderBy:i},r),o.updatePageOfElements(a,e.urn,{type:t,orderBy:i},r,10),{totalCount:a.total_count,items:a.elements}}))},prepReturnList:function(t){return M.a.resolve({elements:t.map((function(t){return n.sparkLibraryElementFactory(t,e)}))})}})}},{key:"loadListViaCacheIfPossible",value:function(e,t){var n,i,r=t.getLastStartIndex,o=t.cacheHasExpired,a=t.clearCachedList,s=t.getCachedList,l=t.setLastStartIndex,c=t.getDataItemsFromCachedEntry,u=t.fetchListFromServer,d=t.prepReturnList,h=(this.cache,e);if(void 0===h){var p=r();h=void 0===p?0:p+10}if(o())a();else{var f=s();if(f){i=f.totalCount;var g=c(f).slice(h,h+10);g.length===Math.min(i-h,10)&&!w()(g,(function(e){return void 0===e}))&&(l(h),n=M.a.resolve({totalCount:i,items:g}))}}return n||(n=u(h)),n.then((function(e){var t=e.items,n=e.totalCount;return d(t).then((function(e){return e.allLoaded=h+10>=n,e.totalCount=n,e}))}))}},{key:"getElementCount",value:function(e){return this.getElementCountOfType(e)}},{key:"getElementCountOfType",value:function(e,t){var n=this.cache,i="-modified_date",r=n.getElementListByType(te(e),t);return r&&!n.elementListHasExpiredByType(te(e),t)?M.a.resolve(r.totalCount):(e.publinkMetadata||e.isPublic()?O.getElementsFromPublicLib(e.id,i,0,10,"default",t):O.getElementsFromLib(e.urn,i,0,10,"default",t,e.orgId)).then((function(r){return n.updatePageOfElements(r,te(e),{type:t,orderBy:i,selector:"default"},0,10,!1,!0),r.total_count}))}},{key:"filterNonSparkTemplates",value:function(e){return e?f()(e,(function(e){return e.getTemplateDcxRepresentation()})):e}},{key:"getCachedLibraryById",value:function(e){if(!this.cache.libraryHasExpired(e)){var t=this.cache.getLibrary(e);if(t)return this.sparkLibraryFactory(t)}}},{key:"pollLibraryStatus",value:function(e){O.getLibraryUrl(e);return j()((function(){return O.getLibrary(e)}),{maxAttempts:5,delay:500,shouldRetry:this._isRetryableError,counter_cb:function(){0}})()}},{key:"pollAndRefreshLibrary",value:function(e){var t=this;return this.pollLibraryStatus(e).then((function(e){return t.cache.updateLibrary(e),t.sparkLibraryFactory(e)}))}},{key:"fetchLastSelectedLibrary",value:function(){return this.lastSelectedLibraryUrn?this.fetchLibraryByUrn(this.lastSelectedLibraryUrn):M.a.resolve()}},{key:"fetchLibraryByUrn",value:function(e){var t=this,n=this.cache;return O.getLibrary(e).then((function(i){var r=n.getLibrary(e),o=n.getElementListSet(e);return t.cache.updateLibrary(i),o&&r&&!n.libraryHasExpired(e)&&i.version!==r.version&&n.clearElementList(i.library_urn),t.sparkLibraryFactory(i)}))}},{key:"createTemplateFromDocument",value:function(e,t,n,i,r){var o=this,a=t.orgId,s=e.getDCXComposite().assetId,l=e.getDocDimensions(),c=r||M.a.resolve(""),u=M()(null),d=L()(),h=!1;n&&(t.isTeam()?u=this._imagePathToLocalFile(n).then((function(e){return O.createRepresentation(t.urn,e,n.type,t.orgId).then((function(e){return{result:e}}))})):(h=!0,u=this.copyThumbnailForTemplate(e,t,d)));var p=_.createTemplateFromDocument(s,t.urn,t.orgId||L()());return M.a.all([c,G.SparkPerformanceTracker.measurePromise("LibraryThumbnailCopy",u),G.SparkPerformanceTracker.measurePromise("LibraryProjectSnapshot",p)]).spread((function(e,n,r){var s=n.result;if(!s)throw new Error("[LibrariesController] Could not find the result of the template thumbnail copy");h||(d=s.id);var c={asset_id:s.urn,content_length:s.content_length||s.size,etag:s.etag,id:d,md5:s.md5,name:"thumbnail.jpg",type:s.type,storage_href:"https://".concat(S.a.ss,"/id/").concat(t.urn,"?component_id=").concat(d),version:"0"};c.width=l.width,c.height=l.height,c.relationship="rendition";var u=r;u.name=i.name+".dcxucf",u.spark_tracking_data=i.spark_tracking_data||{},u.spark_tracking_data.content_summary=e||void 0,u.relationship="primary";var p=O.createElement(t.urn,i.name,i.description,void 0,"application/vnd.adobe.element.template+dcx",[c,u],a).then((function(e){o.cache.clearElementList(te(t));var n=e&&e.elements&&e.elements[0];if(n)return o.sparkLibraryElementFactory(n,t)}));return G.SparkPerformanceTracker.measurePromise("LibraryElementSaved",p)}))}},{key:"pollTheJobToCopyTheTemplateThumbnail",value:function(e,t){var n=this;return M.a.delay(500).then((function(){var i=e.headers.get("content-type");return(i&&i.includes("json")?e.json():i&&i.includes("http")?e.text().then((function(e){var t=e.split("\n");return JSON.parse(t[t.length-1])})):M()(null)).then((function(e){var i=t||e&&e.href&&"https://".concat(S.a.ss).concat(e.href);if(i)return window.fetch(i,{headers:{Authorization:"Bearer "+window.adobeIMS.getAccessToken(),"x-api-key":S.a.key}}).then((function(e){if(202===e.status)return n.pollTheJobToCopyTheTemplateThumbnail(e,i);if(200===e.status)return e.text().then((function(e){var t=e.split("\n");return JSON.parse(t[t.length-1])}));var t=new Error("[LibrariesController] Got status code from GET ".concat(i,": ").concat(e.status));throw t.status=e.status,t}));throw new Error("[LibrariesControlller] pollTheJobToCopyTheTemplateThumbnail: could not find an href to poll with")}))}))}},{key:"copyThumbnailForTemplate",value:function(e,t,n){var i=this,r=L()(),o=e.getMyApp().getSetting("syncGroup"),a=e.getImageRenditionComponent(),s="/assets/".concat(o,"/").concat(e.getDCXComposite().id,"/").concat(a.id),l=(t.urn,"/assets/adobe-libraries/".concat(t.id,"/").concat(n)),c="https://".concat(S.a.ss,"/ops");return window.fetch(c,{method:"POST",headers:{Authorization:"Bearer "+window.adobeIMS.getAccessToken(),"x-api-key":S.a.key,"x-request-id":r,"Content-Type":"application/vnd.adobe.asset-operation+json"},body:JSON.stringify({op:"copy",source:{path:s},target:{path:l}})}).then((function(e){if(202===e.status)return i.pollTheJobToCopyTheTemplateThumbnail(e).catch((function(e){throw e.status?new Error("[LibrariesController] Attempted to copy project thumbnail into library ".concat(t.urn,". Got status code from POST ").concat(c,": ").concat(e.status)):e}));throw new Error("[LibrariesController] Attempted to copy project thumbnail into library ".concat(t.urn,". Got status code from POST ").concat(c,": ").concat(e.status))}))}},{key:"_ensureSyncGroup",value:function(e){var t=M.a.defer(),n="/sp-storage/init-temp-storage/"+e;return I.a.ajax({type:"GET",url:n,headers:{"x-api-key":window.marvel.settings.key}}).then((function(e,n,i){t.resolve()})).fail((function(e){t.reject(e)})),t.promise}},{key:"createTemporaryDocumentFromTemplate",value:function(e){var t=this;return this._ensureSyncGroup("adobe-sp-temp").then((function(){return window.marvel.logger.warn("sync group created..."),t.createDocumentFromTemplate(e,"/assets/adobe-sp-temp")}))}},{key:"createDocumentFromTemplate",value:function(e){var t=this;if(!this._theoSyncGroupName){var n=N.a.getAppByType("post");this._theoSyncGroupName=n.getSetting("syncGroup")}var i,r,o="assets/".concat(this._theoSyncGroupName),a=e.getRepresentationsByType(/dcx/)[0],s=e.id,l=e.library.isPublic(),c=a.storageHref&&-1===a.storageHref.search(/cc-api-storage/),u=c?e.library.orgId||L()():void 0;i=l?M.a.resolve(e.library.id):this._URN4HREF(a.storageHref,c),r=c||l?this._URN4HREF("https://".concat(S.a.ss,"/").concat(o),!1):M.a.resolve(o);var d="LibraryTemplateCreateFlow";return G.SparkPerformanceTracker.mark(d),M.a.all([i,r]).spread((function(e,n){G.SparkPerformanceTracker.measure("LibraryResolvedCreateTemplate",d);var i="LibraryProjectCreated";return G.SparkPerformanceTracker.mark(i),t.createDocumentFromTemplateSnapshot(e,n,s,u).then((function(e){return G.SparkPerformanceTracker.measure("LibraryCreatedProjectFromSnapShot",i),e}))}))}},{key:"createDocumentFromTemplateSnapshot",value:function(e,t,n,i){return _.createDocumentFromTemplate(e,t,n,i)}},{key:"_imagePathToLocalFile",value:function(e){return fetch(e.path).then((function(e){return e.arrayBuffer()})).then((function(t){return new File([t],e.name,{type:e.type})}))}},{key:"_PATH4HREF",value:function(e){var t=e.substring("https://".length),n=t.indexOf("adobe.io/"),i=t.substring(n+"adobe.io/".length);return M.a.resolve(i)}},{key:"_URN4HREF",value:function(e,t){var n=this;this._urns4hrefs=this._urns4hrefs||{};var i=M.a.defer(),r=this._urns4hrefs[e];if(r)return r;if(t)return P.default.fetch({method:"HEAD",uri:e,resolveRawResponse:!0,headers:{"If-None-Match":""}}).then((function(t){var i=t.headers.get("x-resource-urn"),r=t.headers.get("x-resource-id"),o=i||r;return n._urns4hrefs[e]=o,o}));var o=e.substring("https://".length),a=o.indexOf("adobe.io/"),s="/resolve_assets_urn/"+o.substring(a+"adobe.io/".length);return I.a.ajax({type:"GET",url:s,headers:{"x-api-key":window.marvel.settings.key}}).then((function(e,t,n){var r=e.urn;i.resolve(r)})).fail((function(e){i.reject(e)})),i.promise}},{key:"getBookmarks",value:function(){return O.getBookmarks()}},{key:"fetchLibraryByPublinkId",value:function(e){var t=this,n=this.cache,i=window.adobeIMS&&window.adobeIMS.isSignedInUser();return P.default.fetch({uri:"https://".concat(S.a.links,"/api/v1/publinks/").concat(e,"?fields=owner"),skipAuth:!i,method:"GET"}).then((function(e){var i=e.resourceURL.replace(/^.*\/([^/]*)$/,"$1");return O.getPublicLibrary(i).then((function(r){var o=n.getLibrary(i),a=n.getElementListSet(i);return t.cache.updateLibrary(r),a&&o&&!n.libraryHasExpired(i)&&r.version!==o.version&&n.clearElementList(r.id),r.publink_metadata=e.metadata,r.owner_id=e.ownerId,r.bookmark=h()({},r.bookmark,{id:e.bookmarkId}),t.sparkLibraryFactory(r)}))}))}},{key:"fetchPublicLibrary",value:function(e){var t=this,n=this.cache;return O.getPublicLibrary(e).then((function(i){var r=n.getLibrary(e);return n.getElementListSet(e)&&r&&!n.libraryHasExpired(e)&&i.version!==r.version&&n.clearElementList(i.id),t.sparkLibraryFactory(i)}))}},{key:"publicLinkLibraryIsOwnedByUser",value:function(e){var t=I.a.getProfile();return!!t&&(e.ownerId&&e.ownerId===t.userId)}},{key:"renameLibrary",value:function(e,t){var n=this,i={name:t};return e.isTeam()&&(i.orgId=e.orgId,i.repository=e.orgId),O.updateLibraryMetadata(e.urn,i,e.orgId).then((function(){n.cache.clearLibraryList({owner:e.cacheList,orderBy:"-name"}),n.cache.clearLibraryList({owner:e.cacheList,orderBy:"name"}),n.cache.updateLibraryName(te(e),t),e.name=t}))}},{key:"deleteLibrary",value:function(e){var t=this;return O.deleteLibrary(e.urn,e.orgId).then((function(){t.cache.clearLibrary(te(e),!0),t.cache.clearLibraryList()}))}},{key:"createLibrary",value:function(e){var t=this;return O.createLibrary(e).then((function(e){return t.cache.clearLibraryList(),t.sparkLibraryFactory(h()(e,{ownership:"private"}))}))}},{key:"createLibraryAsync",value:function(e){var t=this;return O.createLibrary(e,!0).then((function(e){var n=e.href,i=1e3*e.retryAfter;return M.a.delay(i).then((function e(){return O.fetchAsyncMonitorHref(n).then((function(r){if(202===r.status)return M.a.delay(i).then(e);if(200===r.status){var o=r.headers.get("content-type");return o&&o.includes("http")?r.text().then((function(e){var n,i=e.split("\n"),r=i[i.length-1];r=(r=(r=(r=r.replace(/"etag":[^,}]*([,}])/g,"$1")).replace(/"manifest_etag":[^,}]*([,}])/g,"$1")).replace(/,,/g,",")).replace(/,}/g,"}");try{n=JSON.parse(r)}catch(o){throw new Error("Attempted to parse the following as JSON: "+r+" - Got: "+o.message)}return t.cache.clearLibraryList(),t.sparkLibraryFactory(h()(n,{ownership:"private"}))})):null}throw new Error("[LibrariesController] Unexpected response for monitor href "+n)}))}))}))}},{key:"renameElement",value:function(e,t,n){var i=this;return O.updateElementMetadata(e.urn,[{id:t.id,name:n}],e.orgId).then((function(){i.cache.updateElementName(te(e),t.id,n),t.name=n}))}},{key:"deleteElement",value:function(e,t){var n=this;return O.deleteElement(e.urn,t.id,e.orgId).then((function(){n.cache.clearLibrary(te(e)),n.cache.clearLibraryList({owner:e.cacheList,orderBy:"-modified_date"}),n.cache.clearLibraryList({owner:e.cacheList,orderBy:"modified_date"}),n.cache.clearElement(te(e),t.id,!0),n.cache.clearElementList(te(e))}))}},{key:"createElement",value:function(e,t){var n=this;return this.uploadFile(e,t).then((function(t){n.cache.clearLibrary(te(e)),n.cache.clearLibraryList({owner:e.cacheList,orderBy:"-modified_date"}),n.cache.clearLibraryList({owner:e.cacheList,orderBy:"modified_date"}),n.cache.clearElementList(te(e));var i=t.elements;if(!i||!i.length)throw new Error("No element metadata returned after attempting to create a library element");var r=i[0],o=n.sparkLibraryElementFactory(r,e);return O.getRepresentationsForElement(e.urn,o.id,e.orgId).then((function(e){return o.setRepresentations(e),o}))}))}},{key:"uploadFile",value:function(e,t){var n=this.getFileExtension(t),i=ae[n],r=oe[n],o=t.name;return t.size<5242880?O.createRepresentation(e.urn,t,r,e.orgId).then((function(t){return O.createElement(e.urn,o,void 0,void 0,i,[t],e.orgId)})):_.uploadFile(t,e.id).then((function(t){ne.info("Successfully uploaded file to Asimov",t);var n={id:t.fileDetails.id,asset_id:t.fileDetails.urn,storage_href:"/assets/adobe-libraries/"+t.composite+"/"+t.fileDetails.id+"/"+t.filename,type:t.contentType,etag:t.fileDetails.etag,content_length:t.contentLength,md5:t.md5,version:0};return O.createElement(e.urn,o,void 0,void 0,i,[n],e.isTeam())})).catch((function(e){throw ne.error("Failed uploading file to Asimov",e),e}))}},{key:"leaveLibrary",value:function(e){var t,n=this;if(e.isPublic()||e.isTeam()){if(!e.bookmark||!e.bookmark.id)throw new Error('Attempted to "leave" public library '+e.urn+" but did not have bookmark id");t=O.deleteBookmark(e.bookmark.id)}else t=E.a.inviteeRemoveSharedByURN(e.urn);return t.then((function(){n.cache.clearLibrary(te(e),!0),n.cache.clearLibraryList()}))}},{key:"followPublicLibrary",value:function(e){var t=this;return P.default.fetch({uri:"https://".concat(S.a.links,"/api/v1/bookmarks/").concat(e),method:"POST"}).then((function(){t.cache.clearLibraryListByOwner("following")}))}},{key:"getElementFromPublicLibrary",value:function(e,t){var n=this,i=M.a.defer(),r=this.cache.getElement(e.id,t);return void 0!==r?i.resolve(r):O.getElementFromPublicLib(e.id,t).then((function(t){i.resolve(n.sparkLibraryElementFactory(t,e))})).catch((function(e){ne.error("Failed to fetch element from library",e),i.reject(e)})),i.promise}},{key:"sparkLibraryFactory",value:function(e){if(e){var t=m()(e);return M.a.resolve(new Y.default(t))}}},{key:"sparkLibraryElementFactory",value:function(e,t){var n=m()(e);return n.library=t,n.representations&&n.representations.forEach((function(e){t.isPublic()&&(e.is_public=!0)})),new W.default(n)}},{key:"onPrivateQuotaBreach",value:function(){window.open(se,"_blank")}},{key:"onTeamQuotaBreach",value:function(){window.open(le,"_blank")}},{key:"triggerLibrariesQuotaErrorToast",value:function(e){var t={variant:"error"};e&&e.isTeam()?(t.message=K.a.formatMessage("libraries-quota-exceeded-team"),t.actionLabel=K.a.formatMessage("libraries-quota-exceeded-team-action"),t.onAction=this.onTeamQuotaBreach,t.closeOnAction=!0):e&&e.isSharedWithUser()?t.message=K.a.formatMessage("libraries-quota-exceeded-shared",{libraryName:e.name}):(t.message=K.a.formatMessage("libraries-quota-exceeded-private"),t.actionLabel=K.a.formatMessage("libraries-quota-exceeded-private-action"),t.onAction=this.onPrivateQuotaBreach,t.closeOnAction=!0),window.marvel.events.trigger("show-app-toast-message",t)}},{key:"saveSelectedTemplateId",value:function(e){if(window.sessionStorage)try{window.sessionStorage.setItem("selected-template-id",e)}catch(t){console.error("Failed to save selected-template-id"+e,t)}}},{key:"getSelectedTemplateId",value:function(){if(window.sessionStorage)try{var e=window.sessionStorage.getItem("selected-template-id");return e?(window.sessionStorage.removeItem("selected-template-id"),e):null}catch(t){return ne.warn("Failed getting or removing selected-template-id from session storage!",t),null}return null}},{key:"lastSelectedLibraryUrn",set:function(e){this._lastSelectedLibraryUrn=e,this.writeToLocalStorage("librarieslastselection",e)},get:function(){return this._lastSelectedLibraryUrn?this._lastSelectedLibraryUrn:this.getFromLocalStorage("librarieslastselection")}},{key:"lastActiveTab",set:function(e){this._lastActiveTab=e,this.writeToLocalStorage("librarieslastactivetab",e)},get:function(){var e=this._lastActiveTab;if(e)e=ce[e]?e:"private";else{this.lastActiveTab=e;var t=this.getFromLocalStorage("librarieslastactivetab");e=ce[t]?t:"private"}return e}}]),e}(),de=new ue;window.LibrariesController=de;t.default=de},252:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n(10),r=n.n(i),o=n(8),a=n.n(o),s=n(70),l=n.n(s),c=n(69),u=n.n(c),d=n(71),h=n.n(d),p=n(35),f=n.n(p),g=n(55),m=n.n(g),v=(n(1),n(0)),y=n.n(v),b=n(77),w=function(e){function t(e){var n,i;if(r()(this,t),(n=l()(this,u()(t).call(this,e)))._links=e._links,n.id=e.id,n.urn=e.library_urn,n.name=e.name,n.version=e.version,n.created=e.created_date,n.modified=e.modified_date,n.ownership=e.ownership,n._canOnlyBeEditedByXD=!(!e.document_type&&!e.document_id),n.cacheList="team"===e.ownership?"incoming":e.ownership,e.collaboration&&e.collaboration.collaborators?n.collaborators=e.collaboration.collaborators:n.collaborators=[],n.storagePath=e.storage_path,n.bookmark=e.bookmark,n.orgId="team"===e.ownership?e.org_id:void 0,n.publinkMetadata=e.publink_metadata,n.ownerId=e.owner_id,n.hasPublicLink=e.collaboration&&e.collaboration.public,e.asset_acl)if(e.asset_acl.describedBy)i=e.asset_acl.describedBy;else{var o=e.asset_acl["*"];if(o)i=o;else{var a=Object.keys(e.asset_acl).find((function(e){return-1!==e.search("primary")})),s=e.asset_acl[a];if(s)i=s;else{var c=Object.keys(e.asset_acl).find((function(e){return-1!==e.search("repository")})),d=e.asset_acl[c];i=d||[]}}}var h=Array.from(new Set(i));n.acl=h.reduce((function(e,t){return e[t]=!0,e}),{});var p=e.rendition_grid,f=p&&p.main,g=p&&p.tiles;return n.renditionGrid=[],p&&(n.renditionGrid=f?[f.rendition]:[void 0],g&&(n.renditionGrid=n.renditionGrid.concat(g.map((function(e){return e?e.rendition:void 0}))))),n}return h()(t,e),a()(t,[{key:"toJSON",value:function(){return{id:this.id,urn:this.urn,name:this.name,version:this.version,created:this.created,modified:this.modified,ownership:this.ownership,collaborators:this.getListOfCollaboratorNames()}}},{key:"belongsToUser",value:function(){return"private"===this.ownership||"outgoing"===this.ownership}},{key:"isSharedWithUser",value:function(){return"incoming"===this.ownership||"team"===this.ownership}},{key:"hasCollaborators",value:function(){return"incoming"===this.ownership||this.collaborators&&this.collaborators.length>1}},{key:"isFollowedByUser",value:function(){return!!(this.isPublic()&&this.bookmark&&this.bookmark.created)}},{key:"isPublic",value:function(){return"public"===this.ownership}},{key:"isTeam",value:function(){return"team"===this.ownership}},{key:"hasRenditionGridTiles",value:function(){return!!this.renditionGrid&&this.renditionGrid.length>1}},{key:"getBookmarkId",value:function(){return this.bookmark?this.bookmark.id:void 0}},{key:"getRenditionHrefFromGrid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=this.renditionGrid[e];return n&&"string"==typeof n&&0===n.search(/^http/)&&t?this.getProxyRenditionHref(n,1e3):n}},{key:"getTemplateElements",value:function(){return m()(this.elements,(function(e){var t=e.getRepresentationsByType("application/vnd.adobe.theo.document+dcx");return t&&1===t.length}))}},{key:"getPrimaryRenditionHref",value:function(){return this.getRenditionHrefFromGrid(0,!0)}},{key:"setCollaboration",value:function(e){this.collaborators=e}},{key:"getListOfCollaboratorNames",value:function(){return(this.collaborators||[]).map((function(e){return e.displayName||e.email}))}},{key:"_getCollabEntry",value:function(){var e=window.adobeIMS&&window.adobeIMS.getUserProfile()||{};return f()(this.collaborators||[],(function(t){return e.userId&&t.collaborator===e.userId}))}},{key:"getRole",value:function(){if(this.bookmark&&"collab"===this.bookmark.type&&this.bookmark.role)return this.bookmark.role;var e=this._getCollabEntry();return e?e.role:void 0}},{key:"hasTeamAcl",value:function(e){return!!this.acl[e]}},{key:"canOnlyBeEditedByXD",value:function(){return this._canOnlyBeEditedByXD}},{key:"canEdit",value:function(){return this.isTeam()?!!this.hasTeamAcl("write"):this.belongsToUser()||"editor"===this.getRole()}},{key:"canDelete",value:function(){return this.belongsToUser()||this.isTeam()&&this.hasTeamAcl("delete")}},{key:"_getCanReshare",value:function(){if(this.isTeam())return!0;var e=this._getCollabEntry();return!!e&&e.canShare}},{key:"canShare",value:function(){return this.belongsToUser()||this._getCanReshare()}},{key:"getStorageURL",value:function(){var e=y.a.ss.replace("-creativesdk","");return"https://".concat(e,"/id/").concat(this.urn)}}]),t}(b.a)},253:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var i=n(10),r=n.n(i),o=n(8),a=n.n(o),s=n(70),l=n.n(s),c=n(69),u=n.n(c),d=n(71),h=n.n(d),p=n(55),f=n.n(p),g=n(35),m=n.n(g),v=n(30),y=n.n(v),b=n(1),w=n.n(b),C=n(14),M=n.n(C),x=n(77),L=function(e){function t(e){var n;return r()(this,t),(n=l()(this,u()(t).call(this,e)))._links=e._links,n.library=e.library,n.id=e.id,n.type=e.type,n.version=e.version,n.relationship=e.relationship,n.path=e.path,n.isComponent=e.is_component,n.isPublic=e.is_public,n.isMocked=e.is_mocked,n.storageHref=e.storage_href,n.etag=e.etag,n.width=e.width,n.height=e.height,n.linkType=e.linktype,n.contentLength=e.content_length,n.stockData=e["adobestock#trackingdata"],n.sparkTrackingData=e.spark_tracking_data,n.brandUrn=n.sparkTrackingData?n.sparkTrackingData.brand_urn:void 0,n}return h()(t,e),a()(t,[{key:"getRenditionHref",value:function(e){return this.isMocked?this.storageHref:((t=this.getLink("rendition",{size:1e3}))||(t=this.getLink("primary")),t?this.getProxyRenditionHref(t,1e3):(t=(this.isPublic?"/image_assets/public/adobe-libraries/":"/image_assets/adobe-libraries/")+this.library.id+"/?asset_id="+this.id,this.type&&(t+="&size="+(e||1e3),-1===["image/jpg","image/jpeg","image/png"].indexOf(this.type)?t+="&mime="+encodeURIComponent("image/png"):t+="&mime="+encodeURIComponent(this.type)),t));var t}},{key:"toJSON",value:function(){var e={id:this.id,type:this.type,relationship:this.relationship,path:this.path};this.storageHref&&(e.storageHref=this.storageHref),this.etag&&(e.etag=this.etag),this.width&&(e.width=this.width),this.height&&(e.height=this.height),this.stockData&&(e.stockData=this.stockData);var t=this.getRenditionHref();return t&&(e.renditionHref=t),e}}]),t}(x.a);var k=function(e){function t(e){var n;return r()(this,t),(n=l()(this,u()(t).call(this,e)))._links=e._links,n.library=e.library,n.id=e.id,n.name=e.name,n.thumbnail=e.thumbnail?e.thumbnail.rendition:void 0,n.type=e.type,n.created_date=e.created_date?e.created_date:void 0,n.modified_date=e.modified_date?e.modified_date:void 0,n.description=e.details?e.details.description:void 0,n.setRepresentations(e.representations||[]),n}return h()(t,e),a()(t,[{key:"setRepresentations",value:function(e){var t=this;this.representations=e.map((function(e){return new L(y()(e,{library:t.library}))}))}},{key:"getTemplateDcxRepresentation",value:function(){return m()(this.representations,(function(e){return"application/vnd.adobe.theo.document+dcx"===e.type||"application/vnd.adobe.theo.document+dcxucf"===e.type}))}},{key:"getRepresentationsByType",value:function(e){return e instanceof RegExp?f()(this.representations,(function(t){return-1!==t.type.search(e)})):f()(this.representations,(function(t){return t.type===e}))}},{key:"getComponentRepresentation",value:function(){return m()(this.representations,(function(e){return e.isComponent}))}},{key:"getDateString",value:function(e){var t=60*(new Date).getTimezoneOffset()*1e3-252e5,n=new Date(e-t),i=n.toLocaleDateString(),r=n.getHours(),o=r>12;r=o?r-12:r;var a=n.getMinutes(),s=M.a.getString("timeformat-abbr-am"),l=M.a.getString("timeformat-abbr-pm");return"".concat(i,", ").concat(r,":").concat(a).concat(o?l:s)}},{key:"getPrimaryRepresentation",value:function(){if(!this.primaryRepresentation){var e=f()(this.representations,(function(e){return"primary"===e.relationship}));this.primaryRepresentation=e&&e.length>0?e[0]:void 0}return this.primaryRepresentation}},{key:"getPrimaryImageRepresentation",value:function(){return this.primaryImageRepresentation||(this.primaryImageRepresentation=this.getRepresentationsByType(/image/)[0]),this.primaryImageRepresentation}},{key:"getPrimaryImageRepresentationHref",value:function(){var e=this.getPrimaryImageRepresentation();return e||(e=this.representations&&this.representations.length>0?this.representations[0]:void 0),e?e.getRenditionHref():void 0}},{key:"getThumbnailHref",value:function(){if(this.thumbnail)return this.getProxyRenditionHref(this.thumbnail,1e3)}},{key:"loadPrimaryImageRepresentationHref",value:function(){var e=w.a.defer(),t=this.getPrimaryImageRepresentationHref();if(t){var n=new Image;n.onload=function(){e.resolve()},n.onerror=function(t){e.reject(t)},n.src=t}else e.resolve();return e.promise}},{key:"getPrimaryImageRepresentationType",value:function(){var e=this.getPrimaryImageRepresentation();return e?e.type:"unknown"}},{key:"getRenditionHref",value:function(){return this.getLink("rendition")}},{key:"toJSON",value:function(){return{id:this.id,name:this.name,type:this.type,created:this.created_date,modified:this.modified_date,representations:this.representations}}},{key:"addRepresentationWithMetadata",value:function(e){var t=new L(e);return this.representations.push(t),t}},{key:"size",get:function(){var e=this.getComponentRepresentation();if(e){var t=e.contentLength;if(void 0!==t)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=M.a.getString("file-size-units-bytes"),i=M.a.getString("file-size-units-kilobytes"),r=M.a.getString("file-size-units-megabytes"),o=M.a.getString("file-size-units-gigabytes"),a=M.a.getString("file-size-units-terabytes"),s=M.a.getString("file-size-units-petabytes"),l=M.a.getString("file-size-units-exabytes"),c=M.a.getString("file-size-units-zetabytes"),u=M.a.getString("file-size-units-yottabytes");if(0===e)return"0 Bytes";var d=t<0?0:t,h=[n,i,r,o,a,s,l,c,u],p=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,p)).toFixed(d))+" "+h[p]}(t,1)}}},{key:"createdString",get:function(){return this.getDateString(this.created_date)}},{key:"modifiedString",get:function(){return this.getDateString(this.modified_date)}}]),t}(x.a)},2700:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6),n(5),n(11),n(36),n(385),n(750),n(16),n(47),n(23),n(3408),n(3409),n(3410),n(1051),n(915),n(166),n(797),n(87),n(1050),n(123)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,y,b,w,C){"use strict";var M=new r.default({color:"#0000ff",name:"authoring-context"}),x=["is-body-font","is-body-font-italic","is-body-font-bold","is-body-font-bold-italic"],L={"is-body-font":"Regular","is-body-font-italic":"Italic","is-body-font-bold":"Bold","is-body-font-bold-italic":"Bold Italic"};return i.Model.extend({CURRENT_AC_VERSION:2,CUSTOM_FONTS_AC_VERSION:3,COLLABORATION_AC_VERSION:4,CURRENT_FONT_METRICS_VERSION:1,initialize:function(e){this.collaborators=null,this._isDefault=e||!1},getACVersion:function(){return d.hasFeature("enable-custom-fonts")&&(this.CURRENT_AC_VERSION=this.CUSTOM_FONTS_AC_VERSION),this.CURRENT_AC_VERSION},setCollaboration:function(e){this.collaborators=e},getListOfCollaboratorNames:function(){return(this.collaborators||[]).map((function(e){return e.displayName||e.email}))},_getCanReshare:function(){var e=this._getCollabEntry();return!!e&&e.canShare},canShare:function(){return this.belongsToUser()||this._getCanReshare()},isSharedWithUser:function(){return"INCOMING"===this.composite.getCollaboration()},upgradeVersionForCollaboration:function(){return this.composite.saveChanges(function(e){return e.getValue("ac#version")<this.COLLABORATION_AC_VERSION&&e.setValue("ac#version",this.COLLABORATION_AC_VERSION),this}.bind(this),!0)},getTypeForAnalytics:function(){return this.isSharedWithUser()?"brandType:shared":"brandType:personal"},hasLegacyDefaultFlag:function(){return this.composite.getDCXRoot().getValue("ac#default")},isDefault:function(){return this._isDefault},getId:function(){return this.composite.getDCXComposite().id},getURN:function(){return this.composite.getDCXComposite().assetId},belongsToUser:function(){return this.composite.belongsToUser()},forcePull:function(){return this.syncGroup.getComposite(this.composite.get("id"),void 0,!0)},getCollaborationHref:function(){return"assets/"+this.composite.get("syncGroupName")+"/"+this.composite.get("id")},setComposite:function(e){this.composite=e},getComposite:function(){return this.composite},getType:function(){return this.composite.getDCXRoot().getValue("ac#type")||"brand-kit"},getVersion:function(){return this.composite.get("ac#version")},restrictedAccess:function(){return this.activated()&&!d.hasFeature("entitle-brand-kit")},activate:function(){this.composite.getDCXRoot().setValue("ac#activated",!0)},activated:function(){return!!this.composite.getDCXRoot().getValue("ac#activated")},deactivate:function(){this.composite.getDCXRoot().setValue("ac#activated",!1)},hasBeenEntitled:function(){return!!this.composite.getDCXRoot().getValue("ac#has-been-entitled")},recordEntitlmentIfInterested:function(){return!(this.hasBeenEntitled()||!d.hasFeature("entitle-brand-kit"))&&(this.composite.getDCXRoot().setValue("ac#activated",!0),!0)},getNameUI:function(e){e=e||30;var t,n=this.getName();if(n.length>e)for(t=n.split(" ");t.length&&n.length>e;)t.pop(),n=t.join(" ")+"...";return n},getDefaultName:function(){var e=window.adobeIMS.getUserProfile().first_name||"";return e?e+"'s Authoring Context":"My Authoring Context"},getName:function(){return this.composite.get("name")||this.getDefaultName()},setName:function(e,t){if(t){var i=this.composite.getDCXRoot();return this.composite.set("name",e),i.setValue("name",e),n.resolve()}return this.composite.saveChanges((function(t){t.setValue("name",e)}))},save:function(e){return this.composite.saveChanges(function(e){return e.setValue("ac#version",this.CURRENT_AC_VERSION),this}.bind(this),e)},getAssetsWithRole:function(e,n){return this.composite.acquireNestedChildren(e,!0).then(function(e){return e=t.filter(e||[],function(e){return this.hasRole(e,n)}.bind(this))}.bind(this))},getAssetWithUniqueRole:function(e,t){return this.getAssetsWithRole(e,t).then((function(e){return e[0]}))},hasRole:function(e,n){e.getValue("ac#roles");return t.includes(e.getValue("ac#roles")||[],n)},removeRole:function(e,n){var i=e.getValue("ac#roles");i&&(i=t.without(i,n),e.setValue("ac#roles",i))},addRole:function(e,n){if("string"==typeof n&&(n=n&&n.replace(/^\s*/,"").replace(/\s*$/,""))){var i=e.getValue("ac#roles")||[];t.includes(i,n)||(i.push(n),e.setValue("ac#roles",i))}},setUniqueRoles:function(e,i,r,o){return this.composite.acquireNestedChildren(e,!0).then(function(e){return e=e||[],t.each(e,function(e){t.each(r,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(r,function(e){this.addRole(i,e)}.bind(this)),o?n.resolve():this.composite.saveChanges(function(e){}.bind(this))}.bind(this))},setUniqueRole:function(e,t,n){return this.setUniqueRoles(e,t,[n])},setUniqueRolesSync:function(e,n,i){var r=this.composite.acquireNestedChildrenSync(e);r=r||[],t.each(r,function(e){t.each(i,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(i,function(e){this.addRole(n,e)}.bind(this))},createTheme:function(e,t,i,r){return this.composite.acquireNestedMap("themes",!0).then(function(o){var a=this.composite.addChildPath(void 0,void 0,o);a.setValue("type","application/vnd.adobe.adobespark.theme+json"),a.setValue("ac#format",e),a.setValue("ac#created",(new Date).toISOString());var s=n.resolve(),l=t(a,this);return l&&l.then&&"function"==typeof l.then&&(s=l),s.then(function(){return this.updateThemeThumbnail(a,a.getValue("theme#data"),i)}.bind(this)).then(function(){return r?a:this.composite.saveChanges((function(){})).then((function(){return a}))}.bind(this))}.bind(this))},updateThemeThumbnail:function(e,n,i){var r=document.createElement("canvas");r.width=520,r.height=280;var o=i(r.getContext("2d"),e),a=this.composite.getDCXComposite().current,l=t.find(a.getComponentsOf(e),(function(e){return"rendition"===e.relationship})),c=this,u=function(){var t=s(r.toDataURL("image/jpeg"));return c.composite.pushComponentWithRetry({name:"thumbnail.jpg",path:"thumbnail",absolutePath:"/themes/"+e.id+"/thumbnail",parent:e,relationship:"rendition",type:"image/jpeg",file:t,isUpdate:!!l})};return o&&o.then&&"function"==typeof o.then?o.then(u):u()},updateThemeThumbnails:function(e){return n.all(t.map(e,function(e){var t=e.theme,n=e.themeController;if(n.generateThemeRendition&&"function"==typeof n.generateThemeRendition)return this.updateThemeThumbnail(t,t.getValue("theme#data"),n.generateThemeRendition.bind(n))}.bind(this)))},getThemeById:function(e){return this.composite.getChildWithMap("themes."+e)},getThemeThumbnailHrefAsync:function(e,i){var r=this.composite.getDCXComposite().current,o=t.find(r.getComponentsOf(e),(function(e){return"rendition"===e.relationship}));return o?this.composite.getImageComponentHref(o,i||500):n.resolve()},getFormatThemes:function(e){return this.composite.acquireNestedChildren("themes",!0).then(function(n){return n=t.filter(n||[],function(t){return t.getValue("ac#format")===e}.bind(this))}.bind(this))},duplicateTheme:function(e,t){var i=n.defer();return this.composite.acquireNestedMap("themes",!0).then(function(n){var i,r=n._owner,o=a.AdobeDCXUtil.generateUuid(),s=e.id;return e._data.id=o,e._data.path=o,i=r.copyChild(e,n,void 0,o,o),e._data.id=s,e._data.path=s,t?i:this.composite.saveChanges((function(e){})).then(function(){return i}.bind(this))}.bind(this)).then(function(e){i.resolve(e)}.bind(this)),i.promise},removeTheme:function(e,t){if(this.composite.removeChild(e),!t)return this.composite.saveChanges((function(e){}))},deleteNamedImageAsset:function(e,t){var n=this.composite.getDCXComposite().current,i=n.getComponentWithAbsolutePath("/"+t+"/"+e.getValue("path")+"/image");return i&&n.removeComponent(i),this.composite.removeChild(e),this.save()},_processImageAsset:function(e,t,i,r,o,a){var s=this.composite.getDCXRoot(),l=this.composite.getDCXComposite().current.getComponentWithAbsolutePath("/"+t+"/"+e+"/image");return this.composite.acquireNestedMap(t+"."+e,!0).then(function(e){return e.setValue("type","application/vnd.adobe.element.image+dcx"),e.setValue("ac#application","spark-web"),this.addRole(e,i),(r&&r.length?this.setUniqueRoles(t,e,r,a):n.resolve()).then(function(){return this.composite.pushComponentWithRetry(o(e,!!l)).then(function(){return a?(s.setValue("ac#version",this.CURRENT_AC_VERSION),e):this.composite.saveChanges(function(e){e.setValue("ac#version",this.CURRENT_AC_VERSION)}.bind(this)).then((function(){return e}))}.bind(this))}.bind(this))}.bind(this))},uploadImageAsset:function(e,t,i,r,o,a,l){var c,u=document.createElement("canvas"),d=u.getContext("2d");if(a){var h=n.defer(),p=new Image;p.onload=function(){var e=p.width,t=p.height,n=e/t;n>1&&e>a?t=1/n*(e=a):t>a&&(e=n*(t=a)),u.width=e,u.height=t,d.drawImage(p,0,0,e,t);var i=s(u.toDataURL("image/png"));h.resolve(i)},p.src=URL.createObjectURL(i),c=h.promise}else c=n.resolve(i);return c.then(function(n){return this._processImageAsset(e,t,r,o,function(i,r){var o={type:n.type,isUpdate:r,parent:i,relationship:"primary",file:n};return r?o.absolutePath="/"+t+"/"+e+"/image":o.path="image",o}.bind(this),l)}.bind(this))},updateImageAsset:function(e,t,n,i,r,o,a){return this._processImageAsset(e,t,o,a,function(o,a){var s={type:i||"image/jpg",path:"image",isUpdate:a,parent:o,relationship:"primary",copyFrom:{source:r,assetId:n}};return a?s.absolutePath="/"+t+"/"+e+"/image":s.path="image",s}.bind(this))},getMappedImageAsset:function(e,t,i){var r=this.composite.getChildWithMap(e);return r?this.composite.getImageComponentHref(r,t,i):n.resolve(null)},hrefForImage:function(e,t,n,i){return this.getMappedImageAsset(e+"."+t.getValue("path")+".!image",n,i)},_getCollabEntry:function(){var e=window.adobeIMS&&window.adobeIMS.getUserProfile()||{};return t.find(this.collaborators||[],(function(t){return e.userId&&t.id===e.userId}))},delete:function(){var e=this.getURN();return C.load().then(function(t){return this.composite.delete().then(function(){return t.SparkStorageLoader.flushLocalAuthoringContext(e)}.bind(this))}.bind(this))},getCCStorageURL:function(){return"https://"+window.marvel.settings.ss.replace(/-creativesdk/,"")+"/assets/"+this.composite.get("syncGroupName")+"/"+this.composite.get("id")},getColorsByRole:function(){return this.getColors().then((function(e){var n={};return t.each(e,(function(e){t.each(e.getRoles(),(function(t){n[t]=e}))})),n}))},getDerivedColors:function(e,i){return(e?n.resolve(e):this.getColorWithUniqueRole("base-color")).then(function(t){return e=t,this.getColors("derived-from-"+e.getId())}.bind(this)).then(function(n){n=t.sortBy(n,(function(e){return t.find(e.getRoles(),(function(e){return 0===e.search("shade-")})).replace(/^shade-/,"")}));var r=!1;return t.each(n,(function(t){if(t.hex()===e.hex()&&e.hasRole("base-color")&&!t.hasRole("base-color"))return r=!0,!1})),r?this.updateDerivedColors(e.hex()).then(function(){return this.getDerivedColors(void 0,i)}.bind(this)):t.filter(n,function(e){var n=!0;return t.each(i,(function(t){n&&(n=!e.hasRole(t))})),n}.bind(this))}.bind(this))},updateDerivedColors:function(e,i,r,o){var a,s=["base-color"],c=-1,u=l.hexToRgb(e),d=[],h=function(e,t,n){return this.addColorHexSync(t,[],n,["shade-"+e,"derived"])}.bind(this);return(i?this.getColors("derived-from-"+i.getId()):n.resolve([])).then(function(e){t.each(e,function(e){var n,i;t.each(e.getRoles(),(function(e){-1!=e.search("shade-")?n=e:-1!=e.search("derived-from-")&&(i=e)}));var r=e.getData();this.removeRole(r,i);var o=parseInt(n.replace(/^shade-/,""));e.hasRole("base-color")&&(c=o);for(var a=0,l=s.length;a<l;a++){var u=s[a];this.removeRole(r,u)}d[o]=e}.bind(this));var i,p=l.calcShints(u);t.each(p,function(e,t){var n=d[t];if(e.r===u.r&&e.g===u.g&&e.b===u.b){a=-1===c?n=h(t,l.rgbToHex(e)):n;for(var r=0,o=s.length;r<o;r++){var p=s[r];this.addRole(a.getData(),p)}i=t}n?n.setRGB(e):n=h(t,l.rgbToHex(e)),d[t]=n}.bind(this));var f,g=n.resolve();return o&&(f=i>3?i-2:i+2,g=n.all([this.setUniqueRoles("colors",d[1].getData(),["chrome-background-color","chrome-header-cta-background-color","chrome-footer-background-color"],r),this.setUniqueRoles("colors",d[f].getData(),["chrome-text-color"],r)])),t.each(d,function(e){e&&this.addRole(e.getData(),"derived-from-"+a.getId())}.bind(this)),r?g.then(function(){return{baseColor:a,shades:d}}.bind(this)):g.then(function(){return this.save().then(function(){return{baseColor:a,shades:d}}.bind(this))}.bind(this))}.bind(this))},removeDerivedColors:function(e){return this.composite.acquireNestedChildren("colors",!0).then(function(n){t.each(n,function(n){if(this.hasRole(n,"derived-from-"+e.getId())){var i=new p;i.setData(n),t.find(i.getRoles(),(function(e){return 0===e.indexOf("shade-")}))?this.removeColor(i,!0):console.warn("Unexpected no shade role",n.getRoles())}}.bind(this))}.bind(this))},getColorWithUniqueRole:function(e){return this.getAssetWithUniqueRole("colors",e).then(function(e){if(e){var t=new p;return t.setData(e),t}return null}.bind(this))},getColors:function(e,n){return this.composite.acquireNestedChildren("colors",!0).then(function(i){var r=[];return t.each(i,function(i){if(e&&!this.hasRole(i,e)||t.intersection(i.getValue("ac#roles"),n).length);else{var o=new p;o.setData(i),r.push(o)}}.bind(this)),r}.bind(this))},addColorHex:function(e,n,i,r){return this.composite.acquireNestedMap("colors",!0).then(function(o){var a=this.composite.addChildPath(void 0,void 0,o),s=new p;return s.setData(a),s.setHex(e),i?s.setName(i):s.generateName(),t.each(r||[],function(e){this.addRole(a,e)}.bind(this)),this.composite.saveChanges((function(){})).then(function(){return n&&n.length?this.setUniqueRoles("colors",a,n).then(function(){return s}.bind(this)):s}.bind(this))}.bind(this))},addColorHexSync:function(e,n,i,r){var o=this.composite.acquireNestedMapSync("colors"),a=this.composite.acquireNestedChildrenSync("colors"),s=this.composite.addChildPath(void 0,void 0,o),l=new p;return l.setData(s),l.setHex(e),i?l.setName(i):l.generateName(),t.each(r||[],function(e){this.addRole(s,e)}.bind(this)),t.each(a,function(e){t.each(n,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(n,function(e){this.addRole(s,e)}.bind(this)),l},removeColor:function(e,t){if(this.composite.removeChild(e.getData()),!t)return this.composite.saveChanges((function(e){}))},getFonts:function(e){return this.composite.acquireNestedChildren("fonts",!0).then(function(n){var i=[];return t.each(n,function(t){if(e&&!this.hasRole(t,e));else{var n=new f;n.setData(t),i.push(n)}}.bind(this)),i}.bind(this))},getFontWithUniqueRole:function(e){return d.hasFeature("enable-custom-fonts")?this.getFontWithRole(e):this.getAssetWithUniqueRole("fonts",e).then(function(e){if(e){var t=new f;return t.setData(e),t}return null}.bind(this))},addFontFace:function(e,t){var i=new g;return i.setAC(this),i.createFont(e,[t]),n.resolve(i)},addFontWithUniqueRoles:function(e,t,i,r){return this.composite.acquireNestedMap("fonts",!0).then(function(o){var a=this.composite.addChildPath(void 0,void 0,o),s=new f;a.setValue("type","application/vnd.adobe.element.font+dcx"),a.setValue("ac#application","spark-web"),s.setData(a),s.setName(e),s.setValue({source:t,lookupKey:e});var l=n.resolve();return i&&i.length&&(l=this.setUniqueRoles("fonts",a,i)),l.then(function(){if(!r)return this.composite.saveChanges((function(){}))}.bind(this)).then(function(){return s}.bind(this))}.bind(this))},addFont:function(e,i,r,o){return this.composite.acquireNestedMap("fonts",o).then(function(a){var s=this.composite.addChildPath(void 0,void 0,a),l=new f;s.setValue("type","application/vnd.adobe.element.font+dcx"),s.setValue("ac#application","spark-web"),l.setData(s),l.setName(e),l.setValue({source:i,lookupKey:e});n.resolve();return r&&t.each(r,function(e){this.addRole(s,e)}.bind(this)),o?l:this.save().then(function(){return l}.bind(this))}.bind(this))},addFauxFont:function(e,t,n,i,r,o){var a=this.composite.acquireNestedMapSync("all-fonts"),s=this.composite.addChildPath(void 0,void 0,a),l=new g;return s.setValue("type","application/vnd.adobe.element.font+dcx"),s.setValue("ac#application","spark-web"),l.setData(s),l.setName(e+" "+t),l.setValue({source:"faux-font",subgroupName:e,faceName:t,cssName:n,metrics:{metrics:{weight:i,style:r}}}),this.addRole(s,o),this.addRole(s,"custom"),l},findFauxFont:function(e,t,n,i){return this.getCustomFontSubgroup(e).find((function(e){return e.isFauxFont()&&e.fontStyle()==n&&e.fontWeight()==t}))},removeFont:function(e,t){return this.composite.removeChild(e.getData()),t?n.resolve():this.composite.saveChanges((function(e){}))},removeFontWithNode:function(e){return this.composite.removeChild(e),this.composite.saveChanges((function(e){}))},convertFontNodeToAuthoringContextFontFace:function(e){var t=new g;return t.setAC(this),t.setData(e),t},getAllFonts:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),i=[];return t.each(n,function(t){var n=new g;n.setAC(this),n.setData(t),e&&n.isFauxFont(),i.push(n)}.bind(this)),i},getFontById:function(e){var t=this.composite.getChildWithMap("all-fonts.[id="+e+"]");if(t){var n=new g;return n.setAC(this),n.setData(t),n}return null},getFontByLookupKey:function(e){var n=this.getAllFonts();return t.find(n,(function(t){return t.lookupKey()==e}))},getCustomFontByName:function(e,t){return this.composite.getChildWithMap(t+".[name="+e+"]")},getFontWithRole:function(e){return d.hasFeature("enable-custom-fonts")?this.getFontsWithRole(e)[0]:(console.warn("Illegalty, custom-font API without feature flag!"),this.getFontWithUniqueRole(e))},getFontsWithRole:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),i=[];return t.each(n,function(t){if(this.hasRole(t,e)){var n=new g;n.setAC(this),n.setData(t),i.push(n)}}.bind(this)),i},getFontWithRoles:function(e){return this.getFontsWithRoles(e)[0]},getFontsWithRoles:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),i=[];return t.each(n,function(n){var r=!1;if(t.each(e,function(e){if(this.hasRole(n,e))return r=!0,!1}.bind(this)),r){var o=new g;o.setAC(this),o.setData(n),i.push(o)}}.bind(this)),i},getFontSubgroups:function(e,n){var i=this.composite.acquireNestedChildrenSync("all-fonts"),r={};return t.each(i,function(t){var i=new g;i.setAC(this),i.setData(t),n&&i.isFauxFont()||(!e||i.isCustomFont()||i.isBodyFont())&&this._organizeBySubgroup(i,r)}.bind(this)),r},_organizeBySubgroup:function(e,t){var n=e.subgroupName(),i=t[n];i?i.push(e):t[n]=new m([e])},getCustomFontSubgroups:function(e,n){var i=this.getCustomFonts(n),r={};return t.each(i,function(t){e&&!t.isBodyFont()||this._organizeBySubgroup(t,r)}.bind(this)),r},getCustomFontSubgroup:function(e,n){var i,r=this.getCustomFonts(n);return t.each(r,function(t){t.subgroupName()==e&&(i?i.push(t):i=new m([t]))}.bind(this)),i},getFontSubgroup:function(e,n){var i,r=this.getAllFonts(n);return t.each(r,function(t){t.subgroupName()==e&&(i?i.push(t):i=new m([t]))}.bind(this)),i},guessCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e),i=this.getCustomBodyFontSet(e),r=new m([]);return t.each(x,function(e){var t=i.getFontWithRole(e),o=-1!=e.search(/bold/i)?700:400,a=-1!=e.search(/italic/i)?"italic":"normal";t||n.each(function(e){if(e.fontWeight()==o&&e.fontStyle()==a)return t=e,!1}.bind(this)),r.add(t)}.bind(this)),r},establishCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e),i=this.getCustomBodyFontSet(e),r=new m([]),o=n.getPropFromFirst("cssName");return t.each(x,function(t){var a=i.getFontWithRole(t),s=-1!=t.search(/bold/i)?700:400,l=-1!=t.search(/italic/i)?"italic":"normal";if(!a&&(n.each(function(e){if(e.fontWeight()==s&&e.fontStyle()==l)return(a=e).addRole(t),!1}.bind(this)),!a)){if("is-body-font"==t)throw new Error("Normal face was not found - cannot establish body font set without a normal face");this.addFauxFont(e,L[t],o,s,l,t)}r.add(a)}.bind(this)),r},getCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e);if(n&&n.length){var i=new m([]);n.at(0);return t.each(x,function(e){var t=n.getFontWithRole(e);t&&i.add(t,{role:e})}.bind(this)),i}},getFontCollectionWithRoles:function(e){var t=this.getFontsWithRoles(e);return new m(t)},generateFontRenditions:function(e){return v.ENABLE_UPLOADED_FONTS_RENDITIONS?n.allSettled([this.generateFontRendition(e,e.friendlyName(),"rendition"),this.generateFontRendition(e,e.faceName(),"face-rendition"),this.generateFontRendition(e,e.subgroupName(),"family-rendition")]):n.resolve()},generateFontRendition:function(e,i,r){var o=n.defer(),a=e.getData(),l=this.composite.getDCXComposite().current.getComponentsOf(a),c=t.find(l,(function(e){return e.name==r}));return e.loadFont().then(function(){var t=w.generateCanvas(e.cssName(),i,{weight:e.fontWeight(),style:e.fontStyle(),padding:2,fnNormal:function(t){return v.getFontNormalized(t,e.getMetrics())}}),n=s(t.toDataURL("image/png"));o.resolve(this.composite.pushComponentWithRetry({type:"image/png",path:r,isUpdate:!!c,parent:a,relationship:"rendition",file:n},"image/png"))}.bind(this)),o.promise},uploadCustomFontMetrics:function(e,t,i){i.category="Spark Client Generated";var r=this.composite.getChildWithMap(t+".[name="+e+"]");return r?(r.getValue("font#data").metrics=i,this.composite.saveChanges(function(e){e.setValue("ac#version",this.CURRENT_AC_VERSION)}.bind(this))):(console.warn("Error: no font wrapper defined in dcx for metrics"),n.reject(new Error("AuthoringContextCls::uploadCustomFontMetrics")))},createFontCollection:function(e){var n=new m;return t.each(e,(function(e){n.add(e)})),n},convertPostFaceToJSON:function(e){return v.convertPostFaceToJSON(e)},convertPostFaceToAC:function(e){return v.convertPostFaceToAC(e)},createOrUpdateFontFiles:function(e,i){var r=this.composite.getDCXComposite(),s=r.current,l=s.getComponentsOf(e),u=t.reduce(l,function(e,t){return e[t.getValue("name")]=t.getValue("id"),e}.bind(this),{}),h=n.defer(),p=function(n,i,r){if(n)return M.error("Upload failed with "+n.message,n),0===l.length?(M.error("Removing newly created font node"),this.removeFontWithNode(e).then((function(){h.reject(n)}))):h.reject(n);var o;if(!!t.find(Object.keys(u),(function(e){return!!u[e]}))){var a=r.absolutePath||"/"+r.path;o=s.getComponentWithAbsolutePath(a),o=s.updateComponentWithUploadResults(o,i)}else o=s.addComponentWithUploadResults(r.name,r.relationship,r.path,e,i)}.bind(this),f=new FormData;f.append("calculateSubsets",d.hasFeature("enable-custom-fonts-subsets")),f.append("compositeId",r.id),f.append("componentList",encodeURIComponent(JSON.stringify(u))),t.each(i,(function(e,t){e&&f.append("file"+t,e)}));var g=c.v4(),m={otf:!0,ttf:!0,woff:!0},v={method:"PUT",url:"/fonts",dataType:"json",data:f,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-Request-Id",g)},success:function(e,n,i){if(200!=i.status&&201!=i.status)return p(new Error("Upload came back with "+i.status+" "+i.responseText));var o=i.responseJSON;t.each(o,(function(e){var t=a.createUploadResults(r.id,r.assetId),n=a.createUploadRecord(e.componentId,e.etag,e.latestVersion,e.md5,e.size,e.type);t.addUploadRecord(e.componentId,n),p(null,t,{name:e.ext,path:e.ext,relationship:m[e.ext]?"primary":"subset"})})),h.resolve()},error:function(e){return p(e)}};return o.ajax(v),h.promise},createOrUpdateCustomFont:function(e,n,i,r){this.composite.getDCXComposite().current;var o,a,s=this.composite.getChildWithMap("all-fonts.[name="+name+"]");if(!s){o=this.composite.acquireNestedMapSync("all-fonts"),(s=this.composite.addChildPath(void 0,void 0,o)).setValue("name",e+" "+n),s.setValue("type","application/vnd.adobe.element.custom-font+dcx"),s.setValue("ac#application","spark-web"),this.addRole(s,"custom"),a={source:"user-uploaded",subgroupName:e,faceName:n,cssName:i};var l=s.getValue("font#data");s.setValue("font#data",t.extend({},l,a,r||{}))}var c=new g;return c.setAC(this),c.setData(s),c},acquireSparkFont:function(e){var t=this.getFontByLookupKey(e);if(t)return t;var n=this.composite.acquireNestedMapSync("all-fonts"),i=this.composite.addChildPath(void 0,void 0,n);i.setValue("type","application/vnd.adobe.element.font+dcx"),i.setValue("ac#application","spark-web"),i.setValue("font#data",{source:"spark-provided",lookupKey:e});var r=new g;return r.setAC(this),r.setData(i),r},_hrefForCustomFontRenditionAsync:function(e,i){n.defer();var r=this.composite.getDCXComposite().current.getComponentsOf(e),o=t.find(r,(function(e){return"rendition"===e.getValue("rel")&&(!i||e.getValue("path")===i)}));if(o)return this.composite._privateGetComponentHref(o).then((function(e){return e.indexOf("/id/")>=0&&(e=e.replace(/\/id/,"/image_assets")),e}))},getSubsetIdsForCharacterList:function(e){var n={},i=[];return t.each(e,function(e){for(var t=0,r=h.length;t<r;t++){var o=h[t],a=parseInt(o.range[0],16),s=parseInt(o.range[1],16);if(e>=a&&e<=s&&!n[o.id]){n[o.id]=!0,i.push(o.id);break}}}.bind(this)),i},_hrefForCustomFontAsync:function(e,i){var r;if("string"==typeof e)r=this.composite.getChildWithMap("all-fonts.[name="+e+"].!"+i);else{var o=e,a=this.composite.getDCXComposite().current.getComponentsOf(o);if(i)r=t.find(a,(function(e){return e.path==i}));else{var s,l,c=t.filter(a,(function(e){return"primary"==e.getValue("rel")}));if(1==c.length)r=c[0];else t.each(c,(function(e){"otf"==e.name&&(s=e),"ttf"==e.name&&(l=e)})),r=s||l||void 0}}return r?this.composite._privateGetComponentHref(r).then((function(e){0===e.search(/\/id/)?e=e.replace(/\/id/,"/image_assets"):0===e.search(/id/)&&(e=e.replace(/id/,"/image_assets"));var t=r.name;return t&&(e+="&mime=application/"+t),e})):n.resolve(null)},getComponentForCustomFont:function(e,n){var i,r=this.composite.getDCXComposite().current,o=e.getData(),a=r.getComponentsOf(o);if(n)i=t.find(a,(function(e){return e.path==n}));else{var s,l,c=t.filter(a,(function(e){return"primary"==e.getValue("rel")}));if(1==c.length)i=c[0];else t.each(c,(function(e){"otf"==e.name&&(s=e),"ttf"==e.name&&(l=e),"ttf"==e.name&&(l=e)})),i=s||l||void 0}return i},getCustomFonts:function(e){var n=this.getFontsWithRole("custom");return e?t.filter(n,(function(e){return!e.isFauxFont()})):n},getDataPageInfo:function(e,t){var n,i=this.composite.getChildWithMap(t);return i&&(n=i.getValue(t+"#data"))?e?n[e]:n:e?"":{}},setDataPageInfo:function(e,i,r,o){var a;return"object"==typeof e?a=e:(a={})[e]=i,this.composite.acquireNestedMap(r,!0).then(function(e){e.setValue("ac#application","spark-web"),e.setValue("type","application/vnd.adobe.spark."+r+"+dcx");var i=e.getValue(r+"#data")||{};return t.each(a,(function(e,t){i[t]=e})),e.setValue(r+"#data",i),o?n.resolve():this.composite.saveChanges(function(e){}.bind(this))}.bind(this))},getViewerPageInfo:function(e){return this.getDataPageInfo(e,"viewerpage")},setViewerPageInfo:function(e,t,n){return this.setDataPageInfo(e,t,"viewerpage",n)},getOutroInfo:function(e){return this.getDataPageInfo(e,"videooutro")},setOutroInfo:function(e,t,n){return this.setDataPageInfo(e,t,"videooutro",n)},fullUpdate:function(){},isFullUpdateNeeded:function(){},validateAndRepair:function(){return n.resolve(this)},upgrade:function(){var e=this.composite.getDCXRoot().getValue("ac#version");if(this.getACVersion(),e>this.CURRENT_AC_VERSION&&window.marvel.logger.traceflow("brand-kit","[BrandKit] found newer brand (v"+e+" > v"+this.CURRENT_AC_VERSION+")."),e<this.CURRENT_AC_VERSION&&d.hasFeature("enable-custom-fonts")){var t=this.composite.getChildWithMap("fonts"),n=this.composite.getChildWithMap("all-fonts");n&&t&&(this.composite.removeChild(n),n=null),t?t.setValue("path","all-fonts"):n||this.composite.acquireNestedMapSync("all-fonts"),this.composite.getDCXRoot().setValue("ac#version",this.CURRENT_AC_VERSION)}return this.validateAndRepair()},getThemeletById:function(e){var n=this.composite.acquireNestedChildrenSync("themes"),i=null;return t.each(n,(function(t,n){t.id===e&&(i=t)})),i},getThemeUpdateInterface:function(){var e=this,i=d.hasFeature("enable-brand-kit-in-progress"),r={};return n.all(t.map(u.apps,(function(t){var n=t.typeName;if(i||d.hasFeature("enable-brand-kit-"+n+"-themes"))return t.getThemeController(e).then((function(e){r[n]=e}))}))).then(function(){var o={themeControllers:r,forEachTheme:function(n){var o=e.composite.acquireNestedChildrenSync("themes"),a=[];return t.each(o,(function(e,t){var o=e.getValue("ac#format");if(i||d.hasFeature("enable-brand-kit-"+o+"-themes")){var s=r[o];a.push(n(e,s))}})),a},getThemesUsingAssets:function(e){var t=[];return o.forEachTheme((function(n,i){if(i.areAssetsUsed&&"function"==typeof i.areAssetsUsed)try{i.areAssetsUsed(n,e)&&t.push({theme:n,themeController:i})}catch(r){console.warn("ignoring exception from format themeController - please fix themeController.areAssetsUsed(theme, assets).",i)}})),t},updateThemesWithAssets:function(e,i){if(i)return n.all(t.map(e,(function(e){var t=e.theme,n=e.themeController;if(n.updateLinkedAssets&&"function"==typeof n.updateLinkedAssets)return n.updateLinkedAssets(t,i)})))},relinkThemesWithAssets:function(e,i){var r;if(i)return r=i[0]&&!t.isArray(i[0])?t.map(i,(function(e){return[e.old,e.new]})):t.extend([],i),n.all(t.map(e,(function(e){var t=e.theme,n=e.themeController;return n.relinkAssetsWithRoles&&"function"==typeof n.relinkAssetsWithRoles?n.relinkAssetsWithRoles(t,i):n.relinkAssets&&"function"==typeof n.relinkAssets?n.relinkAssets(t,r):void 0})))}};return o}.bind(this))}})}.apply(t,i))||(e.exports=r)},288:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjIxMTAgLTE0MjggMjAgMjAiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiNmZmY7fS5ie2ZpbGw6IzM1NDE0Yzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQyNSAtMTg3MSkiPjxjaXJjbGUgY2xhc3M9ImEiIGN4PSIxMCIgY3k9IjEwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjg1IDQ0MykiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTU4MC42LDE0Ny4xbC0yLjctMi43LDIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLTEuMWgwbC0yLjcsMi43LTIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLDEuMWgwbDIuNywyLjctMi43LDIuN2EuNzc4Ljc3OCwwLDAsMCwxLjEsMS4xaDBsMi43LTIuNywyLjcsMi43YS43NzguNzc4LDAsMCwwLDEuMS0xLjFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMjI1IDMwOC42MjUpIi8+PC9nPjwvc3ZnPg=="},3408:function(e){e.exports=JSON.parse('[{"name":"Control characters","id":"control-characters","range":["0000","001F"]},{"name":"Basic Latin","id":"basic-latin","range":["0020","007F"]},{"name":"Latin-1 Supplement","id":"latin-1-supplement","range":["0080","00FF"]},{"name":"Latin Extended-A","id":"latin-extended-a","range":["0100","017F"]},{"name":"Latin Extended-B","id":"latin-extended-b","range":["0180","024F"]},{"name":"IPA Extensions","id":"ipa-extensions","range":["0250","02AF"]},{"name":"Spacing Modifier Letters","id":"spacing-modifier-letters","range":["02B0","02FF"]},{"name":"Combining Diacritical Marks","id":"combining-diacritical-marks","range":["0300","036F"]},{"name":"Greek and Coptic","id":"greek-and-coptic","range":["0370","03FF"]},{"name":"Cyrillic","id":"cyrillic","range":["0400","04FF"]},{"name":"Cyrillic Supplement","id":"cyrillic-supplement","range":["0500","052F"]},{"name":"Armenian","id":"armenian","range":["0530","058F"]},{"name":"Hebrew","id":"hebrew","range":["0590","05FF"]},{"name":"Arabic","id":"arabic","range":["0600","06FF"]},{"name":"Syriac","id":"syriac","range":["0700","074F"]},{"name":"Arabic Supplement","id":"arabic-supplement","range":["0750","077F"]},{"name":"Thaana","id":"thaana","range":["0780","07BF"]},{"name":"NKo","id":"nko","range":["07C0","07FF"]},{"name":"Samaritan","id":"samaritan","range":["0800","083F"]},{"name":"Mandaic","id":"mandaic","range":["0840","085F"]},{"name":"Syriac Supplement","id":"syriac-supplement","range":["0860","086F"]},{"name":"Arabic Extended-A","id":"arabic-extended-a","range":["08A0","08FF"]},{"name":"Devanagari","id":"devanagari","range":["0900","097F"]},{"name":"Bengali","id":"bengali","range":["0980","09FF"]},{"name":"Gurmukhi","id":"gurmukhi","range":["0A00","0A7F"]},{"name":"Gujarati","id":"gujarati","range":["0A80","0AFF"]},{"name":"Oriya","id":"oriya","range":["0B00","0B7F"]},{"name":"Tamil","id":"tamil","range":["0B80","0BFF"]},{"name":"Telugu","id":"telugu","range":["0C00","0C7F"]},{"name":"Kannada","id":"kannada","range":["0C80","0CFF"]},{"name":"Malayalam","id":"malayalam","range":["0D00","0D7F"]},{"name":"Sinhala","id":"sinhala","range":["0D80","0DFF"]},{"name":"Thai","id":"thai","range":["0E00","0E7F"]},{"name":"Lao","id":"lao","range":["0E80","0EFF"]},{"name":"Tibetan","id":"tibetan","range":["0F00","0FFF"]},{"name":"Myanmar","id":"myanmar","range":["1000","109F"]},{"name":"Georgian","id":"georgian","range":["10A0","10FF"]},{"name":"Hangul Jamo","id":"hangul-jamo","range":["1100","11FF"]},{"name":"Ethiopic","id":"ethiopic","range":["1200","137F"]},{"name":"Ethiopic Supplement","id":"ethiopic-supplement","range":["1380","139F"]},{"name":"Cherokee","id":"cherokee","range":["13A0","13FF"]},{"name":"Unified Canadian Aboriginal Syllabics","id":"unified-canadian-aboriginal-syllabics","range":["1400","167F"]},{"name":"Ogham","id":"ogham","range":["1680","169F"]},{"name":"Runic","id":"runic","range":["16A0","16FF"]},{"name":"Tagalog","id":"tagalog","range":["1700","171F"]},{"name":"Hanunoo","id":"hanunoo","range":["1720","173F"]},{"name":"Buhid","id":"buhid","range":["1740","175F"]},{"name":"Tagbanwa","id":"tagbanwa","range":["1760","177F"]},{"name":"Khmer","id":"khmer","range":["1780","17FF"]},{"name":"Mongolian","id":"mongolian","range":["1800","18AF"]},{"name":"Unified Canadian Aboriginal Syllabics Extended","id":"unified-canadian-aboriginal-syllabics-extended","range":["18B0","18FF"]},{"name":"Limbu","id":"limbu","range":["1900","194F"]},{"name":"Tai Le","id":"tai-le","range":["1950","197F"]},{"name":"New Tai Lue","id":"new-tai-lue","range":["1980","19DF"]},{"name":"Khmer Symbols","id":"khmer-symbols","range":["19E0","19FF"]},{"name":"Buginese","id":"buginese","range":["1A00","1A1F"]},{"name":"Tai Tham","id":"tai-tham","range":["1A20","1AAF"]},{"name":"Combining Diacritical Marks Extended","id":"combining-diacritical-marks-extended","range":["1AB0","1AFF"]},{"name":"Balinese","id":"balinese","range":["1B00","1B7F"]},{"name":"Sundanese","id":"sundanese","range":["1B80","1BBF"]},{"name":"Batak","id":"batak","range":["1BC0","1BFF"]},{"name":"Lepcha","id":"lepcha","range":["1C00","1C4F"]},{"name":"Ol Chiki","id":"ol-chiki","range":["1C50","1C7F"]},{"name":"Cyrillic Extended C","id":"cyrillic-extended-c","range":["1C80","1C8F"]},{"name":"Sundanese Supplement","id":"sundanese-supplement","range":["1CC0","1CCF"]},{"name":"Vedic Extensions","id":"vedic-extensions","range":["1CD0","1CFF"]},{"name":"Phonetic Extensions","id":"phonetic-extensions","range":["1D00","1D7F"]},{"name":"Phonetic Extensions Supplement","id":"phonetic-extensions-supplement","range":["1D80","1DBF"]},{"name":"Combining Diacritical Marks Supplement","id":"combining-diacritical-marks-supplement","range":["1DC0","1DFF"]},{"name":"Latin Extended Additional","id":"latin-extended-additional","range":["1E00","1EFF"]},{"name":"Greek Extended","id":"greek-extended","range":["1F00","1FFF"]},{"name":"General Punctuation","id":"general-punctuation","range":["2000","206F"]},{"name":"Superscripts and Subscripts","id":"superscripts-and-subscripts","range":["2070","209F"]},{"name":"Currency Symbols","id":"currency-symbols","range":["20A0","20CF"]},{"name":"Combining Diacritical Marks for Symbols","id":"combining-diacritical-marks-for-symbols","range":["20D0","20FF"]},{"name":"Letterlike Symbols","id":"letterlike-symbols","range":["2100","214F"]},{"name":"Number Forms","id":"number-forms","range":["2150","218F"]},{"name":"Arrows","id":"arrows","range":["2190","21FF"]},{"name":"Mathematical Operators","id":"mathematical-operators","range":["2200","22FF"]},{"name":"Miscellaneous Technical","id":"miscellaneous-technical","range":["2300","23FF"]},{"name":"Control Pictures","id":"control-pictures","range":["2400","243F"]},{"name":"Optical Character Recognition","id":"optical-character-recognition","range":["2440","245F"]},{"name":"Enclosed Alphanumerics","id":"enclosed-alphanumerics","range":["2460","24FF"]},{"name":"Box Drawing","id":"box-drawing","range":["2500","257F"]},{"name":"Block Elements","id":"block-elements","range":["2580","259F"]},{"name":"Geometric Shapes","id":"geometric-shapes","range":["25A0","25FF"]},{"name":"Miscellaneous Symbols","id":"miscellaneous-symbols","range":["2600","26FF"]},{"name":"Dingbats","id":"dingbats","range":["2700","27BF"]},{"name":"Miscellaneous Mathematical Symbols-A","id":"miscellaneous-mathematical-symbols-a","range":["27C0","27EF"]},{"name":"Supplemental Arrows-A","id":"supplemental-arrows-a","range":["27F0","27FF"]},{"name":"Braille Patterns","id":"braille-patterns","range":["2800","28FF"]},{"name":"Supplemental Arrows-B","id":"supplemental-arrows-b","range":["2900","297F"]},{"name":"Miscellaneous Mathematical Symbols-B","id":"miscellaneous-mathematical-symbols-b","range":["2980","29FF"]},{"name":"Supplemental Mathematical Operators","id":"supplemental-mathematical-operators","range":["2A00","2AFF"]},{"name":"Miscellaneous Symbols and Arrows","id":"miscellaneous-symbols-and-arrows","range":["2B00","2BFF"]},{"name":"Glagolitic","id":"glagolitic","range":["2C00","2C5F"]},{"name":"Latin Extended-C","id":"latin-extended-c","range":["2C60","2C7F"]},{"name":"Coptic","id":"coptic","range":["2C80","2CFF"]},{"name":"Georgian Supplement","id":"georgian-supplement","range":["2D00","2D2F"]},{"name":"Tifinagh","id":"tifinagh","range":["2D30","2D7F"]},{"name":"Ethiopic Extended","id":"ethiopic-extended","range":["2D80","2DDF"]},{"name":"Cyrillic Extended-A","id":"cyrillic-extended-a","range":["2DE0","2DFF"]},{"name":"Supplemental Punctuation","id":"supplemental-punctuation","range":["2E00","2E7F"]},{"name":"CJK Radicals Supplement","id":"cjk-radicals-supplement","range":["2E80","2EFF"]},{"name":"Kangxi Radicals","id":"kangxi-radicals","range":["2F00","2FDF"]},{"name":"Ideographic Description Characters","id":"ideographic-description-characters","range":["2FF0","2FFF"]},{"name":"CJK Symbols and Punctuation","id":"cjk-symbols-and-punctuation","range":["3000","303F"]},{"name":"Hiragana","id":"hiragana","range":["3040","309F"]},{"name":"Katakana","id":"katakana","range":["30A0","30FF"]},{"name":"Bopomofo","id":"bopomofo","range":["3100","312F"]},{"name":"Hangul Compatibility Jamo","id":"hangul-compatibility-jamo","range":["3130","318F"]},{"name":"Kanbun","id":"kanbun","range":["3190","319F"]},{"name":"Bopomofo Extended","id":"bopomofo-extended","range":["31A0","31BF"]},{"name":"CJK Strokes","id":"cjk-strokes","range":["31C0","31EF"]},{"name":"Katakana Phonetic Extensions","id":"katakana-phonetic-extensions","range":["31F0","31FF"]},{"name":"Enclosed CJK Letters and Months","id":"enclosed-cjk-letters-and-months","range":["3200","32FF"]},{"name":"CJK Compatibility","id":"cjk-compatibility","range":["3300","33FF"]},{"name":"CJK Unified Ideographs Extension A","id":"cjk-unified-ideographs-extension-a","range":["3400","4DBF"]},{"name":"Yijing Hexagram Symbols","id":"yijing-hexagram-symbols","range":["4DC0","4DFF"]},{"name":"CJK Unified Ideographs","id":"cjk-unified-ideographs","range":["4E00","9FFF"]},{"name":"Yi Syllables","id":"yi-syllables","range":["A000","A48F"]},{"name":"Yi Radicals","id":"yi-radicals","range":["A490","A4CF"]},{"name":"Lisu","id":"lisu","range":["A4D0","A4FF"]},{"name":"Vai","id":"vai","range":["A500","A63F"]},{"name":"Cyrillic Extended-B","id":"cyrillic-extended-b","range":["A640","A69F"]},{"name":"Bamum","id":"bamum","range":["A6A0","A6FF"]},{"name":"Modifier Tone Letters","id":"modifier-tone-letters","range":["A700","A71F"]},{"name":"Latin Extended-D","id":"latin-extended-d","range":["A720","A7FF"]},{"name":"Syloti Nagri","id":"syloti-nagri","range":["A800","A82F"]},{"name":"Common Indic Number Forms","id":"common-indic-number-forms","range":["A830","A83F"]},{"name":"Phags-pa","id":"phags-pa","range":["A840","A87F"]},{"name":"Saurashtra","id":"saurashtra","range":["A880","A8DF"]},{"name":"Devanagari Extended","id":"devanagari-extended","range":["A8E0","A8FF"]},{"name":"Kayah Li","id":"kayah-li","range":["A900","A92F"]},{"name":"Rejang","id":"rejang","range":["A930","A95F"]},{"name":"Hangul Jamo Extended-A","id":"hangul-jamo-extended-a","range":["A960","A97F"]},{"name":"Javanese","id":"javanese","range":["A980","A9DF"]},{"name":"Myanmar Extended-B","id":"myanmar-extended-b","range":["A9E0","A9FF"]},{"name":"Cham","id":"cham","range":["AA00","AA5F"]},{"name":"Myanmar Extended-A","id":"myanmar-extended-a","range":["AA60","AA7F"]},{"name":"Tai Viet","id":"tai-viet","range":["AA80","AADF"]},{"name":"Meetei Mayek Extensions","id":"meetei-mayek-extensions","range":["AAE0","AAFF"]},{"name":"Ethiopic Extended-A","id":"ethiopic-extended-a","range":["AB00","AB2F"]},{"name":"Latin Extended-E","id":"latin-extended-e","range":["AB30","AB6F"]},{"name":"Cherokee Supplement","id":"cherokee-supplement","range":["AB70","ABBF"]},{"name":"Meetei Mayek","id":"meetei-mayek","range":["ABC0","ABFF"]},{"name":"Hangul Syllables","id":"hangul-syllables","range":["AC00","D7AF"]},{"name":"Hangul Jamo Extended-B","id":"hangul-jamo-extended-b","range":["D7B0","D7FF"]},{"name":"High Surrogates","id":"high-surrogates","range":["D800","DB7F"]},{"name":"High Private Use Surrogates","id":"high-private-use-surrogates","range":["DB80","DBFF"]},{"name":"Low Surrogates","id":"low-surrogates","range":["DC00","DFFF"]},{"name":"Private Use Area","id":"private-use-area","range":["E000","F8FF"]},{"name":"CJK Compatibility Ideographs","id":"cjk-compatibility-ideographs","range":["F900","FAFF"]},{"name":"Alphabetic Presentation Forms","id":"alphabetic-presentation-forms","range":["FB00","FB4F"]},{"name":"Arabic Presentation Forms-A","id":"arabic-presentation-forms-a","range":["FB50","FDFF"]},{"name":"Variation Selectors","id":"variation-selectors","range":["FE00","FE0F"]},{"name":"Vertical Forms","id":"vertical-forms","range":["FE10","FE1F"]},{"name":"Combining Half Marks","id":"combining-half-marks","range":["FE20","FE2F"]},{"name":"CJK Compatibility Forms","id":"cjk-compatibility-forms","range":["FE30","FE4F"]},{"name":"Small Form Variants","id":"small-form-variants","range":["FE50","FE6F"]},{"name":"Arabic Presentation Forms-B","id":"arabic-presentation-forms-b","range":["FE70","FEFF"]},{"name":"Halfwidth and Fullwidth Forms","id":"halfwidth-and-fullwidth-forms","range":["FF00","FFEF"]},{"name":"Specials","id":"specials","range":["FFF0","FFFF"]},{"name":"Linear B Syllabary","id":"linear-b-syllabary","range":["10000","1007F"]},{"name":"Linear B Ideograms","id":"linear-b-ideograms","range":["10080","100FF"]},{"name":"Aegean Numbers","id":"aegean-numbers","range":["10100","1013F"]},{"name":"Ancient Greek Numbers","id":"ancient-greek-numbers","range":["10140","1018F"]},{"name":"Ancient Symbols","id":"ancient-symbols","range":["10190","101CF"]},{"name":"Phaistos Disc","id":"phaistos-disc","range":["101D0","101FF"]},{"name":"Lycian","id":"lycian","range":["10280","1029F"]},{"name":"Carian","id":"carian","range":["102A0","102DF"]},{"name":"Coptic Epact Numbers","id":"coptic-epact-numbers","range":["102E0","102FF"]},{"name":"Old Italic","id":"old-italic","range":["10300","1032F"]},{"name":"Gothic","id":"gothic","range":["10330","1034F"]},{"name":"Old Permic","id":"old-permic","range":["10350","1037F"]},{"name":"Ugaritic","id":"ugaritic","range":["10380","1039F"]},{"name":"Old Persian","id":"old-persian","range":["103A0","103DF"]},{"name":"Deseret","id":"deseret","range":["10400","1044F"]},{"name":"Shavian","id":"shavian","range":["10450","1047F"]},{"name":"Osmanya","id":"osmanya","range":["10480","104AF"]},{"name":"Osage","id":"osage","range":["104B0","104FF"]},{"name":"Elbasan","id":"elbasan","range":["10500","1052F"]},{"name":"Caucasian Albanian","id":"caucasian-albanian","range":["10530","1056F"]},{"name":"Linear A","id":"linear-a","range":["10600","1077F"]},{"name":"Cypriot Syllabary","id":"cypriot-syllabary","range":["10800","1083F"]},{"name":"Imperial Aramaic","id":"imperial-aramaic","range":["10840","1085F"]},{"name":"Palmyrene","id":"palmyrene","range":["10860","1087F"]},{"name":"Nabataean","id":"nabataean","range":["10880","108AF"]},{"name":"Hatran","id":"hatran","range":["108E0","108FF"]},{"name":"Phoenician","id":"phoenician","range":["10900","1091F"]},{"name":"Lydian","id":"lydian","range":["10920","1093F"]},{"name":"Meroitic Hieroglyphs","id":"meroitic-hieroglyphs","range":["10980","1099F"]},{"name":"Meroitic Cursive","id":"meroitic-cursive","range":["109A0","109FF"]},{"name":"Kharoshthi","id":"kharoshthi","range":["10A00","10A5F"]},{"name":"Old South Arabian","id":"old-south-arabian","range":["10A60","10A7F"]},{"name":"Old North Arabian","id":"old-north-arabian","range":["10A80","10A9F"]},{"name":"Manichaean","id":"manichaean","range":["10AC0","10AFF"]},{"name":"Avestan","id":"avestan","range":["10B00","10B3F"]},{"name":"Inscriptional Parthian","id":"inscriptional-parthian","range":["10B40","10B5F"]},{"name":"Inscriptional Pahlavi","id":"inscriptional-pahlavi","range":["10B60","10B7F"]},{"name":"Psalter Pahlavi","id":"psalter-pahlavi","range":["10B80","10BAF"]},{"name":"Old Turkic","id":"old-turkic","range":["10C00","10C4F"]},{"name":"Old Hungarian","id":"old-hungarian","range":["10C80","10CFF"]},{"name":"Rumi Numeral Symbols","id":"rumi-numeral-symbols","range":["10E60","10E7F"]},{"name":"Brahmi","id":"brahmi","range":["11000","1107F"]},{"name":"Kaithi","id":"kaithi","range":["11080","110CF"]},{"name":"Sora Sompeng","id":"sora-sompeng","range":["110D0","110FF"]},{"name":"Chakma","id":"chakma","range":["11100","1114F"]},{"name":"Mahajani","id":"mahajani","range":["11150","1117F"]},{"name":"Sharada","id":"sharada","range":["11180","111DF"]},{"name":"Sinhala Archaic Numbers","id":"sinhala-archaic-numbers","range":["111E0","111FF"]},{"name":"Khojki","id":"khojki","range":["11200","1124F"]},{"name":"Multani","id":"multani","range":["11280","112AF"]},{"name":"Khudawadi","id":"khudawadi","range":["112B0","112FF"]},{"name":"Grantha","id":"grantha","range":["11300","1137F"]},{"name":"Newa","id":"newa","range":["11400","1147F"]},{"name":"Tirhuta","id":"tirhuta","range":["11480","114DF"]},{"name":"Siddham","id":"siddham","range":["11580","115FF"]},{"name":"Modi","id":"modi","range":["11600","1165F"]},{"name":"Mongolian Supplement","id":"mongolian-supplement","range":["11660","1167F"]},{"name":"Takri","id":"takri","range":["11680","116CF"]},{"name":"Ahom","id":"ahom","range":["11700","1173F"]},{"name":"Warang Citi","id":"warang-citi","range":["118A0","118FF"]},{"name":"Zanabazar Square","id":"zanabazar-square","range":["11A00","11A4F"]},{"name":"Soyombo","id":"soyombo","range":["11A50","11AAF"]},{"name":"Pau Cin Hau","id":"pau-cin-hau","range":["11AC0","11AFF"]},{"name":"Bhaiksuki","id":"bhaiksuki","range":["11C00","11C6F"]},{"name":"Marchen","id":"marchen","range":["11C70","11CBF"]},{"name":"Masaram Gondi","id":"masaram-gondi","range":["11D00","11D5F"]},{"name":"Cuneiform","id":"cuneiform","range":["12000","123FF"]},{"name":"Cuneiform Numbers and Punctuation","id":"cuneiform-numbers-and-punctuation","range":["12400","1247F"]},{"name":"Early Dynastic Cuneiform","id":"early-dynastic-cuneiform","range":["12480","1254F"]},{"name":"Egyptian Hieroglyphs","id":"egyptian-hieroglyphs","range":["13000","1342F"]},{"name":"Anatolian Hieroglyphs","id":"anatolian-hieroglyphs","range":["14400","1467F"]},{"name":"Bamum Supplement","id":"bamum-supplement","range":["16800","16A3F"]},{"name":"Mro","id":"mro","range":["16A40","16A6F"]},{"name":"Bassa Vah","id":"bassa-vah","range":["16AD0","16AFF"]},{"name":"Pahawh Hmong","id":"pahawh-hmong","range":["16B00","16B8F"]},{"name":"Miao","id":"miao","range":["16F00","16F9F"]},{"name":"Ideographic Symbols and Punctuation","id":"ideographic-symbols-and-punctuation","range":["16FE0","16FFF"]},{"name":"Tangut","id":"tangut","range":["17000","187FF"]},{"name":"Tangut Components","id":"tangut-components","range":["18800","18AFF"]},{"name":"Kana Supplement","id":"kana-supplement","range":["1B000","1B0FF"]},{"name":"Kana Extended-A","id":"kana-extended-a","range":["1B100","1B12F"]},{"name":"Nushu","id":"nushu","range":["1B170","1B2FF"]},{"name":"Duployan","id":"duployan","range":["1BC00","1BC9F"]},{"name":"Shorthand Format Controls","id":"shorthand-format-controls","range":["1BCA0","1BCAF"]},{"name":"Byzantine Musical Symbols","id":"byzantine-musical-symbols","range":["1D000","1D0FF"]},{"name":"Musical Symbols","id":"musical-symbols","range":["1D100","1D1FF"]},{"name":"Ancient Greek Musical Notation","id":"ancient-greek-musical-notation","range":["1D200","1D24F"]},{"name":"Tai Xuan Jing Symbols","id":"tai-xuan-jing-symbols","range":["1D300","1D35F"]},{"name":"Counting Rod Numerals","id":"counting-rod-numerals","range":["1D360","1D37F"]},{"name":"Mathematical Alphanumeric Symbols","id":"mathematical-alphanumeric-symbols","range":["1D400","1D7FF"]},{"name":"Sutton SignWriting","id":"sutton-signwriting","range":["1D800","1DAAF"]},{"name":"Glagolitic Supplement","id":"glagolitic-supplement","range":["1E000","1E02F"]},{"name":"Mende Kikakui","id":"mende-kikakui","range":["1E800","1E8DF"]},{"name":"Adlam","id":"adlam","range":["1E900","1E95F"]},{"name":"Arabic Mathematical Alphabetic Symbols","id":"arabic-mathematical-alphabetic-symbols","range":["1EE00","1EEFF"]},{"name":"Mahjong Tiles","id":"mahjong-tiles","range":["1F000","1F02F"]},{"name":"Domino Tiles","id":"domino-tiles","range":["1F030","1F09F"]},{"name":"Playing Cards","id":"playing-cards","range":["1F0A0","1F0FF"]},{"name":"Enclosed Alphanumeric Supplement","id":"enclosed-alphanumeric-supplement","range":["1F100","1F1FF"]},{"name":"Enclosed Ideographic Supplement","id":"enclosed-ideographic-supplement","range":["1F200","1F2FF"]},{"name":"Miscellaneous Symbols and Pictographs","id":"miscellaneous-symbols-and-pictographs","range":["1F300","1F5FF"]},{"name":"Emoticons (Emoji)","id":"emoticons-(emoji)","range":["1F600","1F64F"]},{"name":"Ornamental Dingbats","id":"ornamental-dingbats","range":["1F650","1F67F"]},{"name":"Transport and Map Symbols","id":"transport-and-map-symbols","range":["1F680","1F6FF"]},{"name":"Alchemical Symbols","id":"alchemical-symbols","range":["1F700","1F77F"]},{"name":"Geometric Shapes Extended","id":"geometric-shapes-extended","range":["1F780","1F7FF"]},{"name":"Supplemental Arrows-C","id":"supplemental-arrows-c","range":["1F800","1F8FF"]},{"name":"Supplemental Symbols and Pictographs","id":"supplemental-symbols-and-pictographs","range":["1F900","1F9FF"]},{"name":"CJK Unified Ideographs Extension B","id":"cjk-unified-ideographs-extension-b","range":["20000","2A6DF"]},{"name":"CJK Unified Ideographs Extension C","id":"cjk-unified-ideographs-extension-c","range":["2A700","2B73F"]},{"name":"CJK Unified Ideographs Extension D","id":"cjk-unified-ideographs-extension-d","range":["2B740","2B81F"]},{"name":"CJK Unified Ideographs Extension E","id":"cjk-unified-ideographs-extension-e","range":["2B820","2CEAF"]},{"name":"CJK Unified Ideographs Extension F","id":"cjk-unified-ideographs-extension-f","range":["2CEB0","2EBEF"]},{"name":"CJK Compatibility Ideographs Supplement","id":"cjk-compatibility-ideographs-supplement","range":["2F800","2FA1F"]},{"name":"Tags","id":"tags","range":["E0000","E007F"]},{"name":"Variation Selectors Supplement","id":"variation-selectors-supplement","range":["E0100","E01EF"]}]')},3409:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(962),n(750)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({type:"color",valueProp:"color#data",friendlyName:function(){return this._data.getValue("name")},setPrivate:function(){return this._data.setValue("private",!0)},generateName:function(){this.setName(r.nameThatColor(this.rgb()))},isBaseColor:function(){return t.includes(this.getRoles()||[],"base-color")},isDerived:function(){return t.includes(this.getRoles()||[],"derived")},setRGB:function(e){var t={mode:"RGB",value:e};this._data.setValue("type","application/vnd.adobe.color+json"),this._data.setValue("color#data",t),this._data.setValue("ac#application","spark-web")},setHex:function(e){this.setRGB(r.hexToRgb(e))},getValue:function(){return this.rgb()},rgb:function(){var e=this._getValue();return e?e.value:{r:0,g:0,b:0}},hex:function(){return r.rgbToHex(this.rgb())},hsl:function(){return r.rgbToHsl(this.rgb())},lightened:function(e){return r.lighten(this.rgb(),e)}})}.apply(t,i))||(e.exports=r)},3410:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(962),n(166)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({type:"font",valueProp:"font#data",friendlyName:function(){return this._data.getValue("name")},getFontFaceName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontFaceName() has been deprecated - use AuthoringContextFont.getFontFace() instead."),r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.face.metrics.family:""}))},getFontSubgroupName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontSubgroupName() has been deprecated - use AuthoringContextFont.getFontSubgroup() instead."),r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontFace:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontSubgroup:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup?e.subgroup.name:""}))},getLookupKey:function(){var e=this._getValue();if(e)return e.lookupKey},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},_setTypkitSyncedFont:function(e,t){console.warn("set synced font info",e),t.lookupKey=null,t.source="tk-synced"},getCSSName:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){return e?e.subgroup.cssName:""}))},getInfo:function(e){return n.all([this.getFontFaceName(e,!0),this.getFontSubgroupName(e,!0),this.getCSSName(e),this.getFontStyles(e),this.getFontFace(e),this.getFontSubgroup(e)]).spread(function(t,n,i,r,o,a){return{acFont:this,id:e||this.getId(),lookupKey:e||this.getLookupKey(),faceName:t,subgroupName:n,cssName:i,fontStyle:r.style,fontWeight:r.weight,face:o,subgroup:a}}.bind(this))},getFontStyles:function(e){return r.getFont(e||this.getLookupKey()).then((function(e){if(e&&e.face){var t=e.face.typekitKey.split("");return{style:{i:"italic",n:"normal"}[t[0]],weight:{1:100,2:200,3:300,4:400,5:500,6:600,7:700,8:800,9:900}[t[1]]}}}))}})}.apply(t,i))||(e.exports=r)},3411:function(e,t,n){n(2);var i,r,o,a=n(3412),s=n(1),l=!1;try{l=!!window}catch(c){}e.exports&&!l||(i=n(0),r=i.cps,o=i.key);e.exports=function(e,t){return a.extend({host:r,endPoints:{resource:"/api/v2/resources/:resourcePath",resourceS3:"/api/v2/resources/:resourcePath/\\:S3",resourceMetadata:"/api/v2/resources/:resourcePath/\\:metadata",alias:"/api/v2/"+e+"/alias",asset:"/api/v2/"+e+"/assets/:assetId",assets:"/api/v2/"+e+"/assets",health:"/api/v2/health",videoEmbed:"/api/v2/"+e+"/assets/:asset_id/video/embed",website:"/api/v2/"+e+"/assets/:asset_id/website",site:"/content/2/site/:assetId/:itemPath",like:"/api/v2/"+e+"/assets/:assetId/likes",unlike:"/api/v2/"+e+"/assets/:assetId/likes",report:"/api/v2/"+e+"/assets/:assetId/report",artwork:"/api/v2/"+e+"/assets/:assetId/artwork",original:"/api/v2/"+e+"/assets/:assetId/original",originalForPath:"/api/v2/"+e+"/assets/:assetId/original/:path",originalForPathAndVersion:"/api/v2/"+e+"/assets/:assetId/original/:path/version/:version",serverCopy:"/api/v2/resources/:resourcePath/\\:copy"},protocol:"https:",defaultParams:{api_key:o},getResourceMetadata:function(e,t){return this.request({method:"GET",url:this.url("resourceMetadata",{},e),token:t})},checkAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return 200==e.statusCode}))},getAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)})},getOriginalForPath:function(e,t,n){var i;return i=n?this.url("originalForPathAndVersion",{},e,t,n):this.url("originalForPath",{},e,t),this.request({method:"GET",url:i})},getMetadata:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return e.body}))},checkResource:function(e,t){return this.request({method:"GET",url:this.url("resourceS3",{},e),token:t}).then((function(e){return 200==e.statusCode}))},uploadResource:function(e,n,i,r,o){var a={"Content-Type":n};r&&(a["If-Match"]="*");var s={method:"PUT",url:this.url("resource",{},e),body:i,headers:a,token:o};return"application/json"==n&&(s.json=!0),this.request(s).then((function(e){return t?e:e.body}))},publishAsset:function(e,n,i,r,o,a){var s,l,c;return i?(l="PUT",c=this.url("asset",{},i),s=r):(l="POST",c=this.url("assets"),s={resource_path:e,resource_type:n,metadata:r}),this.request({method:l,url:c,json:!0,body:s,token:o,serviceToken:a}).then((function(e){if(t)return e;var n=e.headers.Location||e.headers.location;if(n){var r=n.replace(/\/*$/,"").split("/");i=r[r.length-1]}return i}))},updateMetadata:function(e,t){return this.publishAsset(void 0,void 0,e,t)},serverSideCopy:function(e,t){if(!t||!t.length)return s.resolve([]);var n=s.defer(),r=function(e){this.request({method:"GET",url:e+"?api_key="+i.key}).then((function(t){var i=t.body;"in_progress"==i.status||"queued"==i.status?setTimeout((function(){r(e)}),500):"done"==i.status?n.resolve(i.outputs):"failed"==i.status?n.reject(new Error("CP server side copy failed with error code: "+i.error_code)):n.reject(new Error("CP server side copy returned illegal status: "+i.status+" : url:"+t.responseURL))})).catch((function(e){n.reject(new Error("CP server side copy failed with error: "+e.message+" "+e.stack))}))}.bind(this);return this.request({method:"POST",url:this.url("serverCopy",{},e),json:!0,body:{copy:{files:t}}}).then((function(e){var t=e.headers.Location||e.headers.location;r(t)})),n.promise},updateArtwork:function(e,t,n){return this.request({method:"PUT",url:this.url("artwork",{},e),token:n,json:!0,body:{resource_path:t}})},reserveAlias:function(e){return this.request({method:"POST",url:this.url("alias",{}),token:e}).then((function(e){if(console.log({type:"pageServerPublish",message:"alias was not passed in meaning we need to reserve one. got: "+e.body.alias}),200==e.statusCode)return e.body.alias;throw new Error("CP came back with "+e.statusCode+" "+e.body)}))}})}},3412:function(e,t,n){var i,r=n(2),o=n(1);function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var s=n(3413),l=!1;try{l=!!window}catch(d){}if(e.exports&&!l)i=function(e){return o.resolve(e)};else{var c=n(11);i=function(){return c.getAccessToken()}}var u={methods:{setHost:function(e){this.host=e},setDefaultParams:function(e){this.defaultParams=e},setProtocol:function(e){this.protocol=e},url:function(e,t){var n=Array.prototype.slice.call(arguments);if(e=this.endPoints[e]){var i,o=2,a=!1,s=e.replace(/[^\\]{1}\:([^\/]*)/g,(function(e,t){if("string"==typeof(i=n[o++])||"number"==typeof i)return"/"+i;a=!0}));if(s=s.replace(/\\\:/,":"),o>2&&o!=n.length)throw new Error("URL helper must be called with same number of path params to match endpoint string");if(a)throw new Error("URL helper must be called with string arguments only");t=r.extend({},this.defaultParams,t||{});var l="";for(var c in o=0,t)t.hasOwnProperty(c)&&(l+=(o?"&":"?")+c+"="+t[c],o++);return(this.protocol||"http:")+"//"+this.host+s+l}},request:function(e){var t=r.extend({},e),n=r.extend({},t.headers),l=a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a();n["X-Request-Id"]=l,t.json&&(n["Content-Type"]="application/json",t.body=JSON.stringify(t.body)),delete t.json;t.method,t.url;return i(t.token).then(function(e){return t.serviceToken?(n["X-User-Token"]=e,n.Authorization=t.serviceToken):n.Authorization=e,delete t.token,delete t.serviceToken,t.headers=n,function(e){var t=o.defer();return s(e,(function(e,n){e?t.reject(e):t.resolve(n)})),t.promise}(t)}.bind(this)).then((function(e){var t;try{t=JSON.parse(e.body)}catch(n){t=e.body}return e.body=t,!e.headers&&e.getAllResponseHeaders&&(e.headers=function(e){var t={};if(!e)return t;for(var n=(e=e.replace(/^(\r?\n)*/,"")).split("\r\n"),i=0;i<n.length;i++){var r=n[i],o=r.indexOf(": ");if(o>0){var a=r.substring(0,o),s=r.substring(o+2);t[a]=s}}return t}(e.getAllResponseHeaders())),e}))}},mixin:function(e){return e.prototype=r.extend(e.prototype,u.methods),e},extend:function(e){return r.extend(e,u.methods)}};e.exports=u},3414:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(962),n(750)],void 0===(r=function(e,t,n,i,r){"use strict";return i.extend({type:"logo",valueProp:void 0,setContext:function(e){this._context=e},getHrefAsync:function(e,t){t=t||"image/png";var i=this._context,r=this.getData();if(i){var o=i.composite.getChildWithMap("logos."+r.getValue("path")+".!image");if(o)return i.composite.getImageComponentHref(o,e,t)}return n.resolve(null)},load:function(e,t){var i=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new Image;t.onload=function(){i.resolve(e)},t.onerror=function(e){i.reject(e)},e?t.src=e:(console.warn("href for logo "+this.getId()+" could not be found"),i.resolve(void 0))}.bind(this)).catch((function(e){i.reject(e)})),i.promise}})}.apply(t,i))||(e.exports=r)},387:function(e,t,n){var i,r;i=[n(2),n(6),n(1),n(426),n(123),n(36),n(534),n(25),n(248),n(47),n(23),n(0),n(11),n(67)],void 0===(r=function(e,t,i,r,o,a,s,l,c,u,d,h,p,f){"use strict";var g=a.logger,m=0;return t.Model.extend({defaults:{name:"",type:"private-collection",id:null,syncGroupName:"",components:null,compositeObj:null,publishProgress:null},_commitQueue:null,_commitInProgress:!1,_saveQueue:null,initialize:function(n){this._commitQueue=[],this._saveQueue=[],this._initDefer=i.defer(),this.iGUID=m++;var r=new t.Collection([],{model:s});this.set("components",r),this._doSaveChanges=this._doSaveChanges.bind(this),this._saveChangesDebounce=e.debounce(this._doSaveChanges,500)},linkSparkAsset:function(e){this._linkedSparkAsset=e},setName:function(e){this.getDCXComposite().current.name=e,this.set("name",e)},getEtag:function(){return this.getDCXComposite().current.manifestEtag},getDocData:function(e){var t=this.getDCXRoot(),n="";return t&&(n=t.getValue(e)),n},setIsMounted:function(e){this._isMounted=e},isMounted:function(){return!!this._isMounted},setCollaboration:function(e){this._collaboration=e},getCollaboration:function(){return this._collaboration||this.get("collaboration")||this.changed&&this.changed.collaboration||this.attributes&&this.attributes.collaboration},belongsToUser:function(){return"INCOMING"!==this.getCollaboration()},getCollaborationForAnalytics:function(){var e=this.getCollaboration();return"INCOMING"===e?"collabRecipient":"OUTGOING"===e?"collabOwner":"collabNone"},acquireNestedMap:function(e,t){return this._acquireNestedMap(e,t)},acquireNestedMapSync:function(e,t){return this._acquireNestedMap(e,!0,!0,t)},_acquireNestedMap:function(t,n,r,o){var a,s,l=this.getChildWithMap(t,o),c=!1;return l||(t=t.split("."),s="",e.each(t,function(e,t){s&&(s+="."),"{new}"!==e?(s+=e,(l=this.getChildWithMap(s,o))||(c=!0,l=this.addChildPath(void 0,e,a))):(c=!0,l=this.addChildPath(void 0,void 0,a),s+=l.getValue("path")),a=l}.bind(this)),!c||n)?r?l:i.resolve(l):this.saveChanges((function(){})).then((function(){return i.resolve(l)}))},acquireNestedChildren:function(e,t){return this.acquireNestedMap(e,t).then(function(e){return this.getChildrenOf(e)}.bind(this))},acquireNestedChildrenSync:function(e,t){if("all-fonts"===e&&!d.hasFeature("enable-custom-fonts"))return console.warn("Illegal custom fonts API call w/o feature flag",(new Error).stack),[];var n=this.acquireNestedMapSync(e,t);return this.getChildrenOf(n,t)},getChildWithMap:function(t,n){for(var i,r,o,a,s,l,c,u=n||this.getDCXComposite().current,d=u.getChildrenOf(),h=u.getComponentsOf(),p=function(e){if(e.getValue(l)==c)return r=e,a||(d=u.getChildrenOf(e),h=u.getComponentsOf(e)),!1},f=function(e){if(e.path==o)return r=e,a||(d=u.getChildrenOf(e),h=u.getComponentsOf(e)),!1},g=0,m=(t=t.split(".")).length;g<m;g++){if(o=t[g],s=/^\[([^\]\=]*)\=([^\]\=]*)\]$/.exec(o),-1!=o.search(/^\!/)?(a=!0,o=o.replace(/^\!/,"")):a=!1,!d)return;if(i=r,s?(l=s[1],c=s[2],e.find(a?h:d,p)):e.find(a?h:d,f),void 0!==r&&void 0!==i&&i==r)return}return r},getChildrenOf:function(e,t){return(t||this.getDCXComposite().current).getChildrenOf(e)},addChild:function(e,t){return this.getDCXComposite().current.addChild(e,void 0,-1,t)},addChildPath:function(e,t,n){var i=this.getDCXComposite().current.addChild(e,void 0,-1,n);return i.path=t||i.id,i},removeChild:function(e){return this.getDCXComposite().current.removeChild(e)},isNew:function(){return!this.getDCXComposite().current.manifestEtag},getDCXComposite:function(){return this.get("compositeObj")},getDCXRoot:function(){var e=this.get("compositeObj");return e?e.current.rootNode:null},setAndSaveDataToRoot:function(e,t){this.saveChanges((function(n){n.setValue(e,t)}))},getDataFromRoot:function(e){return this.getDCXRoot().getValue(e)},addComponent:function(e){e.composite=this.getDCXComposite();var t=this.get("components"),n=new s(e);return t.add(n),n},removeComponent:function(e){this.get("components").remove(e);var t=this.getDCXComposite().current,n=t.getComponentWithAbsolutePath("/"+e.get("path"));return t.removeComponent(n),e},getComponentWithAbsolutePath:function(e){return this.get("components").find((function(t){return t.get("path")==e.replace(/^\//,"")}))},getComponent:function(e){return a.getComponent(e,this.getDCXComposite())},_privateResolveComponent:function(e){return e instanceof String||"string"==typeof e?this.getDCXComposite().current.getComponentWithAbsolutePath(e):e},getImageComponentHref:function(e,t,n){if(this.isMounted()&&!d.hasFeature("dcx-href-calc-enabled")){var r=this._privateResolveComponent(e);t=t||"full";var o="";n&&(o="&mime="+n);var s=(r.etag||"").replace(/['"]+/g,""),l="/image_assets/"+this.getMyApp().getSetting("syncGroup")+"/"+this.getDCXComposite().id+"/"+r.path+"?asset_id="+r.id+"&size="+t+"&img_etag="+s+o;return i.resolve(l)}return a.getComponentRenditionHref(this.getDCXComposite(),e,t,n)},_privateGetComponentHref:function(e){if(this.isMounted()&&!d.hasFeature("dcx-href-calc-enabled")){var t=(e.etag||"").replace(/['"]+/g,""),n="/image_assets/"+this.getURN()+"/"+e.path+"?asset_id="+e.id+"&img_etag="+t;return i.resolve(n)}return a._privateGetComponentHref(this.getDCXComposite(),e).then((function(e){return e}))},getFirstChildNode:function(){return this.getDCXComposite().current.getChildrenOf()[0]},findComponent:function(e,t){for(var n=this.getDCXComposite().current.getComponentsOf(e),i=0,r=n.length;i<r;i++){var o=n[i],a=!0;for(var s in t)if(t.hasOwnProperty(s)){var l=t[s];if(o[s]!=l){a=!1;break}}if(a)return o}},setProjectName:function(e){this.getMyApp().setProjectName(this,e)},getProjectName:function(e){return this.getMyApp().getProjectName(this,e)},preloadImageRendition:function(e){var t=i.defer();return this.getImageRendition(e).then(function(e){var n,i;e&&(n=e.url),n?((i=new Image).onload=function(){t.resolve(n)},i.onerror=function(){t.reject(new Error("Image rendition "+n+" came back with 404"))},i.src=n):t.resolve()}.bind(this)).catch((function(e){window.marvel.logger.error("failed to get image rendition",e),t.reject(e)})).done(),t.promise},getImageRendition:function(e){var t,n=this.getDCXComposite().current,r=this.getDCXRoot(),o=r.getValue("slate#coverpath");e=e||400;var a,s="center",l="center";if(r.type.match("luca")&&o){t=n.getComponentWithAbsolutePath("/"+o),s=r.getValue("slate#coverx"),l=r.getValue("slate#covery");var c=r.getValue("slate#data");a=c&&c.themeName&&"vintage"==c.themeName.toLowerCase()?"grayscale(1)":void 0}else t=this.getImageRenditionComponent();if(t){return e&&{size:e},this.getImageComponentHref(t,e).then(function(e){return{url:e,position:s+" "+l,filter:a}}.bind(this))}return i.reject(new Error("failed to find rendition component"))},getImageRenditionComponent:function(){if("function"==typeof this.getMyApp().getPreviewComponent)return this.getMyApp().getPreviewComponent(this);var t=this.getDCXComposite().current;return e.find(t.getComponentsOf(),(function(e){return e&&e.type.match(/^image/)&&"rendition"==e.relationship&&"shareImage"!=e.name&&"embed"!=e.name}))},getInfoForComponents:function(t){var n,r=this.getMyPrimaryApp(),o=r.getAppTypeID(),a={},s=(e.isArray(t),{GooglePhotosImagePickerContext:"google",DropboxImagePickerContext:"dropbox",DooploImagePickerContext:"dooplo",FacebookImagePickerContext:"facebook",AdobestockImagePickerContext:"stock",CCImagePickerContext:"creativeCloud",LightroomImagePickerContext:"lightroom",UploadedImagePickerContext:"uploaded",undefined:"uploaded"}),l={Google:"google",Dropbox:"dropbox",Dooplo:"dooplo",Facebook:"facebook",AdobeStock:"stock",CreativeCloud:"creativeCloud",Lightroom:"lightroom",Uploaded:"uploaded",undefined:"uploaded"};return"slate"===o?this.getComponent("/luca.json").then(function(t){return r.load().then(function(){var o,l;if(o=r.getStorageImpl().getData("imagePickerContexts",this),l={},e.each(o,(function(e){l[e.asset_id]=e})),t)try{n=JSON.parse(t)}catch(c){return i.reject(c)}return n&&n.pages&&n.pages.length&&e.each(n.pages[0].sections,(function(t){e.each(t.content_items,(function(e){if("img"===e.type){a[e.image.image_url.split("?")[0]]=e.image;var t=l[e.image.id];e.image.pickerContext=l[t],e.image.srcName=s[t?t.class_name:void 0]}}))})),a}.bind(this))}.bind(this)).catch((function(e){return i.reject(e)})):"voice"==o?this.getComponent("/PageSequence.json").then(function(t){var n;try{n=JSON.parse(t)}catch(o){return i.reject(o)}var r=e.find(n,(function(e){return"PageSequence"==e.className}));return r&&r.data&&r.data.pages&&e.each(r.data.pages,(function(t){var n;t&&t.data&&t.data.layout&&t.data.layout.data&&(n=t.data.layout.data.items),n&&e.each(n,(function(e){if(e.data&&"Image"==e.data.contentType){var t,n=e.data.content,i=e.data.searchTerm;i&&(t=-1==i.search(/\//)?"Dooplo":i.replace(/^\s*/,"").replace(/\/.*$/,"")),a[n]={srcName:l[t]||"uploaded"}}}))})),a}.bind(this)).catch((function(e){return i.reject(e)})):i.resolve()},_lazyLoadPublishUtils:function(){return this._videoPublishLazyLoadDefer||(this._videoPublishLazyLoadDefer=i.defer(),Promise.all([n.e(4),n.e(5),n.e("vendors~brand-kit-controller~gic-voice-publishUtils"),n.e("vendors~gic-voice-publishUtils"),n.e("gic-voice-publishUtils")]).then(function(e){var t=n(663);this._videoPublishLazyLoadDefer.resolve(t)}.bind(this).bind(null,n)).catch(n.oe)),this._videoPublishLazyLoadDefer.promise},getImageComponents:function(t){var n=this.getMyPrimaryApp().getAppTypeID(),r=this.getDCXComposite().current;return t=t||{},"voice"!==n||t.publishUtils?this.getInfoForComponents("images").then(function(o){var a,s=[];if("slate"===n?a=e.find(r.getChildrenOf(),(function(e){return"page"===e.name})):"voice"===n?a=e.find(r.getChildrenOf(),(function(e){return"Media"===e.name})):"theo"===n&&(a=e.find(r.getChildrenOf(),(function(e){return"application/vnd.adobe.theo.content+dcx"===e.type&&"/content"===e.absolutePath}))),a){var l,c,u=r.getComponentsOf(a);if("slate"===n)e.each(u,(function(e){(c=o[e.path])&&s.push({component:e,data:c})}));else if("theo"===n)(l=a._data.children)&&l.length&&(l=l[0].children)&&(s=[],e.each(l,(function(t){if("image"===t["theo#kind"]){var n=t.components?r.getComponentWithId(t.components[0].id):r.getComponentWithId(t.path);if(n){var i=t["theo#media-metadata"]||{};"adobestock"===i.source&&((i=e.assign({},i)).license=e.assign({},i)),s.push({component:n,data:i})}}})));else if("voice"===n){var d={};l=a._data.children,s=[],e.each(l,(function(t){var n;t.components&&e.each(t.components,(function(e){if(e&&e.type.match(/^image/)&&(n=r.getComponentWithId(e.id))){var i=t["ginger#data"],o={component:n,data:i};s.push(o),d[n.id]=o}}))}));var h=[];return e.each(s,function(e){h.push(t.publishUtils.makeMetadataPromise(this.id,e.component.id))}.bind(this)),i.allSettled(h).then((function(t){var n=[];return e.each(t,(function(t){if("fulfilled"==t.state){var i=t.value.contentID,r=d[i];if(r){var a=t.value,s=o[i];r.data=e.extend({},a,s)}}else n.push(t.reason)})),n.length&&window.marvel.logger.warn("errors fetching video metadatata in getImageComponents",n),s}))}}return s}.bind(this)):this._lazyLoadPublishUtils().then(function(e){return t.publishUtils=e,this.getImageComponents(t)}.bind(this))},pushComponent:function(e){return this._pushComponent(e,!1)},pushComponentWithRetry:function(e){return this._pushComponent(e,!0)},_pushComponent:function(t,n){var i=this.getDCXComposite(),r=this.get("syncGroupName"),o=t.isUpdate,s=e.pick(t,["id","name","relationship","type","path","absolutePath","file","parent","copyFrom","cover"]);return this.ensureCompositeIsSaved((function(){return n?a.pushComponent(s,i,r,o):a.pushComponentWithoutRetry(s,i,r,o)}))},isMidCommit:function(){return!!this._commitInProgress},pull:function(){var e=i.defer(),t=this.getDCXComposite();return a.pullComposite(t).then((function(t){e.resolve(t)})),e.promise},_resolveOrganizerProjectRenameConflict:function(e,t,n,i,o){if(e.current.rootNode.name!==t.rootNode.name||n.rootNode.name!==t.rootNode.name){var a=n.copy();if(e.current.rootNode.name!==t.rootNode.name){for(var s=r(e.current._data,t._data)||[],l=!1,c=0,u=s.length;c<u;c++){var d=s[c].path[0];if("local"===d||"state"===d);else{if("name"!==d)return g.error("Unexpected property changed in Organizer view",{propName:d,diffResults:s}),void i.reject(o);a.rootNode.name=e.current.rootNode.name,l=!0}}if(!l)return g.error('_resolveOrganizerProjectRenameConflict "diff" reported no project name change?'),void i.reject(o)}else g.warn("_resolveOrganizerProjectRenameConflict: How'd we encounter a conflict and the local project name hasn't changed?");e.resolvePullWithBranch(a,function(e){e?i.reject(e):(i.resolve(),this.saveChanges((function(){}),!0))}.bind(this))}else i.reject(o)},_resolveConflict:function(t,n){var r=this.getDCXComposite();return a.pullCompositeManifestOnly(r).then(function(s){return i.all([a.loadBaseBranch(r),o.load()]).then(function(o){var a=o[0],l=o[1].ACPSparkController.isEditorOpen();e.each(n,function(e){if(l){var n=this.getMyApp();n.resolveConflict?n.resolveConflict(s,e.recoverData,e.commitDefer,this,r,a,t):e.commitDefer.reject(t)}else this._resolveOrganizerProjectRenameConflict(r,a,s,e.commitDefer,t)}.bind(this));var c=[];return e.each(n,(function(e){e.commitDefer&&c.push(e.commitDefer.promise)})),i.all(c)}.bind(this)).then((function(e){return i.resolve()})).catch((function(e){return g.error("CompositeDocModel._resolveConflict ignoring caught errors. Returning original UPDATE_CONFLICT error.",e),i.reject(t)}))}.bind(this)).catch((function(i){g.error("CompositeDocModel caught error during conflict resolution pullCompositeManifestOnly",{outerErr:t,caughtErr:i}),e.each(n,(function(e){e.commitDefer&&e.commitDefer.reject(t)}))}))},downloadComponents:function(){var e=[],t=this.getDCXComposite(),n=t.current.allComponents();return n instanceof Array&&(e=n.map((function(e){return a.getComponent(e,t)}))),i.allSettled(e)},_doSaveChanges:function(){var t;if(!this._commitInProgress){marvel.events.trigger("sync-start",!0),this._commitInProgress=!0,t=this.get("syncGroupName"),this.setModifiedDate(new Date((new Date).getTime()+864e5)),this.isNew()?!0:marvel.events.trigger("saved-composite-doc",this);var n,r=this.getDCXRoot(),o=this._commitQueue;this._commitQueue=[],e.each(o,(function(e){e.override&&(n=!0),e.fnSet(r)})),this.set("name",this.getDCXComposite().current.name),this.ensureCompositeIsSaved(function(){return this.pushModifiedComponents().then(function(){return this.getMyApp().usesContentModifiedEtags()&&this.setContentModifiedIfNeeded(),a.pushComposite(this.getDCXComposite(),t,n).then(function(){g.debug("[compositeDoc saved]"),marvel.events.trigger("saved-composite-doc",this),this._commitInProgress=!1,marvel.events.trigger("sync-stop",!0),e.each(o,(function(e){e.commitDefer.resolve()})),this._commitQueue.length&&this._saveChangesDebounce()}.bind(this))}.bind(this))}.bind(this)).catch(function(t){try{if(g.error("CompositeDocModel error while saving",{err:t}),this._commitInProgress=!1,t&&"UPDATE_CONFLICT"===t.code)return this._resolveConflict(t,o);if(t&&"EXCEEDS_QUOTA"===t.code)return console.warn("TBD: handle EXCEEDS_QUOTA"),i.reject(t);e.each(o,(function(e){return e.commitDefer.reject(t)}))}catch(n){return g.error("CompositeDocModel caught error during error handling",{outerErr:t,caughtErr:n}),i.reject(t)}}.bind(this)).done()}},triggerProjectCreatedAnalytics:function(e){(e=e||{}).contextData&&l.addContextData(e.contextData);var t=this.getMyApp(),n=this;if(t.isaProjectFormat()){var i=this.getMyApp().typeName;"theo"!==i&&"post"!==i||l.setProductName("theo"),l.setCurrentProjectId(this.get("id")),l.trackEvent("projectCreated",{contextData:["projectId","workflow","projectType","contextString","exampleId","remixableAssetId","createdFromId"]},e.env||this.getMyApp().typeName+":editor",function(){l.removeContextData(["type","contextString","exampleId","remixableAssetId","createdFromId"])}.bind(this)),c.trackEvent("AddToCart",{content_name:"Project Created"}),t.isBranded(this).then((function(i){i&&f.getCreatedAnalytics(n).then((function(n){l.trackEvent("createdBrandedProject",n,e.env||t.typeName+":editor")}))}))}},ensureCompositeIsSaved:function(t){if(this.isNew()&&!this._isBeingCreatedPromise){var n=this.getDCXComposite(),r=this.get("syncGroupName"),s=a.AdobeDCXUtil.appendPathElements("assets",r,n.id),l=i.defer();return g.traceflow("dcx-3","CREATING:: "+r+" and "+n.id),a.dcx.compositeXfer.createComposite(n,s,!1,a.dcxSession,function(e,t){e?l.reject(e):o.load().then(function(e){this.triggerProjectCreatedAnalytics(),e.ACPSparkController.addCompositeDocLocal(n.assetId,this),l.resolve(t)}.bind(this)).catch((function(e){window.marvel.logger.error("[Client:Storage] failed to add local CompositeDocModel",{error:e})}))}.bind(this)),this._isBeingCreatedPromise=l.promise.then(function(){return a.pushComposite(this.getDCXComposite(),this.get("syncGroupName")).then(function(){var n=t(),i=this._saveQueue;return this._saveQueue=[],this._isBeingCreatedPromise=null,e.each(i,(function(e){e.deferred.resolve(e.fn())})),n}.bind(this))}.bind(this)),this._isBeingCreatedPromise}return this.isNew()&&this._isBeingCreatedPromise?this._isBeingCreatedPromise.then(t):t()},pushModifiedComponents:function(){var e=this.getDCXComposite();return i.all(this.get("components").reduce(function(t,n){var i=n.get("path");return n.isModified()&&t.push(a.pushComponent({path:i,name:n.get("name"),relationship:n.get("relationship"),type:n.get("type"),file:n.getFile(),parent:n.get("parent")},e,this.get("syncGroupName"),e.current.getComponentWithAbsolutePath("/"+i)).then((function(){n.setUnmodified()})).catch(function(t){throw g.error("Failed to push modified components "+t,t),t.componentInfo={path:i,name:n.get("name"),type:n.get("type"),composite:{assetId:e.assetId,href:e.href}},t}.bind(this))),t}.bind(this),[]))},clearRootDataWithPrefix:function(t){var n=this.getDCXComposite().current._data;e.each(n,(function(e,i){0===i.indexOf(t)&&delete n[i]}))},clearUnneededDuplicationData:function(){this.getMyApp().clearDataForDocCreatedByDupe(this)},nextSave:function(){return this._nextSaveDefer||(this._nextSaveDefer=i.defer()),this._nextSaveDefer.promise},saveChanges:function(e,t,n){var r={override:t,commitDefer:this._nextSaveDefer||i.defer(),fnSet:e,recoverData:n};return this._nextSaveDefer=null,g.debug("[compositeDoc saving]"),this._commitQueue.push(r),this._saveChangesDebounce(),r.commitDefer.promise},_patchCurrent:function(e,t){var n=this.getDCXComposite().current._data;if(n[e]=t,arguments.length>2)for(var i=2;i<arguments.length;i+=2)n[arguments[i]]=arguments[i+1]},setDocRootVals:function(e,t){var n=arguments;this.saveChanges((function(e){for(var t=n.length,i=0;i<t;i+=2)e.setValue(n[i],n[i+1])}))},getComponentEtag:function(e){var t=this.getDCXComposite().current.getComponentWithAbsolutePath(e);return t?t.etag:null},getAppRegistry:function(){return u},getMyApp:function(){return u.getAppForDoc(this)},getMyPrimaryApp:function(){var t=this.getMyApp(),n=t.getSetting("syncGroup");return e.endsWith(n,"-template")&&(t=u.getAppBySyncGroupName(t.getConfig().templateSyncGroup)),t},isTemplate:function(){var t=this.getMyApp().getSetting("syncGroup");return e.endsWith(t,"-template")},getMainContentEtag:function(){return this.getMyApp().getDocContentETag(this)},setContentModifiedIfNeeded:function(){var e=this.getMyApp().getDocContentETag(this)||"";e!=this.getContentModEtag()&&this._patchCurrent("cp#contentEtag",e,"cp#contentModified",this._getFutureModDate())},getContentModEtag:function(){return this.getDCXRoot().getValue("cp#contentEtag")},getContentModifiedDate:function(e){var t=this.get("modified");return e&&e.preferCpContentModified&&(t=this.getDCXRoot().getValue("cp#contentModified")||t),t?t.indexOf("Z")>-1?this._unZpadDate(t):new Date(t):new Date},_unZpadDate:function(e){var t=Date.parse(e);if(isNaN(t)){var n,i=e.split("T"),r=1*i[1].substring(0,2);return r>23?(e=i[0]+"T23"+i[1].substring(2),(n=new Date(e)).setUTCHours(n.getUTCHours()+(r-23)),n):new Date}return new Date(t)},_zpadDate:function(e,t){t&&(e=new Date(e)).setUTCHours(e.getUTCHours()+e.getTimezoneOffset()/60);var n=e.getHours();function i(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}return e.getFullYear()+"-"+i(e.getMonth()+1,2)+"-"+i(e.getDate(),2)+"T"+i(n,2)+":"+i(e.getMinutes(),2)+":"+i(e.getSeconds(),2)+"."+i(e.getMilliseconds(),2)+"Z"},_getFutureModDate:function(){return this._zpadDate(new Date((new Date).getTime()+3e4),!0)},setModifiedDate:function(e){this.set("modified",this._zpadDate(e))},isPublished:function(){return this.getMyApp().isDocPublished(this)},delete:function(){return a.deleteCompositeDoc(this)},getStorageURL:function(){return("https://"+window.marvel.settings.ss+"/id/"+this.getDCXComposite().assetId).replace("-creativesdk","")},getStoragePath:function(){var e=this.getStorageURL();return e.substring(e.indexOf("/id/")+1)},getRoutableId:function(){return this.getURN()},getURN:function(){return i.resolve(this.getDCXComposite().assetId)},getSharedCloudCollectionId:function(){return a.getSharedCloudCollectionId(this.getDCXComposite())},discoverDocumentMetadata:function(){var e=i.defer(),t=this.getStoragePath();return p.ajax({type:"GET",url:"https://"+window.marvel.settings.ss+"/"+t+"/:metadata",headers:{"x-api-key":window.marvel.settings.key}}).then(function(t,n,i){e.resolve(t)}.bind(this)).fail((function(t){e.reject(t)})),e.promise},getDocDimensions:function(){var e,t={width:0,height:0};try{e=this.getDCXComposite().current.getChildrenOf()}catch(i){window.marvel.logger.error("Error from DCX attempting to page through manifest",i)}if(e){var n=e.find((function(e){return e.getValue("theo#size-id")}));n&&(t.width=n.getValue("theo#size")[0],t.height=n.getValue("theo#size")[1])}return t},hasCloudDocChanged:function(){var e=i.defer(),t=this.getStoragePath();return p.ajax({type:"HEAD",url:"https://"+window.marvel.settings.ss+"/"+t+"/:manifest",headers:{"x-api-key":window.marvel.settings.key}}).then(function(t,n,i){e.resolve(i.getResponseHeader("etag")!==this.getEtag())}.bind(this)).fail((function(t){e.reject(t)})),e.promise}})}.apply(t,i))||(e.exports=r)},389:function(e,t,n){var i,r;i=[n(7),n(2),n(6),n(141)],void 0===(r=function(e,t,n,i){"use strict";return n.View.extend({initialize:function(){this.enforceTabTrap=!1,t.bindAll(this,t.functionsIn(this))},_workflowId:void 0,setWorkflowId:function(e){this._workflowId=e},ignoreNextKeyup:function(){this._ignoreNextKeyup=!0},onEscapePressed:function(){this.hideOverlay()},handleKeydown:function(e){this.enforceTabTrap&&e.keyCode===i.DOM_VK_TAB&&(e.target==this._firstFocusElement&&e.shiftKey&&(e.preventDefault(),this._lastFocusElement.focus()),e.target!=this._lastFocusElement||e.shiftKey||(e.preventDefault(),this._firstFocusElement.focus()))},handleKeyup:function(e){this._ignoreNextKeyup?this._ignoreNextKeyup=!1:e.keyCode!==i.DOM_VK_ESCAPE||this._ignoreCloseActions||this.onEscapePressed()},scrollCapture:function(t){e(window).scrollTop(this._oldScrollPos),t.preventDefault()},handleShellHideTransitionEnd:function(){this.$el.addClass("hide"),this.$el.removeClass("transitioned-out")},_showEl:function(){this.transitionObjectSelector&&(this.$el.find(this.transitionObjectSelector).addClass("no-transition"),this.$el.addClass("transitioned-out"),t.delay(function(){this.$el.find(this.transitionObjectSelector).removeClass("no-transition"),this.$el.removeClass("transitioned-out")}.bind(this),1)),this.$el.removeClass("hide")},_hideEl:function(){this.transitionObjectSelector?(this.$el.find(this.transitionObjectSelector).one("transitionend",this.handleShellHideTransitionEnd.bind(this)),this.$el.addClass("transitioned-out")):this.$el.addClass("hide")},refreshTabTrapSentinels:function(){if(this.enforceTabTrap){var e=this.$el.find('a[href]:visible, area[href]:visible, input:not([disabled]):visible, select:not([disabled]):visible, textarea:not([disabled]):visible, button:not([disabled]):visible, [tabindex="0"]:visible');0===e.length?window.marvel.logger.warn("refreshTabTrapSentinels: no focusable elements to trap!"):(this._firstFocusElement=e[0],this._lastFocusElement=e[e.length-1])}},focusFirstElement:function(){this._firstFocusElement&&this._firstFocusElement.focus()},showOverlay:function(){window.marvel.events.dialogShown(this._dialogName),marvel._dialogShowing=!0,this.render(),e(document).on("keyup.dialog",this.handleKeyup),this.enforceTabTrap&&e(document).on("keydown.dialog",this.handleKeydown),this._ignoreNextKeyup=!1,this._showEl(),this._oldScrollPos=e(window).scrollTop();var t=this._oldScrollPos;e(window).on("scroll.scrolldisabler",(function(n){e(window).scrollTop(t),n.preventDefault()})),this.refreshTabTrapSentinels()},hideOverlay:function(){return(!this.interceptHide||!this.interceptHide())&&(marvel._dialogShowing=!1,e(document).off("keyup.dialog",this.handleKeyup),this.enforceTabTrap&&e(document).off("keydown.dialog",this.handleKeydown),e(window).off("scroll.scrolldisabler"),this._hideEl(),this.onHide&&this.onHide(),this._workflowId&&marvel.events.trigger(this._workflowId+"-closed",this),window.marvel.events.dialogClosed(),!0)},handleCloseBtn:function(){this._ignoreCloseActions||this.hideOverlay()}})}.apply(t,i))||(e.exports=r)},393:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OCAyNCIgd2lkdGg9IjU4IiBoZWlnaHQ9IjI0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmljb24tcGlsbC1tYXNrPC90aXRsZT48cGF0aCBpZD0icGF0aC0xIiBjbGFzcz0iY2xzLTEiIGQ9Ik0xMiwyNEgwVjEyLjE5QTEyLjA1LDEyLjA1LDAsMCwwLDEyLDI0Wm00NiwwSDQ2QTEyLjA2LDEyLjA2LDAsMCwwLDU4LDEyLjIyVjI0Wk0wLDExLjgxSDBWMEgxMS44M0ExMi4wOSwxMi4wOSwwLDAsMCwwLDExLjgxWm01OCwwQTEyLDEyLDAsMCwwLDQ2LjIxLDBINThWMTEuNzhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDApIi8+PC9zdmc+Cg=="},395:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjQwODBweCIgaGVpZ2h0PSI2OHB4IiB2aWV3Qm94PSIwIDAgNDA4MCA2OCI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGwtb3BhY2l0eTowO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjAuMTt9Cgkuc3Qxe2ZpbGwtb3BhY2l0eTowO3N0cm9rZTojMTQ3M0U2O3N0cm9rZS13aWR0aDo0O30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBTNTAuNiw2NCwzNCw2NFM0LDUwLjYsNCwzNFMxNy40LDQsMzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM0LDRMMzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBTNzIsNTAuNiw3MiwzNFM4NS40LDQsMTAyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMDIuOCw0QzExOSw0LjQsMTMyLDE3LjcsMTMyLDM0YzAsMy40LTAuNiw2LjctMS42LDkuOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTUzLjQsNCwxNzAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE3MS42LDRDMTg3LjQsNC45LDIwMCwxOCwyMDAsMzRjMCw2LjgtMi4zLDEzLjEtNi4xLDE4LjIiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIyMS40LDQsMjM4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNDAuNCw0LjFDMjU1LjgsNS4zLDI2OCwxOC4yLDI2OCwzNGMwLDEwLjEtNSwxOS0xMi42LDI0LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMwNiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI4OS40LDQsMzA2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMDkuMSw0LjJDMzI0LjIsNS43LDMzNiwxOC41LDMzNiwzNGMwLDEzLjItOC41LDI0LjQtMjAuMywyOC40Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNTcuNCw0LDM3NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzc3LjksNC4zQzM5Mi42LDYuMiw0MDQsMTguOCw0MDQsMzRjMCwxNi0xMi42LDI5LjEtMjguNCwzMCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDQyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNDI1LjQsNCw0NDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ0Ni43LDQuNEM0NjEsNi42LDQ3MiwxOSw0NzIsMzRjMCwxNi42LTEzLjQsMzAtMzAsMzBjLTIuMSwwLTQuMi0wLjItNi4yLTAuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTEwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBjLTE2LjYsMC0zMC0xMy40LTMwLTMwUzQ5My40LDQsNTEwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01MTUuNSw0LjVDNTI5LjQsNy4xLDU0MCwxOS4zLDU0MCwzNGMwLDE2LjYtMTMuNCwzMC0zMCwzMGMtNC43LDAtOS4yLTEuMS0xMy4yLTMuMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTc4LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNTYxLjQsNCw1NzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTU4NC4yLDQuN0M1OTcuOCw3LjUsNjA4LDE5LjYsNjA4LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy03LjMsMC0xNC0yLjYtMTkuMS02LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTY0Niw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzYyOS40LDQsNjQ2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik02NTMsNC44QzY2Ni4yLDgsNjc2LDE5LjksNjc2LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy05LjcsMC0xOC4zLTQuNi0yMy44LTExLjgiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTcxNCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzY5Ny40LDQsNzE0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik03MjEuOCw1QzczNC42LDguNCw3NDQsMjAuMSw3NDQsMzRjMCwxNi42LTEzLjQsMzAtMzAsMzBjLTEyLDAtMjIuMy03LTI3LjEtMTcuMiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNzgyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNzY1LjQsNCw3ODIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTc5MC41LDUuMkM4MDIuOSw4LjksODEyLDIwLjQsODEyLDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy0xNC4xLDAtMjYtOS44LTI5LjItMjIuOSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODUwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTODMzLjQsNCw4NTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTg1OS4zLDUuNUM4NzEuMyw5LjQsODgwLDIwLjcsODgwLDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy0xNi4xLDAtMjkuMy0xMi43LTMwLTI4LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTkxOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzkwMS40LDQsOTE4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik05MjgsNS43QzkzOS43LDkuOCw5NDgsMjEsOTQ4LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtMS40LDAuMS0yLjgsMC4zLTQuMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOTg2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTOTY5LjQsNCw5ODYsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTk5Ni44LDZjMTEuMiw0LjMsMTkuMiwxNS4yLDE5LjIsMjhjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC0zLjIsMC41LTYuMywxLjQtOS4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDU0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTAzNy40LDQsMTA1NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA2NS41LDYuM2MxMC44LDQuNSwxOC41LDE1LjIsMTguNSwyNy43YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtNC45LDEuMi05LjYsMy4zLTEzLjciLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExMjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxMTA1LjQsNCwxMTIyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMTM0LjIsNi42YzEwLjUsNC43LDE3LjgsMTUuMiwxNy44LDI3LjRjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC02LjYsMi4xLTEyLjcsNS43LTE3LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExOTAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxMTczLjQsNCwxMTkwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMjAzLDYuOWMxMCw0LjksMTcsMTUuMiwxNywyNy4xYzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtOC4yLDMuMy0xNS42LDguNi0yMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI1OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzEyNDEuNCw0LDEyNTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTEyODEuNCwxNS4zYzQuMSw1LjEsNi42LDExLjYsNi42LDE4LjdjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC05LjYsNC42LTE4LjIsMTEuNi0yMy43Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMzI2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTMwOS40LDQsMTMyNiw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTM1NSwyNi40YzAuNiwyLjQsMSw1LDEsNy42YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtMTEsNi0yMC43LDE0LjktMjUuOSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTM5NCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzEzNzcuNCw0LDEzOTQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE0MjMuNywzOC4xYy0yLDE0LjYtMTQuNSwyNS45LTI5LjcsMjUuOWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xMi4zLDcuNS0yMywxOC4xLTI3LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE0NjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNDQ1LjQsNCwxNDYyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNDg4LjMsNDguNWMtNS4xLDkuMi0xNSwxNS41LTI2LjMsMTUuNWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xMy42LDktMjUsMjEuNC0yOC43Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNTMwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTUxMy40LDQsMTUzMCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTU0OS45LDU2LjRjLTUuMyw0LjctMTIuMyw3LjYtMTkuOSw3LjZjLTE2LjYsMC0zMC0xMy40LTMwLTMwYzAtMTQuNywxMC42LTI3LDI0LjYtMjkuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTU5OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE1ODEuNCw0LDE1OTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE2MTAsNjEuNWMtMy43LDEuNi03LjcsMi41LTEyLDIuNWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xNS44LDEyLjItMjguNywyNy42LTI5LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE2NjYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNjQ5LjQsNCwxNjY2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNjY5LjUsNjMuOGMtMS4yLDAuMS0yLjMsMC4yLTMuNSwwLjJjLTE2LjYsMC0zMC0xMy40LTMwLTMwczEzLjQtMzAsMzAtMzBjMC4yLDAsMC40LDAsMC41LDAiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE3MzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNzE3LjQsNCwxNzM0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNzI5LjMsNjMuNkMxNzE1LDYxLjQsMTcwNCw0OSwxNzA0LDM0YzAtMTYuNiwxMy40LTMwLDMwLTMwYzEuMSwwLDIuMiwwLjEsMy4zLDAuMiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTgwMiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE3ODUuNCw0LDE4MDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE3OTAuMSw2MS41Yy0xMC43LTQuNi0xOC4xLTE1LjItMTguMS0yNy41YzAtMTYuNiwxMy40LTMwLDMwLTMwYzIsMCwzLjksMC4yLDUuOCwwLjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE4NzAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxODUzLjQsNCwxODcwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xODUyLDU4Yy03LjMtNS41LTEyLTE0LjItMTItMjRjMC0xNi42LDEzLjQtMzAsMzAtMzBjMi44LDAsNS42LDAuNCw4LjIsMS4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xOTM4LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTkyMS40LDQsMTkzOCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTkxNS4zLDUzLjZjLTQuNS01LjMtNy4zLTEyLjEtNy4zLTE5LjZjMC0xNi42LDEzLjQtMzAsMzAtMzBjMy42LDAsNy4xLDAuNiwxMC4zLDEuOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjAwNiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE5ODkuNCw0LDIwMDYsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE5NzkuOSw0OC43Yy0yLjUtNC4zLTMuOS05LjMtMy45LTE0LjdjMC0xNi42LDEzLjQtMzAsMzAtMzBjNC40LDAsOC42LDAuOSwxMi4zLDIuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjA3NCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIwNTcuNCw0LDIwNzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIwNDUuNiw0My44Yy0xLTMuMS0xLjYtNi40LTEuNi05LjhjMC0xNi42LDEzLjQtMzAsMzAtMzBjNS4xLDAsOS45LDEuMywxNC4xLDMuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjE0Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIxMjUuNCw0LDIxNDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxMTIuNCwzOC45Yy0wLjMtMS42LTAuNC0zLjItMC40LTQuOWMwLTE2LjYsMTMuNC0zMCwzMC0zMGM1LjgsMCwxMS4yLDEuNiwxNS44LDQuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjIxMCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIxOTMuNCw0LDIyMTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxODAsMzQuM2MwLTAuMSwwLTAuMiwwLTAuM2MwLTE2LjYsMTMuNC0zMCwzMC0zMGM2LjQsMCwxMi40LDIsMTcuMyw1LjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIyNzgsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyMjYxLjQsNCwyMjc4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yMjQ4LjMsMzAuMUMyMjUwLjIsMTUuNCwyMjYyLjgsNCwyMjc4LDRjNywwLDEzLjUsMi40LDE4LjYsNi41Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMzQ2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMjMyOS40LDQsMjM0Niw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjMxNywyNi4zYzMuNC0xMi44LDE1LjEtMjIuMywyOS0yMi4zYzcuNiwwLDE0LjYsMi44LDE5LjksNy41Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNDE0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMjM5Ny40LDQsMjQxNCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjM4Ni4xLDIyLjlDMjM5MC41LDExLjgsMjQwMS40LDQsMjQxNCw0YzguMiwwLDE1LjYsMy4zLDIxLDguNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjQ4Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI0NjUuNCw0LDI0ODIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI0NTUuNSwyMGM1LTkuNSwxNS0xNiwyNi41LTE2YzguNywwLDE2LjUsMy43LDIyLDkuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjU1MCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI1MzMuNCw0LDI1NTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI1MjUsMTcuNWM1LjMtOC4xLDE0LjUtMTMuNSwyNS0xMy41YzkuMiwwLDE3LjQsNC4xLDIyLjksMTAuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjYxOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI2MDEuNCw0LDI2MTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI1OTQuNSwxNS4zQzI2MDAsOC40LDI2MDguNSw0LDI2MTgsNGM5LjYsMCwxOC4yLDQuNSwyMy43LDExLjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI2ODYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyNjY5LjQsNCwyNjg2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjY0LjEsMTMuNWM1LjUtNS44LDEzLjMtOS41LDIxLjktOS41YzEwLDAsMTksNSwyNC40LDEyLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI3NTQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyNzM3LjQsNCwyNzU0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzMzLjcsMTEuOUMyNzM5LDcsMjc0Ni4yLDQsMjc1NCw0YzEwLjUsMCwxOS43LDUuNCwyNS4xLDEzLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4MjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyODA1LjQsNCwyODIyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yODAzLjIsMTAuNmM1LjEtNC4xLDExLjctNi42LDE4LjgtNi42YzEwLjksMCwyMC40LDUuOCwyNS42LDE0LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4OTAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyODczLjQsNCwyODkwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yODcyLjYsOS41YzQuOS0zLjQsMTAuOS01LjUsMTcuNC01LjVjMTEuMiwwLDIxLDYuMiwyNi4yLDE1LjMiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5NTgsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyOTQxLjQsNCwyOTU4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yOTQyLDguNmM0LjctMi45LDEwLjEtNC42LDE2LTQuNmMxMS42LDAsMjEuNyw2LjYsMjYuNywxNi4yIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMDI2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzAwOS40LDQsMzAyNiw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzAxMS40LDcuOGM0LjMtMi40LDkuMy0zLjgsMTQuNi0zLjhjMTIsMCwyMi4zLDcsMjcuMSwxNy4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMDk0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzA3Ny40LDQsMzA5NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzA4MC42LDcuMWM0LTIsOC42LTMuMSwxMy40LTMuMWMxMi4zLDAsMjIuOSw3LjQsMjcuNSwxOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzE2Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzMxNDUuNCw0LDMxNjIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTMxNDkuOCw2LjZjMy43LTEuNyw3LjgtMi42LDEyLjItMi42YzEyLjYsMCwyMy40LDcuOCwyNy45LDE4LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMyMzAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzMjEzLjQsNCwzMjMwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMjE4LjksNi4xYzMuNC0xLjMsNy4yLTIuMSwxMS4xLTIuMWMxMi45LDAsMjQsOC4yLDI4LjIsMTkuNyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI5OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzMyODEuNCw0LDMyOTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTMyODcuOSw1LjdjMy4yLTEuMSw2LjYtMS43LDEwLjEtMS43YzEzLjIsMCwyNC41LDguNiwyOC41LDIwLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMzNjYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzMzQ5LjQsNCwzMzY2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMzU2LjksNS40YzIuOS0wLjksNS45LTEuNCw5LjEtMS40YzEzLjUsMCwyNSw5LDI4LjcsMjEuMyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzQzNCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM0MTcuNCw0LDM0MzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM0MjUuOCw1LjFjMi42LTAuNyw1LjQtMS4xLDguMi0xLjFjMTMuOCwwLDI1LjUsOS40LDI5LDIyLjEiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM1MDIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNDg1LjQsNCwzNTAyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNDk0LjcsNC45YzIuNC0wLjYsNC44LTAuOSw3LjMtMC45YzE0LjEsMCwyNiw5LjgsMjkuMiwyMi45Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTcwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzU1My40LDQsMzU3MCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzU2My42LDQuN2MyLjEtMC41LDQuMi0wLjcsNi40LTAuN2MxNC40LDAsMjYuNCwxMC4yLDI5LjMsMjMuNyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzYzOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM2MjEuNCw0LDM2MzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM2MzIuNCw0LjVjMS44LTAuMywzLjctMC41LDUuNi0wLjVjMTQuNywwLDI2LjksMTAuNiwyOS41LDI0LjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM3MDYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNjg5LjQsNCwzNzA2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNzAxLjMsNC40YzEuNS0wLjMsMy4xLTAuNCw0LjctMC40YzE1LDAsMjcuNCwxMSwyOS42LDI1LjMiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM3NzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNzU3LjQsNCwzNzc0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNzcwLjEsNC4zYzEuMi0wLjIsMi42LTAuMywzLjktMC4zYzE1LjIsMCwyNy44LDExLjQsMjkuNywyNi4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zODQyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzgyNS40LDQsMzg0Miw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzgzOC45LDQuMmMxLTAuMSwyLTAuMiwzLjEtMC4yYzE1LjUsMCwyOC4zLDExLjgsMjkuOCwyNi45Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zOTEwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzg5My40LDQsMzkxMCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzkwNy42LDQuMWMwLjgtMC4xLDEuNi0wLjEsMi40LTAuMWMxNS44LDAsMjguNywxMi4yLDI5LjksMjcuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzk3OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM5NjEuNCw0LDM5NzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM5NzYuNCw0YzAuNSwwLDEuMSwwLDEuNiwwYzE2LDAsMjkuMSwxMi42LDMwLDI4LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwNDYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFM0MDI5LjQsNCw0MDQ2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik00MDQ1LjIsNGMwLjMsMCwwLjUsMCwwLjgsMGMxNi4zLDAsMjkuNiwxMywzMCwyOS4yIi8+Cjwvc3ZnPgo="},396:function(e,t,n){var i,r;i=[n(7),n(2),n(6),n(1),n(14),n(416),n(11),n(23),n(0)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";var c=o.LibraryImageLinksModel,u="result_columns%5B%5D=title&result_columns%5B%5D=is_licensed&result_columns%5B%5D=content_type&result_columns%5B%5D=thumbnail_160_url&result_columns%5B%5D=thumbnail_160_width&result_columns%5B%5D=thumbnail_160_height&result_columns%5B%5D=comps&result_columns%5B%5D=details_url&result_columns%5B%5D=creator_name&result_columns%5B%5D=id&result_columns%5B%5D=premium_level_id",d={Standard:"royalty_free_standard",Extended:"royalty_free_extended"};function h(e){this.result=null,this._reachedEnd=!1,this.collection=new n.Collection,this.collection.model=c,this._searchAPI=e||h.searchPath,this._lastOpts=null}function p(e,t){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this._items=[],this._modelAttrs=[],this.filter=t,this._parseData()}function f(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this.links={},this._parseData()}function g(e){return!!(e.comps&&e.comps.Standard&&e.comps.Standard.url||1===e.media_type_id||2===e.media_type_id)}return h.apiHost=l.stockApiHost,h.searchPath="/Rest/Media/1/Search/Files",h.infoPath="/api/v1/assets/",h.profilePath="/Rest/Libraries/1/Member/Profile",h.itemLicensePath="/Rest/Libraries/1/Content/License",h.licenseHistoryPath="/Rest/Libraries/1/Member/LicenseHistory",h.bulkMetadataPath="/Rest/Media/1/Files",h.licenseHistorySearchQuery="<<<[[[***LICENSE HISTORY***]]]>>>",t.extend(h.prototype,{search:function(e){this.result=null;var n={page:1,size:30,asset_type:"image",image_filter:[],source:[]};this._searchAPI===h.searchPath&&(n.query="landscape");var i=this._getParams(n,e),r=e.success,o=e.error;function s(t){return!(e.blockUnlicensedPremium&&!t.is_licensed&&t.data.premium_level_id>1)&&(!e.image_filter||!e.image_filter.length||e.image_filter.indexOf(t.links.original.type)>=0)}var c=h.apiHost+this._searchAPI;this._lastOpts=t.extend({},i,e);i.page>1&&i.page;var d,f={"search_parameters[offset]":(i.page-1)*i.size,"search_parameters[limit]":i.size};return this._searchAPI===h.licenseHistoryPath?d="result_columns%5B%5D=thumbnail_160_url&result_columns%5B%5D=thumbnail_160_width&result_columns%5B%5D=thumbnail_160_height":(f["search_parameters[words]"]=i.query,d=u),a.ajax({url:c+"?"+d,data:f,beforeSend:function(e){return e.setRequestHeader("X-api-key",l.key),e.setRequestHeader("X-Product",l.key),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done(function(e,n,a){var l=null;if(!e||t.isEmpty(e))l=new Error("No data received");else if(e.error_code)l=new Error(e.message);else try{this.result=new p(e,"image"===i.asset_type?s.bind(this):null),this.result.getLength()?(this.offset+=e.files.length,this.collection.reset(this.result._modelAttrs)):this._reachedEnd=!0}catch(c){l=c}l?o&&o(a,"error",l):r&&r(this.result,n,a)}.bind(this)).fail(o)},searchNextSet:function(e){return this._lastOpts.page++,e=t.extend({add:!0},this._lastOpts,e),this.search(e)},reachedEnd:function(){return this._reachedEnd},_getParams:function(e,n){if(e=t.extend({},e),n){var i=[];for(var r in e)i.push(r);i.unshift(n);var o=t.pick.apply(t,i);e=t.extend(e,o)}return e},getLength:function(){return this.collection.length},at:function(e){return this.collection.at(e)}}),t.extend(p.prototype,{_parseData:function(){for(var e=this.data.files,t=0,n=e.length;t<n;t++){var i=e[t];if(g(i)){var r=new f(i);if(!this.filter||this.filter(r)){var o=r.getThumbURL(),a=r.getPreviewURL(),s=r.getOriginalURL();this._items.push(r),this._modelAttrs.push({source_id:i.id,title:i.title,mimeType:r.getMimeType(),image_url:s||a||o,preview_url:a||s||o,thumb_url:o||a||s})}}}},getLength:function(){return this._items.length},at:function(e){return this._items[e]}}),t.extend(f.prototype,{_parseData:function(){this.links.original=this.links.original||{},this.links.preview=this.links.preview||{},this.links.thumb=this.links.thumb||{},this.data.comps&&(this.links.original.href=this.data.comps.Standard.url,this.links.preview.href=this.data.comps.Standard.url,this.links.original.height=this.data.comps.Standard.height,this.links.original.width=this.data.comps.Standard.width,this.links.preview.height=this.data.comps.Standard.height,this.links.preview.width=this.data.comps.Standard.width),this.links.thumb.href=this.data.thumbnail_160_url,this.links.thumb.height=this.data.thumbnail_160_height,this.links.thumb.width=this.data.thumbnail_160_width,this.is_licensed=this.data.is_licensed||this.data.license,this.links.thumb.type=this.links.preview.type=this.links.original.type=this.data.content_type},setOriginalLinkFields:function(e){this.links.licensed?(e.link=this._sanitizeURL(this.links.licensed.url),e.height=this.links.licensed.height,e.width=this.links.licensed.width):(e.link=this._sanitizeURL(this.links.original.href),e.height=this.links.original.height,e.width=this.links.original.width)},getOriginalURL:function(){var e=this.links.licensed&&this.links.licensed.url||this.links.original.href;return this._sanitizeURL(e)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getMimeType:function(){return this.links.original.type},_sanitizeURL:function(e){return e},getAspect:function(){return{width:this.links.thumb.width,height:this.links.thumb.height}},getThumbHoverLabel:function(){return this.is_licensed&&r.getString("imagepicker-stock-licensed-image-hover-label")||""}}),h.addLocaleToParams=function(e){var t=a.getUserCountryInfo();t&&(e.locale=t.locale)},h.getLicensesAvailable=function(){var e=i.defer(),t=h.apiHost+h.profilePath,n={};return h.addLocaleToParams(n),a.ajax({url:t,data:n,beforeSend:function(e){return e.setRequestHeader("X-api-key",l.key),e.setRequestHeader("X-Product",l.key),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(t,n,i){var r=t.available_entitlement?t.available_entitlement.quota:0,o=!!t.purchase_options&&t.purchase_options.requires_checkout,a=t.purchase_options&&"not_possible"===t.purchase_options.state,s=t.purchase_options&&t.purchase_options.url||!1,l=t.purchase_options&&t.purchase_options.message;marvel.logger.debug("AdobeStockRequest.getLicensesAvailable: Stock profile",t),e.resolve({numLicenses:r,requiresCheckout:o,notAllowedToPurchase:a,purchaseUrl:s,purchaseMessage:l})})).fail((function(t){marvel.logger.error("AdobeStockRequest.getLicensesAvailable: Retrieve available licenses error",{error:t}),e.reject(t)})),e.promise},h.licenseItem=function(e){var t=i.defer(),n=h.apiHost+h.itemLicensePath,r={content_id:e};return h.addLocaleToParams(r),a.ajax({url:n,data:r,beforeSend:function(e){return e.setRequestHeader("X-api-key",l.key),e.setRequestHeader("X-Product",l.key),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(n){var i=n.contents[e],r={url:i.purchase_details.url,licenseType:d[i.purchase_details.license],width:i.purchase_details.width,height:i.purchase_details.height,mimeType:i.purchase_details.content_type,thumb:i.thumbnail};t.resolve(r)})).fail((function(e){marvel.logger.error("AdobeStockRequest.licenseItem: stock license request error",{url:n,data:r,status:e.status,response:e.responseJSON||e.responseText}),t.reject(e)})),t.promise},h.getStockAssetDetailsUrl=function(e){return h.getItemInfo(e,{params:["details_url"]}).then((function(e){return e.details_url}),(function(e){return marvel.logger.error("AdobeStockRequest.getStockAssetDetailsUrl: Get Stock page url error",{error:e}),i.reject(e)}))},h.getItemInfo=function(e,t){t=t||{};var n=i.defer(),r=h.apiHost+h.searchPath,o={"search_parameters[media_id]":e,"search_parameters[offset]":0,"search_parameters[limit]":1},s="";return s=t.params?"result_columns%5B%5D="+t.params.join("&result_columns%5B%5D="):u,h.addLocaleToParams(o),marvel.logger.info("AdobeStockRequest.getItemInfo",{id:e}),a.ajax({url:r+"?"+s,data:o,beforeSend:function(e){return e.setRequestHeader("X-api-key",l.key),e.setRequestHeader("X-Product",l.key),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,t,i){if(!e||!e.files||!e.files[0]){var a=i&&i.getResponseHeader("x-request-id"),s=i&&i.responseText,l=i&&i.status;marvel.logger.error("AdobeStockRequest.getItemInfo: search request empty response",{url:r,data:o,"x-request-id":a,status:l,response:s,resultData:JSON.stringify(e)})}var c=e.files[0];n.resolve(c)})).fail((function(e){var t=e&&e.getResponseHeader("x-request-id");marvel.logger.error("AdobeStockRequest.getItemInfo: search request error",{url:r,data:o,"x-request-id":t,status:e.status,response:e.responseText}),n.reject(new Error("AdobeStockRequest::getItemInfo"))})),n.promise},h.batchGetItemsInfo=function(e,t){t=t||{};var n,r=function(e){var t=100,n=e.length,i=[],r=0;for(s.hasFeature("small-stock-batch")&&(t=5),r=0;r<n;r+=t)i.push(e.slice(r,r+t).join(","));return i}(e),o="";o=t.params?"result_columns%5B%5D="+t.params.join("&result_columns%5B%5D="):u;var c=a.getUserCountryInfo();return c&&(o+="&locale="+c.locale),n=r.map((function(e){return t=o,n=e,r=i.defer(),s=h.apiHost+h.bulkMetadataPath,marvel.logger.info("AdobeStockRequest.batchMetadataRequest",{idList:n}),a.ajax({url:s+"?"+t+"&ids="+n,beforeSend:function(e){return e.setRequestHeader("X-api-key",l.key),e.setRequestHeader("X-Product",l.key),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,t,n){var i=n&&n.getResponseHeader("x-request-id"),o=n&&n.responseText,a=n&&n.status;e&&e.files?marvel.logger.info("AdobeStockRequest.batchMetadataRequest: batch reqeuest succeeded",{url:s,"x-request-id":i,status:a,response:o}):marvel.logger.error("AdobeStockRequest.batchMetadataRequest: batch request empty response",{url:s,"x-request-id":i,status:a,response:o,resultData:JSON.stringify(e)}),r.resolve(e.files)})).fail((function(e){var t=e&&e.getResponseHeader("x-request-id");marvel.logger.error("AdobeStockRequest.batchMetadataRequest: batch request error",{url:s,"x-request-id":t,status:e.status,response:e.responseText}),r.reject(new Error("AdobeStockRequest::batchMetadataRequest"))})),r.promise;var t,n,r,s})),i.all(n).then((function(t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),i=e.length,r=n.length;return i!=r?marvel.logger.error("AdobeStockRequest.batchGetItemsInfo: batch requests error",{requested:i,requestedIds:e,returned:r,returnedIds:JSON.stringify(n)}):marvel.logger.info("AdobeStockRequest.batchGetItemsInfo: batch requests succeeded",{requested:i,returned:r}),n}))},h.getRequestType=function(e){return e?e._searchAPI===h.licenseHistoryPath?"history":"search":void 0},h}.apply(t,i))||(e.exports=r)},400:function(e,t,n){var i,r;i=[n(2),n(1),n(6),n(11),n(25),n(23),n(539),n(67)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l,c;return l=n.Model.extend({initialize:function(){this._sessionsById={}},_getBatonController:function(){return new a},_getBrandKit:function(){return s},_checkEntitlement:function(e,n){var i=o.hasFeature("entitle-brand-kit"),r=e.getMyApp();return t.all([r.isBranded(e),r.hasPremiumIngredients(e)]).spread(function(o,a){return n.known.docIsBranded=o,n.known.docHasPremiumIngredients=a,"video"==r.typeName&&o&&!r.getAuthoringContextId(e)||!o&&!a||i||(n.known.unentitled=!0),t.resolve(!n.known.unentitled)}.bind(this))},_createEditingSession:function(e,n){return{batonEnabled:e,collabEnabled:n,deferInterstitial:t.defer(),batonController:this._getBatonController(),known:{},activity:{}}},mockDocEditingSession:function(n,i){var r=this._createEditingSession(i.batonEnabled,i.collabEnabled);r.known.userEntitled=i.entitled,i.missingBrand?r.known.missingBrand=!0:i.missingFonts&&(r.known.missingFonts=!0,s.getController().then((function(t){var i=n.getMyApp().getAuthoringContextId(n);return t.getContextById(i).then((function(t){r.known.missingFontList=t?e.filter(t.getAllFonts(!0),(function(e){return e.isCustomFont()})):[]}))})).done()),i.batonFailedClean?(r.known.hasBaton=!1,r.known.lockHeldByUserInfo={displayName:"Mock User"}):i.batonFailedDirty?(r.known.hasBaton=!1,r.known.batonServiceFailed=!0,r.known.batonServiceError=new Error("some error from baton service")):i.hasBaton&&(r.known.hasBaton=!0),i.serviceFailed&&(r.known.serviceBorked=!0),this._sessionsById[n.id]=r,r.entitlementPromise=t.resolve(i.entitled),r.entitlementPromise.then(function(){this._updateUX(r)}.bind(this))},_doVerifyBrand:function(e,n){return this._getBrandKit().verifyBrandAccess(e,n.known.docIsBranded).then(function(i){if(!i||!i.accessOk||!i.brand&&n.known.docIsBranded){n.known.missingBrand=!0;var r=e.getMyApp().getAuthoringContextUrn(e);return n.known.brandURN=r,this._updateUX(n),t.resolve(!1)}return i.switchedToDefaultBrand&&(n.known.switchedToDefaultBrandCb=function(){window.marvel.events.trigger("associated-brand-missing",{doc:e})},this._updateUX(n)),this._getBrandKit().verifyFontAccess(e,i.brand).then(function(e){return e.length>0?(n.known.missingFonts=!0,n.known.missingFontList=e,this._updateUX(n),t.resolve(!1)):(n.known.brandAndFontsOk=!0,this._updateUX(n),t.resolve(!0))}.bind(this))}.bind(this)).catch(function(e){return n.known.serviceBorked=!0,n.known.serviceBorkedMsg="Failed while validating project",n.known.serviceBorkedError=e,this._updateUX(n),t.reject(e)}.bind(this))},_doAcquireBaton:function(e,n){var i=e.getMyApp().getSetting("syncGroup"),r=e.id,o=e.getProjectName(),a=e.getURN();return n.fnOnLeftEditor=function(t){this._sessionsById[r]&&this.releaseBatonAndCloseSession(e)}.bind(this),window.marvel.events.on("left-editing-session",n.fnOnLeftEditor),n.fnOnUnload=function(e){if(n.batonEnabled&&n.batonRequestPromise)return n.batonController.releaseLockOnWindowUnload()},window.addEventListener("unload",n.fnOnUnload),a.then(function(a){return n.batonController.acquireBatonLock(i,r,o,a).then(function(t){return t&&t.virtualBaton&&(n.known.virtualBaton=!0,n.fnUpgradeSession=function(t){var i=this._sessionsById[r];i&&i.known.virtualBaton&&(i.known.userKnows=!1,i.known.virtualBaton=!1,i.batonController.releaseBatonLockAndConnection().then(function(){i.batonRequestPromise=this._doAcquireBaton(e,n),this._updateUX(i),window.marvel.logger.info("Upgrading from virtual baton",{rootObjectId:r})}.bind(this)))}.bind(this),window.marvel.events.on("upgrade-editing-session",n.fnUpgradeSession)),n.known.hasBaton=!0,this._updateUX(n),t}.bind(this),function(e){return n.known.hasBaton=!1,e.lockHeldByUser?n.known.lockHeldByUserId=e.lockHeldByUser:(n.known.batonServiceFailed=!0,n.known.batonServiceError=e),this._updateUX(n),t.reject(e)}.bind(this))}.bind(this))},_awaitEditingSessionDone:function(n){return n.entitlementPromise.then(function(){var i=[n.verifyBrandPromise];return n.batonRequestPromise&&i.push(n.batonRequestPromise),t.allSettled(i).then(function(i){return e.each(i,function(e){"fulfilled"!==e.state&&(e.reason.toString().indexOf("BATON_LOCK_FAILED")>=0?n.known.lockHeldByUserInfo||(n.known.batonServiceFailed=!0,n.known.batonServiceError=e.reason,this._updateUX(n)):window.marvel.logger.debug("EditingSessionDone assuming error is already handled",e.reason))}.bind(this)),window.marvel.events.trigger("editing-session-preflight-complete",n),t.resolve(n)}.bind(this))}.bind(this))},getDocEditingSession:function(e){var n=e.id,i=e.getMyApp().supportsCollaboration(),r=e.getMyApp().requiresDocumentLocking(e),a=this._sessionsById[n];if(!a){if(o.hasFeature("enable-mock-editing-session"))try{var s=window.sessionStorage.getItem("marvel_mock_editing_session");if(s)return s=JSON.parse(s),window.marvel.logger.warn("[using editing session] ->",s),c.mockDocEditingSession(e,s),this._sessionsById[n]}catch(l){window.marvel.logger.warn("caught error in mock editing session",l)}a=this._createEditingSession(r,i),this._sessionsById[n]=a,a.entitlementPromise=this._checkEntitlement(e,a).then(function(n){return a.known.userEntitled=n,a.known.userEntitled?(a.verifyBrandPromise=this._doVerifyBrand(e,a),i&&r?a.batonRequestPromise=this._doAcquireBaton(e,a):(a.known.hasBaton=!0,a.known.virtualBaton=!0,a.batonRequestPromise=t.resolve(),this._updateUX(a))):this._updateUX(a),n}.bind(this),function(e){window.marvel.logger.error("editing-session: failed while checking entitlement",e),a.known.serviceBorked=!0,a.known.serviceBorkedMsg="Failed to check entitlements",a.known.serviceBorkedError=e,this._updateUX(a)}.bind(this)).catch(function(e){window.marvel.logger.error("editing-session: error caught while checking entitlement",e),a.known.serviceBorked=!0,a.known.serviceBorkedMsg="Failed while validating project",a.known.serviceBorkedError=e,this._updateUX(a)}.bind(this)),a.donePromise=this._awaitEditingSessionDone(a)}return a},_leaveInterstitial:function(e,t){e.deferInterstitial.resolve(),t&&(window.history.length>2?window.history.back():window.marvel.navigate("/",{trigger:!0}))},_updateUX:function(e){if(e&&e._ux){var t=e.activity,n=e.known,i=e._ux;if(window.marvel.logger.traceflow("editingsession","[EditingSession:updateUX]",{known:e.known}),t.inactivityTimeout)i.inactiveTimeout&&i.inactiveTimeout(e);else if(!n.userKnows)if(n.serviceBorked)n.userKnows=!0,i.serviceBorked(n.serviceBorkedError);else if(!1===n.userEntitled)n.interstitialReadyToHide&&(n.userKnows=!0,i.unentitled(),e.deferInterstitial.resolve());else if(!1!==n.hasBaton||n.ignoreBatonServiceError){if(!0===n.hasBaton||n.ignoreBatonServiceError)if(n.missingBrand){n.userKnows=!0;var r=e.known.brandURN;i.missingBrand(r).then(function(){this._leaveInterstitial(e,!1)}.bind(this)).done()}else n.missingFonts&&n.interstitialReadyToHide?(n.userKnows=!0,e.deferInterstitial.resolve(),i.missingFonts(n.missingFontList).then((function(t){t||(window.history.length>2?window.history.back():window.marvel.navigate("/",{trigger:!0})),i.editing&&i.editing(e)}))):n.brandAndFontsOk&&n.interstitialReadyToHide?(n.userKnows=!0,e.deferInterstitialResolved||(e.deferInterstitial.resolve(),e.deferInterstitialResolved=!0),i.editing&&i.editing(e)):n.switchedToDefaultBrandCb&&n.switchedToDefaultBrandCb()}else n.batonServiceFailed?n.interstitialReadyToHide&&(n.userKnows=!0,i.batonServiceFailed(n.batonServiceError).then(function(t){t?(n.ignoreBatonServiceError=!0,n.userKnows=!1,this._updateUX(e)):this._leaveInterstitial(e,!0)}.bind(this))):(n.userKnows=!0,e.batonController.lockHeldByUserInfoFromClientId(n.lockHeldByUserId).then(function(t){n.lockHeldByUserInfo=t,i.batonNotAcquired(t).then(function(){this._leaveInterstitial(e,!0)}.bind(this)).done()}.bind(this)).done())}},setUXHandler:function(e,t){var n=this.getDocEditingSession(e);n?(n._ux=t,this._updateUX(n)):window.marvel.logger.warn("failed to acquire EditingSession for doc",e)},inactivityTimeout:function(e){var t=this._sessionsById[e.id];t&&(navigator.onLine?(t.activity.inactivityTimeout=!0,t.activity.lockReleaseDelayTimer=window.setTimeout(function(){t.activity.lockReleaseDelayTimer=0,this.stopInactivityMonitoring(e,t),t.batonController.justReleaseBatonLock()}.bind(this),t.activity.LOCK_RELEASE_TIMEOUT),this._updateUX(t)):this.stopInactivityMonitoring(e,t))},_establishTimeouts:function(e){e.activity.INACTIVE_TIMEOUT=6e5,e.activity.LOCK_RELEASE_TIMEOUT=18e4,o.hasFeature("inactivity-timeout-15-seconds")&&(e.activity.INACTIVE_TIMEOUT=15e3,e.activity.LOCK_RELEASE_TIMEOUT=15e3)},beginSession:function(e,t){if(t.known.virtualBaton)window.marvel.events.trigger("collaboration-state",{enabled:!1});else{var n=t.activity;n.inactiveTimer?window.marvel.logger.warn("User inactiveTimer already exists!?"):(this._establishTimeouts(t),n.inLongUserActivity=0,n._fnTimeout=function(){window.marvel.logger.traceflow("baton-timeout","User inactive, timeout."),n.inactiveTimer=null,c.inactivityTimeout(e)},n.fnUserIsActive=function(e){n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null),0===n.inLongUserActivity?(window.marvel.logger.traceflow("baton-timeout","userIsActive - starting or restarting timer"),n.inactiveTimer=window.setTimeout(n._fnTimeout,n.INACTIVE_TIMEOUT)):window.marvel.logger.traceflow("baton-timeout","userIsActive - ignored within long user activity begin/end pair")},n.fnBeginLongUserActivity=function(){n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null),n.inLongUserActivity+=1,1===n.inLongUserActivity&&window.marvel.logger.traceflow("long-user-activity","Long user activity - STARTED"),window.marvel.logger.traceflow("baton-timeout","beginLongUserActivity - inLongUserActivity = "+n.inLongUserActivity)},n.fnEndLongUserActivity=function(t){n.inLongUserActivity-=1,window.marvel.logger.traceflow("baton-timeout",'endLongUserActivity - reason "'+t+'" inLongUserActivity reduced to '+n.inLongUserActivity),n.inLongUserActivity<0?window.marvel.logger.error('endLongUserActivity - reason "'+t+'" inLongUserActivity reduced to '+n.inLongUserActivity):0===n.inLongUserActivity&&window.marvel.logger.traceflow("long-user-activity","Long user activity - COMPLETE"),"release-lock"===t?(r.trackEvent("coediting:releasedLockAfterLongUserAction",{sparkFormat:e.getMyApp().typeName},"coediting"),c.releaseBatonAndCloseSession(e)):n.fnUserIsActive()},this.startInactivityMonitoring(e,t),window.marvel.events.trigger("collaboration-state",{enabled:!0,timeoutDuration:n.INACTIVE_TIMEOUT}))}},startInactivityMonitoring:function(e,t){var n=t.activity;n.inactiveTimer=window.setTimeout(n._fnTimeout,n.INACTIVE_TIMEOUT),e.getMyApp().onEditorActive(n.fnUserIsActive,n.fnBeginLongUserActivity,n.fnEndLongUserActivity)},stopInactivityMonitoring:function(e,t){var n=t.activity;n.fnUserIsActive&&e.getMyApp().offEditorActive(n.fnUserIsActive),n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null)},endSession:function(e,t){this.stopInactivityMonitoring(e,t)},reviveSession:function(e,n){if(n.activity.lockReleaseDelayTimer)return r.trackEvent("coediting:stillWorkingPressedQuickly",{sparkFormat:e.getMyApp().typeName},"coediting"),window.clearTimeout(n.activity.lockReleaseDelayTimer),n.activity.lockReleaseDelayTimer=0,t.resolve(!0);r.trackEvent("coediting:stillWorkingPressedEventually",{sparkFormat:e.getMyApp().typeName},"coediting");var i=t.defer(),o=e.getMyApp().getSetting("syncGroup"),a=e.id,s=e.getProjectName();return e.getURN().then((function(t){n.batonController.acquireBatonLock(o,a,s,t).then(function(){e.hasCloudDocChanged().then(function(t){t?i.resolve(!1):(this.startInactivityMonitoring(e,n),i.resolve(!0))}.bind(this)).catch((function(e){window.marvel.logger.error("hasCloudDocChanged returned error",e),i.resolve(!1)}))}.bind(this)).catch((function(e){window.marvel.logger.error("acquireBatonLock returned error",e),i.resolve(!1)}))})),i.promise},editingPreflightComplete:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n?n.donePromise:t.reject(new Error("editingPreflightComplete called without an active editing session"))},interstitialReadyToHide:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n?(n.known.interstitialReadyToHide=!0,this._updateUX(n),n.deferInterstitial.promise):t.reject("No editing session")},releaseBatonAndCloseSession:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n&&this.removeDocEditingSession(e),n&&n.batonEnabled&&n.batonRequestPromise?n.batonController.releaseBatonLockAndConnection():t.resolve()},removeDocEditingSession:function(e){if(e){var t=this._sessionsById[e.id];t&&(t.fnOnLeftEditor&&(window.marvel.events.off("left-editing-session",t.fnOnLeftEditor),t.fnOnLeftEditor=null),t.fnOnUnload&&(window.removeEventListener("unload",t.fnOnUnload),t.fnOnUnload=null),t.fnUpgradeSession&&(window.marvel.events.off("upgrade-editing-session",t.fnUpgradeSession),t.fnUpgradeSession=null),t._ux&&t._ux.cleanup&&t._ux.cleanup(t),delete this._sessionsById[e.id])}}}),c=new l}.apply(t,i))||(e.exports=r)},403:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6),n(404)],void 0===(r=function(e,t,n,i,r){"use strict";return i.View.extend({events:{},initialize:function(){t.bindAll(this,t.functionsIn(this))},setupProgress:function(e){this.$el=e.el$||this.$el,this.text$=e.text$,this.itemsAdded=e.itemsAdded||0,this.itemsResolved=e.itemsResolved||0,this.pct=e.pct||0,this._eventNames=e.eventNames,this.initialText=e.initialText},render:function(){this.$el.html(r.toString()),this._eventNames&&this._eventNames.updateText&&(marvel.events.on(this._eventNames.updateText,this._handleProgressUpdateText),this.text$&&""===this.text$.text()&&this.text$.html("&nbsp;")),this.progress$=this.$el.find(".progress-bar-fill"),this.initialText&&this.setText(this.initialText),this._eventNames&&this._eventNames.setPct?(this._setProgressPercent(this.pct),marvel.events.on(this._eventNames.setPct,this._handleProgressSetPct)):(this._setProgressPercent(this.itemsResolved/this.itemsAdded),this._eventNames&&this._eventNames.add&&marvel.events.on(this._eventNames.add,this._handleProgressItemAdded),this._eventNames&&this._eventNames.resolved&&marvel.events.on(this._eventNames.resolved,this._handleProgressItemResolved))},_setProgressPercent:function(e){e>1?e=1:e<0&&(e=0),this.pct=e,this.progress$.css("transform","scaleX("+this.pct+")")},_updateProgressPercent:function(){var e=this.itemsResolved/this.itemsAdded;this._setProgressPercent(e)},_handleProgressItemAdded:function(e){this.itemsAdded+=e||1,this._updateProgressPercent()},_handleProgressItemResolved:function(e){this.itemsResolved+=e||1,this._updateProgressPercent()},_handleProgressSetPct:function(e){this.pct=e,this._setProgressPercent(e)},setText:function(e){this._handleProgressUpdateText(e)},_handleProgressUpdateText:function(e){this.text$&&((e=e||"").jquery?(this.text$.html(""),this.text$.append(e)):this.text$.text(e))},hide:function(){this._eventNames.add&&marvel.events.off(this._eventNames.add,this._handleProgressItemAdded),this._eventNames.resolved&&marvel.events.off(this._eventNames.resolved,this._handleProgressItemResolved),this._eventNames.setPct&&marvel.events.off(this._eventNames.setPct,this._handleProgressSetPct),this._eventNames.updateText&&marvel.events.off(this._eventNames.updateText,this._handleProgressUpdateText)}})}.apply(t,i))||(e.exports=r)},404:function(e,t){e.exports='<div class="progress-bar-view">\n    <div class="progress-bar-bg">\n        <div class="progress-bar-fill"></div>\n    </div>\n</div>\n'},405:function(e,t){e.exports='<div class="confirm-view-bg mrvl-overlay-overlay-bg">\n</div>\n<div class="confirm-view-shell mrvl-overlay-shell" data-auto="confirm-view-shell">\n    <h2 class="confirm-view-dialog-title dialog-title" data-auto="confirm-view-title">{{confirm-view-default-title}}</h2>\n    <div class="confirm-view-content-shell mrvl-overlay-content-shell">\n        <div class="confirm-main-content">\n            <div class="confirm-view-content mrvl-overlay-content">\n                <div class="confirm-view-thumbnail"></div>\n                <div class="confirm-progress-bar" data-auto="confirm-progress-bar"></div>\n                <div class="wait-spinner" data-auto="wait-spinner"></div>\n                <div class="wait-success"></div>\n                <p class="confirm-view-dialog-text" data-auto="confirm-view-text"></p>\n                <div class="confirm-view-prompt-field-area hide">\n                    <input class="confirm-view-prompt-field" data-auto="confirm-view-prompt-field">\n                </div>\n            </div>\n\n            <div class="mrvl-dlg-btn-acts">\n                <div class="sp-cta-button-secondary" data-auto="cancel-btn">{{confirm-view-default-verb-cancel}}</div>\n                <div class="sp-cta-button-primary confirm-btn-0" data-auto="confirm-btn">{{confirm-view-default-verb-ok}}</div>\n                <div class="sp-cta-button-primary confirm-btn-1 hide" data-auto="confirm-btn-1">{{confirm-view-default-verb-ok}}</div>\n                <div class="sp-cta-button-primary confirm-btn-2 hide" data-auto="confirm-btn-2">{{confirm-view-default-verb-ok}}</div>\n            </div>\n        </div>\n    </div>\n    <button class="confirm-view-close-btn x-close-btn">X</button>\n</div>\n'},406:function(e,t,n){var i=n(407);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(202)(i,r);i.locals&&(e.exports=i.locals)},407:function(e,t,n){var i=n(203);(e.exports=n(201)(!1)).push([e.i,".sp-cta-button-primary,.sp-cta-button-secondary{height:32px;border-radius:24px;font-size:15px;font-weight:700;line-height:30px;padding:0 16px;min-width:75px;text-align:center;cursor:pointer;transition:background-color .3s,color .3s}.sp-cta-button-primary.link,.sp-cta-button-secondary.link{text-decoration:none;line-height:32px}.sp-cta-button-primary.disabled,.sp-cta-button-secondary.disabled{background-color:rgba(130,145,155,.09);color:#d8dde0}.sp-cta-button-primary.disabled:active,.sp-cta-button-primary.disabled:hover,.sp-cta-button-secondary.disabled:active,.sp-cta-button-secondary.disabled:hover{cursor:default;background-color:rgba(130,145,155,.09)}.sp-cta-button-primary{color:#fff;background-color:#1473e6}.sp-cta-button-primary:hover{background-color:#1269d0}.sp-cta-button-primary:active{background-color:#1056a7}.sp-cta-button-secondary{color:#82919b;background-color:transparent;border:2px solid #82919b;line-height:28px;transition:background-color .3s,color .3s,border-color .3s}.sp-cta-button-secondary:hover{background-color:#82919b;color:#fff}.sp-cta-button-secondary:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark,.sp-cta-button-secondary.over-dark-photo{color:#dce0e3;border-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo.over-dark-photo,.sp-cta-button-secondary.over-dark.over-dark-photo{color:#fff;border-color:#fff}.sp-cta-button-secondary.over-dark-photo:hover,.sp-cta-button-secondary.over-dark:hover{color:#35414c;background-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo:hover.over-dark-photo,.sp-cta-button-secondary.over-dark:hover.over-dark-photo{background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active,.sp-cta-button-secondary.over-dark:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark-photo{color:#fff;border:2px solid #fff}.sp-cta-button-secondary.over-dark-photo:hover{color:#35414c;background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active{background-color:#35414c;border-color:#35414c;color:#fff}.mrvl-dlg-btn-acts .sp-cta-button-primary,.mrvl-dlg-btn-acts .sp-cta-button-secondary{margin-left:5px;margin-right:5px}.mrvl-dlg-btn-acts .sp-cta-button-primary:first-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:first-child{margin-left:0}.mrvl-dlg-btn-acts .sp-cta-button-primary:last-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:last-child{margin-right:0}.mrvl-overlay-overlay-bg{z-index:106;position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.8)}.mrvl-overlay-shell{z-index:106;position:fixed;background-color:#fff;border-radius:10px;width:580px;height:500px;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.mrvl-overlay-shell .marvel-overlay-shell-content{background-color:#fff;border-radius:5px;position:absolute;top:30px;bottom:0;width:100%}.mrvl-overlay-shell .mrvl-overlay-content-shell{padding:30px 30px 25px}.mrvl-overlay-shell .mrvl-overlay-content{margin-bottom:80px}.mrvl-overlay-shell .mrvl-overlay-content p{font-size:1.38em;font-weight:400;line-height:1.5;color:#35414c;word-wrap:break-word}.mrvl-overlay-shell .dialog-title{font-size:2em;font-weight:700;background-color:#f2f4f5;text-align:left;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#35414c;margin:0;padding:20px 25px;border-top-left-radius:10px;border-top-right-radius:10px}.mrvl-overlay-shell h2{font-size:2.4em;color:#484848}.mrvl-overlay-shell h2,.mrvl-overlay-shell h3{font-weight:300;text-align:center;margin:30px 0 16px}.mrvl-overlay-shell h3{font-size:1.8em;color:#666}.mrvl-overlay-shell .x-close-btn{position:absolute;right:20px;top:20px;background-color:transparent;border:none;outline:none;color:#999;cursor:pointer;font-size:1.4em}.mrvl-overlay-shell .cancel-btn,.mrvl-overlay-shell .done-btn{background-color:transparent;color:#ccc;border:1px solid #ccc}.mrvl-overlay-shell .mrvl-dlg-btn-acts{position:absolute;bottom:27px;text-align:right;right:25px;width:100%}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn{background-color:#9aa6af}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn:hover{background-color:#82919b}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn{background-color:#35657c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn:hover{background-color:#35414c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn a{color:#fff;background-color:#35657c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn:hover a,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn a:hover{background-color:#35414c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .done-btn{padding:10px 16px;color:#fff;text-decoration:none;border-radius:40px;font-weight:700;font-size:1.23em;margin:0;line-height:1;height:36px;border:0}@-moz-document url-prefix(){.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .done-btn{line-height:-moz-block-height!important}}.mrvl-overlay-shell .mrvl-dlg-btn-acts .mrvl-btn{display:inline-block;margin:0 5px;overflow:hidden;position:relative}.mrvl-overlay-shell .mrvl-dlg-btn-acts .mrvl-btn:last-child{margin-right:0}.mrvl-overlay-shell.short{height:250px}.mrvl-overlay-shell .flag-toggle{width:62px;height:28px;cursor:pointer;display:inline-block;position:relative}.mrvl-overlay-shell .flag-toggle.selected .toggle-values{left:0}.mrvl-overlay-shell .flag-toggle.selected .toggle-handle{left:33px}.mrvl-overlay-shell .flag-toggle:not(.selected) .toggle-handle{left:-3px}.mrvl-overlay-shell .flag-toggle .toggle-handle,.mrvl-overlay-shell .flag-toggle .toggle-values{transition-property:left;transition:left .19s linear;transition-duration:.19s;transition-timing-function:linear;transition-delay:0s}.mrvl-overlay-shell .flag-toggle .toggle-values{width:116px;height:24px;position:absolute;z-index:0;left:-58px}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on{width:58px;line-height:24px;text-transform:uppercase;display:inline-block;font-size:11px;font-weight:700}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off.toggle-values-on,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on.toggle-values-on{background-color:#1473e6;text-align:left;color:#1473e6;padding-left:10px}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off.toggle-values-off,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on.toggle-values-off{background-color:#82909b;text-align:right;color:#82909b;padding-right:10px}.mrvl-overlay-shell .flag-toggle .toggle-mask{position:absolute;overflow:hidden;width:58px;height:24px;z-index:1;top:2px}.mrvl-overlay-shell .flag-toggle .toggle-mask .toggle-values-image-mask{position:absolute;top:0;left:0;width:58px;height:24px;z-index:1;background-image:url("+i(n(393))+');background-size:cover}.mrvl-overlay-shell .flag-toggle .toggle-handle{height:28px;width:28px;border-radius:14px;background-color:#dce0e3;position:absolute;z-index:2}.mrvl-overlay-shell .flag-toggle .toggle-handle .dot{background-color:#81919b;width:6px;height:6px;border-radius:3px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.confirm-overlay .confirm-view-bg,.confirm-overlay .index-progress-view-bg,.confirm-overlay .move-view-bg{z-index:10001}.confirm-overlay .confirm-view-bg.transparent-overlay,.confirm-overlay .index-progress-view-bg.transparent-overlay,.confirm-overlay .move-view-bg.transparent-overlay{background-color:transparent}.confirm-overlay .confirm-view-shell,.confirm-overlay .index-progress-view-shell,.confirm-overlay .move-view-shell{width:inherit;height:auto;min-width:440px;min-height:222px;z-index:10002;border-radius:4px;padding:40px}.confirm-overlay .confirm-view-shell.alert .cancel-btn,.confirm-overlay .index-progress-view-shell.alert .cancel-btn,.confirm-overlay .move-view-shell.alert .cancel-btn{display:none}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title{border-color:transparent}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta{margin-bottom:0;padding-bottom:4px}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after{background:#1473e6;color:#fff;font-size:10px;font-family:adobe-clean,sans-serif;content:"BETA";margin-left:20px;border-radius:0;padding:3px 5px;display:inline-block;-webkit-transform:translateY(-4px);transform:translateY(-4px)}.confirm-overlay .confirm-view-shell .wait-spinner,.confirm-overlay .index-progress-view-shell .wait-spinner,.confirm-overlay .move-view-shell .wait-spinner{display:none}.confirm-overlay .confirm-view-shell .wait-success,.confirm-overlay .index-progress-view-shell .wait-success,.confirm-overlay .move-view-shell .wait-success{display:none;width:63px;height:63px;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-image:url(/images/brandkit/blue-check.svg);background-repeat:no-repeat;background-size:28px 28px;background-position:center 14px;border:4px solid #1d6ae5;border-radius:100px;margin-top:-9px}.confirm-overlay .confirm-view-shell .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-progress .confirm-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .confirm-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .confirm-view-shell.showing-waiter .confirm-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-progress .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell.showing-waiter .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-progress .confirm-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell.showing-waiter .confirm-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts{display:none}.confirm-overlay .confirm-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter.showing-waiter .wait-spinner{-webkit-animation:blue-spinner-anim 1s steps(60) infinite forwards;animation:blue-spinner-anim 1s steps(60) infinite forwards;background:50% url('+i(n(395))+") no-repeat;width:68px;height:68px;position:relative;display:block;margin-bottom:1.5rem;margin-top:-12px}@-webkit-keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}@keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}.confirm-overlay .confirm-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-waiter.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-waiter.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-waiter.showing-progress .confirm-progress-bar{display:block;position:relative;width:80%;margin:10px auto;height:4px;border-radius:0}.confirm-overlay .confirm-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .confirm-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .confirm-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title{text-align:center;border-bottom-color:transparent}.confirm-overlay .confirm-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter.waiter-has-text .wait-spinner{margin-bottom:1rem;margin-top:-24px}.confirm-overlay .confirm-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .confirm-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .confirm-view-shell.showing-waiter .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-waiter .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-waiter .confirm-view-dialog-text{text-align:center}.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content{margin-bottom:inherit}.confirm-overlay .confirm-view-shell.showing-waiter-success .wait-success,.confirm-overlay .index-progress-view-shell.showing-waiter-success .wait-success,.confirm-overlay .move-view-shell.showing-waiter-success .wait-success{display:block}.confirm-overlay .confirm-view-shell .cancel-btn,.confirm-overlay .confirm-view-shell .confirm-btn,.confirm-overlay .confirm-view-shell .mrvl-btn,.confirm-overlay .index-progress-view-shell .cancel-btn,.confirm-overlay .index-progress-view-shell .confirm-btn,.confirm-overlay .index-progress-view-shell .mrvl-btn,.confirm-overlay .move-view-shell .cancel-btn,.confirm-overlay .move-view-shell .confirm-btn,.confirm-overlay .move-view-shell .mrvl-btn{text-align:center}.confirm-overlay .confirm-view-shell .confirm-dialog-link,.confirm-overlay .index-progress-view-shell .confirm-dialog-link,.confirm-overlay .move-view-shell .confirm-dialog-link{font-weight:600;color:#35414c}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field,.confirm-overlay .move-view-shell .confirm-view-prompt-field{color:#35414c;border:1px solid #dce0e3;border-width:0 0 1px;width:100%;font-size:3em;line-height:-moz-block-height;padding-bottom:2px;font-family:adobe-clean,sans-serif}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field:focus,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field:focus,.confirm-overlay .move-view-shell .confirm-view-prompt-field:focus{outline:none;border-color:#1473e6}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field.error,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field.error,.confirm-overlay .move-view-shell .confirm-view-prompt-field.error{border-color:#e63c4b}.confirm-overlay .confirm-view-shell .x-close-btn,.confirm-overlay .index-progress-view-shell .x-close-btn,.confirm-overlay .move-view-shell .x-close-btn{position:absolute;right:25px;top:25px;background-image:url("+i(n(288))+');background-color:transparent;background-repeat:no-repeat;background-size:contain;background-position:50%;width:20px;height:20px;border:none;outline:none;cursor:pointer;color:transparent;transition:opacity .3s ease-in;opacity:.7}.confirm-overlay .confirm-view-shell .x-close-btn:hover,.confirm-overlay .index-progress-view-shell .x-close-btn:hover,.confirm-overlay .move-view-shell .x-close-btn:hover{opacity:1}.confirm-overlay .confirm-view-shell span,.confirm-overlay .index-progress-view-shell span,.confirm-overlay .move-view-shell span{font-weight:400;color:#35414c}.confirm-overlay .confirm-view-shell span em,.confirm-overlay .index-progress-view-shell span em,.confirm-overlay .move-view-shell span em{font-weight:700}.confirm-overlay .confirm-view-shell a,.confirm-overlay .index-progress-view-shell a,.confirm-overlay .move-view-shell a{text-decoration:none;cursor:pointer;color:#35414c;font-weight:700;opacity:.9}.confirm-overlay .confirm-view-shell a:hover,.confirm-overlay .index-progress-view-shell a:hover,.confirm-overlay .move-view-shell a:hover{opacity:1}.confirm-overlay .confirm-view-shell .sp-cta-button-primary a,.confirm-overlay .confirm-view-shell .sp-cta-button-secondary a,.confirm-overlay .index-progress-view-shell .sp-cta-button-primary a,.confirm-overlay .index-progress-view-shell .sp-cta-button-secondary a,.confirm-overlay .move-view-shell .sp-cta-button-primary a,.confirm-overlay .move-view-shell .sp-cta-button-secondary a{color:inherit;opacity:inherit}.confirm-overlay .confirm-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .confirm-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary,.confirm-overlay .index-progress-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .index-progress-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary,.confirm-overlay .move-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .move-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary{opacity:.5}.confirm-overlay .confirm-view-shell b,.confirm-overlay .confirm-view-shell strong,.confirm-overlay .index-progress-view-shell b,.confirm-overlay .index-progress-view-shell strong,.confirm-overlay .move-view-shell b,.confirm-overlay .move-view-shell strong{font-weight:600}.confirm-overlay .mrvl-overlay-overlay-bg{background-color:rgba(25,34,38,.5)}.confirm-overlay .mrvl-overlay-shell .dialog-title{width:360px;font-size:22px;font-weight:700;font-family:brandon-grotesque,adobe-clean,sans-serif;background-color:inherit;padding:0 0 13px;border-bottom:2px solid #e8ebed;margin-bottom:25px}.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts{margin-top:25px;position:inherit;display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts button,.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts input[type=button]{outline:none;font-family:adobe-clean,sans-serif}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p{font-size:1.077em;width:360px}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p span{font-family:adobe-clean,sans-serif;font-weight:400;font-size:1em}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p span em{font-weight:700}.confirm-overlay .confirm-view-content-shell.mrvl-overlay-content-shell{padding:0}.confirm-overlay .confirm-view-content-shell.mrvl-overlay-content-shell .confirm-view-content{margin-bottom:inherit}.confirm-overlay .cancel-btn,.confirm-overlay .confirm-btn,.confirm-overlay .mrvl-btn{border-radius:40px;font-size:1.23em;font-family:adobe-clean,sans-serif;font-weight:700;height:32px;padding:6px 16px 7px;transition:background-color .2s ease-in,color .2s ease-in;text-align:center}.confirm-overlay .confirm-btn,.confirm-overlay .confirm-btn a{background-color:#1473e6;color:#fff;line-height:1.23em}.confirm-overlay .confirm-btn.confirm-btn a,.confirm-overlay .confirm-btn a.confirm-btn a{opacity:1;transition:background-color .2s ease-in,color .2s ease-in}.confirm-overlay .confirm-btn:hover,.confirm-overlay .confirm-btn a:hover{background-color:#1269d0}.confirm-overlay .confirm-btn:hover a,.confirm-overlay .confirm-btn a:hover a{background-color:#1269d0;color:#fff}.confirm-overlay .confirm-btn:active,.confirm-overlay .confirm-btn a:active{background-color:#1056a7}.confirm-overlay .confirm-btn:active a,.confirm-overlay .confirm-btn a:active a{background-color:#1056a7;color:#fff}.confirm-overlay .cancel-btn{background-color:transparent;color:#82919b;border:2px solid #82919b}.confirm-overlay .cancel-btn:active,.confirm-overlay .cancel-btn:hover{background-color:#82919b;color:#fff}.confirm-overlay.custom-font-manager-confirm .confirm-view-bg,.confirm-overlay.custom-font-manager-confirm .index-progress-view-bg,.confirm-overlay.custom-font-manager-confirm .move-view-bg{z-index:100003}.confirm-overlay.custom-font-manager-confirm .confirm-view-shell,.confirm-overlay.custom-font-manager-confirm .index-progress-view-shell,.confirm-overlay.custom-font-manager-confirm .move-view-shell{z-index:100004}.confirm-overlay .index-progress-view-shell{padding:0;width:550px}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div{background-color:#eff1f2;border-top-left-radius:4px;border-top-right-radius:4px;overflow:hidden;position:relative}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div .index-progress-view-curve{position:absolute;top:204px;margin-left:-85px;background-color:#e2e6e9;height:550px;width:720px;border-radius:50%}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div .index-progress-view-graphic{height:300px;width:300px;position:relative;z-index:1;margin-left:125px}.confirm-overlay .index-progress-view-shell .index-progress-view-description{background-color:#fff;margin:30px 30px 0}.confirm-overlay .index-progress-view-shell .index-progress-view-description .index-progress-view-title{border:none;margin:0}.confirm-overlay .index-progress-view-shell .index-progress-view-description p{font-size:1.2em;font-weight:300;margin-bottom:6px}.confirm-overlay .index-progress-view-shell .index-progress-view-description .index-progress-view-warning{font-weight:700;font-style:italic}.confirm-overlay .index-progress-view-shell .index-progress-view-results{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;margin:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left{width:100%}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:7px;padding-right:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label{font-weight:700;opacity:.5}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span{-webkit-animation:dots-blink;animation:dots-blink;-webkit-animation-duration:1.4s;animation-duration:1.4s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-fill-mode:both;animation-fill-mode:both}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span:nth-child(2){-webkit-animation-delay:.4s;animation-delay:.4s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span:nth-child(3){-webkit-animation-delay:.8s;animation-delay:.8s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-complete-view-label{font-weight:700;opacity:.5}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar{height:8px;width:100%;padding-right:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar .progress-bar-view{position:static}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar .progress-bar-view .progress-bar-bg .progress-bar-fill{transition:-webkit-transform .1s ease-out;transition:transform .1s ease-out;transition:transform .1s ease-out,-webkit-transform .1s ease-out}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right{width:100%;display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button{padding-left:15px;padding-right:15px;height:30px;cursor:pointer;font-size:15px;font-weight:800;color:#fff;background-color:#1473e6;border-radius:20px;transition:background-color .2s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button:focus{outline:none}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button.disabled{background-color:#f1f1f1;color:#aeaeae}.progress-bar-view{position:absolute;height:100%;width:100%;top:0;left:0}.progress-bar-view .progress-bar-bg{height:100%;border-radius:50px;background-color:#dce0e3;overflow:hidden}.progress-bar-view .progress-bar-bg .progress-bar-fill{height:100%;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transform-origin:left center 0;transform-origin:left center 0;background-color:#1473e6;transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out;transition:transform .5s ease-out,-webkit-transform .5s ease-out}.progress-bar-view .progress-bar-bg .progress-bar-fill.ongoing{width:95%;transition:width 6s ease-out}.mrvl-dlg-btn-area{position:absolute;bottom:30px;text-align:center;width:100%}.mrvl-dlg-btn-area .mrvl-btn{display:inline-block;margin:0 20px}.wait-spinner{content:"";position:absolute;top:50%;left:48.5%;margin:-1.5rem 0 0 -1.5rem;width:65px;height:65px;background-size:100% 100%;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:wait-spinner-rotate;animation-name:wait-spinner-rotate}@-webkit-keyframes wait-spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes wait-spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dots-blink{0%{opacity:.2}20%{opacity:1}to{opacity:.2}}@keyframes dots-blink{0%{opacity:.2}20%{opacity:1}to{opacity:.2}}',""])},416:function(e,t,n){var i,r;i=[n(2),n(6)],void 0===(r=function(e,t){"use strict";return{LibraryImageModel:t.Model.extend({getImage:function(){if(this.collection){var e=this.collection.images;if(e)return e.get(this.get("image_id"))}return null},getImageURL:function(){var e=this.getImage();return e?e.get("image_url"):this.get("image_url")||""},getPreviewURL:function(){return this.getImageURL()},getThumbURL:function(){return this.getImageURL()}}),LibraryImageLinksModel:t.Model.extend({getImageURL:function(){return this.get("image_url")||""},getPreviewURL:function(){return this.get("preview_url")||""},getThumbURL:function(){return this.get("thumb_url")||""},getImageSize:function(){return this.get("image_size")||void 0},getPreviewSize:function(){return this.get("preview_size")||void 0},getThumbSize:function(){return this.get("thumb_size")||void 0}})}}.apply(t,i))||(e.exports=r)},420:function(e,t){},421:function(e,t){},423:function(e,t){},424:function(e,t){},534:function(e,t,n){var i,r;i=[n(2),n(6),n(1),n(36)],void 0===(r=function(e,t,n,i){"use strict";return t.Model.extend({defaults:{name:"",relationship:"",type:"",path:"",contents:"",composite:null,file:null,parent:null,modified:0},getFile:function(){var e=this.get("file");return e||(this.get("type").match("image")?void 0:new Blob([this.get("contents")],{type:"text/plain"}))},getActualComponent:function(){return this.get("composite").current.getComponentWithAbsolutePath("/"+this.get("path"))},isModified:function(){return this.get("modified")>0},setModified:function(){var e=this.get("modified");this.set("modified",e+1)},setUnmodified:function(){var e=this.get("modified");this.set("modified",e-1)}})}.apply(t,i))||(e.exports=r)},539:function(e,t,n){var i,r,o;i=[n(2),n(1),n(6),n(16),n(36),n(0),n(5),n(11),n(23),n(545),n(87),n(61)],void 0===(r=function(e,t,n,i,r,a,s,l,c,u,d,h){"use strict";o=n.Model.extend({initialize:function(){this.connectionManager=void 0,this.rootObjectId=void 0,this._connectionManagerPromise=void 0,this._initLogger()},_initLogger:function(){this.logger=new s.default({color:"steelblue",name:"baton-controller"}),this.logger.debug=this.logger.debug.bind(this.logger),this.logger.info=this.logger.info.bind(this.logger),this.logger.warn=this.logger.warn.bind(this.logger),this.logger.error=this.logger.error.bind(this.logger),this.logger.traceflow=this.logger.traceflow.bind(this.logger)},_getCollabController:function(){return d},_deltaHandler:function(e){this.logger.traceflow("baton-locking","_deltaHandler, object=",e)},_batonHandler:function(e){this.logger.traceflow("baton-locking","made it to _batonHandler: resource:"+e.resourceId+" sequenceNumber:"+e.sequenceNumber+" clientId:"+e.clientId)},_errorHandler:function(e){this.logger.traceflow("baton-locking","made it to _errorHandler, object=",JSON.stringify(e))},_createConnectionManager:function(e){return new u.default.ConnectionManager(e)},_cookieOverrides:function(e){var t={host:e,pathSuffix:""};return e.match(/stage.*\.adobe.io$/)?(t.host=e.replace(/\.adobe\.io$/,".adobeprojectm.com"),t.pathSuffix=";Domain=adobeprojectm.com"):(t.host=e.replace(/\.adobe\.io$/,".adobe.com"),t.pathSuffix=";Domain=adobe.com"),t},_initializeConnectionManager:function(){if(!this._connectionManagerPromise){var e=Date.now();this._connectionManagerPromise=l.getAccessToken().then(function(e){var t={rootObjectId:this.rootObjectId,dsHost:a.discoveryServiceHost,dsEnvSelector:a.discoveryServiceEnvironment,authToken:e,syncMessageHandler:this._deltaHandler.bind(this),batonMessageHandler:this._batonHandler.bind(this),errorHandler:this._errorHandler.bind(this),cookieOverrides:this._cookieOverrides,logger:this.logger,apiKey:a.key};return this.connectionManager=this._createConnectionManager(t),this.connectionManager.connect()}.bind(this)).then(function(){this.sessionId=i.v4();var t=this.connectionManager.userId,n={deviceId:i.v4(),agent:navigator.userAgent,platform:navigator.platform};this.logger.info("BatonController - connect",{topic:this.rootObjectId,sessionId:this.sessionId,clientInfo:n,elapsed:Date.now()-e});return e=Date.now(),this.connectionManager.send(new u.default.OpenSessionRequest(this.rootObjectId,t,n,"2147483647")).then(function(){this.logger.info("BatonController - opened session",{elapsed:Date.now()-e}),this.logger.traceflow("baton-locking","Delta History session is open.")}.bind(this))}.bind(this)).catch(function(t){throw this.logger.error("BatonController - connect failed",{error:t,elapsed:Date.now()-e}),t}.bind(this))}return this._connectionManagerPromise},isCollaborationEnabled:function(e,t,n){return this._getCollabController().getCollaborationForUrn(n).then(function(e){return!!(e&&e.collaborators&&e.collaborators.length>0)&&(this.collaborators=e.collaborators,!0)}.bind(this))},_clientIdToUserName:function(e){var t=e.split(":")[0],n=(this.collaborators||[]).find((function(e){return e.id===t}));return n&&(n.displayName||n.email)||"Unknown user"},_clientIdToUserInfo:function(e){var t=e.split(":")[0];return(this.collaborators||[]).find((function(e){return e.collaborator===t}))||{displayName:""}},_cachedProfiles:{},_getUserPublicProfileFromClientId:function(e){var n=this._cachedProfiles[e];if(n)return t(n);var i=e.split(":")[0],r=a.behancePublicProfile+i+"?api_key="+a.key;return window.fetch(r,{method:"GET",headers:{"x-api-key":a.key}}).then(function(t){return t.ok?t.json().then(function(t){var i=this._clientIdToUserInfo(e)||{};return n={email:i.email,displayName:i.displayName||""},203===t.http_code?n.images=t.user.images:200===t.http_code&&(n.images=t.user.images),this._cachedProfiles[e]=n,n}.bind(this)).catch(function(t){return this._clientIdToUserInfo(e)}.bind(this)):this._clientIdToUserInfo(e)}.bind(this)).catch(function(t){return this._clientIdToUserInfo(e)}.bind(this))},lockHeldByUserInfoFromErr:function(e){return this._getUserPublicProfileFromClientId(e.lockHeldByUser)},lockHeldByUserInfoFromClientId:function(e){return this._getUserPublicProfileFromClientId(e)},acquireBatonLock:function(e,n,i,r){return this.rootObjectId&&this.rootObjectId!==n?(this.logger.warn("PRIOR LOCK ERROR CONDITION: asking for "+n+" but we still have "+this.rootObjectId),t.reject({code:"FAILED_TO_RELEASE_PRIOR_LOCK",usermsg:"Failed to release project lock."})):n?this.rootObjectId===n&&this._batonLockDefer?this._batonLockDefer.promise:(this.rootObjectId=n,this._batonLockDefer=t.defer(),this._batonLockRequestedTime=0,this.isCollaborationEnabled(e,this.rootObjectId,r).then(function(e){if(e)return this._initializeConnectionManager().then(function(){return this._batonLockRequestedTime=Date.now(),this._requestBatonLock()}.bind(this)).then(function(){this.logger.info("acquireBatonLock success",{elapsed:Date.now()-this._batonLockRequestedTime}),this._batonLockDefer.resolve({virtualBaton:!1})}.bind(this));this._batonLockDefer.resolve({virtualBaton:!0})}.bind(this)).catch(function(e){this._cleanupConnection(),this._batonLockDefer.reject(this._parseBatonError(e,Date.now()-this._batonLockRequestedTime))}.bind(this)),this._batonLockDefer.promise):t.resolve({virtualBaton:!0})},_parseBatonError:function(e,t){var n=new Error("BATON_LOCK_FAILED unable to acquire lock");return e&&e.errObject&&"ACQUIRE_BATON"===e.errObject.operation?423===e.errObject.status?(this.logger.info("AcquireBatonRequest lock denied, another user has it",Object.assign({elapsed:t},e.errObject)),n.lockHeldByUser=e.errObject.clientIds[0]):this.logger.error("baton-locking service failed with unexpected error",e):this.logger.error("unexpected error when attempting to acquire baton lock",e),n},_requestBatonLock:function(){return this.connectionManager.send(new u.default.AcquireBatonRequest([{resourceId:this.rootObjectId,sequenced:!1,allOrNone:!0}],"0",!0)).then(function(e){return this.logger.traceflow("baton-locking","AcquireBatonRequest resolved to "+JSON.stringify(e,null,2)),e}.bind(this))},_cleanupConnection:function(){if(this.connectionManager){try{this.connectionManager.cleanup()}catch(e){this.logger.traceflow("baton-locking","Caught error cleaning up connectionManager")}this.connectionManager=null}this._connectionManagerPromise=null,this.rootObjectId=null},justReleaseBatonLock:function(){return this._connectionManagerPromise?this._connectionManagerPromise.then(function(){return this._batonLockDefer.promise||t.reject(new Error("BatonController::justReleaseBatonLock"))}.bind(this)).then(function(){return this.connectionManager.send(new u.default.ReleaseBatonRequest([this.rootObjectId]))}.bind(this)).then((function(e){console.info("ReleaseBatonRequest resolved to "+JSON.stringify(e,null,2))})).finally(function(){this._batonLockDefer=null}.bind(this)):t.resolve()},releaseBatonLock:function(){return this.releaseBatonLockAndConnection()},releaseLockOnWindowUnload:function(){this.connectionManager&&this.rootObjectId&&(this.connectionManager.send(new u.default.ReleaseBatonRequest([this.rootObjectId])),this.connectionManager.send(new u.default.CloseSessionRequest))},releaseBatonLockAndConnection:function(){return this._connectionManagerPromise?this.justReleaseBatonLock().finally(function(){return this.connectionManager.send(new u.default.CloseSessionRequest)}.bind(this)).then(function(){return this._cleanupConnection(),t.resolve()}.bind(this)).catch(function(e){return e&&e.hasOwnProperty("lockHeldByUser")||this.logger.warn("BatonController: caught error releasing baton",e),this._cleanupConnection(),t.resolve()}.bind(this)):(this._cleanupConnection(),t.resolve())}})}.apply(t,i))||(e.exports=r),e.exports=o},543:function(e,t){},544:function(e,t){},56:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),o=n(16),a=n.n(o),s=n(11),l=n.n(s),c=n(0),u=n.n(c),d=n(5),h=n(18),p={fetch:function(e){var t=r.a.defer();h.SparkPerformanceTracker.measurePromise("SpFetchUtils:".concat(e.method||"GET",":").concat(e.uri),t.promise);var n=e&&e.LOG_CATEGORY||"[CCLibraries]",i=new d.default({color:"purple",name:n}),o=a()(),s=Object.assign({},e.headers,{"x-api-key":e&&e.apiKey||u.a.key,"x-request-id":o}),c=r.a.resolve();return e.skipAuth||(c=l.a.requiresAuth().then((function(){return l.a.getAccessToken().then((function(e){s=Object.assign(s,{authorization:"Bearer "+e})}))}))),c.then((function(){window.fetch(e.uri,{method:e.method||"GET",headers:new window.Headers(s),body:e.body}).then((function(r){if(e.resolveRawResponse)t.resolve(r);else if(r.status<300)if(201===r.status)e.expectTextResponse?r.text().then((function(e){var n,r=e.indexOf("urn:");r<0?i.warn("[Libraries:Client] failed to find URN in create result",{responseBody:e}):(n=e.substr(r),i.info('[Libraries:Client] Created doc URN "'+n+'"')),t.resolve({createdUrn:n,ok:!0})})):r.json().then((function(e){t.resolve(e)}));else if(204===r.status)t.resolve({ok:!0});else{var o=r.headers.get("content-type");o&&-1!==o.indexOf("application/json")?r.json().then((function(e){t.resolve(e)})):r.text().then((function(e){var n;try{n=JSON.parse(e)}catch(i){n=e}t.resolve(n)}))}else if(401===r.status)t.reject(new Error("".concat(n," Request auth failed; errorCode: ").concat(r.status," ; errorText: ").concat(r.statusText))),l.a.clearScope(),window.marvel.events.trigger("spark-auth-failed");else{var a="n/a",s="n/a";r.body&&r.body.errorMessage&&r.body.requestId&&(a=r.body.errorMessage,s=r.body.requestId),i.error("Request failed",{requestId:s,errorCode:r.status,errorMessage:a});var c=new Error("".concat(n," Request failed; errorCode: ").concat(r.status," ; errorMessage: ").concat(a));c.statusCode=r.status,403===r.status?r.json().then((function(e){i.info("[Libraries:Client] 403 returned while attempting Library operation",e),c.subStatusCode=parseFloat(e.subErrorCode),t.reject(c)})).catch((function(e){i.warn("[Libraries:Client] 403 returned while attempting Library operation without a response body"),t.reject(c)})):t.reject(c)}})).catch((function(e){t.reject(e)}))})),t.promise}};t.default=p},61:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6),n(14),n(23),n(389),n(403),n(405),n(141),n(406)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u){"use strict";var d,h;return d=a.extend({cachename:"confirmview",el:".confirm-overlay",mode:"confirm",clickTimeSafetyZone:250,events:{"click .confirm-view-bg":"handleBackgroundClick","click .cancel-btn":"handleCloseBtn","click .sp-cta-button-secondary":"handleCloseBtn","click .ok-btn":"handleConfirmBtn","click .confirm-view-prompt-field":"handlePromptFieldClick"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this._initDefaultStrings()},_initDefaultStrings:function(){this.defaultOkText=r.getString("confirm-view-default-verb-ok"),this.defaultCancelText=r.getString("confirm-view-default-verb-cancel"),this.defaultWaiterTitle=r.getString("confirm-view-default-waiter-title")},setText:function(e,t){e=e||"",t=t||this.text$,e.jquery?(t.html(""),t.append(e)):t.text(e)},render:function(){var n;if(this.$el.length||(this.$el=e(document.body).find(".confirm-overlay")),window.marvel.events.trigger("spark-dialog-shown"),this.$el.addClass("v2"),this.$el.html(r.mustacheRender(l)),this.cancelBtn$=this.$el.find(".sp-cta-button-secondary"),this.isBeta&&this.$el.find(".confirm-view-dialog-title").addClass("beta"),this.$el[0].focus(),this._options.transparentOverlay&&this.$el.find(".confirm-view-bg").addClass("transparent-overlay"),this._options.className&&this.$el.addClass(this._options.className),Array.isArray(this.okText)){var i="";this.defaultConfirmIndex=this.okText.length-1,t.each(this.okText,function(e,t){var n=".confirm-btn-"+t;e.isDefault&&(this.defaultConfirmIndex=t),e.button$=this.$el.find(n),this.setText(e.text,e.button$),e.button$.data("id",e.id),i+=(t?", ":"")+n}.bind(this)),this.confirmBtn$=this.$el.find(i)}else this.defaultConfirmIndex=0,this.confirmBtn$=this.$el.find(".confirm-btn-0"),this.okText&&this.okText.id?(this.setText(this.okText.text||this.defaultOkText,this.confirmBtn$),this.confirmBtn$.data("id",this.okText.id)):(this.setText(this.okText||this.defaultOkText,this.confirmBtn$),this.confirmBtn$.removeData("id"));n=this.confirmBtn$.length,this.closeBtn$=this.$el.find(".confirm-view-close-btn"),this._options.hideCloseButton?this.closeBtn$.addClass("hide"):(this.closeBtn$.removeClass("hide"),this.closeBtn$.on("click",this.handleCloseBtn.bind(this))),this.confirmBtn$.on("click",this.handleConfirmBtn.bind(this)),this.confirmBtn$.removeClass("disabled").removeClass("hide"),this.cvShell$=this.$el.find(".confirm-view-shell"),this.cvShell$.addClass(this.mode),this.title$=this.$el.find(".confirm-view-dialog-title"),this.title$.text(this.question),this.text$=this.$el.find(".confirm-view-dialog-text"),this.setText(this.detail),this.waiter$=this.$el.find(".wait-spinner"),this._closeDefer&&this.cvShell$.addClass("can-wait"),this._addedKeyup||(this._addedKeyup=!0,e(document).on("keyup.dialog",this.handleKeyup)),"waiter"===this.mode?(this.setWaiterVis(!0),this._hideSpinner&&this.waiter$.addClass("hide")):"alert"!==this.mode?(this._options.hideCancelButton?this.cancelBtn$.addClass("hide"):(this.cancelBtn$.removeClass("disabled").removeClass("hide"),this.cancelBtn$.text(this.cancelText||this.defaultCancelText),this.cancelText&&this.cancelBtn$.text(this.cancelText)),"prompt"===this.mode&&(this.$el.find(".confirm-view-prompt-field-area").removeClass("hide"),this.promptField$=this.$el.find(".confirm-view-prompt-field"),this.promptField$.attr("placeholder",this.placeholderText),this.maxLen&&this.promptField$.attr("maxlength",this.maxLen),this.promptField$.val(this.defaultText),this.promptExtraStyles&&this.promptField$.css(this.promptExtraStyles))):this.cancelBtn$.addClass("hide"),this.cancelBtn$.hasClass("hide")||n++,this.cvShell$.addClass("num-buttons-"+n),this._options.additionalUI$&&this.$el.find(".confirm-view-content-shell").append(this._options.additionalUI$),this.$el.removeClass("hide"),this.setDialogDimensions();var o=!0;"prompt"===this.mode&&this.autoSelectPromptText&&(this.promptField$.select(),o=!1),o&&this.confirmBtn$[this.defaultConfirmIndex].focus(),this._ignoreNextKeyup=!1,this._options.afterRenderCallback&&"function"==typeof this._options.afterRenderCallback&&this._options.afterRenderCallback(this.$el)},onConfirm:function(e,t,n){this._confirmCallback=e,this.title=t,this.text=n},handleConfirmBtn:function(t){var n=!0;n=e(t.target).data("id")||n,this.handleBtn(n,t)},setDialogDimensions:function(){var e=this._options.minHeight||0;e&&this.cvShell$.css("min-height",e)},setWaiterVis:function(e){if(e){if("waiter"!==this.mode){var t=this._getBounds();this.cvShell$.css("height",t.height+"px")}else this.cvShell$.css("height","");this.title$.text(this.waiterTitle||this.defaultWaiterTitle),this.setText(this.waiterText||""),this.waiterText?this.cvShell$.addClass("waiter-has-text"):this.cvShell$.removeClass("waiter-has-text"),this.waiterProgressBar?(this._progressBarView||(this._progressBarView=new s),this.waiterProgressBar.el$=this.$el.find(".confirm-progress-bar"),this.waiterProgressBar.text$=this.waiterProgressBar.eventNames.updateText&&this.text$,this._progressBarView.setupProgress(this.waiterProgressBar),this._progressBarView.render(),this.cvShell$.addClass("showing-progress")):this.waitSuccess?this.cvShell$.addClass("showing-waiter-success"):this.cvShell$.addClass("showing-waiter"),this._canCancelWaiter?(this.cvShell$.addClass("can-cancel-waiter"),this._options.okOnly?this.cancelBtn$.addClass("hide"):this.cancelBtn$.text(this.waiterCancelText)):this.cvShell$.removeClass("can-cancel-waiter")}else this.cvShell$.removeClass("can-cancel-waiter"),this.waiterProgressBar?(this.cvShell$.removeClass("showing-progress"),this._progressBarView.hide()):this.cvShell$.removeClass("showing-waiter"),this.title$.text(this.question),this.setText(this.detail),this.cancelBtn$.text(this.cancelText)},handleBtn:function(e,n){if(n.stopPropagation(),e){if("prompt"===this.mode&&!this.validPromptTextCheck("confirm"))return void this.promptField$.select();if(this.confirmBtn$.hasClass("disabled"))return}if(!(this._closingEventTime&&n.timeStamp-this._closingEventTime<this.clickTimeSafetyZone)&&(this._closingEventTime=n.timeStamp,this._confirmDefer)){var i;if("prompt"!==this.mode)i=e;else if(e){if(i=this.promptField$.val(),this._options.trimText&&(i=i.trim()),this.confirmBtn$.length>1){var r=e;i={text:i,buttonData:!0===r?this.okText[this.defaultConfirmIndex]:t.find(this.okText,(function(e){return e.id===r}))}}}else i=null;this._closeDefer?(this._confirmDefer.resolve(i),this._confirmDefer=null,e?this.setWaiterVis(!0):this.hide(!0),this._closeDefer.promise.then(function(){this._closeDefer=null,e&&(this.hide(!0),this.setWaiterVis(!1))}.bind(this))):(this.hide(!0),this._confirmDefer.resolve(i),this._confirmDefer=null),e&&this._options.okHandler&&this._options.okHandler()}},handleBackgroundClick:function(e){this._options.ignoreBackgroundClick||this.handleCloseBtn(e)},handleCloseBtn:function(e){"alert"!==this.mode?this.handleBtn(!1,e):this.handleBtn(!0,e)},handlePromptFieldClick:function(e){this.selectAllOnFieldClick&&e.target.select()},isShowing:function(){return!this.$el.hasClass("hide")},isWaiting:function(){return this.cvShell$.hasClass("showing-waiter")},_showAsWaiter:function(e,n,i,r,o){this._options=o,this.mode="waiter",this.waiterText=n,this.question="",this.detail="",this.waiterTitle=e,this._confirmDefer=i,this._canCancelWaiter=!!this._confirmDefer,this.waiterCancelText=r,this.okText=o.okText,this.waiterProgressBar=t.clone(o.progressBar),this._hideSpinner=o.hideSpinner,this.waitSuccess=o.waitSuccess,this.render()},_showAsConfirm:function(e,t,n,i){this._options=i,this._confirmDefer=n,this.mode="confirm",this.question=e,this.detail=t,this.okText=i.okText,this.cancelText=i.cancelText,this._closeDefer=i.closeDefer,this.waiterTitle=i.closeDeferWaitTitle,this.waiterText=i.closeDeferWaitText,this.render()},_showAsAlert:function(e,t,n,i){this._options=i,this._confirmDefer=n,this.mode="alert",this.question=e,this.detail=t,this.okText=i.okText,this.render()},_showAsPrompt:function(e,n,i,r){this._options=r,this._confirmDefer=i,this.mode="prompt",this.question=e,this.detail=n,this.defaultText=r.defaultText||"",this.placeholderText=r.placeholderText||"",this.promptExtraStyles=r.promptExtraStyles||null,this.maxLen=r.maxLen||0,this.selectAllOnFieldClick=r.selectAllOnFieldClick,this.okText=r.okText,this.cancelText=r.cancelText,this._closeDefer=r.closeDefer,this.waiterTitle=r.closeDeferWaitTitle,this.waiterText=r.closeDeferWaitText,this.autoSelectPromptText=!!t.isUndefined(r.select)||r.select,this.isBeta=r.isBeta||!1,this.render(),this.validPromptTextCheck("setup",this.defaultText)},validPromptTextCheck:function(e,n){var i=t.isUndefined(n)?this.promptField$.val():n;return this._options.trimText&&(i=i.trim()),this._options.cantBeEmpty&&""===i?("setup"!==e&&("confirm"===e||this._options.showErrorDuringEntry)&&this.promptField$.addClass("error"),this._options.dontDimConfirmIfError||this.confirmBtn$.addClass("disabled"),!1):(this.promptField$.removeClass("error"),this.confirmBtn$.removeClass("disabled"),!0)},showCancelableWaitView:function(e,t,i){var r=n.defer();return i=i||{},this._showAsWaiter(e,t,r,i.cancelText||this.defaultCancelText,i),r.promise},showWaitView:function(e,t,n){this._showAsWaiter(e,t,null,null,n||{})},showWaitSuccessView:function(e,t,n){(n=n||{}).waitSuccess=!0,this._showAsWaiter(e,t,null,null,n),setTimeout(function(){this.hide(!0)}.bind(this),n.duration||1e3)},showAlert:function(e,t,i){var r=(i=i||{}).defer||n.defer();return this._showAsAlert(e,t,r,i),r.promise},showConfirm:function(e,t,i,r){(i=i||{}).afterRenderCallback=i.afterRenderCallback||r;var o=i.defer||n.defer();return this._showAsConfirm(e,t,o,i),o.promise},showPrompt:function(e,t,i){var r=(i=i||{}).defer||n.defer();return this._showAsPrompt(e,t,r,i),r.promise},handleKeyup:function(e){if(this._ignoreNextKeyup)this._ignoreNextKeyup=!1;else{if(e&&e.isPropagationStopped())return;this._ignoreCloseActions||this.isWaiting()&&!this._canCancelWaiter?(e.stopPropagation(),e.preventDefault()):e.keyCode===c.DOM_VK_ESCAPE?(e.stopPropagation(),e.preventDefault(),this._options.hideCloseButton&&this._options.hideCancelButton||this.handleCloseBtn(e)):e.keyCode===c.DOM_VK_RETURN||e.keyCode===c.DOM_VK_ENTER?(e.stopPropagation(),e.preventDefault(),this.handleConfirmBtn(e)):"prompt"===this.mode&&this.validPromptTextCheck("keyUp")}},ignoreNextKeyup:function(){return!!this.isShowing()&&(this._ignoreNextKeyup=!0,!0)},_getBounds:function(){return this.cvShell$[0].getBoundingClientRect()},hide:function(t){window.marvel.events.trigger("spark-dialog-closed"),!t&&this._confirmDefer&&(this._confirmDefer.resolve(!1),this._confirmDefer=null),this.$el.addClass("hide"),this.cvShell$.removeClass(this.mode),this.$el.find(".confirm-view-bg").removeClass("transparent-overlay"),this._addedKeyup&&(e(document).off("keyup.dialog",this.handleKeyup),this._addedKeyup=!1)},getMessageViewAdaptor:function(){return{name:"confirmview",pattern:"confirmview",show:function(e){h[e.mode].apply(h,e.arguments).then(e.success||function(){},e.error||function(){})}}}}),h=new d}.apply(t,i))||(e.exports=r)},617:function(e,t,n){var i,r;i=[n(7),n(2),n(6),n(1),n(106),n(36)],void 0===(r=function(e,t,i,r,o,a){"use strict";return new(o.extend({typeName:"authoring-context",getProjectName:function(e,t){return e.get("name")||this.getSetting("newDocName")},getConfig:function(){return{syncGroup:"adobe-spark-authoring-contexts",scope:"authoring-context",newDocName:"My Authoring Context",doctype:"application/vnd.adobe.authoringcontext.document+dcx",displayName:"Authoring Context"}},isaProjectFormat:function(){return!1},lazyLoad:function(e){n.e("authoring-context").then(function(t){var i=n(675);this.setStorageImpl(i),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},usesContentModifiedEtags:function(){return!1},resolveConflict:function(e,t,i,r){return n.e("brand-kit-conflict-resolver").then(function(o){var s=n(679);s.muiStorage=a,s.resolveConflict(e,t,i,r)}.bind(null,n)).catch(n.oe),!0}}))}.apply(t,i))||(e.exports=r)},660:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6),n(36),n(25),n(11),n(2700),n(617),n(675),n(123),n(87),n(56),n(387)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u,d,h,p){"use strict";var f=h.default||h;return new(i.Model.extend({initialize:function(){this._factories=[],this._pendingPromises=[],this._hasNoDefaultContext=null,this._contextListPromises={},this.authoringContextFactoryCreate=this.authoringContextFactoryCreate.bind(this)},setGlobalActiveContext:function(e){try{window.localStorage&&(e?window.localStorage.setItem("ac-active-id-"+a.getProfile().userId,e):window.localStorage.removeItem("ac-active-id-"+a.getProfile().userId))}catch(t){this._backupActiveContextId=e}},getGlobalActiveContext:function(){return this.getDefaultContext()},addAuthoringContextFactory:function(e){this._factories.push(e)},authoringContextFactoryCreate:function(e,n){var i;return t.each(this._factories,function(t){t.supportsComposite(e)&&(i=t.create())}.bind(this)),i||(i=new s),i.setComposite(e),i._isDefault=n,i},setCollaborationForAuthoringContext:function(e){return d.getCollaborationForPath(e.composite.getStoragePath()).catch((function(t){if(404===t.status)return window.marvel.logger.warn("[AuthoringContextController] Invitations came back with a 404 status for collaboration state - ignoring in authcontext syncing - but logging in case this is a bogus 404."),e.collaborators=[],e;throw t})).then((function(t){return e.collaborators=t.collaborators,e}))},getContextList:function(e){var i=performance.now();return this._contextListPromises[e]?this._contextListPromises[e]:(e=e||"all",this._contextListPromises[e]=u.load().then(function(r){return l.load().then(function(){return r.ACPSparkController.listAuthoringContexts(this.authoringContextFactoryCreate).then(function(r){var a=[],s=t.filter(r,(function(e){return e&&e.activated()}));t.each(r,function(t){var n=t&&t.composite;"owned"===e?n&&"INCOMING"!==t.composite.getCollaboration()&&a.push(t):"shared"===e?n&&"INCOMING"===t.composite.getCollaboration()&&a.push(t):a.push(t)}.bind(this));var l=s&&s.length,c=performance.now();return o.trackEvent("brandsLoaded",{numActivatedBrands:l},"organizer"),window.marvel.logger.info(`[PerformanceTracker] ${Math.round(c-i)}ms for ${l} brands by [${e}]`,{elapsedTime:Math.round(c-i),numActivatedBrands:l}),this._contextListPromises[e]=null,n(a)}.bind(this))}.bind(this))}.bind(this)),this._contextListPromises[e])},sortContextList:function(e){return e.sort((function(e,t){return e.isDefault()?-1:t.isDefault()?1:e.getName().localeCompare(t.getName())})),e},operationPending:function(e){this._pendingPromises.push(e)},getPendingPromises:function(){return this._pendingPromises},getActivatedContextsByType:function(e,n){return this.getContextList(n).then(function(e){var n=[];return t.each(e,function(e){e.activated()&&n.push(e)}.bind(this)),n}.bind(this))},getContextsByType:function(e,n,i){var r=performance.now();return this.getContextList(n).then(function(o){var a=[];return t.each(o,function(t){t.getType()===e&&a.push(t)}.bind(this)),i&&this.sortContextList(a),window.marvel.logger.info("[PerformanceTracker] getContextsByType total time "+Math.round(performance.now()-r)+"ms",{elapsedTime:Math.round(performance.now()-r),type:e,ownershipType:n}),a}.bind(this))},getLegacyDefaultContext:function(e){return this.getContextsByType(e,"owned").then((function(e){var n=t.find(e,(function(e){return e.hasLegacyDefaultFlag()&&e.activated()}));return n?n.upgrade():null}))},getDefaultContextFromAPI:function(){return f.fetch({LOG_CATEGORY:"[AuthoringContextController]",uri:"/branding/default"}).then(function(e){var t=e.defaultBrandId;return void 0!==t?this.getContextByIdFromStorage(t):(this._hasNoDefaultContext=!0,null)}.bind(this))},getDefaultContext:function(e,t){var i=performance.now(),r=this._defaultContext;return!r&&!this._hasNoDefaultContext||t?this.getDefaultContextFromAPI().then(function(e){return e?(this._hasNoDefaultContext=!1,this._defaultContext=e,window.marvel.logger.info("[PerformanceTracker] getDefaultContext fromAPI completed "+Math.round(performance.now()-i)+"ms",{elapsedTime:Math.round(performance.now()-i)}),e):(this._hasNoDefaultContext=!0,null)}.bind(this)):n.resolve(r)},setDefaultContext:function(e){var n=e.getType();return f.fetch({LOG_CATEGORY:"[AuthoringContextController]",method:"PUT",uri:"/branding/default",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultBrandId:e.getId()})}).then(function(){return window.marvel.features.userData.defaultBrandId=e.getId(),this.getContextsByType(n,"all").then(function(n){return t.each(n,function(e){e._isDefault=!1}.bind(this)),e._isDefault=!0,this._defaultContext=e,this._hasNoDefaultContext=!1,e}.bind(this))}.bind(this))},createContext:function(e,t){return window.marvel.logger.debug("[AuthoringContextController] createContext started"),c.createDocument({}).then(function(n){var i,r=n.getDCXRoot();return n.setName(e),r.setValue("ac#type",t),r.setValue("ac#version",s.prototype.getACVersion()),(i=this.authoringContextFactoryCreate(n)).save().then((function(){return window.marvel.logger.debug("[AuthoringContextController] createContext saved"),u.load().then((function(e){return e.SparkStorageLoader.invalidateAuthoringContextCache().then((function(){return window.marvel.logger.debug("[AuthoringContextController] trigger 'authoring-context-added' event"),window.marvel.events.trigger("authoring-context-added",i),window.marvel.events.trigger("insert-authoring-context",i),i}))}))}))}.bind(this))},deleteContext:function(e){return e.delete().then(function(){return window.marvel.events.trigger("authoring-context-deleted",e),window.marvel.events.trigger("remove-authoring-context",e.getURN()),n.resolve()}.bind(this))},getContextById:function(e){return e?this.getContextList().then(function(i){var r;return t.each(i,function(t){t.getId()!==e&&t.getURN()!==e||(r=t)}.bind(this)),r?r.upgrade():n.resolve(null)}.bind(this)):n.resolve(null)},getContextByIdFromStorage:function(e){if(!e)return n.resolve(null);var t=n.defer();return a.ajax({type:"GET",url:"https://"+window.marvel.settings.ss+"/assets/adobe-spark-authoring-contexts/"+e,headers:{"x-api-key":window.marvel.settings.key}}).then(function(e){this.createAuthoringContext(e).then((function(e){t.resolve(e)}))}.bind(this)).fail((function(e){e&&404===e.status?t.resolve(null):t.reject(e)})),t.promise},createAuthoringContext:function(e){return u.load().then(function(t){return t.SparkStorageLoader.createComposite(e.urn,e.modified).then(function(t){return e.composite=t,e.compositeDoc=new p({name:t.current.name,id:t.assetId,modified:e.modified,syncGroupName:"adobe-spark-authoring-contexts",compositeObj:t}),e.compositeDoc.setIsMounted(!0),e.compositeDoc.setCollaboration(e.collaboration),this.authoringContextFactoryCreate(e.compositeDoc)}.bind(this))}.bind(this))},getActiveContext:function(e){if(e){var i=e.getMyApp();if(i){var r=i.getAuthoringContextId(e);return r?this.getContextList().then(function(i){var o=null;return t.each(i,function(e){e.getId()!==r&&e.getURN()!==r||(o=e)}.bind(this)),o||(window.marvel.logger.warn("failed to find active AuthoringContext for "+e.get("id")+" with AC.id == "+r),n.resolve(null))}.bind(this)):n.resolve(null)}return window.marvel.logger.warn("[AuthoringContextController] null app in getActiveContext doc# "+e.get("id")),n.resolve(null)}return window.marvel.logger.warn("[AuthoringContextController] null doc in getActiveContext"),n.resolve(null)},setActiveContext:function(e,t){if(e){var i=null;return e&&(i=e.getId()),t.getMyApp().setAuthoringContextId(t,i)}return n.resolve(null)},setLastPublishedContext:function(e,t){var n=null;return e&&(n=e.getId()),t.getMyApp().setLastPublishedAuthoringContextId(t,n)},deleteAllUnactivatedContexts:function(){return this.getContextList("owned").then(function(e){return n.all(t.reduce(e,(function(e,t){return t.activated()||e.push(t.delete()),e}),[]))}.bind(this))}}))}.apply(t,i))||(e.exports=r)},665:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6),n(5),n(402),n(47),n(23),n(0),n(2700),n(660),n(67),n(3411),n(837),n(385),n(750),n(166),n(797),n(14),n(3414)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,u,d,h,p,f,g,m,v,y,b){"use strict";var w,C=new r.default({color:"#0000ff",name:"brand-kit"}),M=l.brandedChromeCommunity,x=h(M),L=["chrome-preloader-logo","chrome-header-logo","chrome-footer-logo"],k=["primary-logo","generated-logo","chrome-header-logo","chrome-footer-logo","chrome-preloader-logo","post-stamp","outro-logo"],S=["headerCTAEnabled","footerCTAEnabled","headerCTA","footerCTA","headerCTAURL","footerCTAURL","headerCTAButtonStyle","footerCTAButtonStyle","facebookURL","twitterURL","instagramURL"],T={page:3,video:3,post:0},N={page:3,video:3,post:23},D={page:3,video:3,post:23};return w=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments)},getDefaultName:function(){var e=window.adobeIMS.getUserProfile().first_name||"";return e?e+"'s Brand":"My Brand"},getSetupPercentDone:function(){return n.all([this.getLogoWithUniqueRole("primary-logo"),this.getColorWithUniqueRole("base-color"),this.getFontWithUniqueRole("headline-font")]).spread(function(e,t,n){return(!!e+!!t+!!n)/3}.bind(this))},deleteAuthoringContextLogo:function(e){return this.deleteLogo(e.getData())},deleteLogo:function(e){return this.deleteNamedImageAsset(e,d.LOGOS_PARENT)},getLogos:function(){return this.composite.acquireNestedChildren(d.LOGOS_PARENT,!0).then(function(e){return e||[]}.bind(this))},getLogosSync:function(){return this.composite.acquireNestedChildrenSync(d.LOGOS_PARENT)},convertLogoToAuthoringContextLogo:function(e){var t=new b;return t.setContext(this),t.setData(e),t},getAuthoringContextLogos:function(){return this.composite.acquireNestedChildren(d.LOGOS_PARENT,!0).then(function(e){return t.map(e,function(e){return this.convertLogoToAuthoringContextLogo(e)}.bind(this))}.bind(this))},getLogoHref:function(e,t,i){return i=i||"image/png",this.getAssetWithUniqueRole(d.LOGOS_PARENT,t||"primary-logo").then(function(t){return t?this.hrefForImage(d.LOGOS_PARENT,t,e,i||"image/png"):n.resolve(null)}.bind(this))},getThumbnailURL:function(e){return this.getLogoHref(e||200)},_removeLogoWithRole:function(e){var t,n,i=this.getLogoWithRoleSync(e);i&&(t=d.LOGOS_PARENT+"."+i.getValue("path")+".!image",(n=this.composite.getChildWithMap(t))&&(this.composite.getDCXComposite().current.removeComponent(n),this.save(),console.warn("Removed the component with "+e)))},hasLogoWithRole:function(e){var t,n=this.getLogoWithRoleSync(e);return!(!n||(t=d.LOGOS_PARENT+"."+n.getValue("path")+".!image",!this.composite.getChildWithMap(t)))},getLogoWithRoleSync:function(e){var n=this.composite.acquireNestedChildrenSync(d.LOGOS_PARENT);return t.find(n,function(t){return this.hasRole(t,e)}.bind(this))},getLogoWithUniqueRole:function(e){return this.getAssetWithUniqueRole("logos",e).then(function(e){if(e){var t=new b;return t.setContext(this),t.setData(e),t}return null}.bind(this))},getChromeInfo:function(){var e,i=[];return this.composite.getSharedCloudCollectionId().then(function(t){e=t;for(var r=[],o=0,a=L.length;o<a;o++){var s=L[o];r.push(this.getAssetWithUniqueRole(d.LOGOS_PARENT,s))}return i=[this.getColorWithUniqueRole("chrome-text-color"),this.getColorWithUniqueRole("chrome-footer-color"),this.getColorWithUniqueRole("chrome-social-icons-color"),this.getColorWithUniqueRole("chrome-background-color"),this.getColorWithUniqueRole("chrome-header-cta-background-color"),this.getColorWithUniqueRole("chrome-footer-background-color"),this.getColorWithUniqueRole("chrome-header-cta-color")],n.all(i.concat(r))}.bind(this)).then(function(r){for(var o={name:this.getName(),logos:[]},a=this.composite.getDCXComposite().current,s=[],l=i.length,c=function(e,t,n){return t.getImageComponentHref(n,500,"image/png").then((function(t){return o[e+"-href"]=t,t}))},u=0,d=L.length;u<d;u++){var h=r[u+l];if(h){var p=a.getComponentsOf(h)[0],f=t.extend({},h._data.components[0]),g=L[u];f.absolutePath=e+"/"+f.id,f.name=L[u],o.logos.push(f),s.push(c(g,this.composite,p))}}for(u=0,d=S.length;u<d;u++){var m=S[u];o[m]=this.getViewerPageInfo(m)}var v=r[0],y=r[1],b=r[2],w=r[3],C=r[4],M=r[5],x=r[6];return v&&(o["chrome-text-color"]=v.hex()),y&&(o["chrome-footer-color"]=y.hex()),b&&(o["chrome-social-icons-color"]=b.hex()),w&&(o["chrome-background-color"]=w.hex()),C&&(o["chrome-header-cta-background-color"]=C.hex()),M&&(o["chrome-footer-background-color"]=M.hex()),x&&(o["chrome-header-cta-color"]=x.hex()),n.allSettled(s).then((function(){return o}))}.bind(this))},getChromeChecksum:function(){var e,n="",i=function(e,t){t&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(t))},r=function(t){return t.name==e};return this.getChromeInfo().then(function(a){for(var s=0,l=L.length;s<l;s++){e=L[s];var c=t.find(a.logos,r);c&&i(e,c.etag)}for(s=0,l=S.length;s<l;s++){var u=S[s];i(u,a[u])}return i("chrome-text-color",a["chrome-text-color"]),i("chrome-footer-color",a["chrome-footer-color"]),i("chrome-social-icons-color",a["chrome-social-icons-color"]),i("chrome-background-color",a["chrome-background-color"]),i("chrome-header-cta-background-color",a["chrome-header-cta-background-color"]),i("chrome-footer-background-color",a["chrome-footer-background-color"]),(new o).update(n).digest("hex")}.bind(this))},changesSinceLastPublish:function(){var e=this.composite.getDCXRoot().getValue("cp#assetId");return e?n.all([x.getMetadata(e),this.getChromeChecksum()]).spread((function(t,n){var i=t&&t.custom?t.custom.checksum:void 0,r=t.version;if("string"!=typeof r&&void 0!==r)throw new Error("CP did not return a valid version");return{assetId:e,version:r,checksum:n,changes:n!=i}})):n.resolve({changes:!0})},publish:function(e){var i,r,o,a,s=this.composite.getDCXComposite().id,l=s+"/manifest",c=[],u=function(e){return e.name==a};return this.getChromeInfo().then(function(e){o=e;for(var n=0,i=L.length;n<i;n++){a=L[n];var r=t.find(o.logos,u);r&&r.type&&r.absolutePath&&r.id&&c.push({content_type:r.type,source:r.absolutePath,destination:r.id})}return x.serverSideCopy(s,c)}.bind(this)).then(function(e){for(var i,r=[],s=function(e){return e.path==i},c=0,d=L.length;c<d;c++){a=L[c];var h=t.find(o.logos,u);if(h){i=h.id;var p=t.find(e,s);r.push({name:a,id:p.path,path:p.path,version:p.version,type:h.type,state:"unmodified",etag:h.etag})}}delete o.logos;var f={"manifest-format-version":6,name:this.getName(),type:"application/vnd.adobe.sparkchrome.document+dcx",state:"unmodified",id:this.getId(),components:r,"authctx#chromeinfo":o};return n.all([x.checkResource(l).then((function(e){return x.uploadResource(l,"application/json",f,e)})),this.getChromeChecksum()])}.bind(this)).spread(function(t,n){return i=t.version,r=n,x.publishAsset(s,"application/vnd.adobe.sparkchrome.document+dcx",e,{main_resource:{resource_path:"manifest",resource_version:i}})}.bind(this)).then(function(t){return!e&&t&&(e=t),this.composite.pull()}.bind(this)).then(function(){this.composite.getDCXRoot();return this.composite.saveChanges((function(t){t.setValue("cp#assetId",e)})).then((function(){return{assetId:e,checksum:r,version:i}}))}.bind(this))},_generateLogoFromTitle:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),i=this.getName(),r=p.getTextWidthDOM(i,"333px Lato");t.width=r,t.height=400,n.fillStyle=e?"#ffffff":"#000000",n.font="333px Lato",n.textAlign="center",n.textBaseline="middle",n.fillText(i,r/2,200);var o=t.toDataURL("image/png");return f(o)},generateLogoFromTitle:function(e,t,i){var r=this._generateLogoFromTitle(),o=this._generateLogoFromTitle(!0);return n.all([this.uploadImageAsset("{new}",d.LOGOS_PARENT,r,void 0,e,void 0,i),this.uploadImageAsset("{new}",d.LOGOS_PARENT,o,void 0,t,void 0,i)])},updateLogoFromTitle:function(e,t){var n=this._generateLogoFromTitle(t);return this.uploadImageAsset(e,d.LOGOS_PARENT,n)},updateLogo:function(e,t){return this.getLogoWithUniqueRole(e).then(function(e){var n=e.getData().path;if(!t){var i=this._generateLogoFromTitle();t=i[1]}return this.uploadImageAsset(n,d.LOGOS_PARENT,t,void 0,void 0,d.MAX_LOGO_SIZE)}.bind(this)).then(function(){return this.getLogoWithUniqueRole(e)}.bind(this)).then(function(e){return e}.bind(this))},applyLogoToThemeThumbnail:function(e,t,i,r,o){return this.getLogoWithUniqueRole("primary-logo").then((function(e){var t=e.getValue(r,"image/png"),i=e.getValue(o,"image/png"),a=n.defer(),s=n.defer(),l=new Image,c=new Image;return l.onload=function(){a.resolve(l)},l.src=t,c.onload=function(){s.resolve(c)},c.src=i,n.all([a.promise,s.promise])})).spread((function(n,a){var s,l=n.width,c=n.height;a.width,a.height;s=l<=r&&c<=o?n:a,e.drawImage(s,t,i)}))},generateStamp:function(e,t,i){var r=this;return t=t||"{new}",m.inject().then((function(o){var a=n.defer(),s=function(n){var o=r.getName().toUpperCase(),s=document.createElement("canvas"),l=s.getContext("2d"),c=150,u="700 "+c+"px "+n,h=p.getTextWidthDOM(o,u),g=h+180,m=240,v=1;g>1024&&(v=1024/g,u="700 "+(c=Math.floor(150*v))+"px proxima-nova",g=1024,m=Math.floor(m*v),h=p.getTextWidthDOM(o,u)),s.width=g,s.height=m,l.imageSmoothingEnabled=!1,l.fillStyle="rgba(255, 255, 255, 0.6)",l.fillRect(0,0,g,m),l.globalCompositeOperation="destination-out";var y=(g-h)/2,b=m/2;l.font=u,l.fillStyle="#000",l.textBaseline="middle",l.fillText(o,y,b),l.globalCompositeOperation="source-over",l.font=u,l.textBaseline="middle",l.fillStyle="rgba(0,0,0,0.3)",l.fillText(o,y,b);var w=f(s.toDataURL("image/png"));r.uploadImageAsset(t,d.LOGOS_PARENT,w,"generated-stamp",e,void 0,i).then((function(e){a.resolve(e)})).catch((function(e){console.warn("Error uploading stamp",e),a.reject(e)}))};return-1===document.documentElement.className.search(/wf-proximanova-n7-active/)?(window.marvel.logger.warn("[brand setup] unexpected: Stamp detected that Proxima Nova was not loaded, attempting to load via TypeKitPreview"),o.load([{id:"vcsm",variations:["n7"],css_name:"proxima-nova",name:"Proxima Nova"}],{active:function(){s("proxima-nova")},inactive:function(e,t){window.marvel.logger.error("Error generating stamp inactive",{fontFamily:e,fontDescription:t}),a.reject(new Error("Error generating stamp inactive"))},fontinactive:function(e,t){var n="Error generating stamp fontinactive";window.marvel.logger.error(n,{fontFamily:e,fontDescription:t}),a.reject(new Error(n))}})):s("proxima-nova"),a.promise}))},getClientCommunityPlatform:function(){return h},fullUpdate:function(e){var i=n.defer(),r={},o=[];t.each(this.getCustomFonts(!0),function(n){var i=n.getMetrics();if(!i||!i.version||i.version<this.CURRENT_FONT_METRICS_VERSION){C.warn("Brand font ("+n.friendlyName()+") had an outdated version number ("+i.version+" < "+this.CURRENT_FONT_METRICS_VERSION+"). Recalculating metrics.");var a,s=n.cssName(),l=n.friendlyName();o.push(n.getFileAsBlob().then((function(e){return v.extractFontInfo(e)})).then((function(e){return a=e,n.loadFont()})).then(function(){return v.generateMetricsAsync(l,s,a).then(function(e){e.version=this.CURRENT_FONT_METRICS_VERSION,n.getValue().metrics=e,C.warn("Metrics recalculation for brand font ("+n.friendlyName()+") completed.")}.bind(this)).catch((function(e){var t="Metrics recalculation for brand font ("+n.friendlyName()+") failed: "+e;throw e.message=t,e}))}.bind(this)).then((function(){var i=e.getThemesUsingAssets([n]);t.each(i,(function(e){var t=e.theme;r[t.id]?r[t.id].assets.push(n):r[t.id]={theme:e,assets:[n]}}))})))}}.bind(this));var a=[];return n.all(o).then(function(){return n.all(t.map(r,(function(t){return a.push(t.theme),e.updateThemesWithAssets([t.theme],t.assets)})))}.bind(this)).then(function(){return this.updateThemeThumbnails(a)}.bind(this)).then(function(){return this.save()}.bind(this)).then(function(){i.resolve()}.bind(this)).catch((function(e){C.warn(e),i.reject(e)})),i.promise},isFullUpdateNeeded:function(){var e=!1;return t.each(this.getCustomFonts(!0),function(t){var n=t.getMetrics();if(!n||!n.version||n.version<this.CURRENT_FONT_METRICS_VERSION)return e=!0,!1}.bind(this)),e},validateAndRepair:function(){var e=[];return this.activated()&&(this.hasLogoWithRole("video-watermark")||e.push(this.generateStamp(["video-watermark","generated-stamp"]))),n.allSettled(e).then(function(){return this}.bind(this))},resetBrand:function(){var e=this.getLogoWithRoleSync("generated-stamp");e&&this.composite.removeChild(e);var t=this.getLogoWithRoleSync("generated-logo");t&&this.composite.removeChild(t),(t=this.getLogoWithRoleSync("generated-logo-inverted"))&&this.composite.removeChild(t);var n=this.composite.getChildWithMap("viewerpage");n&&this.composite.removeChild(n);var i=this.composite.getChildWithMap("videooutro");i&&this.composite.removeChild(i);var r=this.composite.getChildWithMap("themes");return r&&this.composite.removeChild(r),this.deactivate(),this.save()},applyWhiteLogoRoleIfNecessary:function(e){this.getLogosSync();return g.colorsFromImage(e.getHrefAsync(600,"image/png"),5,!0).then(function(t){1===t.length&&g.getLuminosity(g.hexToRgb(t[0]))>248?this.addRole(e.getData(),"white-logo"):this.removeRole(e.getData(),"white-logo")}.bind(this))},setup:function(e,n){Date.now();return window.marvel.logger.info("[brand setup] generating stamp"),this.generateStamp(["video-watermark","generated-stamp"],void 0,!0).then(function(){if(e)return window.marvel.logger.info("[brand setup] no logo found - generating logo"),this.generateLogoFromTitle(k,["generated-logo-inverted","chrome-footer-logo"],!0)}.bind(this)).then(function(){var e=this.convertLogoToAuthoringContextLogo(this.getLogoWithRoleSync("primary-logo"));return this.applyWhiteLogoRoleIfNecessary(e)}.bind(this)).then(function(){window.marvel.logger.info("[brand setup] setting viewer page metadata");var e=y.getString("brand-viewer-page-cta-placeholder");return this.setViewerPageInfo({ctaLabel:e,headerCTA:e,footerCTA:e,ctaEnabled:!1,headerCTAEnabled:!1,footerCTAEnabled:!1},void 0,!0)}.bind(this)).then(function(){return window.marvel.logger.info("[brand setup] setting video outro info"),this.setOutroInfo({message:y.getString("brand-outro-message-placeholder")},void 0,!0)}.bind(this)).then(function(){return window.marvel.logger.info("[brand setup] starting theme/template generation"),this.generateThemes(n).catch((function(e){if(e.resetBrand)throw window.marvel.logger.error("[brand setup] found resetBrand error",e),e;return window.marvel.logger.error("[brand setup] error generating themes",e),null}))}.bind(this)).then(function(){t.each(Object.keys(a.apps),function(e,n){var i=a.apps[e].typeName,r="enable-brand-kit-"+i+"-themes";if(s.hasFeature(r)){var o=this.composite.acquireNestedChildrenSync("themes");if((o=t.filter(o,(function(e){return e.getValue("ac#format")==i}))).length<T[i]){var l=new Error("Too few "+i+" themes/templates. Attempted to generate "+D[i]+". Would have been ok to only have "+T[i]+". Only ended up with "+o.length);throw l.resetBrand=!0,l}o.length<D[i]&&window.marvel.logger.warn("[brand setup] There was an error in generating "+(D[i]-o.length)+" "+i+" themes/templates. User was allowed to continue because they were successful in generating at least "+T[i]+" of them.")}}.bind(this))}.bind(this)).then(function(){return this.activate(),window.marvel.events.trigger("brand-activated",this),this.recordEntitlmentIfInterested(),this.save()}.bind(this))},generateThemes:function(e){return n.allSettled(t.map(Object.keys(a.apps),function(i,r){var o=a.apps[i],l=o.typeName,c="enable-brand-kit-"+l+"-themes";if("post"!==l&&s.hasAny("enable-brand-kit-in-progress",c))return o.getThemeController(this).then(function(i){try{var r=i.getNumberOfGeneratedThemes?i.getNumberOfGeneratedThemes():void 0;return r||(r="number"==typeof N[l]?n.resolve(N[l]):n.resolve(-1)),r.then(function(r){return D[l]=r,window.marvel.logger.info("[brand setup] generating "+l+" themes/templates"),i.addGeneratedThemes&&"function"==typeof i.addGeneratedThemes?i.addGeneratedThemes(this):i.getGeneratedThemes&&"function"==typeof i.getGeneratedThemes?i.getGeneratedThemes(this).then(function(r){return n.allSettled(t.map(r,function(t){return this.createTheme(l,(function(e){e.setValue("theme#data",t)}),(function(t,n){return e&&e(),i.generateThemeRendition(t,n)}),!0)}.bind(this)))}.bind(this)):void 0}.bind(this))}catch(o){window.marvel.logger.error("[brand setup] error generating themes/templates: "+o.message,o)}}.bind(this))}.bind(this))).then(function(e){t.each(e,(function(e){var t=e&&e.reason;if("fulfilled"!==e.state&&t&&t.resetBrand)throw t;"fulfilled"!==e.state&&t&&window.marvel.logger.warn("[brand setup] Unexpected error in generating themes/templates: "+t.message,t)}))}.bind(this))}}),u.addAuthoringContextFactory({supportsComposite:function(e){return!0},create:function(){return new w}}),w}.apply(t,i))||(e.exports=r)},675:function(e,t,n){var i,r;i=[n(2),n(1),n(146)],void 0===(r=function(e,t,n){return new(n.extend({_startingCreateDoc:function(){this.loadDocumentPromise=null}}))}.apply(t,i))||(e.exports=r)},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(10),r=n.n(i),o=n(8),a=n.n(o),s=(n(1),function(){function e(t,n){if(r()(this,e),this.REGEX_MATCHER_CURIE_PARAMS=/\{\?(.+)\}/,this.REGEX_MATCHER_CURIE_MODIFIERS=/\{;(.+)\}/,this.REGEX_MATCHER_PARAM_SPIT=/\s*,\s*/,!t)throw new Error("You must provide at least one string as link!");if("string"!=typeof t)throw new Error("Link must be provided as string!");this.link=t,this.parameters=n||{}}return a()(e,[{key:"toUri",value:function(){var e=this;if("string"!=typeof this.link)throw new Error("You must provide at least one string as link!");if(0===Object.getOwnPropertyNames(this.parameters).length)return this.sanitize();var t=this.getModifiers().reduce((function(t,n){var i=e.parameters[n];return delete e.parameters[n],void 0!==i&&t.push(n+"="+i),t}),[]).filter((function(e){return(e+"").length>0})).join("&"),n=this.getParameters().reduce((function(t,n){var i=e.parameters[n];return void 0!==i&&t.push(n+"="+i),t}),[]).filter((function(e){return(e+"").length>0})).join("&"),i="";return i=t?this.link.replace(this.REGEX_MATCHER_CURIE_MODIFIERS,";"+t):i.replace(this.REGEX_MATCHER_CURIE_MODIFIERS,""),i=n?this.link.replace(this.REGEX_MATCHER_CURIE_PARAMS,"?"+n):i.replace(this.REGEX_MATCHER_CURIE_PARAMS,"")}},{key:"sanitize",value:function(){if("string"!=typeof this.link)throw new Error("You must provide at least one string as link!");return this.link.replace(this.REGEX_MATCHER_CURIE_PARAMS,"").replace(this.REGEX_MATCHER_CURIE_MODIFIERS,"")}},{key:"getModifiers",value:function(){if("string"!=typeof this.link)throw new Error("You must provide at least one string as link!");var e=this.REGEX_MATCHER_CURIE_MODIFIERS.exec(this.link);return e&&e[1]?e[1].split(this.REGEX_MATCHER_PARAM_SPIT):[]}},{key:"getParameters",value:function(){if("string"!=typeof this.link)throw new Error("You must provide at least one string as link!");var e=this.REGEX_MATCHER_CURIE_PARAMS.exec(this.link);return e&&e[1]?e[1].split(this.REGEX_MATCHER_PARAM_SPIT):[]}}]),e}()),l=function(){function e(){r()(this,e)}return a()(e,[{key:"getLink",value:function(e,t){if(this._links){var n=this._links["http://ns.adobe.com/melville/rel/".concat(e)];if(n)return n.templated?new s(n.href,t).toUri():n.href}}},{key:"getProxyRenditionHref",value:function(e,t){if(!e)return e;if(-1===e.search(/cc-api-storage/))return t&&(e=e.replace(/size=\d+/,"size="+t)),"/teamLibraryStorage?storageUrl=".concat(encodeURIComponent(e));return e?0===e.search(/^https?\:\/\/[^\/]*\/id/)?e:(0===e.search(/^https?\:\/\/[^\/]*\/assets/)&&(e=-1!==e.search(/size/)?e.replace(/^https?\:\/\/[^\/]*\/assets\/([^\/]*)\/([^\/]*)\/([^\/]*)\/?(\:rendition)?.*size\=([^&]*).*$/,"/image_assets/$1/$2/?asset_id=$3&size=$5"):e.replace(/^https?\:\/\/[^\/]*\/assets\/([^\/]*)\/([^\/]*)\/([^\/]*)\/?.*$/,"/image_assets/$1/$2/?asset_id=$3")+"&size="+(t||500)),0===e.search(/^https?\:\/\/[^\/]*\/public/)&&(e=-1!==e.search(/size/)?e.replace(/^https?\:\/\/[^\/]*\/public\/libraries\/([^\/]*)\/([^\/]*)\/?(\:rendition)?.*size\=([^&]*).*$/,"/image_assets/public/adobe-libraries/$1/?asset_id=$2&size=$4"):e.replace(/^https?\:\/\/[^\/]*\/public\/libraries\/([^\/]*)\/([^\/]*)\/?.*$/,"/image_assets/public/adobe-libraries/$1/?asset_id=$2")+"&size="+(t||500)),e):void 0}}]),e}()},793:function(e,t){},797:function(e,t,n){var i=n(1),r=n(857),o=n(2),a=n(904),s=!0;var l="^(";["lite","hairline","extlt","light","extralight","ultralight","lighter","book","demilight","semilight","normal","regular","med","medium","thick","bold","extrabold","ultrabold","dark","semibold","demibold","bold","extbd","sembd","bolder","heavy","blk","black","poster"].forEach((function(e){l.length>1&&(l+="|"),l+=e})),l+=")$";var c=new RegExp(l,"i"),u=new RegExp("^(b|l|el|m|h|r|w[0-9])$","i"),d="(";["excond","extcond","semicond","cond","condensed","extracondensed","semicondensed","narrow","exp","expanded"].forEach((function(e){d.length>1&&(d+="|"),d+=e})),d+=")";var h=new RegExp(d,"i");function p(e,t){var n=e.replace(/^\s*/,"").replace(/\s*$/,"").split(" ");return n.reduce((function(e,i){return e?(n.splice(1),e):t.test(i)}),!1)}function f(e){return p(e,c)||function(e,t){var n=e.replace(/^\s*/,"").replace(/\s*$/,"").split(" ");return t.test(n[n.length-1])}(e,u)}function g(e){return p(e,h)}e.exports={fontCanvas:a.fontCanvas,generateMetrics:a.generateMetrics,generateMetricsAsync:a.generateMetricsAsync,extractFontInfo:function(e){var t,n=i.defer(),a=new FileReader;return e.size>10485760?n.resolve({error:!0,FILE_TOO_BIG:!0}):(a.onload=function(){try{t=this.result;var i,a,l={};try{var c,u,d=(a=r.parse(t)).tables,h=d.name||{},p=d.os2||{},m=d.hhea||{},v=d.post||{};if(l.fullName=h.fullName&&h.fullName.en,l.fullName=(l.fullName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.familyName=h.fontFamily&&h.fontFamily.en,l.familyName=(l.familyName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.subfamilyName=h.fontSubfamily&&h.fontSubfamily.en,l.subfamilyName=(l.subfamilyName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.preferredFamilyName=h.preferredFamily&&h.preferredFamily.en,l.preferredSubfamilyName=h.preferredSubfamily&&h.preferredSubfamily.en,l.postScriptName=h.postScriptName&&(h.postScriptName.en||h.postScriptName["win-en"]||h.postScriptName["mac-en"]||h.postScriptName["uni-en"]),l.windowsPostScriptName=h.postScriptName&&h.postScriptName["win-en"],l.macPostScriptName=h.postScriptName&&h.postScriptName["mac-en"],l.unicodePostScriptName=h.postScriptName&&h.postScriptName["uni-en"],l.preferredFamilyName&&l.familyName&&l.preferredSubfamilyName&&l.subfamilyName){var y=0,b=0;f(l.familyName)&&(y+=1),g(l.subfamilyName)&&(y+=1),f(l.preferredFamilyName)&&(b+=1),g(l.preferredSubfamilyName)&&(b+=1),y>b?(c=l.preferredFamilyName,u=l.preferredSubfamilyName):b>y?(c=l.familyName,u=l.subfamilyName):l.familyName.length>l.preferredFamilyName.length?(c=l.familyName,u=l.subfamilyName):(c=l.preferredFamilyName,u=l.preferredSubfamilyName)}else l.familyName&&l.subfamilyName&&!l.preferredFamilyName&&!l.preferredSubfamilyName?(c=l.familyName,u=l.subfamilyName):l.preferredFamilyName&&l.preferredSubfamilyName&&!l.familyName&&!l.subfamilyName?(c=l.preferredFamilyName,u=l.preferredSubfamilyName):(c=o.trim(l.preferredFamilyName||l.familyName),u=o.trim(l.preferredSubfamilyName||l.subfamilyName)||"Regular");if(l.sparkSubgroupName=c,l.sparkFaceName=u,l._licenseInfo={copyright:h.copyright&&h.copyright.en,designer:h.designer&&h.designer.en,designerURL:h.designerURL&&h.designerURL.en,license:h.license&&h.license.en,licenseURL:h.licenseURL&&h.licenseURL.en,manufacturerURL:h.manufacturerURL&&h.manufacturerURL.en,trademark:h.trademark&&h.trademark.en,licenseFlag:p.fsType+""},l.familyName||(l.fullName?l.familyName=l.fullName:l.fullName=l.familyName=e.name.replace(/\.[^/.]+$/,"")),s){var w=o.find(["BoldItalic","RegularItalic","Bold","Italic","Regular","Normal"],(function(e){return(l.preferredFamilyName||l.familyName||"").toLowerCase().endsWith(e.toLowerCase())}));w&&(l.familyName=l.familyName.substring(0,l.familyName.length-w.length).trim(),l.familyName.endsWith("-")&&(l.familyName=l.familyName.substring(0,l.familyName.length-1)),l.preferredFamilyName&&(l.preferredFamilyName=l.familyName),l.subfamilyName=w,l.preferredSubfamilyName&&(l.preferredSubfamilyName=l.subfamilyName),"Bold"!==w&&"BoldItalic"!==w||(i=700))}l.weight=p.usWeightClass||function(e){e.indexOf("Italic")>=0&&(e=e.substring(0,e.indexOf("Italic")));var t={100:"100","100-thin":"100",ultra:"100",ultralight:"100","ultra-light":"100",200:"200","200-x-light":"200",two:"200",extralight:"200","extra-light":"200",thin:"200",hair:"200",300:"300","300-light":"300",three:"300",light:"300",400:"400","400-regular":"400",regular:"400",four:"400","":"400",normal:"400",book:"400",500:"500","500-medium":"500",medium:"500",five:"500",600:"600","600-semibold":"600",six:"600",semibold:"600","semi-bold":"600",demi:"600",700:"700","700-bold":"700",seven:"700",bold:"700",800:"800","800-black":"800",eight:"800",extrabold:"800","extra-bold":"800",heavy:"800",900:"900","900-x-black":"900",nine:"900",black:"900",1e3:"1000",extrablack:"1000","extra-black":"1000"};return t[(e=(e=e.trim()).replace(/\s+/g,"-")).toLowerCase()]||console.warn("----\x3e fontWeight failed to resolve ["+e+"]"),t[e.toLowerCase()]||400}(l.preferredSubfamilyName||l.subfamilyName),l.fsType=p.fsType,s&&i&&400===l.weight&&(l.weight=i);var C=0==v.italicAngle?"normal":"italic",M=function(e){return e.indexOf("Italic")>=0?"italic":e.indexOf("Oblique")>=0?"oblique":""}(l.preferredSubfamilyName||l.subfamilyName);"normal"==C&&"italic"==M&&(C="italic"),l.style=C,o.extend(l,{numGlyphs:a.glyphs.length,xHeight:p.sxHeight||p.xHeight||0,capHeight:p.sCapHeight||p.capHeight||m.ascender,italicAngle:v.italicAngle,underlineThickness:v.underlineThickness,underlinePosition:v.underlinePosition,lineGap:m.lineGap,ascent:m.ascender,descent:m.descender}),n.resolve(l)}catch(x){console.warn("Failed to parse font file",x),n.resolve({error:!0,FILE_PARSE_ERROR:!0})}}catch(L){console.warn("Failed to parse font file",L),n.resolve({error:!0,FILE_PARSE_ERROR:!0})}},a.onerror=function(e){console.warn("Failed to parse font file with error",e),n.resolve({error:!0,FILE_PARSE_ERROR:!0})},a.readAsArrayBuffer(e)),n.promise}}},820:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(166)],void 0===(r=function(e,t,i,r){"use strict";var o={},a=0,s=function(){--a<0&&(a=0),a>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading")};return{loadFont:function(l,c){var u,d,h,p;return++a>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading"),u=t.isString(l)?l:(d=l).lookupKey(),o[u]?o[u]:(p=d?i.resolve(d):r.getFontRegistry().then((function(e){if(e.facesByKey[u]){var t=i.defer();return Promise.resolve().then(function(i){var r=new(n(391));r.setFontDataFromSparkFontDefn(e.facesByKey[u]),t.resolve(r)}.bind(null,n)).catch(n.oe),t.promise}var r="loadFont failed find face defn for "+u;return console.warn(r),i.reject(r)})),h=i.defer(),o[u]=h.promise,p.then(function(e){return"spark-provided"!==e.source()||r.USE_SPARKFONTS_PREVIEW_API&&e.tkPreviewId()?"tk-synced"===e.source()||"spark-provided"===e.source()?r.inject().then((function(){setTimeout((function(){h.resolve(e)}),3e3);var t={id:e.tkPreviewId(),variations:e.tkVariation(),css_name:e.cssName(),name:e.friendlyName()};return window.TypekitPreview.load([t],{active:function(){h.resolve(e)},inactive:function(e,t){var n="error loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)},fontinactive:function(e,t){var n="error-inactive loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)}}),!0})):"user-uploaded"==e.source()?this._loadUploadedFont(e).then((function(){h.resolve(e)}),(function(e){h.reject(e)})):(console.warn("ATTEMPT TO LOAD FONT FACE WITH UNKNOW SOURCE "+e.source()),void h.reject("Unknown font source")):r.inject().then((function(){h.resolve(e)}))}.bind(this)).done(),h.promise.finally(s),o[u])},_loadUploadedFont:function(n){var r,o="cls-"+n.cssName().replace(" ","-").replace(/\"/g,"")+"-"+n.fontWeight()+"-"+n.fontStyle(),a=document.head.querySelectorAll("style."+o)[0],s="font-css-"+o;if(!a&&(a=this._createStyleBlock(o),window.localStorage)){try{r=window.localStorage.getItem(s)}catch(u){}var l,c;return r?(a.innerHTML=r,l=i.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),l.resolve()}),500),l.promise):this._loadFontAjax(n).then((function(r){return n.getCSSFontFaceAsync(!0,r).then(function(r){a.innerHTML=r;try{window.localStorage.setItem(s,r)}catch(u){}return l=i.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),l.resolve()}),500),l.promise}.bind(this))}),function(e){return n.getCSSFontFaceAsync().then(function(e){a.innerHTML=e}.bind(this))}.bind(this))}return i.resolve()},_loadFontAjax:function(t){var n=i.defer();return t.getHrefAsync(void 0,!0).then(function(t){window.marvel.logger.info("[AuthoringContextFontLoader] Downloading font via href: "+t),e.ajax({url:t,type:"GET",mimeType:"text/plain; charset=x-user-defined"}).done(function(e,t,i){var r="data:"+(i.getResponseHeader("content-type")||"application/x-font-opentype")+";base64,"+this._base64Encode(e);n.resolve(r)}.bind(this)).fail((function(e,t,i){console.warn("ERROR loading font file: ",i),n.reject(i)}))}.bind(this)).catch((function(e){n.reject(e)})).done(),n.promise},_base64Encode:function(e){for(var t,n,i,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",a=0,s=e.length;a<s;){if(t=255&e.charCodeAt(a++),a==s){o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4),o+="==";break}if(n=e.charCodeAt(a++),a==s){o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4|(240&n)>>4),o+=r.charAt((15&n)<<2),o+="=";break}i=e.charCodeAt(a++),o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4|(240&n)>>4),o+=r.charAt((15&n)<<2|(192&i)>>6),o+=r.charAt(63&i)}return o},_createStyleBlock:function(e){var t=document.createElement("style");return t.type="text/css",t.className=e,document.getElementsByTagName("head")[0].appendChild(t),t}}}.apply(t,i))||(e.exports=r)},837:function(e,t,n){var i,r;i=[n(7),n(385)],void 0===(r=function(e,t){return{getTextWidthDOM:function(t,n){var i=e("<span>"+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>").css({font:n,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),r=i.width();return i.remove(),r},getContentDimensions:function(e,t,n,i,r){var o=this.getLines(e,t,i,n);return{width:Math.max.apply(void 0,o.map((function(e){return e.width}))),height:o.length*r}},swapFontSize:function(e,t){return t.replace(/([0-9\-\.]*)px/,e+"px")},autoSizeText:function(e,t,n,i,r,o,a,s,l){var c=t,u=a*c,d=o*c,h=1;for(1!=(s=s||1)&&(c*=h=s)<10&&(h=(c=10)/t);c&&c>10;){var p={width:r,height:l||d},f=this.getContentDimensions(n,e,this.swapFontSize(c,i),r,u),g=f.width>0?f.width:1,m=f.height>0?f.height:1,v=p.width,y=p.height,b=Math.min(v/g,y/m)||1;if(b>=1||g-v<=1&&m-y<=1)break;(c*=b)<10&&(b=(c=10)/t),h*=b,u=a*c,d=o*c}return{fontSize:c,scale:h}},getLines:function(e,t,n,i){var r=(t=t.toString()).split(" "),o=[],a=r[0],s=n;if(e.font=i,1==r.length)return[{text:a,width:this.getTextWidthDOM(a,i)}];for(var l=1;l<r.length;l++){var c=r[l];if(this.getTextWidthDOM(a+" "+c,i)<s?a+=" "+c:(o.push({text:a,width:this.getTextWidthDOM(a,i)}),a=c),l===r.length-1){o.push({text:a,width:this.getTextWidthDOM(a,i)});break}}return o},downsampleImage:function(e,n,i){var r=window.URL.createObjectURL(e),o=new Image;o.onload=function(){var r=o.width,a=o.height/r;if(r<=n)return i(e);var s=document.createElement("canvas");s.width=n,s.height=n*a,s.getContext("2d").drawImage(o,0,0,n,n*a);var l=s.toDataURL("image/png"),c=t(l);i(c)},o.onerror=function(){i(e)},o.src=r}}}.apply(t,i))||(e.exports=r)},857:function(e,t,n){(function(e){!function(t){"use strict";
/*! https://mths.be/codepointat v0.2.0 by @mathias */var i,r;String.prototype.codePointAt||(i=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),r=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=n)){var r,o=t.charCodeAt(i);return o>=55296&&o<=56319&&n>i+1&&(r=t.charCodeAt(i+1))>=56320&&r<=57343?1024*(o-55296)+r-56320+65536:o}},i?i(String.prototype,"codePointAt",{value:r,configurable:!0,writable:!0}):String.prototype.codePointAt=r);var o=0,a=-3;function s(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new s,this.dtree=new s}var c=new s,u=new s,d=new Uint8Array(30),h=new Uint16Array(30),p=new Uint8Array(30),f=new Uint16Array(30),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new s,v=new Uint8Array(320);function y(e,t,n,i){var r,o;for(r=0;r<n;++r)e[r]=0;for(r=0;r<30-n;++r)e[r+n]=r/n|0;for(o=i,r=0;r<30;++r)t[r]=o,o+=1<<e[r]}var b=new Uint16Array(16);function w(e,t,n,i){var r,o;for(r=0;r<16;++r)e.table[r]=0;for(r=0;r<i;++r)e.table[t[n+r]]++;for(e.table[0]=0,o=0,r=0;r<16;++r)b[r]=o,o+=e.table[r];for(r=0;r<i;++r)t[n+r]&&(e.trans[b[t[n+r]]++]=r)}function C(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function M(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+n}function x(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,i=0,r=0,o=e.tag;do{i=2*i+(1&o),o>>>=1,++r,n+=t.table[r],i-=t.table[r]}while(i>=0);return e.tag=o,e.bitcount-=r,t.trans[n+i]}function L(e,t,n){var i,r,o,a,s,l;for(i=M(e,5,257),r=M(e,5,1),o=M(e,4,4),a=0;a<19;++a)v[a]=0;for(a=0;a<o;++a){var c=M(e,3,0);v[g[a]]=c}for(w(m,v,0,19),s=0;s<i+r;){var u=x(e,m);switch(u){case 16:var d=v[s-1];for(l=M(e,2,3);l;--l)v[s++]=d;break;case 17:for(l=M(e,3,3);l;--l)v[s++]=0;break;case 18:for(l=M(e,7,11);l;--l)v[s++]=0;break;default:v[s++]=u}}w(t,v,0,i),w(n,v,i,r)}function k(e,t,n){for(;;){var i,r,a,s,l=x(e,t);if(256===l)return o;if(l<256)e.dest[e.destLen++]=l;else for(i=M(e,d[l-=257],h[l]),r=x(e,n),s=a=e.destLen-M(e,p[r],f[r]);s<a+i;++s)e.dest[e.destLen++]=e.dest[s]}}function S(e){for(var t,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return a;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,o}(function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n})(c,u),y(d,h,4,3),y(p,f,2,1),d[28]=0,h[28]=258;var T=function(e,t){var n,i,r=new l(e,t);do{switch(n=C(r),M(r,2,0)){case 0:i=S(r);break;case 1:i=k(r,c,u);break;case 2:L(r,r.ltree,r.dtree),i=k(r,r.ltree,r.dtree);break;default:i=a}if(i!==o)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?"function"==typeof r.dest.slice?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest};function N(e,t,n,i,r){return Math.pow(1-r,3)*e+3*Math.pow(1-r,2)*r*t+3*(1-r)*Math.pow(r,2)*n+Math.pow(r,3)*i}function D(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function I(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function A(e){throw new Error(e)}function E(e,t){e||A(t)}D.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},D.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},D.prototype.addX=function(e){this.addPoint(e,null)},D.prototype.addY=function(e){this.addPoint(null,e)},D.prototype.addBezier=function(e,t,n,i,r,o,a,s){var l=[e,t],c=[n,i],u=[r,o],d=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var h=0;h<=1;h++){var p=6*l[h]-12*c[h]+6*u[h],f=-3*l[h]+9*c[h]-9*u[h]+3*d[h],g=3*c[h]-3*l[h];if(0!==f){var m=Math.pow(p,2)-4*g*f;if(!(m<0)){var v=(-p+Math.sqrt(m))/(2*f);0<v&&v<1&&(0===h&&this.addX(N(l[h],c[h],u[h],d[h],v)),1===h&&this.addY(N(l[h],c[h],u[h],d[h],v)));var y=(-p-Math.sqrt(m))/(2*f);0<y&&y<1&&(0===h&&this.addX(N(l[h],c[h],u[h],d[h],y)),1===h&&this.addY(N(l[h],c[h],u[h],d[h],y)))}}else{if(0===p)continue;var b=-g/p;0<b&&b<1&&(0===h&&this.addX(N(l[h],c[h],u[h],d[h],b)),1===h&&this.addY(N(l[h],c[h],u[h],d[h],b)))}}},D.prototype.addQuad=function(e,t,n,i,r,o){var a=e+2/3*(n-e),s=t+2/3*(i-t),l=a+1/3*(r-e),c=s+1/3*(o-t);this.addBezier(e,t,a,s,l,c,r,o)},I.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},I.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},I.prototype.curveTo=I.prototype.bezierCurveTo=function(e,t,n,i,r,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:i,x:r,y:o})},I.prototype.quadTo=I.prototype.quadraticCurveTo=function(e,t,n,i){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:i})},I.prototype.close=I.prototype.closePath=function(){this.commands.push({type:"Z"})},I.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof D){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},I.prototype.getBoundingBox=function(){for(var e=new D,t=0,n=0,i=0,r=0,o=0;o<this.commands.length;o++){var a=this.commands[o];switch(a.type){case"M":e.addPoint(a.x,a.y),t=i=a.x,n=r=a.y;break;case"L":e.addPoint(a.x,a.y),i=a.x,r=a.y;break;case"Q":e.addQuad(i,r,a.x1,a.y1,a.x,a.y),i=a.x,r=a.y;break;case"C":e.addBezier(i,r,a.x1,a.y1,a.x2,a.y2,a.x,a.y),i=a.x,r=a.y;break;case"Z":i=t,r=n;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},I.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},I.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e=arguments,n="",i=0;i<arguments.length;i+=1){var r=e[i];r>=0&&i>0&&(n+=" "),n+=t(r)}return n}e=void 0!==e?e:2;for(var i="",r=0;r<this.commands.length;r+=1){var o=this.commands[r];"M"===o.type?i+="M"+n(o.x,o.y):"L"===o.type?i+="L"+n(o.x,o.y):"C"===o.type?i+="C"+n(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?i+="Q"+n(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(i+="Z")}return i},I.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},I.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var R={fail:A,argument:E,assert:E},F={},z={},P={};function U(e){return function(){return e}}z.BYTE=function(e){return R.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},P.BYTE=U(1),z.CHAR=function(e){return[e.charCodeAt(0)]},P.CHAR=U(1),z.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},P.CHARARRAY=function(e){return e.length},z.USHORT=function(e){return[e>>8&255,255&e]},P.USHORT=U(2),z.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},P.SHORT=U(2),z.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},P.UINT24=U(3),z.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},P.ULONG=U(4),z.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},P.LONG=U(4),z.FIXED=z.ULONG,P.FIXED=P.ULONG,z.FWORD=z.SHORT,P.FWORD=P.SHORT,z.UFWORD=z.USHORT,P.UFWORD=P.USHORT,z.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},P.LONGDATETIME=U(8),z.TAG=function(e){return R.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},P.TAG=U(4),z.Card8=z.BYTE,P.Card8=P.BYTE,z.Card16=z.USHORT,P.Card16=P.USHORT,z.OffSize=z.BYTE,P.OffSize=P.BYTE,z.SID=z.USHORT,P.SID=P.USHORT,z.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?z.NUMBER16(e):z.NUMBER32(e)},P.NUMBER=function(e){return z.NUMBER(e).length},z.NUMBER16=function(e){return[28,e>>8&255,255&e]},P.NUMBER16=U(3),z.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},P.NUMBER32=U(5),z.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var i=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*i)/i).toString()}for(var r="",o=0,a=t.length;o<a;o+=1){var s=t[o];r+="e"===s?"-"===t[++o]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],c=0,u=(r+=1&r.length?"f":"ff").length;c<u;c+=2)l.push(parseInt(r.substr(c,2),16));return l},P.REAL=function(e){return z.REAL(e).length},z.NAME=z.CHARARRAY,P.NAME=P.CHARARRAY,z.STRING=z.CHARARRAY,P.STRING=P.CHARARRAY,F.UTF8=function(e,t,n){for(var i=[],r=n,o=0;o<r;o++,t+=1)i[o]=e.getUint8(t);return String.fromCharCode.apply(null,i)},F.UTF16=function(e,t,n){for(var i=[],r=n/2,o=0;o<r;o++,t+=2)i[o]=e.getUint16(t);return String.fromCharCode.apply(null,i)},z.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var i=e.charCodeAt(n);t[t.length]=i>>8&255,t[t.length]=255&i}return t},P.UTF16=function(e){return 2*e.length};var _={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};F.MACSTRING=function(e,t,n,i){var r=_[i];if(void 0!==r){for(var o="",a=0;a<n;a++){var s=e.getUint8(t+a);o+=s<=127?String.fromCharCode(s):r[127&s]}return o}};var O,B="function"==typeof WeakMap&&new WeakMap;function j(e){return e>=-128&&e<=127}function G(e,t,n){for(var i=0,r=e.length;t<r&&i<64&&0===e[t];)++t,++i;return n.push(128|i-1),t}function H(e,t,n){for(var i=0,r=e.length,o=t;o<r&&i<64;){var a=e[o];if(!j(a))break;if(0===a&&o+1<r&&0===e[o+1])break;++o,++i}n.push(i-1);for(var s=t;s<o;++s)n.push(e[s]+256&255);return o}function K(e,t,n){for(var i=0,r=e.length,o=t;o<r&&i<64;){var a=e[o];if(0===a)break;if(j(a)&&o+1<r&&j(e[o+1]))break;++o,++i}n.push(64|i-1);for(var s=t;s<o;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return o}z.MACSTRING=function(e,t){var n=function(e){if(!O)for(var t in O={},_)O[t]=new String(t);var n=O[e];if(void 0!==n){if(B){var i=B.get(n);if(void 0!==i)return i}var r=_[e];if(void 0!==r){for(var o={},a=0;a<r.length;a++)o[r.charCodeAt(a)]=a+128;return B&&B.set(n,o),o}}}(t);if(void 0!==n){for(var i=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=128&&void 0===(o=n[o]))return;i[r]=o}return i}},P.MACSTRING=function(e,t){var n=z.MACSTRING(e,t);return void 0!==n?n.length:0},z.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var i=e[t];t=0===i?G(e,t,n):i>=-128&&i<=127?H(e,t,n):K(e,t,n)}return n},z.INDEX=function(e){for(var t=1,n=[t],i=[],r=0;r<e.length;r+=1){var o=z.OBJECT(e[r]);Array.prototype.push.apply(i,o),t+=o.length,n.push(t)}if(0===i.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,z.BYTE,z.USHORT,z.UINT24,z.ULONG][s],c=0;c<n.length;c+=1){var u=l(n[c]);Array.prototype.push.apply(a,u)}return Array.prototype.concat(z.Card16(e.length),z.OffSize(s),a,i)},P.INDEX=function(e){return z.INDEX(e).length},z.DICT=function(e){for(var t=[],n=Object.keys(e),i=n.length,r=0;r<i;r+=1){var o=parseInt(n[r],0),a=e[o];t=(t=t.concat(z.OPERAND(a.value,a.type))).concat(z.OPERATOR(o))}return t},P.DICT=function(e){return z.DICT(e).length},z.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},z.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)R.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(z.OPERAND(e[i],t[i]));else if("SID"===t)n=n.concat(z.NUMBER(e));else if("offset"===t)n=n.concat(z.NUMBER32(e));else if("number"===t)n=n.concat(z.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(z.REAL(e))}return n},z.OP=z.BYTE,P.OP=P.BYTE;var Y="function"==typeof WeakMap&&new WeakMap;function W(e,t,n){for(var i=0;i<t.length;i+=1){var r=t[i];this[r.name]=r.value}if(this.tableName=e,this.fields=t,n)for(var o=Object.keys(n),a=0;a<o.length;a+=1){var s=o[a],l=n[s];void 0!==this[s]&&(this[s]=l)}}function V(e,t,n){void 0===n&&(n=t.length);var i=new Array(t.length+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(var r=0;r<t.length;r++)i[r+1]={name:e+r,type:"USHORT",value:t[r]};return i}function q(e,t,n){var i=t.length,r=new Array(i+1);r[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)r[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return r}function Q(e,t,n){var i=t.length,r=[];r[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)r=r.concat(n(t[o],o));return r}function X(e){1===e.format?W.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(V("glyph",e.glyphs))):R.assert(!1,"Can't create coverage table format 2 yet.")}function J(e){W.call(this,"scriptListTable",Q("scriptRecord",e,(function(e,t){var n=e.script,i=n.defaultLangSys;return R.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new W("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new W("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(V("featureIndex",i.featureIndexes)))}].concat(Q("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new W("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(V("featureIndex",n.featureIndexes)))}]}))))}]})))}function $(e){W.call(this,"featureListTable",Q("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new W("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(V("lookupListIndex",n.lookupListIndexes)))}]})))}function Z(e,t){W.call(this,"lookupListTable",q("lookup",e,(function(e){var n=t[e.lookupType];return R.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new W("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(q("subtable",e.subtables,n)))})))}z.CHARSTRING=function(e){if(Y){var t=Y.get(e);if(void 0!==t)return t}for(var n=[],i=e.length,r=0;r<i;r+=1){var o=e[r];n=n.concat(z[o.type](o.value))}return Y&&Y.set(e,n),n},P.CHARSTRING=function(e){return z.CHARSTRING(e).length},z.OBJECT=function(e){var t=z[e.type];return R.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},P.OBJECT=function(e){var t=P[e.type];return R.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},z.TABLE=function(e){for(var t=[],n=e.fields.length,i=[],r=[],o=0;o<n;o+=1){var a=e.fields[o],s=z[a.type];R.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")");var l=e[a.name];void 0===l&&(l=a.value);var c=s(l);"TABLE"===a.type?(r.push(t.length),t=t.concat([0,0]),i.push(c)):t=t.concat(c)}for(var u=0;u<i.length;u+=1){var d=r[u],h=t.length;R.argument(h<65536,"Table "+e.tableName+" too big."),t[d]=h>>8,t[d+1]=255&h,t=t.concat(i[u])}return t},P.TABLE=function(e){for(var t=0,n=e.fields.length,i=0;i<n;i+=1){var r=e.fields[i],o=P[r.type];R.argument(void 0!==o,"No sizeOf function for field type "+r.type+" ("+r.name+")");var a=e[r.name];void 0===a&&(a=r.value),t+=o(a),"TABLE"===r.type&&(t+=2)}return t},z.RECORD=z.TABLE,P.RECORD=P.TABLE,z.LITERAL=function(e){return e},P.LITERAL=function(e){return e.length},W.prototype.encode=function(){return z.TABLE(this)},W.prototype.sizeOf=function(){return P.TABLE(this)},X.prototype=Object.create(W.prototype),X.prototype.constructor=X,J.prototype=Object.create(W.prototype),J.prototype.constructor=J,$.prototype=Object.create(W.prototype),$.prototype.constructor=$,Z.prototype=Object.create(W.prototype),Z.prototype.constructor=Z;var ee={Table:W,Record:W,Coverage:X,ScriptList:J,FeatureList:$,LookupList:Z,ushortList:V,tableList:q,recordList:Q};function te(e,t){return e.getUint8(t)}function ne(e,t){return e.getUint16(t,!1)}function ie(e,t){return e.getUint32(t,!1)}function re(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var oe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ae(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ae.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseCard8=ae.prototype.parseByte,ae.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseCard16=ae.prototype.parseUShort,ae.prototype.parseSID=ae.prototype.parseUShort,ae.prototype.parseOffset16=ae.prototype.parseUShort,ae.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ae.prototype.parseULong=function(){var e=ie(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseOffset32=ae.prototype.parseULong,ae.prototype.parseFixed=function(){var e=re(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,i="";this.relativeOffset+=e;for(var r=0;r<e;r++)i+=String.fromCharCode(t.getUint8(n+r));return i},ae.prototype.parseTag=function(){return this.parseString(4)},ae.prototype.parseLongDateTime=function(){var e=ie(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ae.prototype.parseVersion=function(e){var t=ne(this.data,this.offset+this.relativeOffset),n=ne(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},ae.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=oe[e]*t},ae.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint32(i),i+=4;return this.relativeOffset+=4*e,t},ae.prototype.parseOffset16List=ae.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint16(i),i+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getInt16(i),i+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint8(i++);return this.relativeOffset+=e,t},ae.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),i=0;i<e;i++)n[i]=t.call(this);return n},ae.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),i=0;i<e;i++)n[i]=t.call(this);return n},ae.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),i=Object.keys(t),r=0;r<e;r++){for(var o={},a=0;a<i.length;a++){var s=i[a],l=t[s];o[s]=l.call(this)}n[r]=o}return n},ae.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),i=Object.keys(t),r=0;r<e;r++){for(var o={},a=0;a<i.length;a++){var s=i[a],l=t[s];o[s]=l.call(this)}n[r]=o}return n},ae.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i],o=e[r];n[r]=o.call(this)}return n},ae.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ae.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),i=0;i<t;i++)n[i]=this.parseValueRecord(e);return n},ae.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,i=this.relativeOffset,r=new Array(n),o=0;o<n;o++){var a=t[o];if(0!==a)if(this.relativeOffset=a,e){for(var s=this.parseOffset16List(),l=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=a+s[c],l[c]=e.call(this);r[o]=l}else r[o]=this.parseUShortList();else r[o]=void 0}return this.relativeOffset=i,r},ae.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2===t){for(var i=new Array(n),r=0;r<n;r++)i[r]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},ae.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ae.uShort,end:ae.uShort,classId:ae.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ae.list=function(e,t){return function(){return this.parseList(e,t)}},ae.list32=function(e,t){return function(){return this.parseList32(e,t)}},ae.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ae.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ae.pointer=function(e){return function(){return this.parsePointer(e)}},ae.pointer32=function(e){return function(){return this.parsePointer32(e)}},ae.tag=ae.prototype.parseTag,ae.byte=ae.prototype.parseByte,ae.uShort=ae.offset16=ae.prototype.parseUShort,ae.uShortList=ae.prototype.parseUShortList,ae.uLong=ae.offset32=ae.prototype.parseULong,ae.uLongList=ae.prototype.parseULongList,ae.struct=ae.prototype.parseStruct,ae.coverage=ae.prototype.parseCoverage,ae.classDef=ae.prototype.parseClassDef;var se={reserved:ae.uShort,reqFeatureIndex:ae.uShort,featureIndexes:ae.uShortList};ae.prototype.parseScriptList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,script:ae.pointer({defaultLangSys:ae.pointer(se),langSysRecords:ae.recordList({tag:ae.tag,langSys:ae.pointer(se)})})}))||[]},ae.prototype.parseFeatureList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,feature:ae.pointer({featureParams:ae.offset16,lookupListIndexes:ae.uShortList})}))||[]},ae.prototype.parseLookupList=function(e){return this.parsePointer(ae.list(ae.pointer((function(){var t=this.parseUShort();R.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),i=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ae.pointer(e[t])),markFilteringSet:i?this.parseUShort():void 0}}))))||[]},ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return R.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ae.offset32,featureTableSubstitutionOffset:ae.offset32})}))||[]};var le={getByte:te,getCard8:te,getUShort:ne,getCard16:ne,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ie,getFixed:re,getTag:function(e,t){for(var n="",i=t;i<t+4;i+=1)n+=String.fromCharCode(e.getInt8(i));return n},getOffset:function(e,t,n){for(var i=0,r=0;r<n;r+=1)i<<=8,i+=e.getUint8(t+r);return i},getBytes:function(e,t,n){for(var i=[],r=t;r<n;r+=1)i.push(e.getUint8(r));return i},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ae};function ce(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0,glyphIndex:n})}var ue={parse:function(e,t){var n={};n.version=le.getUShort(e,t),R.argument(0===n.version,"cmap table version should be 0."),n.numTables=le.getUShort(e,t+2);for(var i=-1,r=n.numTables-1;r>=0;r-=1){var o=le.getUShort(e,t+4+8*r),a=le.getUShort(e,t+4+8*r+2);if(3===o&&(0===a||1===a||10===a)){i=le.getULong(e,t+4+8*r+4);break}}if(-1===i)throw new Error("No valid cmap sub-tables found.");var s=new le.Parser(e,t+i);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var i=0;i<n;i+=1)for(var r=t.parseULong(),o=t.parseULong(),a=t.parseULong(),s=r;s<=o;s+=1)e.glyphIndexMap[s]=a,a++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,i,r){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var a=new le.Parser(n,i+r+14),s=new le.Parser(n,i+r+16+2*o),l=new le.Parser(n,i+r+16+4*o),c=new le.Parser(n,i+r+16+6*o),u=i+r+16+8*o,d=0;d<o-1;d+=1)for(var h=void 0,p=a.parseUShort(),f=s.parseUShort(),g=l.parseShort(),m=c.parseUShort(),v=f;v<=p;v+=1)0!==m?(u=c.offset+c.relativeOffset-2,u+=m,u+=2*(v-f),0!==(h=le.getUShort(n,u))&&(h=h+g&65535)):h=v+g&65535,e.glyphIndexMap[v]=h}(n,s,e,t,i)}return n},make:function(e){var t,n=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var r=new ee.Table("cmap",i);for(r.segments=[],t=0;t<e.length;t+=1){for(var o=e.get(t),a=0;a<o.unicodes.length;a+=1)ce(r,o.unicodes[a],t);r.segments=r.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(r);var s=r.segments.length,l=0,c=[],u=[],d=[],h=[],p=[],f=[];for(t=0;t<s;t+=1){var g=r.segments[t];g.end<=65535&&g.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:g.end}),u=u.concat({name:"start_"+t,type:"USHORT",value:g.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:g.delta}),h=h.concat({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:g.glyphId}))):l+=1,n||void 0===g.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:g.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:g.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}if(r.segCountX2=2*(s-l),r.searchRange=2*Math.pow(2,Math.floor(Math.log(s-l)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange,r.fields=r.fields.concat(c),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(u),r.fields=r.fields.concat(d),r.fields=r.fields.concat(h),r.fields=r.fields.concat(p),r.cmap4Length=14+2*c.length+2+2*u.length+2*d.length+2*h.length+2*p.length,!n){var m=16+4*f.length;r.cmap12Offset=20+r.cmap4Length,r.fields=r.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),r.fields=r.fields.concat(f)}return r}},de=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],pe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ge(e){this.font=e}function me(e){this.cmap=e}function ve(e,t){this.encoding=e,this.charset=t}function ye(e){switch(e.version){case 1:this.names=fe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<fe.length?this.names[t]=fe[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-fe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=fe[n+e.glyphNameIndex[n]];break;case 3:default:this.names=[]}}ge.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var i=0;i<n.length;i+=1)for(var r=n.get(i),o=0;o<r.unicodes.length;o+=1)if(r.unicodes[o]===t)return i;return null},me.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ve.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},ye.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},ye.prototype.glyphIndexToName=function(e){return this.names[e]};var be={line:function(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke()}};function we(e){this.bindConstructorValues(e)}function Ce(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function Me(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}we.prototype.bindConstructorValues=function(e){var t,n;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,n=t||new I,{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}))},we.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},we.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},we.prototype.getPath=function(e,t,n,i,r){var o,a;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72,i||(i={});var s=i.xScale,l=i.yScale;if(i.hinting&&r&&r.hinting&&(a=this.path&&r.hinting.exec(this,n)),a)o=r.hinting.getCommands(a),e=Math.round(e),t=Math.round(t),s=l=1;else{o=this.path.commands;var c=1/this.path.unitsPerEm*n;void 0===s&&(s=c),void 0===l&&(l=c)}for(var u=new I,d=0;d<o.length;d+=1){var h=o[d];"M"===h.type?u.moveTo(e+h.x*s,t+-h.y*l):"L"===h.type?u.lineTo(e+h.x*s,t+-h.y*l):"Q"===h.type?u.quadraticCurveTo(e+h.x1*s,t+-h.y1*l,e+h.x*s,t+-h.y*l):"C"===h.type?u.curveTo(e+h.x1*s,t+-h.y1*l,e+h.x2*s,t+-h.y2*l,e+h.x*s,t+-h.y*l):"Z"===h.type&&u.closePath()}return u},we.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var i=this.points[n];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return R.argument(0===t.length,"There are still points left in the current contour."),e},we.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],i=0;i<e.length;i+=1){var r=e[i];"Z"!==r.type&&(t.push(r.x),n.push(r.y)),"Q"!==r.type&&"C"!==r.type||(t.push(r.x1),n.push(r.y1)),"C"===r.type&&(t.push(r.x2),n.push(r.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},we.prototype.draw=function(e,t,n,i,r){this.getPath(t,n,i,r).draw(e)},we.prototype.drawPoints=function(e,t,n,i){function r(t,n,i,r){var o=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*r,i+t[a].y*r),e.arc(n+t[a].x*r,i+t[a].y*r,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:24;for(var o=1/this.path.unitsPerEm*i,a=[],s=[],l=this.path,c=0;c<l.commands.length;c+=1){var u=l.commands[c];void 0!==u.x&&a.push({x:u.x,y:-u.y}),void 0!==u.x1&&s.push({x:u.x1,y:-u.y1}),void 0!==u.x2&&s.push({x:u.x2,y:-u.y2})}e.fillStyle="blue",r(a,t,n,o),e.fillStyle="red",r(s,t,n,o)},we.prototype.drawMetrics=function(e,t,n,i){var r;t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:24,r=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",be.line(e,t,-1e4,t,1e4),be.line(e,-1e4,n,1e4,n);var o=this.xMin||0,a=this.yMin||0,s=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",be.line(e,t+o*r,-1e4,t+o*r,1e4),be.line(e,t+s*r,-1e4,t+s*r,1e4),be.line(e,-1e4,n+-a*r,1e4,n+-a*r),be.line(e,-1e4,n+-l*r,1e4,n+-l*r),e.strokeStyle="green",be.line(e,t+c*r,-1e4,t+c*r,1e4)},Me.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},Me.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var xe={GlyphSet:Me,glyphLoader:function(e,t){return new we({index:t,font:e})},ttfGlyphLoader:function(e,t,n,i,r,o){return function(){var a=new we({index:t,font:e});return a.path=function(){n(a,i,r);var t=o(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},Ce(a,"xMin","_xMin"),Ce(a,"xMax","_xMax"),Ce(a,"yMin","_yMin"),Ce(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,n,i){return function(){var r=new we({index:t,font:e});return r.path=function(){var t=n(e,r,i);return t.unitsPerEm=e.unitsPerEm,t},r}}};function Le(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!Le(e[n],t[n]))return!1;return!0}return!1}function ke(e){return e.length<1240?107:e.length<33900?1131:32768}function Se(e,t,n){var i,r,o=[],a=[],s=le.getCard16(e,t);if(0!==s){var l=le.getByte(e,t+2);i=t+(s+1)*l+2;for(var c=t+3,u=0;u<s+1;u+=1)o.push(le.getOffset(e,c,l)),c+=l;r=i+o[s]}else r=t+2;for(var d=0;d<o.length-1;d+=1){var h=le.getBytes(e,i+o[d],i+o[d+1]);n&&(h=n(h)),a.push(h)}return{objects:a,startOffset:t,endOffset:r}}function Te(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),r=i>>4,o=15&i;if(15===r)break;if(t+=n[r],15===o)break;t+=n[o]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ne(e,t,n){t=void 0!==t?t:0;var i=new le.Parser(e,t),r=[],o=[];for(n=void 0!==n?n:e.length;i.relativeOffset<n;){var a=i.parseByte();a<=21?(12===a&&(a=1200+i.parseByte()),r.push([a,o]),o=[]):o.push(Te(i,a))}return function(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n][0],r=e[n][1],o=void 0;if(o=1===r.length?r[0]:r,t.hasOwnProperty(i)&&!isNaN(t[i]))throw new Error("Object "+t+" already has key "+i);t[i]=o}return t}(r)}function De(e,t){return t=t<=390?de[t]:e[t-391]}function Ie(e,t,n){for(var i,r={},o=0;o<t.length;o+=1){var a=t[o];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(i=void 0!==e[a.op]?e[a.op][l]:void 0)&&(i=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(i=De(n,i)),s[l]=i;r[a.name]=s}else void 0===(i=e[a.op])&&(i=void 0!==a.value?a.value:null),"SID"===a.type&&(i=De(n,i)),r[a.name]=i}return r}var Ae=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ee=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Re(e,t){return Ie(Ne(e,0,e.byteLength),Ae,t)}function Fe(e,t,n,i){return Ie(Ne(e,t,n),Ee,i)}function ze(e,t,n,i){for(var r=[],o=0;o<n.length;o+=1){var a=Re(new DataView(new Uint8Array(n[o]).buffer),i);a._subrs=[],a._subrsBias=0;var s=a.private[0],l=a.private[1];if(0!==s&&0!==l){var c=Fe(e,l+t,s,i);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,0!==c.subrs){var u=Se(e,l+c.subrs+t);a._subrs=u.objects,a._subrsBias=ke(a._subrs)}a._privateDict=c}r.push(a)}return r}function Pe(e,t,n){var i,r,o,a,s,l,c,u,d=new I,h=[],p=0,f=!1,g=!1,m=0,v=0;if(e.isCIDFont){var y=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[y];s=b._subrs,l=b._subrsBias,c=b._defaultWidthX,u=b._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,c=e.tables.cff.topDict._defaultWidthX,u=e.tables.cff.topDict._nominalWidthX;var w=c;function C(e,t){g&&d.closePath(),d.moveTo(e,t),g=!0}function M(){h.length%2!=0&&!f&&(w=h.shift()+u),p+=h.length>>1,h.length=0,f=!0}return function n(c){for(var y,b,x,L,k,S,T,N,D,I,A,E,R=0;R<c.length;){var F=c[R];switch(R+=1,F){case 1:case 3:M();break;case 4:h.length>1&&!f&&(w=h.shift()+u,f=!0),v+=h.pop(),C(m,v);break;case 5:for(;h.length>0;)m+=h.shift(),v+=h.shift(),d.lineTo(m,v);break;case 6:for(;h.length>0&&(m+=h.shift(),d.lineTo(m,v),0!==h.length);)v+=h.shift(),d.lineTo(m,v);break;case 7:for(;h.length>0&&(v+=h.shift(),d.lineTo(m,v),0!==h.length);)m+=h.shift(),d.lineTo(m,v);break;case 8:for(;h.length>0;)i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),d.curveTo(i,r,o,a,m,v);break;case 10:k=h.pop()+l,(S=s[k])&&n(S);break;case 11:return;case 12:switch(F=c[R],R+=1,F){case 35:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),T=o+h.shift(),N=a+h.shift(),D=T+h.shift(),I=N+h.shift(),A=D+h.shift(),E=I+h.shift(),m=A+h.shift(),v=E+h.shift(),h.shift(),d.curveTo(i,r,o,a,T,N),d.curveTo(D,I,A,E,m,v);break;case 34:i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),T=o+h.shift(),N=a,D=T+h.shift(),I=a,A=D+h.shift(),E=v,m=A+h.shift(),d.curveTo(i,r,o,a,T,N),d.curveTo(D,I,A,E,m,v);break;case 36:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),T=o+h.shift(),N=a,D=T+h.shift(),I=a,A=D+h.shift(),E=I+h.shift(),m=A+h.shift(),d.curveTo(i,r,o,a,T,N),d.curveTo(D,I,A,E,m,v);break;case 37:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),T=o+h.shift(),N=a+h.shift(),D=T+h.shift(),I=N+h.shift(),A=D+h.shift(),E=I+h.shift(),Math.abs(A-m)>Math.abs(E-v)?m=A+h.shift():v=E+h.shift(),d.curveTo(i,r,o,a,T,N),d.curveTo(D,I,A,E,m,v);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+F),h.length=0}break;case 14:h.length>0&&!f&&(w=h.shift()+u,f=!0),g&&(d.closePath(),g=!1);break;case 18:M();break;case 19:case 20:M(),R+=p+7>>3;break;case 21:h.length>2&&!f&&(w=h.shift()+u,f=!0),v+=h.pop(),C(m+=h.pop(),v);break;case 22:h.length>1&&!f&&(w=h.shift()+u,f=!0),C(m+=h.pop(),v);break;case 23:M();break;case 24:for(;h.length>2;)i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),d.curveTo(i,r,o,a,m,v);m+=h.shift(),v+=h.shift(),d.lineTo(m,v);break;case 25:for(;h.length>6;)m+=h.shift(),v+=h.shift(),d.lineTo(m,v);i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),d.curveTo(i,r,o,a,m,v);break;case 26:for(h.length%2&&(m+=h.shift());h.length>0;)i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o,v=a+h.shift(),d.curveTo(i,r,o,a,m,v);break;case 27:for(h.length%2&&(v+=h.shift());h.length>0;)i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a,d.curveTo(i,r,o,a,m,v);break;case 28:y=c[R],b=c[R+1],h.push((y<<24|b<<16)>>16),R+=2;break;case 29:k=h.pop()+e.gsubrsBias,(S=e.gsubrs[k])&&n(S);break;case 30:for(;h.length>0&&(i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+(1===h.length?h.shift():0),d.curveTo(i,r,o,a,m,v),0!==h.length);)i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),v=a+h.shift(),m=o+(1===h.length?h.shift():0),d.curveTo(i,r,o,a,m,v);break;case 31:for(;h.length>0&&(i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),v=a+h.shift(),m=o+(1===h.length?h.shift():0),d.curveTo(i,r,o,a,m,v),0!==h.length);)i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+(1===h.length?h.shift():0),d.curveTo(i,r,o,a,m,v);break;default:F<32?console.log("Glyph "+t.index+": unknown operator "+F):F<247?h.push(F-139):F<251?(y=c[R],R+=1,h.push(256*(F-247)+y+108)):F<255?(y=c[R],R+=1,h.push(256*-(F-251)-y-108)):(y=c[R],b=c[R+1],x=c[R+2],L=c[R+3],R+=4,h.push((y<<24|b<<16|x<<8|L)/65536))}}}(n),t.advanceWidth=w,d}function Ue(e,t){var n,i=de.indexOf(e);return i>=0&&(n=i),(i=t.indexOf(e))>=0?n=i+de.length:(n=de.length+t.length,t.push(e)),n}function _e(e,t,n){for(var i={},r=0;r<e.length;r+=1){var o=e[r],a=t[o.name];void 0===a||Le(a,o.value)||("SID"===o.type&&(a=Ue(a,n)),i[o.op]={name:o.name,type:o.type,value:a})}return i}function Oe(e,t){var n=new ee.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=_e(Ae,e,t),n}function Be(e){var t=new ee.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function je(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,r=0,o=0;o<n.commands.length;o+=1){var a=void 0,s=void 0,l=n.commands[o];if("Q"===l.type&&(l={type:"C",x:l.x,y:l.y,x1:1/3*i+2/3*l.x1,y1:1/3*r+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}),"M"===l.type)a=Math.round(l.x-i),s=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(l.x),r=Math.round(l.y);else if("L"===l.type)a=Math.round(l.x-i),s=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(l.x),r=Math.round(l.y);else if("C"===l.type){var c=Math.round(l.x1-i),u=Math.round(l.y1-r),d=Math.round(l.x2-l.x1),h=Math.round(l.y2-l.y1);a=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:u}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:h}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(l.x),r=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Ge={parse:function(e,t,n){n.tables.cff={};var i=Se(e,function(e,t){var n={};return n.formatMajor=le.getCard8(e,t),n.formatMinor=le.getCard8(e,t+1),n.size=le.getCard8(e,t+2),n.offsetSize=le.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}(e,t).endOffset,le.bytesToString),r=Se(e,i.endOffset),o=Se(e,r.endOffset,le.bytesToString),a=Se(e,o.endOffset);n.gsubrs=a.objects,n.gsubrsBias=ke(n.gsubrs);var s=ze(e,t,r.objects,o.objects);if(1!==s.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+s.length);var l=s[0];if(n.tables.cff.topDict=l,l._privateDict&&(n.defaultWidthX=l._privateDict.defaultWidthX,n.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var c=l.fdArray,u=l.fdSelect;if(0===c||0===u)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var d=ze(e,t,Se(e,c+=t).objects,o.objects);l._fdArray=d,u+=t,l._fdSelect=function(e,t,n,i){var r,o=[],a=new le.Parser(e,t),s=a.parseCard8();if(0===s)for(var l=0;l<n;l++){if((r=a.parseCard8())>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+r+" (FD count "+i+")");o.push(r)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var c,u=a.parseCard16(),d=a.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var h=0;h<u;h++){if(r=a.parseCard8(),c=a.parseCard16(),r>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+r+" (FD count "+i+")");if(c>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;d<c;d++)o.push(r);d=c}if(c!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}return o}(e,u,n.numGlyphs,d.length)}var h=t+l.private[1],p=Fe(e,h,l.private[0],o.objects);if(n.defaultWidthX=p.defaultWidthX,n.nominalWidthX=p.nominalWidthX,0!==p.subrs){var f=Se(e,h+p.subrs);n.subrs=f.objects,n.subrsBias=ke(n.subrs)}else n.subrs=[],n.subrsBias=0;var g=Se(e,t+l.charStrings);n.nGlyphs=g.objects.length;var m=function(e,t,n,i){var r,o,a=new le.Parser(e,t);n-=1;var s=[".notdef"],l=a.parseCard8();if(0===l)for(var c=0;c<n;c+=1)r=a.parseSID(),s.push(De(i,r));else if(1===l)for(;s.length<=n;){r=a.parseSID(),o=a.parseCard8();for(var u=0;u<=o;u+=1)s.push(De(i,r)),r+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=n;){r=a.parseSID(),o=a.parseCard16();for(var d=0;d<=o;d+=1)s.push(De(i,r)),r+=1}}return s}(e,t+l.charset,n.nGlyphs,o.objects);0===l.encoding?n.cffEncoding=new ve(he,m):1===l.encoding?n.cffEncoding=new ve(pe,m):n.cffEncoding=function(e,t,n){var i,r={},o=new le.Parser(e,t),a=o.parseCard8();if(0===a)for(var s=o.parseCard8(),l=0;l<s;l+=1)r[i=o.parseCard8()]=l;else{if(1!==a)throw new Error("Unknown encoding format "+a);var c=o.parseCard8();i=1;for(var u=0;u<c;u+=1)for(var d=o.parseCard8(),h=o.parseCard8(),p=d;p<=d+h;p+=1)r[p]=i,i+=1}return new ve(r,n)}(e,t+l.encoding,m),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new xe.GlyphSet(n);for(var v=0;v<n.nGlyphs;v+=1){var y=g.objects[v];n.glyphs.push(v,xe.cffGlyphLoader(n,v,Pe,y))}},make:function(e,t){for(var n,i=new ee.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a=[],s=1;s<e.length;s+=1)n=e.get(s),a.push(n.name);var l=[];i.header=new ee.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),i.nameIndex=function(e){var t=new ee.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var c=Oe(o,l);i.topDictIndex=Be(c),i.globalSubrIndex=new ee.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),i.charsets=function(e,t){for(var n=new ee.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var r=Ue(e[i],t);n.fields.push({name:"glyph_"+i,type:"SID",value:r})}return n}(a,l),i.charStringsIndex=function(e){for(var t=new ee.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var i=e.get(n),r=je(i);t.charStrings.push({name:i.name,type:"CHARSTRING",value:r})}return t}(e),i.privateDict=function(e,t){var n=new ee.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=_e(Ee,e,t),n}({},l),i.stringIndex=function(e){var t=new ee.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(l);var u=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();return o.charset=u,o.encoding=0,o.charStrings=o.charset+i.charsets.sizeOf(),o.private[1]=o.charStrings+i.charStringsIndex.sizeOf(),c=Oe(o,l),i.topDictIndex=Be(c),i}},He={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.fontRevision=Math.round(1e3*i.parseFixed())/1e3,n.checkSumAdjustment=i.parseULong(),n.magicNumber=i.parseULong(),R.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=i.parseUShort(),n.unitsPerEm=i.parseUShort(),n.created=i.parseLongDateTime(),n.modified=i.parseLongDateTime(),n.xMin=i.parseShort(),n.yMin=i.parseShort(),n.xMax=i.parseShort(),n.yMax=i.parseShort(),n.macStyle=i.parseUShort(),n.lowestRecPPEM=i.parseUShort(),n.fontDirectionHint=i.parseShort(),n.indexToLocFormat=i.parseShort(),n.glyphDataFormat=i.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new ee.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Ke={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.ascender=i.parseShort(),n.descender=i.parseShort(),n.lineGap=i.parseShort(),n.advanceWidthMax=i.parseUShort(),n.minLeftSideBearing=i.parseShort(),n.minRightSideBearing=i.parseShort(),n.xMaxExtent=i.parseShort(),n.caretSlopeRise=i.parseShort(),n.caretSlopeRun=i.parseShort(),n.caretOffset=i.parseShort(),i.relativeOffset+=8,n.metricDataFormat=i.parseShort(),n.numberOfHMetrics=i.parseUShort(),n},make:function(e){return new ee.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Ye={parse:function(e,t,n,i,r){for(var o,a,s=new le.Parser(e,t),l=0;l<i;l+=1){l<n&&(o=s.parseUShort(),a=s.parseShort());var c=r.get(l);c.advanceWidth=o,c.leftSideBearing=a}},make:function(e){for(var t=new ee.Table("hmtx",[]),n=0;n<e.length;n+=1){var i=e.get(n),r=i.advanceWidth||0,o=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}},We={make:function(e){for(var t=new ee.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",i=12+4*e.length,r=0;r<e.length;++r){var o=n.indexOf(e[r]);o<0&&(o=n.length,n+=e[r]),t.fields.push({name:"offset "+r,type:"USHORT",value:i+o}),t.fields.push({name:"length "+r,type:"USHORT",value:e[r].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){var n=new le.Parser(e,t),i=n.parseULong();R.argument(1===i,"Unsupported ltag table version."),n.skip("uLong",1);for(var r=n.parseULong(),o=[],a=0;a<r;a++){for(var s="",l=t+n.parseUShort(),c=n.parseUShort(),u=l;u<l+c;++u)s+=String.fromCharCode(e.getInt8(u));o.push(s)}return o}},Ve={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.numGlyphs=i.parseUShort(),1===n.version&&(n.maxPoints=i.parseUShort(),n.maxContours=i.parseUShort(),n.maxCompositePoints=i.parseUShort(),n.maxCompositeContours=i.parseUShort(),n.maxZones=i.parseUShort(),n.maxTwilightPoints=i.parseUShort(),n.maxStorage=i.parseUShort(),n.maxFunctionDefs=i.parseUShort(),n.maxInstructionDefs=i.parseUShort(),n.maxStackElements=i.parseUShort(),n.maxSizeOfInstructions=i.parseUShort(),n.maxComponentElements=i.parseUShort(),n.maxComponentDepth=i.parseUShort()),n},make:function(e){return new ee.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},qe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Xe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Je={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function $e(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Qe[t];case 3:return Je[t]}}var Ze="utf-16",et={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},tt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function nt(e,t,n){switch(e){case 0:return Ze;case 1:return tt[n]||et[t];case 3:if(1===t||10===t)return Ze}}function it(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function rt(e,t,n,i,r,o){return new ee.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:r},{name:"offset",type:"USHORT",value:o}])}function ot(e,t){var n=function(e,t){var n=e.length,i=t.length-n+1;e:for(var r=0;r<i;r++)for(;r<i;r++){for(var o=0;o<n;o++)if(t[r+o]!==e[o])continue e;return r}return-1}(e,t);if(n<0){n=t.length;for(var i=0,r=e.length;i<r;++i)t.push(e[i])}return n}var at={parse:function(e,t,n){for(var i={},r=new le.Parser(e,t),o=r.parseUShort(),a=r.parseUShort(),s=r.offset+r.parseUShort(),l=0;l<a;l++){var c=r.parseUShort(),u=r.parseUShort(),d=r.parseUShort(),h=r.parseUShort(),p=qe[h]||h,f=r.parseUShort(),g=r.parseUShort(),m=$e(c,d,n),v=nt(c,u,d);if(void 0!==v&&void 0!==m){var y=void 0;if(y=v===Ze?F.UTF16(e,s+g,f):F.MACSTRING(e,s+g,f,v)){var b=i[p];void 0===b&&(b=i[p]={}),b[m]=y,"postScriptName"===p&&(b[{0:"uni",1:"mac",3:"win"}[c]+"-"+m]=y)}}}return 1===o&&r.parseUShort(),i},make:function(e,t){var n,i=[],r={},o=it(qe);for(var a in e){var s=o[a];if(void 0===s&&(s=a),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.');r[n]=e[a],i.push(n)}for(var l=it(Qe),c=it(Je),u=[],d=[],h=0;h<i.length;h++){var p=r[n=i[h]];for(var f in p){var g=p[f],m=1,v=l[f],y=Xe[v],b=nt(m,y,v),w=z.MACSTRING(g,b);void 0===w&&(m=0,(v=t.indexOf(f))<0&&(v=t.length,t.push(f)),y=4,w=z.UTF16(g));var C=ot(w,d);u.push(rt(m,y,v,n,w.length,C));var M=c[f];if(void 0!==M){var x=z.UTF16(g),L=ot(x,d);u.push(rt(3,1,M,n,x.length,L))}}}u.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var k=new ee.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:u.length},{name:"stringOffset",type:"USHORT",value:6+12*u.length}]),S=0;S<u.length;S++)k.fields.push({name:"record_"+S,type:"RECORD",value:u[S]});return k.fields.push({name:"strings",type:"LITERAL",value:d}),k}},st=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],lt={parse:function(e,t){var n={},i=new le.Parser(e,t);n.version=i.parseUShort(),n.xAvgCharWidth=i.parseShort(),n.usWeightClass=i.parseUShort(),n.usWidthClass=i.parseUShort(),n.fsType=i.parseUShort(),n.ySubscriptXSize=i.parseShort(),n.ySubscriptYSize=i.parseShort(),n.ySubscriptXOffset=i.parseShort(),n.ySubscriptYOffset=i.parseShort(),n.ySuperscriptXSize=i.parseShort(),n.ySuperscriptYSize=i.parseShort(),n.ySuperscriptXOffset=i.parseShort(),n.ySuperscriptYOffset=i.parseShort(),n.yStrikeoutSize=i.parseShort(),n.yStrikeoutPosition=i.parseShort(),n.sFamilyClass=i.parseShort(),n.panose=[];for(var r=0;r<10;r++)n.panose[r]=i.parseByte();return n.ulUnicodeRange1=i.parseULong(),n.ulUnicodeRange2=i.parseULong(),n.ulUnicodeRange3=i.parseULong(),n.ulUnicodeRange4=i.parseULong(),n.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),n.fsSelection=i.parseUShort(),n.usFirstCharIndex=i.parseUShort(),n.usLastCharIndex=i.parseUShort(),n.sTypoAscender=i.parseShort(),n.sTypoDescender=i.parseShort(),n.sTypoLineGap=i.parseShort(),n.usWinAscent=i.parseUShort(),n.usWinDescent=i.parseUShort(),n.version>=1&&(n.ulCodePageRange1=i.parseULong(),n.ulCodePageRange2=i.parseULong()),n.version>=2&&(n.sxHeight=i.parseShort(),n.sCapHeight=i.parseShort(),n.usDefaultChar=i.parseUShort(),n.usBreakChar=i.parseUShort(),n.usMaxContent=i.parseUShort()),n},make:function(e){return new ee.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:st,getUnicodeRange:function(e){for(var t=0;t<st.length;t+=1){var n=st[t];if(e>=n.begin&&e<n.end)return t}return-1}},ct={parse:function(e,t){var n={},i=new le.Parser(e,t);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=fe.slice();break;case 2:n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();n.names=[];for(var o=0;o<n.numberOfGlyphs;o++)if(n.glyphNameIndex[o]>=fe.length){var a=i.parseChar();n.names.push(i.parseString(a))}break;case 2.5:n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=i.parseChar()}return n},make:function(){return new ee.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ut=new Array(9);ut[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),substitute:this.parseOffset16List()}:void R.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},ut[2]=function(){var e=this.parseUShort();return R.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),sequences:this.parseListOfLists()}},ut[3]=function(){var e=this.parseUShort();return R.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),alternateSets:this.parseListOfLists()}},ut[4]=function(){var e=this.parseUShort();return R.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var dt={sequenceIndex:ae.uShort,lookupListIndex:ae.uShort};ut[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,dt)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),classDef:this.parsePointer(ae.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,dt)}}))};if(3===t){var n=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(i,dt)}}R.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ut[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(dt)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),backtrackClassDef:this.parsePointer(ae.classDef),inputClassDef:this.parsePointer(ae.classDef),lookaheadClassDef:this.parsePointer(ae.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(dt)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),inputCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(dt)}:void R.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ut[7]=function(){var e=this.parseUShort();R.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:ut[t].call(n)}},ut[8]=function(){var e=this.parseUShort();return R.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),substitutes:this.parseUShortList()}};var ht=new Array(9);ht[1]=function(e){return 1===e.substFormat?new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.ushortList("substitute",e.substitute)))},ht[3]=function(e){return R.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("altSet",e.alternateSets,(function(e){return new ee.Table("alternateSetTable",ee.ushortList("alternate",e))}))))},ht[4]=function(e){return R.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("ligSet",e.ligatureSets,(function(e){return new ee.Table("ligatureSetTable",ee.tableList("ligature",e,(function(e){return new ee.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(ee.ushortList("component",e.components,e.components.length+1)))})))}))))};var pt={parse:function(e,t){var n=new ae(e,t=t||0),i=n.parseVersion(1);return R.argument(1===i||1.1===i,"Unsupported GSUB table version."),1===i?{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ut)}:{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ut),variations:n.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,ht)}])}},ft={parse:function(e,t){var n=new le.Parser(e,t),i=n.parseULong();R.argument(1===i,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var r=n.parseULong(),o={},a=0;a<r;a++){var s=n.parseTag(),l=n.parseULong(),c=n.parseULong(),u=F.UTF8(e,t+l,c);o[s]=u}return o},make:function(e){var t=Object.keys(e).length,n="",i=16+12*t,r=new ee.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var a=n.length;n+=e[o],r.fields.push({name:"tag "+o,type:"TAG",value:o}),r.fields.push({name:"offset "+o,type:"ULONG",value:i+a}),r.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return r.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),r}};function gt(e){return Math.log(e)/Math.log(2)|0}function mt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32)}function vt(e,t,n,i){return new ee.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==i?i:0}])}function yt(e){var t=new ee.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,gt(t.numTables));t.searchRange=16*n,t.entrySelector=gt(n),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],r=[],o=t.sizeOf()+vt().sizeOf()*t.numTables;o%4!=0;)o+=1,r.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a];R.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),c=vt(s.tableName,mt(s.encode()),o,l);for(i.push({name:c.tag+" Table Record",type:"RECORD",value:c}),r.push({name:s.tableName+" table",type:"RECORD",value:s}),o+=l,R.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,r.push({name:"padding",type:"BYTE",value:0})}return i.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(i),t.fields=t.fields.concat(r),t}function bt(e,t,n){for(var i=0;i<t.length;i+=1){var r=e.charToGlyphIndex(t[i]);if(r>0)return e.glyphs.get(r).getMetrics()}return n}function wt(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}var Ct={make:yt,fontToTable:function(e){for(var t,n=[],i=[],r=[],o=[],a=[],s=[],l=[],c=0,u=0,d=0,h=0,p=0,f=0;f<e.glyphs.length;f+=1){var g=e.glyphs.get(f),m=0|g.unicode;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+f+"): advanceWidth is not a number.");(t>m||void 0===t)&&m>0&&(t=m),c<m&&(c=m);var v=lt.getUnicodeRange(m);if(v<32)u|=1<<v;else if(v<64)d|=1<<v-32;else if(v<96)h|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<v-96}if(".notdef"!==g.name){var y=g.getMetrics();n.push(y.xMin),i.push(y.yMin),r.push(y.xMax),o.push(y.yMax),s.push(y.leftSideBearing),l.push(y.rightSideBearing),a.push(g.advanceWidth)}}var b={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:wt(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};b.ascender=e.ascender,b.descender=e.descender;var w=He.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),C=Ke.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),M=Ve.make(e.glyphs.length),x=lt.make({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:d,ulUnicodeRange3:h,ulUnicodeRange4:p,fsSelection:e.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:bt(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:bt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),L=Ye.make(e.glyphs),k=ue.make(e.glyphs),S=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),N=S+" "+T,D=e.getEnglishName("postScriptName");D||(D=S.replace(/\s/g,"")+"-"+T);var I={};for(var A in e.names)I[A]=e.names[A];I.uniqueID||(I.uniqueID={en:e.getEnglishName("manufacturer")+":"+N}),I.postScriptName||(I.postScriptName={en:D}),I.preferredFamily||(I.preferredFamily=e.names.fontFamily),I.preferredSubfamily||(I.preferredSubfamily=e.names.fontSubfamily);var E=[],R=at.make(I,E),F=E.length>0?We.make(E):void 0,z=ct.make(),P=Ge.make(e.glyphs,{version:e.getEnglishName("version"),fullName:N,familyName:S,weightName:T,postScriptName:D,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),U=e.metas&&Object.keys(e.metas).length>0?ft.make(e.metas):void 0,_=[w,C,M,x,R,k,z,P,L];F&&_.push(F),e.tables.gsub&&_.push(pt.make(e.tables.gsub)),U&&_.push(U);for(var O=yt(_),B=mt(O.encode()),j=O.fields,G=!1,H=0;H<j.length;H+=1)if("head table"===j[H].name){j[H].value.checkSumAdjustment=2981146554-B,G=!0;break}if(!G)throw new Error("Could not find head table with checkSum to adjust.");return O},computeCheckSum:mt};function Mt(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,o=e[r].tag;if(o===t)return r;o<t?n=r+1:i=r-1}return-n-1}function xt(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,o=e[r];if(o===t)return r;o<t?n=r+1:i=r-1}return-n-1}function Lt(e,t){for(var n,i=0,r=e.length-1;i<=r;){var o=i+r>>>1,a=(n=e[o]).start;if(a===t)return n;a<t?i=o+1:r=o-1}if(i>0)return t>(n=e[i-1]).end?0:n}function kt(e,t){this.font=e,this.tableName=t}function St(e){kt.call(this,e,"gpos")}function Tt(e){kt.call(this,e,"gsub")}function Nt(e,t){var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Dt(e,t,n){for(var i=e.subtables,r=0;r<i.length;r++){var o=i[r];if(o.substFormat===t)return o}if(n)return i.push(n),n}function It(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;++i)n[i]=e[i];return t}function At(e,t){if(!e)throw t}function Et(e,t,n,i,r){var o;return(t&i)>0?(o=e.parseByte(),0==(t&r)&&(o=-o),o=n+o):o=(t&r)>0?n:n+e.parseShort(),o}function Rt(e,t,n){var i,r,o=new le.Parser(t,n);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),e.numberOfContours>0){for(var a=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)a.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(o.parseByte());var c=a[a.length-1]+1;i=[];for(var u=0;u<c;u+=1)if(r=o.parseByte(),i.push(r),(8&r)>0)for(var d=o.parseByte(),h=0;h<d;h+=1)i.push(r),u+=1;if(R.argument(i.length===c,"Bad flags."),a.length>0){var p,f=[];if(c>0){for(var g=0;g<c;g+=1)r=i[g],(p={}).onCurve=!!(1&r),p.lastPointOfContour=a.indexOf(g)>=0,f.push(p);for(var m=0,v=0;v<c;v+=1)r=i[v],(p=f[v]).x=Et(o,r,m,2,16),m=p.x;for(var y=0,b=0;b<c;b+=1)r=i[b],(p=f[b]).y=Et(o,r,y,4,32),y=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var w=!0;w;){i=o.parseUShort();var C={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(C.dx=o.parseShort(),C.dy=o.parseShort()):C.matchedPoints=[o.parseUShort(),o.parseUShort()]:(2&i)>0?(C.dx=o.parseChar(),C.dy=o.parseChar()):C.matchedPoints=[o.parseByte(),o.parseByte()],(8&i)>0?C.xScale=C.yScale=o.parseF2Dot14():(64&i)>0?(C.xScale=o.parseF2Dot14(),C.yScale=o.parseF2Dot14()):(128&i)>0&&(C.xScale=o.parseF2Dot14(),C.scale01=o.parseF2Dot14(),C.scale10=o.parseF2Dot14(),C.yScale=o.parseF2Dot14()),e.components.push(C),w=!!(32&i)}if(256&i){e.instructionLength=o.parseUShort(),e.instructions=[];for(var M=0;M<e.instructionLength;M+=1)e.instructions.push(o.parseByte())}}}function Ft(e,t){for(var n=[],i=0;i<e.length;i+=1){var r=e[i],o={x:t.xScale*r.x+t.scale01*r.y+t.dx,y:t.scale10*r.x+t.yScale*r.y+t.dy,onCurve:r.onCurve,lastPointOfContour:r.lastPointOfContour};n.push(o)}return n}function zt(e){var t=new I;if(!e)return t;for(var n=function(e){for(var t=[],n=[],i=0;i<e.length;i+=1){var r=e[i];n.push(r),r.lastPointOfContour&&(t.push(n),n=[])}return R.argument(0===n.length,"There are still points left in the current contour."),t}(e),i=0;i<n.length;++i){var r=n[i],o=null,a=r[r.length-1],s=r[0];if(a.onCurve)t.moveTo(a.x,a.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(a.x+s.x),y:.5*(a.y+s.y)};t.moveTo(l.x,l.y)}for(var c=0;c<r.length;++c)if(o=a,a=s,s=r[(c+1)%r.length],a.onCurve)t.lineTo(a.x,a.y);else{var u=s;o.onCurve||(a.x,o.x,a.y,o.y),s.onCurve||(u={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,u.x,u.y)}t.closePath()}return t}function Pt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var i=t.components[n],r=e.get(i.glyphIndex);if(r.getPath(),r.points){var o=void 0;if(void 0===i.matchedPoints)o=Ft(r.points,i);else{if(i.matchedPoints[0]>t.points.length-1||i.matchedPoints[1]>r.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[i.matchedPoints[0]],s=r.points[i.matchedPoints[1]],l={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};s=Ft([s],l)[0],l.dx=a.x-s.x,l.dy=a.y-s.y,o=Ft(r.points,l)}t.points=t.points.concat(o)}}return zt(t.points)}kt.prototype={searchTag:Mt,binSearch:xt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var i=e.scripts[n].tag;if("DFLT"===i)return i;"latn"===i&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var i=n.scripts,r=Mt(n.scripts,e);if(r>=0)return i[r].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-r,0,o),o.script}}},getLangSysTable:function(e,t,n){var i=this.getScriptTable(e,n);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var r=Mt(i.langSysRecords,t);if(r>=0)return i.langSysRecords[r].langSys;if(n){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-r,0,o),o.langSys}}},getFeatureTable:function(e,t,n,i){var r=this.getLangSysTable(e,t,i);if(r){for(var o,a=r.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<a.length;l++)if((o=s[a[l]]).tag===n)return o.feature;if(i){var c=s.length;return R.assert(0===c||n>=s[c-1].tag,"Features must be added in alphabetical order."),o={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(o),a.push(c),o.feature}}},getLookupTables:function(e,t,n,i,r){var o=this.getFeatureTable(e,t,n,r),a=[];if(o){for(var s,l=o.lookupListIndexes,c=this.font.tables[this.tableName].lookups,u=0;u<l.length;u++)(s=c[l[u]]).lookupType===i&&a.push(s);if(0===a.length&&r){s={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=c.length;return c.push(s),l.push(d),[s]}}return a},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=Lt(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=xt(e.glyphs,t);return n>=0?n:-1;case 2:var i=Lt(e.ranges,t);return i?i.index+t-i.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,i=0;i<n.length;i++)for(var r=n[i],o=r.start,a=r.end,s=o;s<=a;s++)t.push(s);return t}},St.prototype=kt.prototype,St.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},St.prototype.getKerningValue=function(e,t,n){for(var i=0;i<e.length;i++)for(var r=e[i].subtables,o=0;o<r.length;o++){var a=r[o],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===n)return u.value1&&u.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(a.classDef1,t),h=this.getGlyphClass(a.classDef2,n),p=a.classRecords[d][h];return p.value1&&p.value1.xAdvance||0}}return 0},St.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Tt.prototype=kt.prototype,Tt.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Tt.prototype.getSingle=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,1),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++){var l=a[s],c=this.expandCoverage(l.coverage),u=void 0;if(1===l.substFormat){var d=l.deltaGlyphId;for(u=0;u<c.length;u++){var h=c[u];i.push({sub:h,by:h+d})}}else{var p=l.substitute;for(u=0;u<c.length;u++)i.push({sub:c[u],by:p[u]})}}return i},Tt.prototype.getAlternates=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,3),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.alternateSets,d=0;d<c.length;d++)i.push({sub:c[d],by:u[d]});return i},Tt.prototype.getLigatures=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,4),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.ligatureSets,d=0;d<c.length;d++)for(var h=c[d],p=u[d],f=0;f<p.length;f++){var g=p[f];i.push({sub:[h].concat(g.components),by:g.ligGlyph})}return i},Tt.prototype.addSingle=function(e,t,n,i){var r=Dt(this.getLookupTables(n,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});R.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format);var o=t.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.substitute.splice(a,0,0)),r.substitute[a]=t.by},Tt.prototype.addAlternate=function(e,t,n,i){var r=Dt(this.getLookupTables(n,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});R.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format);var o=t.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.alternateSets.splice(a,0,0)),r.alternateSets[a]=t.by},Tt.prototype.addLigature=function(e,t,n,i){var r=this.getLookupTables(n,i,e,4,!0)[0],o=r.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},r.subtables[0]=o),R.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var a=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},c=this.binSearch(o.coverage.glyphs,a);if(c>=0){for(var u=o.ligatureSets[c],d=0;d<u.length;d++)if(Nt(u[d].components,s))return;u.push(l)}else c=-1-c,o.coverage.glyphs.splice(c,0,a),o.ligatureSets.splice(c,0,[l])},Tt.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},Tt.prototype.add=function(e,t,n,i){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,i);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,i):this.addAlternate(e,t,n,i);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,i)}};var Ut,_t,Ot,Bt,jt={getPath:zt,parse:function(e,t,n,i){for(var r=new xe.GlyphSet(i),o=0;o<n.length-1;o+=1){var a=n[o];a!==n[o+1]?r.push(o,xe.ttfGlyphLoader(i,o,Rt,e,t+a,Pt)):r.push(o,xe.glyphLoader(i,o))}return r}};function Gt(e){this.font=e,this.getCommands=function(e){return jt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ht(e){return e}function Kt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Yt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Wt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Vt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function qt(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Qt=function(e){var t=this.srPeriod,n=this.srPhase,i=1;return e<0&&(e=-e,i=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*i:e*i},Xt={x:1,y:0,axis:"x",distance:function(e,t,n,i){return(n?e.xo:e.x)-(i?t.xo:t.x)},interpolate:function(e,t,n,i){var r,o,a,s,l,c,u;if(!i||i===this)return r=e.xo-t.xo,o=e.xo-n.xo,l=t.x-t.xo,c=n.x-n.xo,0===(u=(a=Math.abs(r))+(s=Math.abs(o)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*a)/u);r=i.distance(e,t,!0,!0),o=i.distance(e,n,!0,!0),l=i.distance(t,t,!1,!0),c=i.distance(n,n,!1,!0),0!==(u=(a=Math.abs(r))+(s=Math.abs(o)))?Xt.setRelative(e,e,(l*s+c*a)/u,i,!0):Xt.setRelative(e,e,(l+c)/2,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,i,r){if(i&&i!==this){var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y;e.x=s+(e.y-l)/i.normalSlope}else e.x=(r?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Jt={x:0,y:1,axis:"y",distance:function(e,t,n,i){return(n?e.yo:e.y)-(i?t.yo:t.y)},interpolate:function(e,t,n,i){var r,o,a,s,l,c,u;if(!i||i===this)return r=e.yo-t.yo,o=e.yo-n.yo,l=t.y-t.yo,c=n.y-n.yo,0===(u=(a=Math.abs(r))+(s=Math.abs(o)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*a)/u);r=i.distance(e,t,!0,!0),o=i.distance(e,n,!0,!0),l=i.distance(t,t,!1,!0),c=i.distance(n,n,!1,!0),0!==(u=(a=Math.abs(r))+(s=Math.abs(o)))?Jt.setRelative(e,e,(l*s+c*a)/u,i,!0):Jt.setRelative(e,e,(l+c)/2,i,!0)},normalSlope:0,setRelative:function(e,t,n,i,r){if(i&&i!==this){var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y;e.y=l+i.normalSlope*(e.x-s)}else e.y=(r?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function $t(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Zt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?Xt:0===e&&1===t?Jt:new $t(e,t)}function en(e,t,n,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Xt),Object.freeze(Jt),$t.prototype.distance=function(e,t,n,i){return this.x*Xt.distance(e,t,n,i)+this.y*Jt.distance(e,t,n,i)},$t.prototype.interpolate=function(e,t,n,i){var r,o,a,s,l,c,u;a=i.distance(e,t,!0,!0),s=i.distance(e,n,!0,!0),r=i.distance(t,t,!1,!0),o=i.distance(n,n,!1,!0),0!==(u=(l=Math.abs(a))+(c=Math.abs(s)))?this.setRelative(e,e,(r*c+o*l)/u,i,!0):this.setRelative(e,e,(r+o)/2,i,!0)},$t.prototype.setRelative=function(e,t,n,i,r){i=i||this;var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y,c=i.normalSlope,u=this.slope,d=e.x,h=e.y;e.x=(u*d-c*s+l-h)/(u-c),e.y=u*(e.x-d)+h},$t.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},en.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},en.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var tn=Object.freeze(new en(0,0)),nn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function rn(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Xt,this.round=Kt}}function on(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new en(0,0)}function an(e,t){var n,i=e.prog,r=e.ip,o=1;do{if(88===(n=i[++r]))o++;else if(89===n)o--;else if(64===n)r+=i[r+1]+1;else if(65===n)r+=2*i[r+1]+1;else if(n>=176&&n<=183)r+=n-176+1;else if(n>=184&&n<=191)r+=2*(n-184+1);else if(t&&1===o&&27===n)break}while(o>0);e.ip=r}function sn(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function ln(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function cn(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function un(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SPVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.pv=n.dpv=Zt(i,r)}function dn(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SFVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.fv=Zt(i,r)}function hn(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function pn(e,n){var i=n.stack.pop(),r=n.z0[i],o=n.fv,a=n.pv;t.DEBUG&&console.log(n.step,"MDAP["+e+"]",i);var s=a.distance(r,tn);e&&(s=n.round(s)),o.setRelative(r,tn,s,a),o.touch(r),n.rp0=n.rp1=i}function fn(e,n){var i,r,o,a=n.z2,s=a.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)i=a[l],e.touched(i)||(r=i.prevTouched(e))!==i&&(r===(o=i.nextTouched(e))&&e.setRelative(i,i,e.distance(r,r,!1,!0),e,!0),e.interpolate(i,r,o,e))}function gn(e,n){for(var i=n.stack,r=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[r],a=n.fv,s=n.pv,l=n.loop,c=n.z2;l--;){var u=i.pop(),d=c[u],h=s.distance(o,o,!1,!0);a.setRelative(d,d,h,s),a.touch(d),t.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}n.loop=1}function mn(e,n){var i=n.stack,r=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[r],a=n.fv,s=n.pv,l=i.pop(),c=n.z2[n.contours[l]],u=c;t.DEBUG&&console.log(n.step,"SHC["+e+"]",l);var d=s.distance(o,o,!1,!0);do{u!==o&&a.setRelative(u,u,d,s),u=u.nextPointOnContour}while(u!==c)}function vn(e,n){var i,r,o=n.stack,a=e?n.rp1:n.rp2,s=(e?n.z0:n.z1)[a],l=n.fv,c=n.pv,u=o.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",u),u){case 0:i=n.tZone;break;case 1:i=n.gZone;break;default:throw new Error("Invalid zone")}for(var d=c.distance(s,s,!1,!0),h=i.length-2,p=0;p<h;p++)r=i[p],l.setRelative(r,r,d,c)}function yn(e,n){var i=n.stack,r=i.pop()/64,o=i.pop(),a=n.z1[o],s=n.z0[n.rp0],l=n.fv,c=n.pv;l.setRelative(a,s,r,c),l.touch(a),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",r,o),n.rp1=n.rp0,n.rp2=o,e&&(n.rp0=o)}function bn(e,n){var i=n.stack,r=i.pop(),o=i.pop(),a=n.z0[o],s=n.fv,l=n.pv,c=n.cvt[r];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",r,"(",c,")",o);var u=l.distance(a,tn);e&&(Math.abs(u-c)<n.cvCutIn&&(u=c),u=n.round(u)),s.setRelative(a,tn,u,l),0===n.zp0&&(a.xo=a.x,a.yo=a.y),s.touch(a),n.rp0=n.rp1=o}function wn(e,n){var i=n.stack,r=i.pop(),o=n.z2[r];t.DEBUG&&console.log(n.step,"GC["+e+"]",r),i.push(64*n.dpv.distance(o,tn,e,!1))}function Cn(e,n){var i=n.stack,r=i.pop(),o=i.pop(),a=n.z1[r],s=n.z0[o],l=n.dpv.distance(s,a,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",r,o,"->",l),n.stack.push(Math.round(64*l))}function Mn(e,n){var i=n.stack,r=i.pop(),o=n.fv,a=n.pv,s=n.ppem,l=n.deltaBase+16*(e-1),c=n.deltaShift,u=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",r,i);for(var d=0;d<r;d++){var h=i.pop(),p=i.pop();if(l+((240&p)>>4)===s){var f=(15&p)-8;f>=0&&f++,t.DEBUG&&console.log(n.step,"DELTAPFIX",h,"by",f*c);var g=u[h];o.setRelative(g,g,f*c,a)}}}function xn(e,n){var i=n.stack,r=i.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),i.push(64*n.round(r/64))}function Ln(e,n){var i=n.stack,r=i.pop(),o=n.ppem,a=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",r,i);for(var l=0;l<r;l++){var c=i.pop(),u=i.pop();if(a+((240&u)>>4)===o){var d=(15&u)-8;d>=0&&d++;var h=d*s;t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",h),n.cvt[c]+=h}}}function kn(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.dpv=Zt(i,r)}function Sn(e,n){var i=n.stack,r=n.prog,o=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)i.push(r[++o]);n.ip=o}function Tn(e,n){var i=n.ip,r=n.prog,o=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=r[++i]<<8|r[++i];32768&s&&(s=-(1+(65535^s))),o.push(s)}n.ip=i}function Nn(e,n,i,r,o,a){var s,l,c,u,d=a.stack,h=e&&d.pop(),p=d.pop(),f=a.rp0,g=a.z0[f],m=a.z1[p],v=a.minDis,y=a.fv,b=a.dpv;c=(l=s=b.distance(m,g,!0,!0))>=0?1:-1,l=Math.abs(l),e&&(u=a.cvt[h],r&&Math.abs(l-u)<a.cvCutIn&&(l=u)),i&&l<v&&(l=v),r&&(l=a.round(l)),y.setRelative(m,g,c*l,b),y.touch(m),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(i?">":"_")+(r?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?h+"("+a.cvt[h]+","+u+")":"",p,"(d =",s,"->",c*l,")"),a.rp1=a.rp0,a.rp2=p,n&&(a.rp0=p)}Gt.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var i=this.font,r=this._prepState;if(!r||r.ppem!==n){var o=this._fpgmState;if(!o){rn.prototype=nn,(o=this._fpgmState=new rn("fpgm",i.tables.fpgm)).funcs=[],o.font=i,t.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{_t(o)}catch(u){return console.log("Hinting error in FPGM:"+u),void(this._errorState=3)}}rn.prototype=o,(r=this._prepState=new rn("prep",i.tables.prep)).ppem=n;var a=i.tables.cvt;if(a)for(var s=r.cvt=new Array(a.length),l=n/i.unitsPerEm,c=0;c<a.length;c++)s[c]=a[c]*l;else r.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{_t(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return Ot(e,r)}catch(u){return this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Ot=function(e,n){var i,r,o,a=n.ppem/n.font.unitsPerEm,s=a,l=e.components;if(rn.prototype=n,l){var c=n.font;r=[],i=[];for(var u=0;u<l.length;u++){var d=l[u],h=c.glyphs.get(d.glyphIndex);o=new rn("glyf",h.instructions),t.DEBUG&&(console.log("---EXEC COMP "+u+"---"),o.step=-1),Bt(h,o,a,s);for(var p=Math.round(d.dx*a),f=Math.round(d.dy*s),g=o.gZone,m=o.contours,v=0;v<g.length;v++){var y=g[v];y.xTouched=y.yTouched=!1,y.xo=y.x=y.x+p,y.yo=y.y=y.y+f}var b=r.length;r.push.apply(r,g);for(var w=0;w<m.length;w++)i.push(m[w]+b)}e.instructions&&!o.inhibitGridFit&&((o=new rn("glyf",e.instructions)).gZone=o.z0=o.z1=o.z2=r,o.contours=i,r.push(new en(0,0),new en(Math.round(e.advanceWidth*a),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),o.step=-1),_t(o),r.length-=2)}else o=new rn("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),o.step=-1),Bt(e,o,a,s),r=o.gZone;return r},Bt=function(e,n,i,r){for(var o,a,s,l=e.points||[],c=l.length,u=n.gZone=n.z0=n.z1=n.z2=[],d=n.contours=[],h=0;h<c;h++)o=l[h],u[h]=new en(o.x*i,o.y*r,o.lastPointOfContour,o.onCurve);for(var p=0;p<c;p++)o=u[p],a||(a=o,d.push(p)),o.lastPointOfContour?(o.nextPointOnContour=a,a.prevPointOnContour=o,a=void 0):(s=u[p+1],o.nextPointOnContour=s,s.prevPointOnContour=o);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var f=0;f<c;f++)console.log(f,u[f].x,u[f].y)}if(u.push(new en(0,0),new en(Math.round(e.advanceWidth*i),0)),_t(n),u.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var g=0;g<c;g++)console.log(g,u[g].x,u[g].y)}}},_t=function(e){var n=e.prog;if(n){var i,r=n.length;for(e.ip=0;e.ip<r;e.ip++){if(t.DEBUG&&e.step++,!(i=Ut[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));i(e)}}},Ut=[sn.bind(void 0,Jt),sn.bind(void 0,Xt),ln.bind(void 0,Jt),ln.bind(void 0,Xt),cn.bind(void 0,Jt),cn.bind(void 0,Xt),un.bind(void 0,0),un.bind(void 0,1),dn.bind(void 0,0),dn.bind(void 0,1),function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.pv=e.dpv=Zt(r,i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.fv=Zt(r,i)},function(e){var n=e.stack,i=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*i.x),n.push(16384*i.y)},function(e){var n=e.stack,i=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*i.x),n.push(16384*i.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=e.stack,i=n.pop(),r=n.pop(),o=n.pop(),a=n.pop(),s=n.pop(),l=e.z0,c=e.z1,u=l[i],d=l[r],h=c[o],p=c[a],f=e.z2[s];t.DEBUG&&console.log("ISECT[], ",i,r,o,a,s);var g=u.x,m=u.y,v=d.x,y=d.y,b=h.x,w=h.y,C=p.x,M=p.y,x=(g-v)*(w-M)-(m-y)*(b-C),L=g*y-m*v,k=b*M-w*C;f.x=(L*(b-C)-k*(g-v))/x,f.y=(L*(w-M)-k*(m-y))/x},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n,n){case 0:e.tZone||on(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n,n){case 0:e.tZone||on(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n,n){case 0:e.tZone||on(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n,n){case 0:e.tZone||on(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Kt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Wt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),an(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},hn,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(i),n.push(r)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",i),n.push(n[n.length-i])},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",i),n.push(n.splice(n.length-i,1)[0])},void 0,void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",i,r);var o=e.ip,a=e.prog;e.prog=e.funcs[i];for(var s=0;s<r;s++)_t(e),t.DEBUG&&console.log(++e.step,s+1<r?"next loopcall":"done loopcall",s);e.ip=o,e.prog=a},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",n);var i=e.ip,r=e.prog;e.prog=e.funcs[n],_t(e),e.ip=i,e.prog=r,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,i=e.prog,r=e.ip,o=n.pop(),a=r;for(t.DEBUG&&console.log(e.step,"FDEF[]",o);45!==i[++r];);e.ip=r,e.funcs[o]=i.slice(a+1,r)},void 0,pn.bind(void 0,0),pn.bind(void 0,1),fn.bind(void 0,Jt),fn.bind(void 0,Xt),gn.bind(void 0,0),gn.bind(void 0,1),mn.bind(void 0,0),mn.bind(void 0,1),vn.bind(void 0,0),vn.bind(void 0,1),function(e){for(var n=e.stack,i=e.loop,r=e.fv,o=n.pop()/64,a=e.z2;i--;){var s=n.pop(),l=a[s];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"SHPIX[]",s,o),r.setRelative(l,l,o),r.touch(l)}e.loop=1},function(e){for(var n=e.stack,i=e.rp1,r=e.rp2,o=e.loop,a=e.z0[i],s=e.z1[r],l=e.fv,c=e.dpv,u=e.z2;o--;){var d=n.pop(),h=u[d];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"IP[]",d,i,"<->",r),l.interpolate(h,a,s,c),l.touch(h)}e.loop=1},yn.bind(void 0,0),yn.bind(void 0,1),function(e){for(var n=e.stack,i=e.rp0,r=e.z0[i],o=e.loop,a=e.fv,s=e.pv,l=e.z1;o--;){var c=n.pop(),u=l[c];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),a.setRelative(u,r,0,s),a.touch(u)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Yt},bn.bind(void 0,0),bn.bind(void 0,1),function(e){var n=e.prog,i=e.ip,r=e.stack,o=n[++i];t.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var a=0;a<o;a++)r.push(n[++i]);e.ip=i},function(e){var n=e.ip,i=e.prog,r=e.stack,o=i[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var a=0;a<o;a++){var s=i[++n]<<8|i[++n];32768&s&&(s=-(1+(65535^s))),r.push(s)}e.ip=n},function(e){var n=e.stack,i=e.store;i||(i=e.store=[]);var r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"WS",r,o),i[o]=r},function(e){var n=e.stack,i=e.store,r=n.pop();t.DEBUG&&console.log(e.step,"RS",r);var o=i&&i[r]||0;n.push(o)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"WCVTP",i,r),e.cvt[r]=i/64},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"RCVT",i),n.push(64*e.cvt[i])},wn.bind(void 0,0),wn.bind(void 0,1),void 0,Cn.bind(void 0,0),Cn.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LT[]",i,r),n.push(r<i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",i,r),n.push(r<=i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"GT[]",i,r),n.push(r>i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",i,r),n.push(r>=i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",i,r),n.push(i===r?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",i,r),n.push(i!==r?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",i),n.push(Math.trunc(i)%2?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",i),n.push(Math.trunc(i)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(an(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"AND[]",i,r),n.push(i&&r?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"OR[]",i,r),n.push(i||r?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",i),n.push(i?0:1)},Mn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",i,r),n.push(r+i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",i,r),n.push(r-i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",i,r),n.push(64*r/i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",i,r),n.push(r*i/64)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",i),n.push(Math.abs(i))},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",i),n.push(-i)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",i),n.push(64*Math.floor(i/64))},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",i),n.push(64*Math.ceil(i/64))},xn.bind(void 0,0),xn.bind(void 0,1),xn.bind(void 0,2),xn.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",i,r),e.cvt[r]=i*e.ppem/e.font.unitsPerEm},Mn.bind(void 0,2),Mn.bind(void 0,3),Ln.bind(void 0,1),Ln.bind(void 0,2),Ln.bind(void 0,3),function(e){var n,i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",i),e.round=Qt,192&i){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*n},function(e){var n,i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",i),e.round=Qt,192&i){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ht},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Vt},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=qt},hn,hn,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},kn.bind(void 0,0),kn.bind(void 0,1),function(e){var n=e.stack,i=n.pop(),r=0;t.DEBUG&&console.log(e.step,"GETINFO[]",i),1&i&&(r=35),32&i&&(r|=4096),n.push(r)},void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(r),n.push(i),n.push(o)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",i,r),n.push(Math.max(r,i))},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",i,r),n.push(Math.min(r,i))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,i),n){case 1:return void(e.inhibitGridFit=!!i);case 2:return void(e.ignoreCvt=!!i);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Sn.bind(void 0,1),Sn.bind(void 0,2),Sn.bind(void 0,3),Sn.bind(void 0,4),Sn.bind(void 0,5),Sn.bind(void 0,6),Sn.bind(void 0,7),Sn.bind(void 0,8),Tn.bind(void 0,1),Tn.bind(void 0,2),Tn.bind(void 0,3),Tn.bind(void 0,4),Tn.bind(void 0,5),Tn.bind(void 0,6),Tn.bind(void 0,7),Tn.bind(void 0,8),Nn.bind(void 0,0,0,0,0,0),Nn.bind(void 0,0,0,0,0,1),Nn.bind(void 0,0,0,0,0,2),Nn.bind(void 0,0,0,0,0,3),Nn.bind(void 0,0,0,0,1,0),Nn.bind(void 0,0,0,0,1,1),Nn.bind(void 0,0,0,0,1,2),Nn.bind(void 0,0,0,0,1,3),Nn.bind(void 0,0,0,1,0,0),Nn.bind(void 0,0,0,1,0,1),Nn.bind(void 0,0,0,1,0,2),Nn.bind(void 0,0,0,1,0,3),Nn.bind(void 0,0,0,1,1,0),Nn.bind(void 0,0,0,1,1,1),Nn.bind(void 0,0,0,1,1,2),Nn.bind(void 0,0,0,1,1,3),Nn.bind(void 0,0,1,0,0,0),Nn.bind(void 0,0,1,0,0,1),Nn.bind(void 0,0,1,0,0,2),Nn.bind(void 0,0,1,0,0,3),Nn.bind(void 0,0,1,0,1,0),Nn.bind(void 0,0,1,0,1,1),Nn.bind(void 0,0,1,0,1,2),Nn.bind(void 0,0,1,0,1,3),Nn.bind(void 0,0,1,1,0,0),Nn.bind(void 0,0,1,1,0,1),Nn.bind(void 0,0,1,1,0,2),Nn.bind(void 0,0,1,1,0,3),Nn.bind(void 0,0,1,1,1,0),Nn.bind(void 0,0,1,1,1,1),Nn.bind(void 0,0,1,1,1,2),Nn.bind(void 0,0,1,1,1,3),Nn.bind(void 0,1,0,0,0,0),Nn.bind(void 0,1,0,0,0,1),Nn.bind(void 0,1,0,0,0,2),Nn.bind(void 0,1,0,0,0,3),Nn.bind(void 0,1,0,0,1,0),Nn.bind(void 0,1,0,0,1,1),Nn.bind(void 0,1,0,0,1,2),Nn.bind(void 0,1,0,0,1,3),Nn.bind(void 0,1,0,1,0,0),Nn.bind(void 0,1,0,1,0,1),Nn.bind(void 0,1,0,1,0,2),Nn.bind(void 0,1,0,1,0,3),Nn.bind(void 0,1,0,1,1,0),Nn.bind(void 0,1,0,1,1,1),Nn.bind(void 0,1,0,1,1,2),Nn.bind(void 0,1,0,1,1,3),Nn.bind(void 0,1,1,0,0,0),Nn.bind(void 0,1,1,0,0,1),Nn.bind(void 0,1,1,0,0,2),Nn.bind(void 0,1,1,0,0,3),Nn.bind(void 0,1,1,0,1,0),Nn.bind(void 0,1,1,0,1,1),Nn.bind(void 0,1,1,0,1,2),Nn.bind(void 0,1,1,0,1,3),Nn.bind(void 0,1,1,1,0,0),Nn.bind(void 0,1,1,1,0,1),Nn.bind(void 0,1,1,1,0,2),Nn.bind(void 0,1,1,1,0,3),Nn.bind(void 0,1,1,1,1,0),Nn.bind(void 0,1,1,1,1,1),Nn.bind(void 0,1,1,1,1,2),Nn.bind(void 0,1,1,1,1,3)];var Dn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function In(e){(e=e||{}).empty||(At(e.familyName,"When creating a new Font object, familyName is required."),At(e.styleName,"When creating a new Font object, styleName is required."),At(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),At(e.ascender,"When creating a new Font object, ascender is required."),At(e.descender,"When creating a new Font object, descender is required."),At(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new xe.GlyphSet(this,e.glyphs||[]),this.encoding=new ge(this),this.position=new St(this),this.substitution=new Tt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Gt(this):void 0}})}function An(e,t){var n=JSON.stringify(e),i=256;for(var r in t){var o=parseInt(r);if(o&&!(o<256)){if(JSON.stringify(t[r])===n)return o;i<=o&&(i=o+1)}}return t[i]=e,i}function En(e,t,n){var i=An(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function Rn(e,t,n){var i={},r=new le.Parser(e,t);return i.tag=r.parseTag(),i.minValue=r.parseFixed(),i.defaultValue=r.parseFixed(),i.maxValue=r.parseFixed(),r.skip("uShort",1),i.name=n[r.parseUShort()]||{},i}function Fn(e,t,n,i){for(var r=[{name:"nameID_"+e,type:"USHORT",value:An(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<n.length;++o){var a=n[o].tag;r.push({name:"axis_"+e+" "+a,type:"FIXED",value:t.coordinates[a]<<16})}return r}function zn(e,t,n,i){var r={},o=new le.Parser(e,t);r.name=i[o.parseUShort()]||{},o.skip("uShort",1),r.coordinates={};for(var a=0;a<n.length;++a)r.coordinates[n[a].tag]=o.parseFixed();return r}In.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},In.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},In.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},In.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=Dn(e),i=[],r=0;r<n.length;r+=1){var o=n[r];i.push(this.charToGlyphIndex(o))}var a=i.length;if(t.features){var s=t.script||this.substitution.getDefaultScriptName(),l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(var c=0;c<a;c+=1)for(var u=0;u<l.length;u++){for(var d=l[u],h=d.sub,p=h.length,f=0;f<p&&h[f]===i[c+f];)f++;f===p&&(i.splice(c,p,d.by),a=a-p+1)}}for(var g=new Array(a),m=this.glyphs.get(0),v=0;v<a;v+=1)g[v]=this.glyphs.get(i[v])||m;return g},In.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},In.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},In.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},In.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},In.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},In.prototype.forEachGlyph=function(e,t,n,i,r,o){t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:72,r=r||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*i,l=this.stringToGlyphs(e,r);if(r.kerning){var c=r.script||this.position.getDefaultScriptName();a=this.position.getKerningTables(c,r.language)}for(var u=0;u<l.length;u+=1){var d=l[u];o.call(this,d,t,n,i,r),d.advanceWidth&&(t+=d.advanceWidth*s),r.kerning&&u<l.length-1&&(t+=(a?this.position.getKerningValue(a,d.index,l[u+1].index):this.getKerningValue(d,l[u+1]))*s),r.letterSpacing?t+=r.letterSpacing*i:r.tracking&&(t+=r.tracking/1e3*i)}return t},In.prototype.getPath=function(e,t,n,i,r){var o=new I;return this.forEachGlyph(e,t,n,i,r,(function(e,t,n,i){var a=e.getPath(t,n,i,r,this);o.extend(a)})),o},In.prototype.getPaths=function(e,t,n,i,r){var o=[];return this.forEachGlyph(e,t,n,i,r,(function(e,t,n,i){var a=e.getPath(t,n,i,r,this);o.push(a)})),o},In.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},In.prototype.draw=function(e,t,n,i,r,o){this.getPath(t,n,i,r,o).draw(e)},In.prototype.drawPoints=function(e,t,n,i,r,o){this.forEachGlyph(t,n,i,r,o,(function(t,n,i,r){t.drawPoints(e,n,i,r)}))},In.prototype.drawMetrics=function(e,t,n,i,r,o){this.forEachGlyph(t,n,i,r,o,(function(t,n,i,r){t.drawMetrics(e,n,i,r)}))},In.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},In.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},In.prototype.toTables=function(){return Ct.fontToTable(this)},In.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},In.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;i++)n[i]=e[i];return t},In.prototype.download=function(t){var i=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");t=t||i.replace(/\s/g,"")+"-"+r+".otf";var o=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(o),i=new Blob([n],{type:"font/opentype"});t.write(i),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var a=n(793),s=function(t){for(var n=new e(t.byteLength),i=new Uint8Array(t),r=0;r<n.length;++r)n[r]=i[r];return n}(o);a.writeFileSync(t,s)}},In.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},In.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},In.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Pn={make:function(e,t){var n=new ee.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var i=0;i<e.axes.length;i++)n.fields=n.fields.concat(En(i,e.axes[i],t));for(var r=0;r<e.instances.length;r++)n.fields=n.fields.concat(Fn(r,e.instances[r],e.axes,t));return n},parse:function(e,t,n){var i=new le.Parser(e,t),r=i.parseULong();R.argument(65536===r,"Unsupported fvar table version.");var o=i.parseOffset16();i.skip("uShort",1);for(var a=i.parseUShort(),s=i.parseUShort(),l=i.parseUShort(),c=i.parseUShort(),u=[],d=0;d<a;d++)u.push(Rn(e,t+o+d*s,n));for(var h=[],p=t+o+a*s,f=0;f<l;f++)h.push(zn(e,p+f*c,u,n));return{axes:u,instances:h}}},Un=new Array(10);Un[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ae.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ae.coverage),values:this.parseValueRecordList()}:void R.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Un[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();R.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ae.coverage),i=this.parseUShort(),r=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:i,valueFormat2:r,pairSets:this.parseList(ae.pointer(ae.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(r)}}))))};if(2===t){var o=this.parsePointer(ae.classDef),a=this.parsePointer(ae.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:i,valueFormat2:r,classDef1:o,classDef2:a,class1Count:s,class2Count:l,classRecords:this.parseList(s,ae.list(l,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(r)}})))}}},Un[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Un[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Un[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Un[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Un[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Un[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Un[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var _n=new Array(10),On={parse:function(e,t){var n=new ae(e,t=t||0),i=n.parseVersion(1);return R.argument(1===i||1.1===i,"Unsupported GPOS table version "+i),1===i?{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Un)}:{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Un),variations:n.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,_n)}])}},Bn={parse:function(e,t){var n=new le.Parser(e,t),i=n.parseUShort();if(0===i)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();R.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var r=0;r<i;r+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}return t}(n);if(1===i)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0===n){var i=e.parseUShort();e.skip("uShort",3);for(var r=0;r<i;r+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}}return t}(n);throw new Error("Unsupported kern table version ("+i+").")}},jn={parse:function(e,t,n,i){for(var r=new le.Parser(e,t),o=i?r.parseUShort:r.parseULong,a=[],s=0;s<n+1;s+=1){var l=o.call(r);i&&(l*=2),a.push(l)}return a}};function Gn(e,t){n(793).readFile(e,(function(e,n){if(e)return t(e.message);t(null,It(n))}))}function Hn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function Kn(e,t){for(var n=[],i=12,r=0;r<t;r+=1){var o=le.getTag(e,i),a=le.getULong(e,i+4),s=le.getULong(e,i+8),l=le.getULong(e,i+12);n.push({tag:o,checksum:a,offset:s,length:l,compression:!1}),i+=16}return n}function Yn(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if(T(n,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function Wn(e){var t,n,i,r,o,a,s,l,c,u,d,h,p,f,g=new In({empty:!0}),m=new DataView(e,0),v=[],y=le.getTag(m,0);if(y===String.fromCharCode(0,1,0,0)||"true"===y||"typ1"===y)g.outlinesFormat="truetype",v=Kn(m,i=le.getUShort(m,4));else if("OTTO"===y)g.outlinesFormat="cff",v=Kn(m,i=le.getUShort(m,4));else{if("wOFF"!==y)throw new Error("Unsupported OpenType signature "+y);var b=le.getTag(m,4);if(b===String.fromCharCode(0,1,0,0))g.outlinesFormat="truetype";else{if("OTTO"!==b)throw new Error("Unsupported OpenType flavor "+y);g.outlinesFormat="cff"}v=function(e,t){for(var n=[],i=44,r=0;r<t;r+=1){var o=le.getTag(e,i),a=le.getULong(e,i+4),s=le.getULong(e,i+8),l=le.getULong(e,i+12),c=void 0;c=s<l&&"WOFF",n.push({tag:o,offset:a,compression:c,compressedLength:s,length:l}),i+=20}return n}(m,i=le.getUShort(m,12))}for(var w=0;w<i;w+=1){var C=v[w],M=void 0;switch(C.tag){case"cmap":M=Yn(m,C),g.tables.cmap=ue.parse(M.data,M.offset),g.encoding=new me(g.tables.cmap);break;case"cvt ":M=Yn(m,C),f=new le.Parser(M.data,M.offset),g.tables.cvt=f.parseShortList(C.length/2);break;case"fvar":o=C;break;case"fpgm":M=Yn(m,C),f=new le.Parser(M.data,M.offset),g.tables.fpgm=f.parseByteList(C.length);break;case"head":M=Yn(m,C),g.tables.head=He.parse(M.data,M.offset),g.unitsPerEm=g.tables.head.unitsPerEm,t=g.tables.head.indexToLocFormat;break;case"hhea":M=Yn(m,C),g.tables.hhea=Ke.parse(M.data,M.offset),g.ascender=g.tables.hhea.ascender,g.descender=g.tables.hhea.descender,g.numberOfHMetrics=g.tables.hhea.numberOfHMetrics;break;case"hmtx":c=C;break;case"ltag":M=Yn(m,C),n=We.parse(M.data,M.offset);break;case"maxp":M=Yn(m,C),g.tables.maxp=Ve.parse(M.data,M.offset),g.numGlyphs=g.tables.maxp.numGlyphs;break;case"name":h=C;break;case"OS/2":M=Yn(m,C),g.tables.os2=lt.parse(M.data,M.offset);break;case"post":M=Yn(m,C),g.tables.post=ct.parse(M.data,M.offset),g.glyphNames=new ye(g.tables.post);break;case"prep":M=Yn(m,C),f=new le.Parser(M.data,M.offset),g.tables.prep=f.parseByteList(C.length);break;case"glyf":a=C;break;case"loca":d=C;break;case"CFF ":r=C;break;case"kern":u=C;break;case"GPOS":s=C;break;case"GSUB":l=C;break;case"meta":p=C}}var x=Yn(m,h);if(g.tables.name=at.parse(x.data,x.offset,n),g.names=g.tables.name,a&&d){var L=0===t,k=Yn(m,d),S=jn.parse(k.data,k.offset,g.numGlyphs,L),T=Yn(m,a);g.glyphs=jt.parse(T.data,T.offset,S,g)}else{if(!r)throw new Error("Font doesn't contain TrueType or CFF outlines.");var N=Yn(m,r);Ge.parse(N.data,N.offset,g)}var D=Yn(m,c);if(Ye.parse(D.data,D.offset,g.numberOfHMetrics,g.numGlyphs,g.glyphs),function(e){for(var t,n=e.tables.cmap.glyphIndexMap,i=Object.keys(n),r=0;r<i.length;r+=1){var o=i[r],a=n[o];(t=e.glyphs.get(a)).addUnicode(parseInt(o))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(g),u){var I=Yn(m,u);g.kerningPairs=Bn.parse(I.data,I.offset)}else g.kerningPairs={};if(s){var A=Yn(m,s);g.tables.gpos=On.parse(A.data,A.offset),g.position.init()}if(l){var E=Yn(m,l);g.tables.gsub=pt.parse(E.data,E.offset)}if(o){var R=Yn(m,o);g.tables.fvar=Pn.parse(R.data,R.offset,g.names)}if(p){var F=Yn(m,p);g.tables.meta=ft.parse(F.data,F.offset),g.metas=g.tables.meta}return g}t.Font=In,t.Glyph=we,t.Path=I,t.BoundingBox=D,t._parse=le,t.parse=Wn,t.load=function(e,t){("undefined"==typeof window?Gn:Hn)(e,(function(e,n){if(e)return t(e);var i;try{i=Wn(n)}catch(r){return t(r,null)}return t(null,i)}))},t.loadSync=function(e){return Wn(It(n(793).readFileSync(e)))},Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(9).Buffer)},904:function(e,t,n){var i,r,o;r=[n(7)],void 0===(o="function"==typeof(i=function(e){var t="‘’“\"”`.:,;'",n={postScriptName:"",family:"",weight:"",category:"",label:"",filename:"",uppercaseChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZÅÀÁÃÄÂßÆŒÇÐØÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝÑ1234567890‘’“\"”`'",lowercaseChars:"abcdefghijklmnopqrstuvwxyz @<>-+=.:,~;àáâäæãåçèéêëÿûüùúîïíìôöòóœøõñð!#$%^&*(){}[]?/_",capTest:"X",meanTest:"x",ascentTest:"b d l",descentTest:"p g",ascentDescentTest:"Q g b d q",tailTest:"Q",meanAccentTest:"àá",capAccentTest:"ÀÁ",spaceWidthRatio:0,xWidthRatio:0,capAccentRatio:0,capRatio:0,meanAccentRatio:0,meanRatio:0,meanWidthRatio:0,ascentRatio:0,baselineOffsetRatio:0,iosBaselineOffsetModifier:0,tailRatio:0,descentRatio:0,italicAngle:0,capAccentChars:"",capChars:"",ascentChars:"",meanAccentChars:"",meanChars:" ",baseChars:"",tailChars:"",descentChars:"",displaySample:"Ag",popularity:5,formality:5,blackness:5,drama:5,width:5,allCapsAllowed:!0,displayAllowed:!0,bodyAllowed:!1,smallCaps:!1,serif:!1,slab:!1,handdrawn:!1,calligraphic:!1,decorative:!1,modern:!1,square:!1,geometric:!1,italic:!1,style:"",deprecated:!1,isPublic:!0};function i(e,t,n,i){return e.slice(0,t)+(i||"")+e.slice(t+n)}function r(e){for(var t=e.getContext("2d"),n=t.measureText(" ").width,i=t.measureText("x").width,r=e.width,o=e.height,a=t.getImageData(0,0,r,o).data,s=!1,l=!1,c=o,u=0;!l&&c;)for(c--,u=0;u<r;u++)if(a[c*r*4+4*u+3]){l=c;break}for(;c;)for(c--,u=0;u<r;u++)if(a[c*r*4+4*u+3]){s=c;break}return{top:s,bottom:l,spaceWidth:n,xWidth:i}}function o(e,t,n,i){var r=Q.defer();if(e||((e=document.createElement("canvas")).width=t,e.height=n),document.fonts&&"function"==typeof document.fonts.load)try{document.fonts.load(i).then((function(){_.delay((function(){r.resolve(e)}),10)})).catch((function(e){console.error("document.fonts failed to load font with",e),r.reject(e)}))}catch(o){console.warn("Failed to load font with ",o),_.delay((function(){r.resolve(e)}),10)}else _.delay((function(){r.resolve(e)}),10);return r.promise}var a={};return{fontCanvas:o,generateMetrics:function(e,o,a,s){s=s||{};var l,c,u,d,h,p,f,g,m=n.uppercaseChars+n.lowercaseChars,v=_.extend({},n,s),y=100,b=250,w=200,C=400,M=800,x=0,L=0,k=0,S=0,T=0,N=0,D=0,I={},A=I.lowercaseChars||"",E=I.uppercaseChars||"",R=e(M,C),F=R.getContext("2d");function z(e,t){F.clearRect(0,0,M,C);var n=R.getContext("2d");n.fillStyle="#000000",n.textAlign="left";var i=b;return t?(n.textBaseline=t,"middle"===t&&(i=C/2)):n.textBaseline="alphabetic",n.font=(s.style||"normal")+" "+(s.weight||400)+" "+w+'px "'+a+'",serif',n.fillText(e,y,i),r(R)}for(g in A){var P=A[g],U=v.uppercaseChars.indexOf(P);U>=0&&(v.uppercaseChars=i(v.uppercaseChars,U,1),v.lowercaseChars+=P)}for(g in E){var O=E[g],B=v.lowercaseChars.indexOf(O);B>=0&&(v.lowercaseChars=i(v.lowercaseChars,B,1),v.uppercaseChars+=O)}I.uppercaseChars=v.uppercaseChars,I.lowercaseChars=v.lowercaseChars;var j=z((v=_.merge(v,I)).capTest),G=z(v.meanTest),H=z(v.ascentTest),K=z(v.descentTest),Y=z(v.ascentDescentTest,"middle"),W=z(v.tailTest),V=z(v.meanAccentTest),q=z(v.capAccentTest);if(j.bottom-j.top==0&&(j.bottom=w),G.bottom-G.top==0&&(G=j),H.bottom-H.top==0&&(H=j),V.bottom-V.top==0&&(V=j),q.bottom-q.top==0&&(q=j),K.bottom-K.top==0&&(K=j),l=C/2-Y.top,c=Y.bottom-C/2,u=(Y.bottom-Y.top)/w,h=Math.round(j.spaceWidth/w*1e3)/1e3,p=Math.round(G.xWidth/w*1e3)/1e3,x=(G.bottom-H.top)/w,L=(G.bottom-V.top)/w,k=(G.bottom-q.top)/w,N=(K.bottom-G.bottom)/w,D=(W.bottom-G.bottom)/w,S=(G.bottom-j.top)/w,T=(G.bottom-G.top)/w,d=G.spaceWidth/w,f=(b-G.bottom)/w,_.isNumber(I.baselineOffsetRatio)){var Q=I.baselineOffsetRatio*w,X=b-Q;x=(X-H.top)/w,L=(X-V.top)/w,k=(X-q.top)/w,N=(K.bottom-X)/w,D=(W.bottom-X)/w,S=(X-j.top)/w,T=(X-G.top)/w}var J=_.isNumber(I.aboveDivider)?I.aboveDivider:l,$=_.isNumber(I.belowDivider)?I.belowDivider:c,Z=_.isNumber(I.ascentDescentRatio)?I.ascentDescentRatio:u,ee=_.isNumber(I.meanWidthRatio)?I.meanWidthRatio:d,te=_.isNumber(I.spaceWidthRatio)?I.spaceWidthRatio:h,ne=_.isNumber(I.xWidthRatio)?I.xWidthRatio:p,ie=_.isNumber(I.ascentRatio)?I.ascentRatio:x,re=_.isNumber(I.meanAccentRatio)?I.meanAccentRatio:L,oe=_.isNumber(I.capAccentRatio)?I.capAccentRatio:k,ae=_.isNumber(I.descentRatio)?I.descentRatio:N,se=_.isNumber(I.tailRatio)?I.tailRatio:D,le=_.isNumber(I.capRatio)?I.capRatio:S,ce=_.isNumber(I.meanRatio)?I.meanRatio:T,ue=_.isNumber(I.baselineOffsetRatio)?I.baselineOffsetRatio:f,de=b-ue*w,he=de-ie*w,pe=de-re*w,fe=de-oe*w,ge=de+ae*w,me=de+se*w,ve=de-le*w,ye=de-ce*w;for(g in v.aboveDivider=J,v.belowDivider=$,v.ascentDescentRatio=Z,v.meanWidthRatio=ee,v.spaceWidthRatio=te,v.xWidthRatio=ne,v.ascentRatio=ie,v.meanAccentRatio=re,v.capAccentRatio=oe,v.descentRatio=ae,v.tailRatio=se,v.capRatio=le,v.capRatio=le,v.meanRatio=ce,v.baselineOffsetRatio=ue,Math.abs(me-de),m){var be=m[g],we=v.uppercaseChars.indexOf(be)>=0,Ce=z(be),Me=Math.abs(Ce.top-ve),xe=Math.abs(Ce.top-fe),Le=Math.abs(Ce.top-pe),ke=Math.abs(Ce.top-ye),Se=Math.abs(Ce.top-he),Te=Math.abs(Math.max(0,Ce.bottom-de)),Ne=Math.abs(Ce.bottom-me),De=Math.abs(Ce.bottom-ge),Ie=we?"capChars":"meanChars",Ae="baseChars";if(!(t.indexOf(be)>=0)){var Ee=ke,Re=Te;Le<1.2*Ee&&(Ee=Le,Ie="meanAccentChars"),Me<1.2*Ee&&(Ee=Me,Ie="capChars"),Se<1.2*Ee&&(Ee=Se,Ie="ascentChars"),xe<1.2*Ee&&(Ee=xe,Ie="capAccentChars"),Ne<1.2*Re&&(Re=Ne,Ae="tailChars"),De<1.2*Re&&(Re=De,Ae="descentChars"),I.meanChars&&I.meanChars.indexOf(be)>=0&&(Ie="meanChars"),I.baseChars&&I.baseChars.indexOf(be)>=0&&(Ae="baseChars"),I.capChars&&I.capChars.indexOf(be)>=0&&(Ie="capChars"),I.meanAccentChars&&I.meanAccentChars.indexOf(be)>=0&&(Ie="meanAccentChars"),I.ascentChars&&I.ascentChars.indexOf(be)>=0&&(Ie="ascentChars"),I.capAccentChars&&I.capAccentChars.indexOf(be)>=0&&(Ie="capAccentChars"),I.tailChars&&I.tailChars.indexOf(be)>=0&&(Ae="tailChars"),I.descentChars&&I.descentChars.indexOf(be)>=0&&(Ae="descentChars")}v[Ie]+=be,v[Ae]+=be}return v.label=_.trim(o),v.postScriptName=_.trim(s.postScriptName||o),v.family=_.trim(o),delete v.capTest,delete v.meanTest,delete v.ascentTest,delete v.descentTest,delete v.tailTest,delete v.meanAccentTest,delete v.capAccentTest,v},generateMetricsAsync:function(e,s,l,c){var u=s+l.style+l.weight+c;if(a[u])return a[u];var d=Q.defer();a[u]=d.promise,l=l||{};var h,p,f,g=n.uppercaseChars+n.lowercaseChars,m=_.extend({},n,l),v=100,y=250,b=400,w=800,C=0,M=0,x=0,L=0,k=0,S=0,T=0,N=0,D=0,I=0,A=0,E=0,R=0,F=0,z={},P=z.lowercaseChars||"",U=z.uppercaseChars||"",O=(l.style||"normal")+" "+(l.weight||400)+' 200px "'+s+'",serif',B=o(null,w,b,O).then((function(e){return f=(p=e).getContext("2d")}));function j(e,t){f.clearRect(0,0,w,b);var n=p.getContext("2d");n.fillStyle="#000000",n.textAlign="left";var i=y;return t?(n.textBaseline=t,"middle"===t&&(i=b/2)):n.textBaseline="alphabetic",n.font=O,n.fillText(e,v,i),r(p)}function G(e){var t=[],n=[],i=Q.resolve();return _.each(e,(function(e,r){var o=Q.defer();n[r]=o,t[r]=o.promise,i=i.then((function(){return t=o,n=e[0],i=e[1],_.delay((function(){var e=j(n,i);t.resolve(e)}),10),t.promise;var t,n,i}))})),t}for(h in P){var H=P[h],K=m.uppercaseChars.indexOf(H);K>=0&&(m.uppercaseChars=i(m.uppercaseChars,K,1),m.lowercaseChars+=H)}for(h in U){var Y=U[h],W=m.lowercaseChars.indexOf(Y);W>=0&&(m.lowercaseChars=i(m.lowercaseChars,W,1),m.uppercaseChars+=Y)}return z.uppercaseChars=m.uppercaseChars,z.lowercaseChars=m.lowercaseChars,m=_.merge(m,z),c?(B.then((function(){Q.spread(G([[e],[m.capTest],[m.meanTest],[m.ascentDescentTest,"middle"]]),(function(t,n,i,r){n.bottom-n.top==0&&(n.bottom=200),i.bottom-i.top==0&&(i=n),m.nameHeight=t.bottom-t.top,m.ascentDescentRatio=(r.bottom-r.top)/200,m.capRatio=(i.bottom-n.top)/200,m.label=e,m.postScriptName=l.postScriptName||e,m.family=e,delete m.capTest,delete m.meanTest,delete m.ascentTest,delete m.descentTest,delete m.tailTest,delete m.meanAccentTest,delete m.capAccentTest,window._uncanvasFactory&&(window._uncanvasFactory.remove(),window._uncanvasFactory=null),d.resolve(m)})).catch((function(e){console.warn("Metrics simple calc failed",e),d.resolve(null)})).done()})),d.promise):(B.then((function(){Q.spread(G([[e],[m.capTest],[m.meanTest],[m.ascentTest],[m.descentTest],[m.ascentDescentTest,"middle"],[m.tailTest],[m.meanAccentTest],[m.capAccentTest]]),(function(n,i,r,o,a,s,c,u,p){if(i.bottom-i.top==0&&(i.bottom=200),r.bottom-r.top==0&&(r=i),o.bottom-o.top==0&&(o=i),u.bottom-u.top==0&&(u=i),p.bottom-p.top==0&&(p=i),a.bottom-a.top==0&&(a=i),m.nameHeight=n.bottom-n.top,C=b/2-s.top,M=s.bottom-b/2,x=(s.bottom-s.top)/200,k=Math.round(i.spaceWidth/200*1e3)/1e3,S=Math.round(r.xWidth/200*1e3)/1e3,T=(r.bottom-o.top)/200,N=(r.bottom-u.top)/200,D=(r.bottom-p.top)/200,E=(a.bottom-r.bottom)/200,R=(c.bottom-r.bottom)/200,I=(r.bottom-i.top)/200,A=(r.bottom-r.top)/200,L=r.spaceWidth/200,F=(y-r.bottom)/200,_.isNumber(z.baselineOffsetRatio)){var f=200*z.baselineOffsetRatio,v=y-f;T=(v-o.top)/200,N=(v-u.top)/200,D=(v-p.top)/200,E=(a.bottom-v)/200,R=(c.bottom-v)/200,I=(v-i.top)/200,A=(v-r.top)/200}var w=_.isNumber(z.aboveDivider)?z.aboveDivider:C,P=_.isNumber(z.belowDivider)?z.belowDivider:M,U=_.isNumber(z.ascentDescentRatio)?z.ascentDescentRatio:x,O=_.isNumber(z.meanWidthRatio)?z.meanWidthRatio:L,B=_.isNumber(z.spaceWidthRatio)?z.spaceWidthRatio:k,G=_.isNumber(z.xWidthRatio)?z.xWidthRatio:S,H=_.isNumber(z.ascentRatio)?z.ascentRatio:T,K=_.isNumber(z.meanAccentRatio)?z.meanAccentRatio:N,Y=_.isNumber(z.capAccentRatio)?z.capAccentRatio:D,W=_.isNumber(z.descentRatio)?z.descentRatio:E,V=_.isNumber(z.tailRatio)?z.tailRatio:R,q=_.isNumber(z.capRatio)?z.capRatio:I,Q=_.isNumber(z.meanRatio)?z.meanRatio:A,X=_.isNumber(z.baselineOffsetRatio)?z.baselineOffsetRatio:F,J=y-200*X,$=J-200*H,Z=J-200*K,ee=J-200*Y,te=J+200*W,ne=J+200*V,ie=J-200*q,re=J-200*Q;for(h in m.aboveDivider=w,m.belowDivider=P,m.ascentDescentRatio=U,m.meanWidthRatio=O,m.spaceWidthRatio=B,m.xWidthRatio=G,m.ascentRatio=H,m.meanAccentRatio=K,m.capAccentRatio=Y,m.descentRatio=W,m.tailRatio=V,m.capRatio=q,m.capRatio=q,m.meanRatio=Q,m.baselineOffsetRatio=X,Math.abs(ne-J),g){var oe=g[h],ae=m.uppercaseChars.indexOf(oe)>=0,se=j(oe),le=Math.abs(se.top-ie),ce=Math.abs(se.top-ee),ue=Math.abs(se.top-Z),de=Math.abs(se.top-re),he=Math.abs(se.top-$),pe=Math.abs(Math.max(0,se.bottom-J)),fe=Math.abs(se.bottom-ne),ge=Math.abs(se.bottom-te),me=ae?"capChars":"meanChars",ve="baseChars";if(!(t.indexOf(oe)>=0)){var ye=de,be=pe;ue<1.2*ye&&(ye=ue,me="meanAccentChars"),le<1.2*ye&&(ye=le,me="capChars"),he<1.2*ye&&(ye=he,me="ascentChars"),ce<1.2*ye&&(ye=ce,me="capAccentChars"),fe<1.2*be&&(be=fe,ve="tailChars"),ge<1.2*be&&(be=ge,ve="descentChars"),z.meanChars&&z.meanChars.indexOf(oe)>=0&&(me="meanChars"),z.baseChars&&z.baseChars.indexOf(oe)>=0&&(ve="baseChars"),z.capChars&&z.capChars.indexOf(oe)>=0&&(me="capChars"),z.meanAccentChars&&z.meanAccentChars.indexOf(oe)>=0&&(me="meanAccentChars"),z.ascentChars&&z.ascentChars.indexOf(oe)>=0&&(me="ascentChars"),z.capAccentChars&&z.capAccentChars.indexOf(oe)>=0&&(me="capAccentChars"),z.tailChars&&z.tailChars.indexOf(oe)>=0&&(ve="tailChars"),z.descentChars&&z.descentChars.indexOf(oe)>=0&&(ve="descentChars")}m[me]+=oe,m[ve]+=oe}m.label=e,m.postScriptName=l.postScriptName||e,m.family=e,delete m.capTest,delete m.meanTest,delete m.ascentTest,delete m.descentTest,delete m.tailTest,delete m.meanAccentTest,delete m.capAccentTest,d.resolve(m)})).catch((function(e){console.warn("Metrics calc failed",e),d.reject(e)})).done()})).catch((function(e){console.warn("Metrics calc failed",e),d.reject(e)})).done(),d.promise)}}})?i.apply(t,r):i)||(e.exports=o)},915:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6)],void 0===(r=function(e,t,n,i){"use strict";var r;return r=i.Collection.extend({setAC:function(e){this._ac=e},initialize:function(e,t){var n=i.Collection.prototype.initialize.call(this,e,t);return t&&t.feel&&(this._feel=t.feel),n},getFeel:function(){return this._feel},add:function(e,n){var r=i.Collection.prototype.add.call(this,e,n);return t.isArray(e)||(e=[e]),n&&n.genericRoles&&t.each(e,function(e){e._genericRoles=n.genericRoles}.bind(this)),n&&n.uniqueRoles&&t.each(e,function(e){e._uniqueRoles=n.uniqueRoles}.bind(this)),r},getPropFromFirst:function(e){var t=this.at(0);if(t[e])return"function"==typeof t[e]?t[e]():t.getData().getValue(e)},getCSSFontFaceAsync:function(e){var t="",i=[];return this.each((function(n){i.push(n.getCSSFontFaceAsync(e).then((function(e){t+=e})))})),n.allSettled(i).then((function(){return t}))},loadFonts:function(){var e=new r,n=new r;if(this.each((function(t){t.isSparkFont()?e.add(t):n.add(t)})),e.length&&e.each((function(e){e.loadFont()})),n.length){var i=n.getPropFromFirst("cssName");n.getCSSFontFaceAsync().then((function(e){var n=document.createElement("style");n.type="text/css",n.innerHTML=e,n.className=i;var r=document.head.querySelectorAll("style."+i);r&&t.each(r,(function(e){e.parentNode.removeChild(e)})),document.getElementsByTagName("head")[0].appendChild(n)}))}},getFontWithRole:function(e){return this.find((function(n){return n.hasRole&&"function"==typeof n.hasRole?n.hasRole(e):n._uniqueRoles&&!!t.find(n._uniqueRoles,(function(t){return t==e}))||n._genericRoles&&!!t.find(n._genericRoles,(function(t){return t==e}))}))}})}.apply(t,i))||(e.exports=r)},962:function(e,t,n){var i,r;i=[n(7),n(2),n(1),n(6)],void 0===(r=function(e,t,n,i){"use strict";return i.Model.extend({valueProp:"ac#value",getRoles:function(){return this._data.getValue("ac#roles")||[]},setRoles:function(e){this._data.setValue("ac#roles",e)},hasRole:function(e){var n=this.getRoles();return t.includes(n,e)},hasAnyRole:function(e){var n=this.getRoles();return!!t.find(n,(function(n){return t.includes(e,n)}))},addRole:function(e){var n=this.getRoles();t.includes(n,e)||(n.push(e),this.setRoles(n))},removeRole:function(e){var n=this.getRoles();n=t.without(n,e),this.setRoles(n)},setAC:function(e){this._ac=e},getAC:function(){return this._ac},setData:function(e){this._data=e},getData:function(){return this._data},getId:function(){return this._data.id},setValue:function(e){this._data.setValue(this.valueProp,e)},_getValue:function(){return this._data.getValue(this.valueProp)},getValue:function(){return this._getValue()},getValueProp:function(e,t){var n=this.getValue();return n&&n[e]?n[e]:t||""},setName:function(e){this._data.setValue("name",e)},getName:function(){return this._data.getValue("name")}})}.apply(t,i))||(e.exports=r)}}]);
//# sourceMappingURL=brand-kit-controller-6bc18a1e.js.map